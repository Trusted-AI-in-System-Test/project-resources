{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14232","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14232/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14232/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14232/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14232","id":570631441,"node_id":"MDU6SXNzdWU1NzA2MzE0NDE=","number":14232,"title":"EKF2: GPS blending offset not decreased to zero if one module lose fix","user":{"login":"CarlOlsson","id":7795133,"node_id":"MDQ6VXNlcjc3OTUxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7795133?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlOlsson","html_url":"https://github.com/CarlOlsson","followers_url":"https://api.github.com/users/CarlOlsson/followers","following_url":"https://api.github.com/users/CarlOlsson/following{/other_user}","gists_url":"https://api.github.com/users/CarlOlsson/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlOlsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlOlsson/subscriptions","organizations_url":"https://api.github.com/users/CarlOlsson/orgs","repos_url":"https://api.github.com/users/CarlOlsson/repos","events_url":"https://api.github.com/users/CarlOlsson/events{/privacy}","received_events_url":"https://api.github.com/users/CarlOlsson/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-25T14:59:39Z","updated_at":"2020-03-10T14:47:25Z","closed_at":"2020-03-10T14:47:25Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen using GPS blending we calculate a position offset to apply to each measurement in order to smooth out the data we push into the EKF in case of fast varying GPS accuracy metrics. However, if one GPS module lose fix we don't decrease this value but keep applying the last calculated offset indefinetly.\r\n\r\n**To Reproduce**\r\nCollect a replay logfile with two GPS modules connected. During replay, force one GPS module to lose fix.\r\n\r\n**Expected behavior**\r\nThe GPS data we push into the EKF should converge to the GPS module still working if the other lose fix.\r\n\r\n**Log Files and Screenshots**\r\nA horizontal position offset is added to one GPS module to more easy illustrate the issue. At t=100s the main GPS lose fix.\r\n![image](https://user-images.githubusercontent.com/7795133/75258979-95c50380-57e7-11ea-85bf-093f65bbd32c.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14232/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14230","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14230/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14230/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14230/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14230","id":570550295,"node_id":"MDU6SXNzdWU1NzA1NTAyOTU=","number":14230,"title":"logger module generates incompatible timestamp for logger_status message","user":{"login":"priseborough","id":3596952,"node_id":"MDQ6VXNlcjM1OTY5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/3596952?v=4","gravatar_id":"","url":"https://api.github.com/users/priseborough","html_url":"https://github.com/priseborough","followers_url":"https://api.github.com/users/priseborough/followers","following_url":"https://api.github.com/users/priseborough/following{/other_user}","gists_url":"https://api.github.com/users/priseborough/gists{/gist_id}","starred_url":"https://api.github.com/users/priseborough/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priseborough/subscriptions","organizations_url":"https://api.github.com/users/priseborough/orgs","repos_url":"https://api.github.com/users/priseborough/repos","events_url":"https://api.github.com/users/priseborough/events{/privacy}","received_events_url":"https://api.github.com/users/priseborough/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1464915523,"node_id":"MDU6TGFiZWwxNDY0OTE1NTIz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Logger","name":"Logger","color":"12b76f","default":false,"description":"ULog Logger"}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-02-25T12:55:27Z","updated_at":"2020-02-26T07:44:22Z","closed_at":"2020-02-26T07:44:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This line\r\n\r\nhttps://github.com/PX4/Firmware/blame/master/src/modules/logger/logger.cpp#L817\r\n\r\ngenerates timestamps during ekf2 replay for the logger_status.timestamp that uses a different datum to the other log messages. The result is that when two commonly used plotting packages FlightPlot and Flight Review are used, the time axis displayed expands to a range that makes the plots unreadable.\r\n\r\nThis could be avoided if logger_status.timestamp was obtained from the time stamp of the last message processed when logging replay data.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14230/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14223","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14223/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14223/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14223/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14223","id":569987041,"node_id":"MDU6SXNzdWU1Njk5ODcwNDE=","number":14223,"title":"EKF does not switch to secondary GPS if main fails","user":{"login":"CarlOlsson","id":7795133,"node_id":"MDQ6VXNlcjc3OTUxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7795133?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlOlsson","html_url":"https://github.com/CarlOlsson","followers_url":"https://api.github.com/users/CarlOlsson/followers","following_url":"https://api.github.com/users/CarlOlsson/following{/other_user}","gists_url":"https://api.github.com/users/CarlOlsson/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlOlsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlOlsson/subscriptions","organizations_url":"https://api.github.com/users/CarlOlsson/orgs","repos_url":"https://api.github.com/users/CarlOlsson/repos","events_url":"https://api.github.com/users/CarlOlsson/events{/privacy}","received_events_url":"https://api.github.com/users/CarlOlsson/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-24T16:54:35Z","updated_at":"2020-03-10T14:47:32Z","closed_at":"2020-03-10T14:47:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nIf a vehicle has two GPS modules connected and the main one fails while it has a higher fix type than the secondary GPS the EKF will not switch to only use the secondary GPS but stop fusing GPS completely.\r\n\r\n**To Reproduce**\r\nCollect a replay logfile with a vehicle using two GPS modules. Stop publishing of the first GPS module when it has a higher fix than the secondary GPS\r\n\r\n![image](https://user-images.githubusercontent.com/7795133/75173236-dca2f280-572e-11ea-8a6d-73f9f5f60b78.png)\r\n\r\n**Expected behavior**\r\nThe EKF should switch to only use the secondary GPS\r\n\r\n**Additional context**\r\nhttps://github.com/PX4/Firmware/blob/f3fefd7d9372ec98d404e2e99da2e251114a2d7e/src/modules/ekf2/ekf2_main.cpp#L953-L988\r\n\r\nThe problem is that `_gps_state[0].fix_type` is never updated after the GPS failure so `_gps_select_index` will never be set to one\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14223/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14214","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14214/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14214/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14214/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14214","id":569424774,"node_id":"MDU6SXNzdWU1Njk0MjQ3NzQ=","number":14214,"title":"Preflight check fail Magnetometer compass reading inconsistent mRO Pixracer","user":{"login":"sritank","id":3964577,"node_id":"MDQ6VXNlcjM5NjQ1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/3964577?v=4","gravatar_id":"","url":"https://api.github.com/users/sritank","html_url":"https://github.com/sritank","followers_url":"https://api.github.com/users/sritank/followers","following_url":"https://api.github.com/users/sritank/following{/other_user}","gists_url":"https://api.github.com/users/sritank/gists{/gist_id}","starred_url":"https://api.github.com/users/sritank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sritank/subscriptions","organizations_url":"https://api.github.com/users/sritank/orgs","repos_url":"https://api.github.com/users/sritank/repos","events_url":"https://api.github.com/users/sritank/events{/privacy}","received_events_url":"https://api.github.com/users/sritank/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":416735878,"node_id":"MDU6TGFiZWw0MTY3MzU4Nzg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/board:%20pixracer","name":"board: pixracer","color":"5319e7","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-02-23T02:22:16Z","updated_at":"2020-09-20T04:52:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am using the mRO Pixracer board for my drone autopilot and the Taoglas sensor as my onboard GPS sensor. I calibrated my compasses based on the PX4 guide [here](https://docs.px4.io/v1.9.0/en/config/compass.html) . \r\n\r\nThe three onboard Magnetometers have parameter names: \r\nMAG0 - Taoglas compass 1 = External Compass Orientation\r\nMAG1 - Taoglas compass 2 = External Compass Orientation 1\r\nMAG2 - Pixracer's compass = Autopilot Compass orientation\r\n\r\nCurrently the \"heading\" arrows on both the boards (Pixracer and Taoglas GPS) point forward, i.e. direction of flight. Hence the sensor orientation for the autopilot was set to \"ROTATION_NONE\". Affer successfully calibrating, the orientation for the other two compasses were also set to \"ROTATION_NONE\". However when I try to arm them, QGroundControl (QGC) gives an error that the compasses are inconsistent. So based on this [post](https://discuss.px4.io/t/gps-orientation-pixracer-mag-sensors-inconsistent/6058) , I found that the Taoglas compasses are oriented 90 deg away from the heading arrow. Even after accounting for this and setting the calibration sensor orientation to YAW_90 and YAW_180, I still get the same error.\r\n\r\nI disabled MAG0 compass and was using only MAG1(Taoglas) and MAG2(Pixracer). Upon doing this I get a different preflight failure,i.e. \"Yaw estimate error\". \r\n\r\nUltimately I disabled MAG0 and MAG2 sensor and am able to arm the drone using only the MAG1 sensor enabled.\r\n\r\nQuestion: Must I account for something else while calibrating the sensors? And, how do I find out which sensor is the root cause of the above inconsistency? ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14214/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14206","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14206/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14206/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14206/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14206","id":569269557,"node_id":"MDU6SXNzdWU1NjkyNjk1NTc=","number":14206,"title":"UAVCAN Does Not Work on Pixhawk4 Mini","user":{"login":"AlexKlimaj","id":2019539,"node_id":"MDQ6VXNlcjIwMTk1Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/2019539?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexKlimaj","html_url":"https://github.com/AlexKlimaj","followers_url":"https://api.github.com/users/AlexKlimaj/followers","following_url":"https://api.github.com/users/AlexKlimaj/following{/other_user}","gists_url":"https://api.github.com/users/AlexKlimaj/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexKlimaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexKlimaj/subscriptions","organizations_url":"https://api.github.com/users/AlexKlimaj/orgs","repos_url":"https://api.github.com/users/AlexKlimaj/repos","events_url":"https://api.github.com/users/AlexKlimaj/events{/privacy}","received_events_url":"https://api.github.com/users/AlexKlimaj/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":33,"created_at":"2020-02-22T02:49:16Z","updated_at":"2020-08-08T00:35:29Z","closed_at":"2020-03-12T00:36:59Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nThe CAN port on the Pixhawk4 Mini is not working. \r\n\r\nWhen checking the CAN High and CAN Low signals, there is no data being transmitted. \r\n\r\nTested on v1.10.1 Stable and current master.\r\n\r\n**To Reproduce**\r\n1. Set UAVCAN_ENABLE to 1, 2 or 3.\r\n2. Reboot\r\n3. UAVCAN devices never get node ID.\r\n\r\n**Expected behavior**\r\nTurn on UAVCAN through UAVCAN_ENABLE, reboot, connect UAVCAN device, and it will get a node ID. If no device is connected and you scope CAN High and Low, you will see data being transmitted.\r\n\r\n**Log Files and Screenshots**\r\n\r\nPixhawk4 Mini with UAVCAN enabled. CAN High and CAN Low.\r\n\r\n![image](https://user-images.githubusercontent.com/2019539/75085051-6c079600-54e2-11ea-9621-d53045f8502b.png)\r\n\r\nExpected behavior: Pixhawk4 Standard with UAVCAN enabled. CAN High and CAN Low. \r\n\r\n![image](https://user-images.githubusercontent.com/2019539/75085096-fb14ae00-54e2-11ea-8070-5d2e606ef334.png)\r\n\r\nTXD - Transmit Data input it idling high. Doesn't look like STM32 is sending any data. \r\n\r\n![image](https://user-images.githubusercontent.com/2019539/75085633-6b71fe00-54e8-11ea-818a-1daac0a82b5c.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14206/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14204","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14204/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14204/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14204/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14204","id":569023303,"node_id":"MDU6SXNzdWU1NjkwMjMzMDM=","number":14204,"title":"EKF2 performance regression","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"jkflying","id":1746276,"node_id":"MDQ6VXNlcjE3NDYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1746276?v=4","gravatar_id":"","url":"https://api.github.com/users/jkflying","html_url":"https://github.com/jkflying","followers_url":"https://api.github.com/users/jkflying/followers","following_url":"https://api.github.com/users/jkflying/following{/other_user}","gists_url":"https://api.github.com/users/jkflying/gists{/gist_id}","starred_url":"https://api.github.com/users/jkflying/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkflying/subscriptions","organizations_url":"https://api.github.com/users/jkflying/orgs","repos_url":"https://api.github.com/users/jkflying/repos","events_url":"https://api.github.com/users/jkflying/events{/privacy}","received_events_url":"https://api.github.com/users/jkflying/received_events","type":"User","site_admin":false},{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":2,"created_at":"2020-02-21T15:29:47Z","updated_at":"2020-03-04T22:59:26Z","closed_at":"2020-03-04T22:59:26Z","author_association":"MEMBER","active_lock_reason":null,"body":"EKF2 cpu usage has increased considerably.\r\n\r\nPX4/Firmware ecl update timeline: https://github.com/PX4/Firmware/commits/master/src/lib/ecl\r\n\r\n### Timeline\r\n\r\n - 2019-09-26: `EKF2 update: 41151 events, 17355386us elapsed, 421.75us avg, min 19us max 2978us 708.544us rms` \r\n - ?? 2020-01-20: Jan 9 ecl update https://github.com/PX4/Firmware/commit/4e8665082ea785d5b2c7c485824658f694319150#diff-eab0fded47ba453da12bc405ab7b6d5f\r\n - \r\n - 2020-02-21: `ekf2: update: 11127 events, 7935146us elapsed, 713.14us avg, min 18us max 2033us 874.154us rms`\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14204/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14201","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14201/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14201/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14201/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14201","id":568894326,"node_id":"MDU6SXNzdWU1Njg4OTQzMjY=","number":14201,"title":"Beaglebone Blue MPU9250 Error","user":{"login":"Superbear88","id":59649489,"node_id":"MDQ6VXNlcjU5NjQ5NDg5","avatar_url":"https://avatars.githubusercontent.com/u/59649489?v=4","gravatar_id":"","url":"https://api.github.com/users/Superbear88","html_url":"https://github.com/Superbear88","followers_url":"https://api.github.com/users/Superbear88/followers","following_url":"https://api.github.com/users/Superbear88/following{/other_user}","gists_url":"https://api.github.com/users/Superbear88/gists{/gist_id}","starred_url":"https://api.github.com/users/Superbear88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superbear88/subscriptions","organizations_url":"https://api.github.com/users/Superbear88/orgs","repos_url":"https://api.github.com/users/Superbear88/repos","events_url":"https://api.github.com/users/Superbear88/events{/privacy}","received_events_url":"https://api.github.com/users/Superbear88/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":6,"created_at":"2020-02-21T11:17:14Z","updated_at":"2020-05-22T06:57:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The MPU9250 get initialiced and then, the mag not working\r\n\r\nERROR [mpu9250] I2C transfer to mag timed out\r\n\r\nSee Output\r\n\r\nINFO  [px4] assuming working directory is rootfs, no symlinks needed.\r\n\r\n______  __   __    ___ \r\n| ___ \\ \\ \\ / /   /   |\r\n| |_/ /  \\ V /   / /| |\r\n|  __/   /   \\  / /_| |\r\n| |     / /^\\ \\ \\___  |\r\n\\_|     \\/   \\/     |_/\r\n\r\npx4 starting.\r\n\r\nINFO  [px4] Calling startup script: /bin/sh /home/debian/px4/px4.config 0\r\nINFO  [dataman] Unknown restart, data manager file './dataman' size is 11798680 bytes\r\nBMP280_I2C on I2C bus 2 at 0x76\r\nMPU9250_I2C on I2C bus 2 at 0x68\r\nAK8963_I2C on I2C bus 2 at 0x0c\r\n\r\nPX4 Exiting...\r\nERROR [mpu9250] I2C transfer to mag timed out\r\nERROR [mpu9250] I2C transfer to mag timed out\r\nERROR [mpu9250] I2C transfer to mag timed out\r\nERROR [mpu9250] I2C transfer to mag timed out\r\nINFO  [commander] LED: open /dev/led0 failed (22)\r\nERROR [sensors] Accel #0 fail:  STALE!\r\nERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.\r\nWARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1\r\nERROR [sensors] Gyro #0 fail:  STALE!\r\nERROR [sensors] Sensor Gyro #0 failed. Reconfiguring sensor priorities.\r\nWARN  [sensors] Remaining sensors after failover event 0: Gyro #0 priority: 1\r\nINFO  [mavlink] mode: Normal, data rate: 1000000 B/s on udp port 14556 remote port 14550\r\nINFO  [linux_pwm_out] Loaded mixer from file ROMFS/px4fmu_common/mixers/quad_x.main.mix\r\nINFO  [linux_pwm_out] Starting PWM output in bbblue_rc mode\r\nINFO  [drivers_board] Initializing librobotcontrol ...\r\nINFO  [logger] logger started (mode=all)\r\nINFO  [mavlink] using network interface wlan0, IP: 192.168.1.131\r\nINFO  [mavlink] with netmask: 255.255.255.0\r\nINFO  [mavlink] and broadcast IP: 192.168.1.255\r\nINFO  [mavlink] partner IP: 192.168.1.195\r\nINFO  [px4] Startup script returned successfully\r\n\r\nGyro works in GC","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14201/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14200","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14200/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14200/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14200/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14200","id":568827701,"node_id":"MDU6SXNzdWU1Njg4Mjc3MDE=","number":14200,"title":"ROS test of tiltrotor fails","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"},{"id":1598294845,"node_id":"MDU6TGFiZWwxNTk4Mjk0ODQ1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/CI%20%F0%9F%A4%96","name":"CI 🤖","color":"3b0dc4","default":false,"description":"Continuous Integration"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-21T09:11:46Z","updated_at":"2020-02-21T14:58:22Z","closed_at":"2020-02-21T14:58:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The ROS test of tiltrotor started failing in CI and this can also be reproduced locally:\r\n\r\n```\r\nPX4_DOCKER_REPO=px4io/px4-dev-ros-melodic:2020-02-11 Tools/docker_run.sh bash\r\nDONT_RUN=1 make px4_sitl gazebo\r\ntest/rostest_px4_run.sh mavros_posix_test_mission.test mission:=VTOL_mission_1 vehicle:=tiltrotor\r\n```\r\n\r\nWhat happens is that the tiltrotor does not actually seem to take off but only switches to in-air for about 1 second and then auto-disarms again. I have seen this manually in testing as well, especially with tailsitter.\r\n\r\nTest output:\r\n```\r\nINFO  [ecl/EKF] 5188000: reset position to GPS\r\nINFO  [ecl/EKF] 5188000: reset velocity to GPS\r\nINFO  [ecl/EKF] 5188000: commencing GPS fusion\r\n[ INFO] [1582276040.013415824, 17.360000000]: WP: mission received\r\n[ INFO] [1582276040.660517600, 18.004000000]: WP: mission sended\r\n[ WARN] [1582276041.664164514, 19.012000000]: CMD: Unexpected command 176, result 0\r\n[ INFO] [1582276042.674148856, 20.020000000]: FCU: ARMED by Arm/Disarm component command\r\n[ INFO] [1582276042.726149218, 20.072000000]: FCU: Takeoff to 15.0 meters above home.\r\nINFO  [commander] Takeoff detected\r\n[ INFO] [1582276049.615119419, 26.948000000]: FCU: Takeoff detected\r\nINFO  [commander] Landing detected\r\n[ INFO] [1582276050.309446351, 27.640000000]: FCU: Landing detected\r\n[ INFO] [1582276050.421811711, 27.752000000]: FCU: DISARMED by Auto disarm initiated\r\nINFO  [logger] closed logfile, bytes written: 2344626\r\n\r\nPX4 Exiting...\r\nShutting down\r\n[Testcase: testVTOL_mission_1] ... ok\r\n\r\n[ROSTEST]-----------------------------------------------------------------------\r\n\r\n[px4.rosunit-VTOL_mission_1/test_mission][FAILURE]------------------------------\r\nposition not reached | lat: 47.397736151, lon: 8.547064163, alt: 503.05, current pos_xy_d: 110.65, current pos_z_d: 14.77, best pos_xy_d: 110.47, best pos_z_d: 14.24, index: 0 | timeout(seconds): 60\r\n  File \"/usr/lib/python2.7/unittest/case.py\", line 329, in run\r\n    testMethod()\r\n  File \"/home/julianoes/src/Firmware/integrationtests/python_src/px4_it/mavros/mission_test.py\", line 271, in test_mission\r\n    index)\r\n  File \"/home/julianoes/src/Firmware/integrationtests/python_src/px4_it/mavros/mission_test.py\", line 228, in reach_position\r\n    best_pos_z_d, index, timeout))\r\n  File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\r\n    raise self.failureException(msg)\r\n--------------------------------------------------------------------------------\r\n\r\n\r\nSUMMARY\r\n * RESULT: FAIL\r\n * TESTS: 1\r\n * ERRORS: 0\r\n * FAILURES: 1\r\n```\r\n\r\nhttps://logs.px4.io/plot_app?log=feba07e1-cd9d-4ee6-8f77-f570f2ebc8fb","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14200/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14199","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14199/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14199/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14199/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14199","id":568812471,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc4MTY3MDQ1","number":14199,"title":"Changed commander to check all instances of battery_status uORB topic","user":{"login":"AmeliaEScott","id":725892,"node_id":"MDQ6VXNlcjcyNTg5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/725892?v=4","gravatar_id":"","url":"https://api.github.com/users/AmeliaEScott","html_url":"https://github.com/AmeliaEScott","followers_url":"https://api.github.com/users/AmeliaEScott/followers","following_url":"https://api.github.com/users/AmeliaEScott/following{/other_user}","gists_url":"https://api.github.com/users/AmeliaEScott/gists{/gist_id}","starred_url":"https://api.github.com/users/AmeliaEScott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AmeliaEScott/subscriptions","organizations_url":"https://api.github.com/users/AmeliaEScott/orgs","repos_url":"https://api.github.com/users/AmeliaEScott/repos","events_url":"https://api.github.com/users/AmeliaEScott/events{/privacy}","received_events_url":"https://api.github.com/users/AmeliaEScott/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-02-21T08:36:32Z","updated_at":"2020-02-22T06:38:27Z","closed_at":"2020-02-22T06:38:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14199","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14199","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14199.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14199.patch","merged_at":"2020-02-22T06:38:27Z"},"body":"**Describe problem solved by this pull request**\r\nAs described in https://github.com/PX4/Firmware/pull/14021, the Commander only subscribes to Instance 0 of the `battery_status` uORB topic. Therefore, when supporting multiple batteries, drivers must swap uORB topics such that the currently-selected power source is on uORB instance 0.\r\n\r\n**Describe your solution**\r\nChange Commander to check all uORB instances. This also changes the following behavior:\r\n\r\n - Arming will now be denied if _any_ battery has a warning, rather than only if the currently-selected power source has a warning\r\n\r\n**Describe possible alternatives**\r\nThe alternative is the uORB topic switching discussed in https://github.com/PX4/Firmware/pull/14021, but the general consensus is that that is a bad way to do things.\r\n\r\n**Test data / coverage**\r\nOn a test bench, I tried every combination of 1 or 2 batteries on a Pixhawk 4. I changed the value of the `BAT_LOW_THR` parameter to test behavior with 1 or more low batteries.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14199/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14191","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14191/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14191/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14191/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14191","id":568174380,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc3NjUyMDY0","number":14191,"title":"commander: fix broken 'commander arm/disarm' CLI","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-20T09:46:46Z","updated_at":"2020-02-20T15:06:11Z","closed_at":"2020-02-20T15:06:09Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14191","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14191","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14191.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14191.patch","merged_at":"2020-02-20T15:06:08Z"},"body":"Regression from https://github.com/PX4/Firmware/pull/13613.\r\n\r\nVEHICLE_CMD_COMPONENT_ARM_DISARM from CLI would enter the\r\nARMING_STATE_IN_AIR_RESTORE logic. This was never intended for disarming\r\n(and leads to state machine transition failures), and IMO it is also not\r\nintended for commands from CLI.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14191/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14189","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14189/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14189/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14189/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14189","id":567874663,"node_id":"MDU6SXNzdWU1Njc4NzQ2NjM=","number":14189,"title":"SITL gazebo real time factor is slowing down for plane","user":{"login":"dzambrano","id":21339334,"node_id":"MDQ6VXNlcjIxMzM5MzM0","avatar_url":"https://avatars.githubusercontent.com/u/21339334?v=4","gravatar_id":"","url":"https://api.github.com/users/dzambrano","html_url":"https://github.com/dzambrano","followers_url":"https://api.github.com/users/dzambrano/followers","following_url":"https://api.github.com/users/dzambrano/following{/other_user}","gists_url":"https://api.github.com/users/dzambrano/gists{/gist_id}","starred_url":"https://api.github.com/users/dzambrano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dzambrano/subscriptions","organizations_url":"https://api.github.com/users/dzambrano/orgs","repos_url":"https://api.github.com/users/dzambrano/repos","events_url":"https://api.github.com/users/dzambrano/events{/privacy}","received_events_url":"https://api.github.com/users/dzambrano/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-02-19T22:00:39Z","updated_at":"2020-05-14T16:41:27Z","closed_at":"2020-05-14T16:41:27Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThe real time factor for a simple plane simulation progressively slows down. From about 16 to 5 in 10 minutes. Similar to [#12975](https://github.com/PX4/Firmware/issues/12975)\r\n\r\n**To Reproduce**\r\nFirmware version 10.0\r\nGazebo 9.0\r\n\r\n```\r\ngit checkout v1.10.0\r\ngit submodule update --init --recursive\r\npip install jinja2 empy catkin_pkg toml numpy\r\nexport PX4_SIM_SPEED_FACTOR=20\r\nmake px4_sitl gazebo_plane\r\n```\r\nThen in the px4 console:\r\n```\r\npxh> commander takeoff\r\n```\r\n\r\n**Expected behavior**\r\nThe real time factor goes down consistently. \r\n\r\n**Log Files and Screenshots**\r\n*Always* provide a link to the flight log file:\r\nLog files and gz stats are available to the following link:\r\n[Log files](https://drive.google.com/drive/folders/1aN8FYOeleXipdWKhOEPBMHR30sqFBS6t?usp=sharing)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14189/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14187","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14187/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14187/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14187/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14187","id":567755100,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc3MzIxMjMz","number":14187,"title":"Commander: fix preflight check condition to fail if not in HIL mode","user":{"login":"ndepal","id":8755300,"node_id":"MDQ6VXNlcjg3NTUzMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8755300?v=4","gravatar_id":"","url":"https://api.github.com/users/ndepal","html_url":"https://github.com/ndepal","followers_url":"https://api.github.com/users/ndepal/followers","following_url":"https://api.github.com/users/ndepal/following{/other_user}","gists_url":"https://api.github.com/users/ndepal/gists{/gist_id}","starred_url":"https://api.github.com/users/ndepal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ndepal/subscriptions","organizations_url":"https://api.github.com/users/ndepal/orgs","repos_url":"https://api.github.com/users/ndepal/repos","events_url":"https://api.github.com/users/ndepal/events{/privacy}","received_events_url":"https://api.github.com/users/ndepal/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-19T18:27:31Z","updated_at":"2020-02-20T09:06:24Z","closed_at":"2020-02-20T07:46:31Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14187","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14187","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14187.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14187.patch","merged_at":"2020-02-20T07:46:31Z"},"body":"As I understand the existing code, the `if` statement is only entered if `status_local->hil_state` is `vehicle_status_s::HIL_STATE_ON`. I.e. for all real vehicles, this check is skipped.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14187/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14187/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14172","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14172/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14172/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14172/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14172","id":566198714,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc2MDU1ODA2","number":14172,"title":"FlightTaskManualAltitude: Fix sign error in terrain hold setpoint reset","user":{"login":"mortenfyhn","id":6639836,"node_id":"MDQ6VXNlcjY2Mzk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/6639836?v=4","gravatar_id":"","url":"https://api.github.com/users/mortenfyhn","html_url":"https://github.com/mortenfyhn","followers_url":"https://api.github.com/users/mortenfyhn/followers","following_url":"https://api.github.com/users/mortenfyhn/following{/other_user}","gists_url":"https://api.github.com/users/mortenfyhn/gists{/gist_id}","starred_url":"https://api.github.com/users/mortenfyhn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mortenfyhn/subscriptions","organizations_url":"https://api.github.com/users/mortenfyhn/orgs","repos_url":"https://api.github.com/users/mortenfyhn/repos","events_url":"https://api.github.com/users/mortenfyhn/events{/privacy}","received_events_url":"https://api.github.com/users/mortenfyhn/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":1,"created_at":"2020-02-17T10:22:53Z","updated_at":"2020-02-17T15:05:07Z","closed_at":"2020-02-17T14:18:06Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14172","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14172","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14172.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14172.patch","merged_at":"2020-02-17T14:18:06Z"},"body":"**Describe problem solved by this pull request**\r\nIn terrain hold mode, the drone holds its height over the terrain when it's stopped, but follows sea level altitude when moving. Every time the drone stops, the height over terrain setpoint is computed to match the current altitude setpoint, given the current height over the terrain. The opposite is also done to give an altitude setpoint matching the current terrain setpoint when the drone starts moving. These setpoint calculations seem to have a sign error, which will give an error in the computed setpoints when the drone starts/stops terrain holding.\r\n\r\nExample illustrating the issue:\r\n* z position = - 10 m (this is in NED frame)\r\n* z position setpoint = - 10.5 m (also NED frame, so setpoint is 0.5 m above current z position)\r\n* height over terrain = 5 m\r\nthen we'd get\r\n* height over terrain setpoint = height over terrain + (z position setpoint - z position) = 5 + (-10.5 - (-10)) = 5 + (-0.5) = 5 - 0.5 = 4.5 m. This is below the current position, but it should be above (5.5 m), like the altitude setpoint was.\r\n\r\n**Describe your solution**\r\nFlip the signs.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14172/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14165","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14165/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14165/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14165/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14165","id":565784822,"node_id":"MDU6SXNzdWU1NjU3ODQ4MjI=","number":14165,"title":"EKF2 estimates for x and y unstable with constant optical flow innovation ","user":{"login":"dominiknatter","id":46818571,"node_id":"MDQ6VXNlcjQ2ODE4NTcx","avatar_url":"https://avatars.githubusercontent.com/u/46818571?v=4","gravatar_id":"","url":"https://api.github.com/users/dominiknatter","html_url":"https://github.com/dominiknatter","followers_url":"https://api.github.com/users/dominiknatter/followers","following_url":"https://api.github.com/users/dominiknatter/following{/other_user}","gists_url":"https://api.github.com/users/dominiknatter/gists{/gist_id}","starred_url":"https://api.github.com/users/dominiknatter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dominiknatter/subscriptions","organizations_url":"https://api.github.com/users/dominiknatter/orgs","repos_url":"https://api.github.com/users/dominiknatter/repos","events_url":"https://api.github.com/users/dominiknatter/events{/privacy}","received_events_url":"https://api.github.com/users/dominiknatter/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""},{"id":1714303614,"node_id":"MDU6TGFiZWwxNzE0MzAzNjE0","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Optical%20flow%20%F0%9F%91%81%EF%B8%8F%E2%80%8D%F0%9F%97%A8%EF%B8%8F","name":"Optical flow 👁️‍🗨️","color":"41d374","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2020-02-15T17:47:13Z","updated_at":"2020-06-29T16:00:30Z","closed_at":"2020-06-29T16:00:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hey everyone,\r\nfirst of all shoutout for your great work, it's really impressive.\r\n\r\nRemark: In hindsight I've written quite a long story here, but I hope providing what I figured out help digging into the problem faster.\r\n\r\nI'm currently working with the Intel Aero RTF drone with the PX4 v1.9.0 firmware. I'm trying to fly indoors (hence no GPS) with ORB-SLAM2. This basically works already, fusing the data to the EKF2 via /mavros/vision_pose/pose. However, I experienced undesired behavior if SLAM fails (e.g. when it looses track after fast motions). I thought it should be possible to still get decent state estimates using only internal sensors, PX4Flow, and the LeddarOne distance sensor (the sonar on the PX4Flow board is still active but not used. Also I'm sharing the Telemetry port for PX4flow and LeddarOne as suggested here https://github.com/intel-aero/meta-intel-aero/issues/315#issuecomment-391439235).\r\n\r\nSo I did some experiments without SLAM running, and dragging around the drone by hand only for safety. Indeed, the position and velocity estimates are quite ok for multiple minutes (note that I put down the drone from time to time to observe the integration drifts). But at some point x and y drift off devastatingly and need to be resetted by the EKF2 all the time. I'm not sure why this happens. All I found out (using fw_px4_plottools) is that the optical flow innovations just freeze at some point and that's exactly the timestamp when everything gets messy. I'm not sure whether that's the cause or just another effect though. Note that also lifting the drone to a height where optical flow values should be plausible didn't make it recover anymore.\r\n\r\nThe z position / velocity do not seem to be affected. However, I noticed an issue there as well, although I personally can't see any connection: there are non-zero z-velocities (up to 0.4m/s), even when the drone is standing still and the z position is constant. Thinking of their kinematic relationship, that doesn't really make sense. Looking at some plots one could think they behave the same way, i.e. z velocity is just a scaled version of z position (which would explain why it's static and then it'd only be a bug in the log). Also looking at different static phases, the z positions are not necessarily equal (although the floor is the same). I saw that the LeddarOne tends to output 0 when the drone is on the floor, so I tried to fix this by forcing EKF2_MIN_RNG to 0.0m, but it didn't do the trick.\r\n\r\nHere are two logs where the drone is dragged around and xy goes nuts after some minutes.\r\nhttps://logs.px4.io/plot_app?log=91bc8ed4-6044-45e8-bfcf-5416976ad011\r\nhttps://logs.px4.io/plot_app?log=907f8a65-388e-40ad-83d9-3bdee61bc29c\r\n\r\nHere's one log where I actually flew around with the RC using POSITION flight mode. Note how here first OF innovations go constant and simultaneoulsy xy drift off. But then when SLAM is fed xy recovers. However, apparently I lost SLAM at some point during flight and the drone skyrocketed to the left (as far as I can tell at a faster rate than I thought MPC_XY_VEL_MAX would allow).\r\nhttps://logs.px4.io/plot_app?log=af47b24a-1a44-4eee-898d-7f9a72c8412b\r\n\r\nHere are also 2 screenshots to show the main problem without the need of opening any logs, i.e. drifting xy position (and velocity) and constant optical flow innovations:\r\n![constant_flow_innovation_xy_drift](https://user-images.githubusercontent.com/46818571/74592643-77ab1680-5023-11ea-9731-9bb9127b42fa.png)\r\n\r\nThe third case makes clear why I want to make sure, a scenario without SLAM would lead to a safe landing at least. Hopefully some more experienced people can have a look at this and we find out whether it's my setup, some parameters, or the EKF2 (for the latter I assume @priseborough to be the ideal contact person). I'm of course happy to provide more info on my setup if needed.\r\n\r\nBest,\r\nDominik\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14165/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14161","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14161/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14161/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14161/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14161","id":565169838,"node_id":"MDU6SXNzdWU1NjUxNjk4Mzg=","number":14161,"title":"CI hardware check doesn't fail on hardfault","user":{"login":"BazookaJoe1900","id":29940676,"node_id":"MDQ6VXNlcjI5OTQwNjc2","avatar_url":"https://avatars.githubusercontent.com/u/29940676?v=4","gravatar_id":"","url":"https://api.github.com/users/BazookaJoe1900","html_url":"https://github.com/BazookaJoe1900","followers_url":"https://api.github.com/users/BazookaJoe1900/followers","following_url":"https://api.github.com/users/BazookaJoe1900/following{/other_user}","gists_url":"https://api.github.com/users/BazookaJoe1900/gists{/gist_id}","starred_url":"https://api.github.com/users/BazookaJoe1900/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BazookaJoe1900/subscriptions","organizations_url":"https://api.github.com/users/BazookaJoe1900/orgs","repos_url":"https://api.github.com/users/BazookaJoe1900/repos","events_url":"https://api.github.com/users/BazookaJoe1900/events{/privacy}","received_events_url":"https://api.github.com/users/BazookaJoe1900/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1385433135,"node_id":"MDU6TGFiZWwxMzg1NDMzMTM1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Tests%20(unit%20/%20functional)%20%F0%9F%A7%AA","name":"Tests (unit / functional) 🧪","color":"ededed","default":false,"description":"Testing framework"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-14T08:11:48Z","updated_at":"2020-02-27T17:00:49Z","closed_at":"2020-02-27T17:00:49Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nif during the Hardware tests there is a hardfault, the test pass and doesn't fail.\r\n\r\n**To Reproduce**\r\nfor example, [this ](http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-hardware/detail/pr-add-free-fall-detection-for-FW/2/pipeline/1062/#step-1063-log-630) and [this](http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-hardware/detail/pr-mavlink-mission-transfer-cancel/1/pipeline/653#step-668-log-629) tests has been failed but the test passed. \r\n\r\nfrom the tests done on https://github.com/PX4/Firmware/pull/14097, all the nxp tests fails since  commit 156cf16 there is hardfault.\r\n\r\n**Expected behavior**\r\nFail on hardware fault, for sure. \r\nthe hardware test is great tool, but if it really check the CPU load, driver proper initializations, RAM and of course hardfault.\r\nI think that in addition to the [tests](https://github.com/PX4/Firmware/tree/master/src/systemcmds/tests) there should be some addons such scrapping the shell output, looking for ERROR/FAIL from any module that might send such message. \r\nmaybe analyze the top, for any issue, and so on.\r\n\r\n**Ideas?**\r\nI opened this thread to enable sharing ideas, or maybe on-going-work that is already done on this issue\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14161/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14157","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14157/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14157/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14157/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14157","id":564839006,"node_id":"MDU6SXNzdWU1NjQ4MzkwMDY=","number":14157,"title":"PX4 reports no logs even though there are logs on the SD card","user":{"login":"ndepal","id":8755300,"node_id":"MDQ6VXNlcjg3NTUzMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8755300?v=4","gravatar_id":"","url":"https://api.github.com/users/ndepal","html_url":"https://github.com/ndepal","followers_url":"https://api.github.com/users/ndepal/followers","following_url":"https://api.github.com/users/ndepal/following{/other_user}","gists_url":"https://api.github.com/users/ndepal/gists{/gist_id}","starred_url":"https://api.github.com/users/ndepal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ndepal/subscriptions","organizations_url":"https://api.github.com/users/ndepal/orgs","repos_url":"https://api.github.com/users/ndepal/repos","events_url":"https://api.github.com/users/ndepal/events{/privacy}","received_events_url":"https://api.github.com/users/ndepal/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1450324872,"node_id":"MDU6TGFiZWwxNDUwMzI0ODcy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Communication%20(MAVLink)%20%F0%9F%93%A1","name":"Communication (MAVLink) 📡","color":"f66608","default":false,"description":""},{"id":1464915523,"node_id":"MDU6TGFiZWwxNDY0OTE1NTIz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Logger","name":"Logger","color":"12b76f","default":false,"description":"ULog Logger"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-02-13T17:27:32Z","updated_at":"2020-02-20T15:37:46Z","closed_at":"2020-02-20T09:31:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nWe are seeing the issue that PX4 lists no logs when using QGC to request a log list or using some other mavlink application to send `LOG_REQUEST_LIST` (the response has `num_logs = 0`). This happens in situations where we are certain that there is at least one log file on the SD card. Soft-rebooting the flight controller fixes the issue.\r\n\r\nThe issue does not occur all the time and usually only after the vehicle has been on for an extended period of time (several hours). Potentially the issue also only occurs after having listed the logs repeatedly.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Drone switched on\r\n2. Create at least one log file on the sd card\r\n3. List the logs in QGC repeatedly\r\n4. Eventually, the list will be empty\r\n5. Reboot via QGC\r\n6. Log listing will be successful again\r\n\r\n**Additional context**\r\nThis is happening on 1.10 but we also saw this in 1.7.4, so it's not a recent regression.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14157/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14151","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14151/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14151/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14151/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14151","id":564585151,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc0Nzg3NzA5","number":14151,"title":"Fixed reporting of battery voltages in uORB","user":{"login":"AmeliaEScott","id":725892,"node_id":"MDQ6VXNlcjcyNTg5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/725892?v=4","gravatar_id":"","url":"https://api.github.com/users/AmeliaEScott","html_url":"https://github.com/AmeliaEScott","followers_url":"https://api.github.com/users/AmeliaEScott/followers","following_url":"https://api.github.com/users/AmeliaEScott/following{/other_user}","gists_url":"https://api.github.com/users/AmeliaEScott/gists{/gist_id}","starred_url":"https://api.github.com/users/AmeliaEScott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AmeliaEScott/subscriptions","organizations_url":"https://api.github.com/users/AmeliaEScott/orgs","repos_url":"https://api.github.com/users/AmeliaEScott/repos","events_url":"https://api.github.com/users/AmeliaEScott/events{/privacy}","received_events_url":"https://api.github.com/users/AmeliaEScott/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-02-13T10:29:29Z","updated_at":"2020-03-31T07:14:51Z","closed_at":"2020-03-31T07:14:51Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14151","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14151","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14151.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14151.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nThe `Battery` library does not populate the field `voltage_cell_v` of `battery_status` uORB message, because the analog power monitor and INA226 power monitor cannot measure individual cells. To get around this, the `mavlink` module populated the `BATTERY_STATUS` MAVLink message by dividing the total voltage by the number of cells. This was fixed in https://github.com/PX4/Firmware/pull/13936, so the `mavlink` module now uses the `voltage_cell_v` field of the `battery_status` uORB message.\r\n\r\nThe issue now is that the MAVLink `BATTERY_STATUS` message does not have a field for total voltage, only for individual cell voltages. However, `SYS_STATUS` only has one field for battery voltage. So, to report the voltage of multiple batteries to the ground station, multiple instances of `BATTERY_STATUS` are sent. Therefore, to properly report the status of multiple batteries, one of two things must happen:\r\n\r\n - The cell voltages in the `BATTERY_STATUS` message must be populated\r\n - A MAVLink message must be changed: Possibly adding a `total_voltage` field to `BATTERY_STATUS`\r\n\r\n**Describe your solution**\r\nThis PR replicates the old behavior, of dividing the total voltage by the number of cells. However, this is now done in the `Battery` library rather than in the `mavlink` module, so it only affects power monitors that were not measuring individual cell voltage anyway.\r\n\r\nAs discussed in https://github.com/PX4/Firmware/pull/13936, this is not ideal, because it can give the impression that every cell is fine, even if one is dying. There should be a discussion about the best way to solve this issue. This PR just gives one possible solution.\r\n\r\n**Describe possible alternatives**\r\nThe `BATTERY_STATUS` MAVLink message could be changed to add a `total_voltage` field, so that any power monitor can reliably report only the information that it actually measures.\r\n\r\n**Test data / coverage**\r\nThis was tested on both a v5x with INA226 power monitors and a Pixhawk 4 with analog power monitors. In both cases, two different batteries with 2 different cell counts were used. The uORB `battery_status` message, and MAVLink `BATTERY_STATUS` message, and the voltage reported in the AGS UI were all verified.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14151/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14150","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14150/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14150/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14150/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14150","id":564582804,"node_id":"MDU6SXNzdWU1NjQ1ODI4MDQ=","number":14150,"title":"Airframe comments parsing corner case","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1443107293,"node_id":"MDU6TGFiZWwxNDQzMTA3Mjkz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Tools","name":"Tools","color":"27f7ae","default":false,"description":"Sub-tools used within PX4 ecosystem (scripts, etc)"}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-02-13T10:25:33Z","updated_at":"2020-03-08T11:38:42Z","closed_at":"2020-03-08T11:38:42Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nIf you do not specify an `@maintainer` tag in your airframe configuration but put a comment afterwards then the parsing fails with an unexpected error.\r\n\r\n@cmic0 found the bug originally.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Replace the maintainer line of an airframe configuration e.g. https://github.com/PX4/Firmware/blob/master/ROMFS/px4fmu_common/init.d/airframes/4001_quad_x#L20 with `# Some comment`\r\n2. Do `make clean`\r\n3. Build e.g. `make px4_fmu-v5`\r\n4. See error\r\n\r\n**Expected behavior**\r\nThe parser should either still work without maintainer tag or ask for a maintainer but not fail unexpectedly in the parsing state machine.\r\n\r\n**Log Files and Screenshots**\r\n```\r\n[0/1294] git submodule platforms/nuttx/NuttX/nuttx\r\n[1/1294] Creating airframes.xml\r\nFAILED: airframes.xml \r\ncd /home/maetugr/Firmware/build/px4_fmu-v5_default && /usr/bin/python3 /home/maetugr/Firmware/Tools/px_process_airframes.py --airframes-path /home/maetugr/Firmware/ROMFS/px4fmu_common/init.d --board CONFIG_ARCH_BOARD_px4_fmu-v5 --xml /home/maetugr/Firmware/build/px4_fmu-v5_default/airframes.xml\r\nTraceback (most recent call last):\r\n  File \"/home/maetugr/Firmware/Tools/px_process_airframes.py\", line 138, in <module>\r\n    main()\r\n  File \"/home/maetugr/Firmware/Tools/px_process_airframes.py\", line 102, in main\r\n    if not scanner.ScanDir(args.airframes_path, parser):\r\n  File \"/home/maetugr/Firmware/Tools/px4airframes/srcscanner.py\", line 22, in ScanDir\r\n    if not self.ScanFile(path, parser):\r\n  File \"/home/maetugr/Firmware/Tools/px4airframes/srcscanner.py\", line 38, in ScanFile\r\n    return parser.Parse(path, contents)\r\n  File \"/home/maetugr/Firmware/Tools/px4airframes/srcparser.py\", line 366, in Parse\r\n    tags[current_tag] += \"\\n\" + comment_content\r\nKeyError: 'output'\r\n[7/1294] ROMFS: copying, generating airframes\r\nFAILED: genromfs/init.d/rcS genromfs/init.d/rc.serial genromfs/init.d/rc.autostart genromfs/init.d/rc.autostart.post ROMFS/romfs_copy.stamp \r\ncd /home/maetugr/Firmware/build/px4_fmu-v5_default/ROMFS && /usr/bin/cmake -E remove_directory /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs && /usr/bin/cmake -E copy_directory /home/maetugr/Firmware/ROMFS/px4fmu_common /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs && /usr/bin/cmake -E remove_directory /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/init.d-posix && /usr/bin/cmake -E remove_directory /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/mixers-sitl && /usr/bin/cmake -E remove /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/mixers/CMakeLists.txt && /usr/bin/cmake -E remove /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/init.d/CMakeLists.txt && /usr/bin/cmake -E remove /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/init.d/airframes/CMakeLists.txt && /usr/bin/python3 /home/maetugr/Firmware/Tools/px_process_airframes.py --airframes-path /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/init.d --start-script /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/init.d/rc.autostart --board px4_fmu-v5 && /usr/bin/python3 /home/maetugr/Firmware/Tools/serial/generate_config.py --rc-dir /home/maetugr/Firmware/build/px4_fmu-v5_default/genromfs/init.d --serial-ports GPS1:/dev/ttyS0 TEL1:/dev/ttyS1 TEL2:/dev/ttyS2 TEL4:/dev/ttyS3 --config-files /home/maetugr/Firmware/src/lib/battery/module.yaml /home/maetugr/Firmware/src/drivers/distance_sensor/cm8jl65/module.yaml /home/maetugr/Firmware/src/drivers/distance_sensor/leddar_one/module.yaml /home/maetugr/Firmware/src/drivers/distance_sensor/sf0x/module.yaml /home/maetugr/Firmware/src/drivers/distance_sensor/tfmini/module.yaml /home/maetugr/Firmware/src/drivers/distance_sensor/ulanding_radar/module.yaml /home/maetugr/Firmware/src/drivers/dshot/module.yaml /home/maetugr/Firmware/src/drivers/gps/module.yaml /home/maetugr/Firmware/src/drivers/rc_input/module.yaml /home/maetugr/Firmware/src/drivers/roboclaw/module.yaml /home/maetugr/Firmware/src/drivers/telemetry/frsky_telemetry/module.yaml /home/maetugr/Firmware/src/drivers/telemetry/hott/hott_telemetry/module.yaml /home/maetugr/Firmware/src/drivers/telemetry/iridiumsbd/module.yaml /home/maetugr/Firmware/src/modules/battery_status/module.yaml /home/maetugr/Firmware/src/modules/mavlink/module.yaml && /usr/bin/cmake -E touch romfs_copy.stamp\r\nTraceback (most recent call last):\r\n  File \"/home/maetugr/Firmware/Tools/px_process_airframes.py\", line 138, in <module>\r\n    main()\r\n  File \"/home/maetugr/Firmware/Tools/px_process_airframes.py\", line 102, in main\r\n    if not scanner.ScanDir(args.airframes_path, parser):\r\n  File \"/home/maetugr/Firmware/Tools/px4airframes/srcscanner.py\", line 22, in ScanDir\r\n    if not self.ScanFile(path, parser):\r\n  File \"/home/maetugr/Firmware/Tools/px4airframes/srcscanner.py\", line 38, in ScanFile\r\n    return parser.Parse(path, contents)\r\n  File \"/home/maetugr/Firmware/Tools/px4airframes/srcparser.py\", line 366, in Parse\r\n    tags[current_tag] += \"\\n\" + comment_content\r\nKeyError: 'output'\r\n[11/1294] Generating uORB topic headers\r\nninja: build stopped: subcommand failed.\r\nmake: *** [Makefile:202: px4_fmu-v5] Error 1\r\n```\r\n\r\nI had a quick look but didn't see the problem immediately... probably needs debugging if important enough.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14150/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14147","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14147/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14147/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14147/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14147","id":564275753,"node_id":"MDExOlB1bGxSZXF1ZXN0Mzc0NTM2Njg2","number":14147,"title":"[ECL] Accel bias stability fixes","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":0,"created_at":"2020-02-12T21:13:55Z","updated_at":"2020-02-12T21:48:09Z","closed_at":"2020-02-12T21:34:18Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14147","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14147","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14147.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14147.patch","merged_at":"2020-02-12T21:34:18Z"},"body":"Contains important fixes for accel bias instabilities:\r\n- https://github.com/PX4/ecl/pull/739\r\n- https://github.com/PX4/ecl/pull/749\r\n\r\nBefore this PR:\r\n![2020-02-12_22-46-38_01_plot](https://user-images.githubusercontent.com/14822839/74380284-92924680-4de9-11ea-95bd-fec20709544b.png)\r\n\r\nWith this PR:\r\n![2020-02-12_22-43-59_01_plot](https://user-images.githubusercontent.com/14822839/74380304-9c1bae80-4de9-11ea-87ed-c4b7483f4c38.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14147/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14146","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14146/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14146/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14146/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14146","id":564274156,"node_id":"MDU6SXNzdWU1NjQyNzQxNTY=","number":14146,"title":"Failure building ros2 workspace ","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1443195042,"node_id":"MDU6TGFiZWwxNDQzMTk1MDQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/%F0%9F%A4%96%20ROS","name":"🤖 ROS","color":"202E4A","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-12T21:11:00Z","updated_at":"2020-02-14T15:48:39Z","closed_at":"2020-02-14T15:48:39Z","author_association":"NONE","active_lock_reason":null,"body":"![px4_ros_com](https://user-images.githubusercontent.com/22284591/74377474-f4cf5500-4db1-11ea-8b3a-0c1d68a6dac9.PNG)\r\n\r\nWhenever I try to build the ros1 and ros2 workspaces. The ros1 workspace succeeds, but the ros2 workspace fails. \r\n\r\nAt first I tried \r\n\r\nsource build_all.bash --ros1_ws_dir\r\nThe ros1 workspace would complete, but the ros2 build terminal would crash with no output, so I opted to try and build them manually. \r\n\r\nIn calling this command \r\ncolcon build --symlink-install --packages-skip ros1_bridge --event-handlers console_direct+\r\nI get the above error. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14146/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14135","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14135/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14135/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14135/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14135","id":562615171,"node_id":"MDExOlB1bGxSZXF1ZXN0MzczMTc5MjYw","number":14135,"title":"px4io - Fix array regs[] size","user":{"login":"BazookaJoe1900","id":29940676,"node_id":"MDQ6VXNlcjI5OTQwNjc2","avatar_url":"https://avatars.githubusercontent.com/u/29940676?v=4","gravatar_id":"","url":"https://api.github.com/users/BazookaJoe1900","html_url":"https://github.com/BazookaJoe1900","followers_url":"https://api.github.com/users/BazookaJoe1900/followers","following_url":"https://api.github.com/users/BazookaJoe1900/following{/other_user}","gists_url":"https://api.github.com/users/BazookaJoe1900/gists{/gist_id}","starred_url":"https://api.github.com/users/BazookaJoe1900/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BazookaJoe1900/subscriptions","organizations_url":"https://api.github.com/users/BazookaJoe1900/orgs","repos_url":"https://api.github.com/users/BazookaJoe1900/repos","events_url":"https://api.github.com/users/BazookaJoe1900/events{/privacy}","received_events_url":"https://api.github.com/users/BazookaJoe1900/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-02-10T14:54:48Z","updated_at":"2020-02-13T14:27:35Z","closed_at":"2020-02-13T12:01:12Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14135","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14135","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14135.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14135.patch","merged_at":"2020-02-13T12:01:12Z"},"body":"may cause memory override if _max_controls larger then _max_actuators\r\n\r\n**Describe problem solved by this pull request**\r\nprobably _max_controls is not larger then _max_actuators. or there is no use of the memory after, in the code scenario. so we never seen an issue\r\n\r\n**Describe your solution**\r\nfix array size\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14135/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14134","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14134/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14134/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14134/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14134","id":562583516,"node_id":"MDExOlB1bGxSZXF1ZXN0MzczMTUzMzk2","number":14134,"title":"navigator: fix edge case with valid idle setpoint","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"assignees":[{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":22,"created_at":"2020-02-10T14:06:48Z","updated_at":"2020-03-21T15:19:30Z","closed_at":"2020-03-18T14:50:05Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14134","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14134","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14134.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14134.patch","merged_at":"2020-03-18T14:50:05Z"},"body":"This is an attempt to fix an edge case in the triplet publication which can lead to crashes on autopilots with slow SD cards.\r\n\r\nThe sequence of events before this patch is:\r\n1. Switch to POSCTL when disarmed. At this point current valid with setpoint idle is published.\r\n2. Arm, takeoff, and fly using joystick/RC.\r\n3. Switch to RTL (or trigger RTL using RC loss). At this point the setpoint is valid but still idle and the motors will shut off.\r\n4. Once navigator has published the new setpoint (which can take up to 1.5 seconds on slow SD cards) we will hopefully recover.\r\n\r\nWith this patch we omit this edge case, so we never publish this idle setpoint when landed. The assumption is that this idle setpoint is no longer required with the current flight task code, however, that needs to be further verified.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14134/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14133","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14133/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14133/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14133/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14133","id":562508082,"node_id":"MDU6SXNzdWU1NjI1MDgwODI=","number":14133,"title":"EKF2 stops, causing a flight termination","user":{"login":"Thijs----","id":6920950,"node_id":"MDQ6VXNlcjY5MjA5NTA=","avatar_url":"https://avatars.githubusercontent.com/u/6920950?v=4","gravatar_id":"","url":"https://api.github.com/users/Thijs----","html_url":"https://github.com/Thijs----","followers_url":"https://api.github.com/users/Thijs----/followers","following_url":"https://api.github.com/users/Thijs----/following{/other_user}","gists_url":"https://api.github.com/users/Thijs----/gists{/gist_id}","starred_url":"https://api.github.com/users/Thijs----/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Thijs----/subscriptions","organizations_url":"https://api.github.com/users/Thijs----/orgs","repos_url":"https://api.github.com/users/Thijs----/repos","events_url":"https://api.github.com/users/Thijs----/events{/privacy}","received_events_url":"https://api.github.com/users/Thijs----/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-02-10T11:46:48Z","updated_at":"2020-04-14T15:39:04Z","closed_at":"2020-04-14T15:39:04Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nDuring flight, the ekf2 module stops publishing all messages, causing a flight termination.  \r\nIt is remarkable that before it's stops publishing, it publishes one more time all messages at the exact same moment and with exact same timestamp.  \r\nSensor data (sensor_combined, vehicle_magnetometer, etc) keeps publishing as expected.  \r\n\r\n**To Reproduce**\r\nThis occurred twice, no idea if it's possible to trigger it.  \r\n\r\n**Expected behavior**\r\nekf2 should keep working en publishing it's messages.  \r\n\r\n**Log Files and Screenshots**\r\n- [first log](https://logs.px4.io/plot_app?log=b40595e7-efe5-43dd-8594-7fa282d267ca) (17:28)\r\n- [second log](https://logs.px4.io/plot_app?log=61ed5269-868b-4e7c-bc16-e0ff5420335f) (8:12)\r\n_How can I delete location (gps) information before uploading the Ulogs?_\r\n\r\nScreenshot from plotted timestamps (sensors + ekf2), __added delay__ to view them separately.\r\n![Screenshot from 2020-02-06 18-03-56-2](https://user-images.githubusercontent.com/6920950/74146602-b72bca00-4c01-11ea-9ea6-c2d510b5f154.png)\r\n\r\n**Drone:**\r\n- generic quad-copter, with onboard companion computer\r\n- Pixhawk 1\r\n- Firmware PX4 v10.0.0 with small modifications\r\n\r\n**Additional context**\r\nFlight is mostly done in auto modes (takeoff, loiter, mission)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14133/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14128","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14128/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14128/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14128/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14128","id":562228221,"node_id":"MDExOlB1bGxSZXF1ZXN0MzcyODY1NjAx","number":14128,"title":"px4iofirmware: add PX4IO_PERF define to completely disable perf counters","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-09T19:44:52Z","updated_at":"2020-02-10T08:40:54Z","closed_at":"2020-02-10T08:40:40Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14128","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14128","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14128.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14128.patch","merged_at":"2020-02-10T08:40:40Z"},"body":"This saves a paltry 64 bytes of ram, but it seems to be enough to get us out of the immediate bind (https://github.com/PX4/Firmware/issues/14116). \r\n\r\nOn the upside it does save a good chunk of flash (nearly 1 kB).\r\n\r\n``` Console\r\n$ make px4_io-v2_default bloaty_compare_master\r\n\r\n     VM SIZE    \r\n -------------- \r\n  [NEW]     +12    channels_cache.7449\r\n  [NEW]      +8    base_time.7109\r\n  [NEW]      +8    last_mem_time.7465\r\n  [NEW]      +4    brightness.7477\r\n  [NEW]      +4    brightness_counter.7478\r\n  [NEW]      +4    counter.7476\r\n  [NEW]      +4    last_count.7110\r\n  [NEW]      +4    new_channel_count.7087\r\n  [NEW]      +4    new_channel_holdoff.7088\r\n  [NEW]      +4    on_counter.7479\r\n  [NEW]      +1    abort_on_idle.7147\r\n  [NEW]      +1    failsafe.7178\r\n  [NEW]      +1    heartbeat.7471\r\n  [ = ]       0    [Unmapped]\r\n  [ = ]       0    [section .debug_abbrev]\r\n  [ = ]       0    [section .debug_aranges]\r\n  [ = ]       0    [section .debug_frame]\r\n  [ = ]       0    [section .debug_info]\r\n  [ = ]       0    [section .debug_line]\r\n  [ = ]       0    [section .debug_loc]\r\n  [ = ]       0    [section .debug_ranges]\r\n  [ = ]       0    [section .debug_str]\r\n  [ = ]       0    [section .strtab]\r\n  [ = ]       0    [section .symtab]\r\n  [ = ]       0    output_limit_init\r\n  [ = ]       0    ppm\r\n  [DEL]      -1    abort_on_idle.7391\r\n  [DEL]      -1    failsafe.7175\r\n  [DEL]      -1    heartbeat.7529\r\n  -5.7%      -4    [section .bss]\r\n  [DEL]      -4    adc_perf\r\n  [DEL]      -4    brightness.7535\r\n  [DEL]      -4    brightness_counter.7536\r\n  [DEL]      -4    c_gather_dsm\r\n  [DEL]      -4    c_gather_ppm\r\n  [DEL]      -4    c_gather_sbus\r\n  [DEL]      -4    counter.7534\r\n  [DEL]      -4    last_count.7339\r\n  [DEL]      -4    new_channel_count.7316\r\n  [DEL]      -4    new_channel_holdoff.7317\r\n  [DEL]      -4    on_counter.7537\r\n  [DEL]      -4    pc_badidle\r\n  [DEL]      -4    pc_crcerr\r\n  [DEL]      -4    pc_errors\r\n  [DEL]      -4    pc_fe\r\n  [DEL]      -4    pc_idle\r\n  [DEL]      -4    pc_ne\r\n  [DEL]      -4    pc_ore\r\n  [DEL]      -4    pc_regerr\r\n  [DEL]      -4    pc_txns\r\n  -5.9%      -8    adc_init\r\n  [DEL]      -8    base_time.7338\r\n  [DEL]      -8    last_mem_time.7523\r\n  [DEL]     -12    channels_cache.7446\r\n  [DEL]     -22    perf_begin\r\n -19.4%     -28    controls_init\r\n -25.8%     -32    adc_measure\r\n -14.8%     -48    rx_dma_callback\r\n  [DEL]     -50    perf_count\r\n  -5.8%     -60    user_start\r\n -35.3%     -72    interface_init\r\n  -5.0%     -80    controls_tick\r\n -40.4%     -84    serial_interrupt\r\n  [DEL]    -196    perf_end\r\n  [DEL]    -216    perf_count_interval\r\n  -1.4%    -952    TOTAL\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14128/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14127","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14127/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14127/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14127/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14127","id":562221895,"node_id":"MDU6SXNzdWU1NjIyMjE4OTU=","number":14127,"title":"attitude estimator not running - check system boo and Pref-fight checks failed Baro Sensors 0 Missing","user":{"login":"majid55-pixmini","id":60235850,"node_id":"MDQ6VXNlcjYwMjM1ODUw","avatar_url":"https://avatars.githubusercontent.com/u/60235850?v=4","gravatar_id":"","url":"https://api.github.com/users/majid55-pixmini","html_url":"https://github.com/majid55-pixmini","followers_url":"https://api.github.com/users/majid55-pixmini/followers","following_url":"https://api.github.com/users/majid55-pixmini/following{/other_user}","gists_url":"https://api.github.com/users/majid55-pixmini/gists{/gist_id}","starred_url":"https://api.github.com/users/majid55-pixmini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/majid55-pixmini/subscriptions","organizations_url":"https://api.github.com/users/majid55-pixmini/orgs","repos_url":"https://api.github.com/users/majid55-pixmini/repos","events_url":"https://api.github.com/users/majid55-pixmini/events{/privacy}","received_events_url":"https://api.github.com/users/majid55-pixmini/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":23,"created_at":"2020-02-09T18:55:55Z","updated_at":"2023-03-11T18:04:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"i have pixhwak 4 mini fc and recently it is giving me these errors.\r\n1-attitude estimator not running - check system boo\r\n2-Pref-fight checks failed Baro Sensors 0 Missing\r\nboard have latest px4_fmu-v5 V1.10.1 stable version. updated through QGC\r\nand then i tried to reinstall previous versions too but error doesn't go away.\r\ni did not crash my drone and it was working good before installing latest version.\r\nif i disable ekf2 in perimeters.\r\nand press the safty switch on GPS i am able to arm and fly the drone but it is not holding altitude anymore and if i flip the switch for alt hold or GPS hold it say \"Reject altitude Hold \" Reject GPS hold \"\r\nAlt hold and GPS lock was working before only new hardware i added is telemetry device and updated to latest V1.10.1.\r\nso what could be the reason i am sure it is software reason because when i google this error lot's of people have this issue after updating the software so is there any fix for this issue.\r\nThanks i advance","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14127/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14116","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14116/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14116/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14116/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14116","id":561134786,"node_id":"MDU6SXNzdWU1NjExMzQ3ODY=","number":14116,"title":"PX4IO not enough RAM left for VTOL models like convergence","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null},{"id":945658723,"node_id":"MDU6TGFiZWw5NDU2NTg3MjM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk:%20fmu-v5","name":"pixhawk: fmu-v5","color":"a67bce","default":false,"description":"FMU-v5 including pixhawk 4, pixhack v5, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":8,"created_at":"2020-02-06T16:42:57Z","updated_at":"2020-05-06T18:00:43Z","closed_at":"2020-05-06T18:00:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"@sfuhrer found that sometimes RC did not work on the convergence and that the ACT LED on the Pixhawk 4 IO side would be always on instead of blinking.\r\n\r\nWe could also see a segfault using GDB via Dronecode Probe:\r\n```\r\nProgram received signal SIGSEGV, Segmentation fault.\r\nmm_free (heap=0x20000438 <g_mmheap>, mem=0x20001e38) at mm_heap/mm_free.c:130\r\n130\t  if ((prev->preceding & MM_ALLOC_BIT) == 0)\r\n(gdb) bt\r\n#0  mm_free (heap=0x20000438 <g_mmheap>, mem=0x20001e38)\r\n    at mm_heap/mm_free.c:130\r\n#1  0x08009132 in NullMixer::~NullMixer (this=0x20001e38, \r\n    __in_chrg=<optimized out>)\r\n    at ../../../../../src/lib/mixer/NullMixer/NullMixer.hpp:47\r\n#2  0x080077d4 in List<Mixer*>::clear (\r\n    this=this@entry=0x20000e3c <mixer_group>)\r\n    at ../../../../../src/include/containers/List.hpp:168\r\n#3  0x08007872 in MixerGroup::reset (this=0x20000e3c <mixer_group>)\r\n    at ../../../../../src/lib/mixer/MixerGroup.hpp:74\r\n#4  mixer_handle_text (buffer=buffer@entry=0x20000c65 <dma_packet+4>, \r\n    length=62) at ../../../../../src/modules/px4iofirmware/mixer.cpp:601\r\n#5  0x08005d0c in registers_set (page=<optimized out>, \r\n    offset=<optimized out>, values=values@entry=0x20000c65 <dma_packet+4>, \r\n    num_values=<optimized out>)\r\n    at ../../../../../src/modules/px4iofirmware/registers.c:464\r\n#6  0x08006446 in rx_handle_packet ()\r\n    at ../../../../../src/modules/px4iofirmware/serial.c:176\r\n#7  rx_dma_callback (handle=<optimized out>, status=status@entry=2 '\\002', \r\n    arg=arg@entry=0x0)\r\n    at ../../../../../src/modules/px4iofirmware/serial.c:234\r\n#8  0x080065be in serial_interrupt (irq=<optimized out>, \r\n    context=<optimized out>, arg=<optimized out>)\r\n    at ../../../../../src/modules/px4iofirmware/serial.c:325\r\n#9  0x08002fe2 in irq_dispatch (irq=irq@entry=54, \r\n    context=context@entry=0x20001c5c) at irq/irq_dispatch.c:176\r\n#10 0x08001d88 in up_doirq (irq=54, regs=0x20001c5c) at armv7-m/up_doirq.c:86\r\n#11 0x08001a7a in exception_common () at armv7-m/gnu/up_exception.S:213\r\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\r\n(gdb) \r\n```\r\n\r\nAccording to `git bisect` the bytes free go from 568 to 88 (sometimes 24) anywhere here, presumably due to the NuttX upgrade:\r\n\r\nThe first bad commit could be any of:\r\n58799dc7d17b01e4e586463b23cb83692b678b77\r\n694ae56afea4fdcd7d8ef665ab7a516e758dd7df\r\ne847698c9f0ec950310eea30313340bf98b37df0\r\n36a75b79a418129913936bd987717afa8914a911\r\n645b6c3fbcdeb2b5f9d3e56807fbaa1fa74811ec\r\n0f2a7ad2b7d2acea354f1b91771512f2a1f76eee\r\n522ed2d99ba4b0ed6f749a6c2218a6d4ec0c9bef\r\n78944a70c345d1da51e906e6225352607675ac21\r\nd965b928f8ef4985c0799e8ce64df4d9c4912a2b\r\n69694ab000f923106931612fa34f8d689b1732fc\r\n\r\n*Steps to reproduce:*\r\n\r\nSet `SYS_AUTOSTART` to 13012 for convergence airframe.\r\nBoot and do `px4io status`.\r\nYou should see:\r\n```\r\n88 bytes free\r\n```\r\nOr sometimes garbage values when it crashed.\r\n\r\nFYI @bkueng @davids5.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14116/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14107","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14107/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14107/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14107/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14107","id":560713920,"node_id":"MDExOlB1bGxSZXF1ZXN0MzcxNjU2MTg4","number":14107,"title":"Update submodule ecl to latest Thu Feb  6 00:39:33 UTC 2020","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-02-06T00:48:21Z","updated_at":"2020-02-12T21:15:06Z","closed_at":"2020-02-12T21:15:05Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14107","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14107","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14107.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14107.patch","merged_at":null},"body":"    - ecl in PX4/Firmware (a95f1c88fc011a46e8c7c130f8304ea17399103e): https://github.com/PX4/ecl/commit/ed260c4f1db8545d8ad3aa7f05d951857436ef87\r\n    - ecl current upstream: https://github.com/PX4/ecl/commit/89bcebd631024a1a91babb7b68f197dc3b6e5ca8\r\n    - Changes: https://github.com/PX4/ecl/compare/ed260c4f1db8545d8ad3aa7f05d951857436ef87...89bcebd631024a1a91babb7b68f197dc3b6e5ca8\r\n\r\n    89bcebd 2020-01-30 Paul Riseborough - EKF: Prevent covariance initialisation overwriting yaw variance\r\n    a3347b7 2020-01-30 Paul Riseborough - EKF: Use more conservative value for delta velocity bias process noise\r\n    21054a4 2020-01-30 Paul Riseborough - EKF: Fix bug causing incorrect covariance initialisation\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14107/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14101","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14101/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14101/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14101/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14101","id":559910757,"node_id":"MDU6SXNzdWU1NTk5MTA3NTc=","number":14101,"title":"Cannot start EKF2 on External Vision without a Barometer","user":{"login":"marcelino-pensa","id":51488981,"node_id":"MDQ6VXNlcjUxNDg4OTgx","avatar_url":"https://avatars.githubusercontent.com/u/51488981?v=4","gravatar_id":"","url":"https://api.github.com/users/marcelino-pensa","html_url":"https://github.com/marcelino-pensa","followers_url":"https://api.github.com/users/marcelino-pensa/followers","following_url":"https://api.github.com/users/marcelino-pensa/following{/other_user}","gists_url":"https://api.github.com/users/marcelino-pensa/gists{/gist_id}","starred_url":"https://api.github.com/users/marcelino-pensa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcelino-pensa/subscriptions","organizations_url":"https://api.github.com/users/marcelino-pensa/orgs","repos_url":"https://api.github.com/users/marcelino-pensa/repos","events_url":"https://api.github.com/users/marcelino-pensa/events{/privacy}","received_events_url":"https://api.github.com/users/marcelino-pensa/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-02-04T18:50:23Z","updated_at":"2020-05-13T06:17:22Z","closed_at":"2020-05-13T06:17:22Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nEKF2 does not start if there is no incoming barometer data, even with `SYS_HAS_BARO = 0`. This seems like a bug to me unless this is expected behavior for some reason.\r\n\r\n**To Reproduce**\r\nI am running on a snapdragon flight using Px4 1.8, but it seems like this is a bug on master too (at least it seems so by looking at the code).\r\n- Do not start the barometer when starting px4\r\n- Use EKF2 enabling External Vision and disabling the barometer:\r\n```\r\nparam set EKF2_AID_MASK 24\r\nparam set EKF2_HGT_MODE 3\r\nparam set SYS_MC_EST_GROUP 2\r\nparam set SYS_HAS_BARO 0\r\n```\r\n- Launch px4, EKF2 does not start\r\n\r\n**Expected behavior**\r\nI would expect EKF2 to start if SYS_HAS_BARO is set to 0. I know that EKF2 does not start because when I enable the barometer back again, the following log shows up:\r\n```\r\npxh> INFO  [ecl/EKF] EKF aligned, (EV height, IMU buf: 26, OBS buf: 16)\r\nINFO  [ecl/EKF] EKF commencing external vision position fusion\r\nINFO  [ecl/EKF] EKF commencing external vision yaw fusion\r\n```\r\n\r\n**Drone (please complete the following information):**\r\n- Snapdragon flight\r\n\r\n**Additional context**\r\nIt seems like the problem is in line 177 of [ecl/ekf.cpp](https://github.com/PX4/ecl/blob/a3e1eb9d509d55c2c476ec093cf24d84da9798e5/EKF/ekf.cpp). If there are not enough initial barometer measurements, the function `initialiseFilter()` returns false, which in turn does not allow EKF2 to execute.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14101/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14098","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14098/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14098/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14098/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14098","id":559305735,"node_id":"MDExOlB1bGxSZXF1ZXN0MzcwNDk5NjY4","number":14098,"title":"sensors: filter sample rate calculate with simple interval average instead of perf count","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-02-03T20:09:20Z","updated_at":"2020-02-07T18:04:04Z","closed_at":"2020-02-07T18:04:03Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14098","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14098","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14098.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14098.patch","merged_at":"2020-02-07T18:04:03Z"},"body":"The perf counter intervals aren't numerically stable over extended periods (https://github.com/PX4/Firmware/pull/14046), so are obviously not ideal for automatically setting filter sample rates. Here's a simpler solution.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14098/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14076","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14076/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14076/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14076/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14076","id":558109823,"node_id":"MDU6SXNzdWU1NTgxMDk4MjM=","number":14076,"title":"Failsafe for position loss in Offboard mode","user":{"login":"michael-p","id":531872,"node_id":"MDQ6VXNlcjUzMTg3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/531872?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-p","html_url":"https://github.com/michael-p","followers_url":"https://api.github.com/users/michael-p/followers","following_url":"https://api.github.com/users/michael-p/following{/other_user}","gists_url":"https://api.github.com/users/michael-p/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-p/subscriptions","organizations_url":"https://api.github.com/users/michael-p/orgs","repos_url":"https://api.github.com/users/michael-p/repos","events_url":"https://api.github.com/users/michael-p/events{/privacy}","received_events_url":"https://api.github.com/users/michael-p/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1443093719,"node_id":"MDU6TGFiZWwxNDQzMDkzNzE5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Failsafe","name":"Failsafe","color":"1f7c00","default":false,"description":""},{"id":1502478333,"node_id":"MDU6TGFiZWwxNTAyNDc4MzMz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/safety","name":"safety","color":"d93f0b","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-31T12:42:28Z","updated_at":"2020-05-13T04:19:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen a position loss event occurs while in Offboard mode (which requires a valid position estimate), the vehicle performs a blind land failsafe, despite the fact that COM_POSCTL_NAVL is configured to \"Assume R/C, switch to altitude mode...\" and there is a remote control.\r\n\r\n**To Reproduce**\r\nStream VISION_POSITION_ESTIMATE mavlink messages to simulated Iris copter (in Gazebo), switch to offboard and fly to a waypoint (via SET_POSITION_TARGET_LOCAL_NED message). While the drone is flying to the waypoint, stop sending VISION_POSITION_ESTIMATE messages.\r\n\r\n**Expected behavior**\r\nI would have expected that the failsafe obeys the COM_POSCTL_NAVL parameter and switches to Altitude mode (hight estimation was valid due to barometer). I also tried the same thing in Position mode and there it actually does switch to Altitude mode as expected.\r\n\r\n**Log Files and Screenshots**\r\nhttps://review.px4.io/plot_app?log=62c8308a-bd4d-4185-8db9-1e45d6e9efa0\r\nINFO  [ecl/EKF] 36996000: EKF commencing external vision position fusion\r\nINFO  [ecl/EKF] 36996000: EKF commencing external vision yaw fusion\r\nWARN  [ecl/EKF] 75820000: EKF ev hgt timeout - reset to baro\r\nWARN  [mc_pos_control] Position-Control Setpoint-Update failed\r\nWARN  [mc_pos_control] Failsafe: blind land\r\nINFO  [ecl/EKF] 77532000: EKF External Vision Data Stopped\r\nWARN  [ecl/EKF] 77540000: EKF stopping navigation\r\n\r\nFor comparison, this is the output when flying in Position-mode:\r\nINFO  [ecl/EKF] 533328000: EKF commencing external vision position fusion\r\nINFO  [ecl/EKF] 533328000: EKF commencing external vision yaw fusion\r\nWARN  [commander] Failsafe enabled: no local position\r\nWARN  [ecl/EKF] 560472000: EKF ev hgt timeout - reset to baro\r\nINFO  [ecl/EKF] 562184000: EKF External Vision Data Stopped\r\nWARN  [ecl/EKF] 562192000: EKF stopping navigation\r\n\r\n**Drone (please complete the following information):**\r\nIris in Sitl Gazebo, with PX4 1.10.0\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14076/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14075","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14075/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14075/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14075/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14075","id":558017876,"node_id":"MDU6SXNzdWU1NTgwMTc4NzY=","number":14075,"title":"PX4 10.0.1 Stable, Hard Fault in file:armv7-m/up_hardfault.c","user":{"login":"Chris-Bee","id":12284463,"node_id":"MDQ6VXNlcjEyMjg0NDYz","avatar_url":"https://avatars.githubusercontent.com/u/12284463?v=4","gravatar_id":"","url":"https://api.github.com/users/Chris-Bee","html_url":"https://github.com/Chris-Bee","followers_url":"https://api.github.com/users/Chris-Bee/followers","following_url":"https://api.github.com/users/Chris-Bee/following{/other_user}","gists_url":"https://api.github.com/users/Chris-Bee/gists{/gist_id}","starred_url":"https://api.github.com/users/Chris-Bee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Chris-Bee/subscriptions","organizations_url":"https://api.github.com/users/Chris-Bee/orgs","repos_url":"https://api.github.com/users/Chris-Bee/repos","events_url":"https://api.github.com/users/Chris-Bee/events{/privacy}","received_events_url":"https://api.github.com/users/Chris-Bee/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null},{"id":945658723,"node_id":"MDU6TGFiZWw5NDU2NTg3MjM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk:%20fmu-v5","name":"pixhawk: fmu-v5","color":"a67bce","default":false,"description":"FMU-v5 including pixhawk 4, pixhack v5, etc"},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2020-01-31T09:37:15Z","updated_at":"2020-12-29T07:36:39Z","closed_at":"2020-12-29T07:36:39Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nI encountered an issue with PX4 1.10.1 Stable where the copter seems to make a 180° flip upside down. I am using a MoCap pose input over MavRos, mapped to the vision pose topic as described in the [tutorial](https://dev.px4.io/v1.10/en/ros/external_position_estimation.html ). The logs indicate that this seems to be a software crash, thus the movement might be a random result due to the underlying error. The Pixhawk 4 gives multiple beeper signals after engaging the killswitch.\r\nBoth logfiles below show 'Type:Hard Fault in file:armv7-m/up_hardfault.c at line: 148 running task: init'\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Map the MoCap pose to the vision pose topic\r\n2. Enable the vision pose estimate\r\n3. Start the copter in altitude mode and take off\r\n4. Switch to position mode\r\n5. The copter holds its position stable for ~5 seconds until the described issue occurs \r\n\r\n**Expected behavior**\r\nThe copter should hold its position.\r\n\r\n**Log Files**\r\nMoCap at 120Hz, the log indicates I2C3 low on the stack:\r\nhttps://logs.px4.io/plot_app?log=92b60ea2-4b1e-4fac-9402-e1c797494866\r\nMoCap at 30Hz, the log does not point out a clear error but the same issue occurred:\r\nhttps://logs.px4.io/plot_app?log=afa24f21-0f51-42a4-bd2e-9b90ef29b14c\r\n\r\n**Hardware**\r\nPixhawk 4 Holybro","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14075/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14072","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14072/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14072/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14072/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14072","id":557744548,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY5MjgwMTUy","number":14072,"title":"px4_fmu-v4pro Fix PX4IO firmware upgrade","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-01-30T20:48:45Z","updated_at":"2020-01-31T13:33:42Z","closed_at":"2020-01-30T21:20:51Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14072","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14072","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14072.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14072.patch","merged_at":"2020-01-30T21:20:51Z"},"body":"The PX4IO was responding but the RX DMA stay borke\r\n\r\nThis fixes USART6 RX DMA Assignment\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14072/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14069","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14069/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14069/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14069/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14069","id":557605388,"node_id":"MDU6SXNzdWU1NTc2MDUzODg=","number":14069,"title":"HITL/HIL: disable lockdown not working","user":{"login":"gian1312","id":36838300,"node_id":"MDQ6VXNlcjM2ODM4MzAw","avatar_url":"https://avatars.githubusercontent.com/u/36838300?v=4","gravatar_id":"","url":"https://api.github.com/users/gian1312","html_url":"https://github.com/gian1312","followers_url":"https://api.github.com/users/gian1312/followers","following_url":"https://api.github.com/users/gian1312/following{/other_user}","gists_url":"https://api.github.com/users/gian1312/gists{/gist_id}","starred_url":"https://api.github.com/users/gian1312/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gian1312/subscriptions","organizations_url":"https://api.github.com/users/gian1312/orgs","repos_url":"https://api.github.com/users/gian1312/repos","events_url":"https://api.github.com/users/gian1312/events{/privacy}","received_events_url":"https://api.github.com/users/gian1312/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-01-30T16:23:41Z","updated_at":"2020-11-05T09:01:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nSame behavior as in [#5680](https://github.com/PX4/Firmware/issues/5680).\r\nWhen disabling the lockdown with the `px4io lockdown disable` command, there is no output to the real actuators in HIL-mode.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Power Servo Rail and make sure that all CS and props can move freely (and the plane is secured) \r\n2. Start in HIL-Mode\r\n3. Arm Plane\r\n4. Enter said command\r\n5. Move your TX (Ideally something would happen)\r\n\r\n**Expected behavior**\r\nI want the actuators to move in Gazebo and on the real plane simultaneously.\r\nAt the moment, they work either in HIL in Gazebo or in reality with HIL disabled.\r\n\r\n**Log Files and Screenshots**\r\nThere are no log files. If there is anything, I could provide, please let me know.\r\n\r\n\r\n**Drone:**\r\nFixed Wing (MPX Easy Glider)\r\n \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14069/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14068","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14068/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14068/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14068/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14068","id":557586870,"node_id":"MDU6SXNzdWU1NTc1ODY4NzA=","number":14068,"title":"Huge amount of drifting on IRIS in SITL simulation","user":{"login":"shrit","id":15039782,"node_id":"MDQ6VXNlcjE1MDM5Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/15039782?v=4","gravatar_id":"","url":"https://api.github.com/users/shrit","html_url":"https://github.com/shrit","followers_url":"https://api.github.com/users/shrit/followers","following_url":"https://api.github.com/users/shrit/following{/other_user}","gists_url":"https://api.github.com/users/shrit/gists{/gist_id}","starred_url":"https://api.github.com/users/shrit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrit/subscriptions","organizations_url":"https://api.github.com/users/shrit/orgs","repos_url":"https://api.github.com/users/shrit/repos","events_url":"https://api.github.com/users/shrit/events{/privacy}","received_events_url":"https://api.github.com/users/shrit/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-01-30T15:55:46Z","updated_at":"2020-05-15T13:30:29Z","closed_at":"2020-05-15T13:30:29Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI am using IRIS for SITL simulation, I am using 4 quadrotors at the same time, all of them use the same PX4 version. Only one of them is facing a huge amount of drifting during the flight. \r\nHere is the last flight with this quadrotor\r\nhttps://logs.px4.io/plot_app?log=460f767c-25fe-4702-b910-66f3645203af\r\nYou can notice a spiral landing which I have been observing only with this one. \r\n\r\nAny thought?\r\nBest regards,\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14068/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14062","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14062/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14062/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14062/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14062","id":557254967,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY4ODc3NzMy","number":14062,"title":"Update submodule ecl to latest Thu Jan 30 00:38:08 UTC 2020","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-01-30T04:11:34Z","updated_at":"2020-02-05T19:41:44Z","closed_at":"2020-02-05T19:24:39Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14062","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14062","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14062.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14062.patch","merged_at":"2020-02-05T19:24:39Z"},"body":"    - ecl in PX4/Firmware (049799f9951349c6edb764bb9e8d9a4333f02676): https://github.com/PX4/ecl/commit/a3e1eb9d509d55c2c476ec093cf24d84da9798e5\r\n    - ecl current upstream: https://github.com/PX4/ecl/commit/da752c9e304ab0847b43beb61a8b508c3cabc1a9\r\n    - Changes: https://github.com/PX4/ecl/compare/a3e1eb9d509d55c2c476ec093cf24d84da9798e5...da752c9e304ab0847b43beb61a8b508c3cabc1a9\r\n\r\nda752c9 2020-01-28 kamilritz - Hot flow fusion fix\r\nee859e0 2020-01-28 kritz - Robustify timestamp checks (#729)\r\nf20726d 2020-01-23 kamilritz - Expand auto-format coverage and tiny style changes\r\nfbdd75d 2020-01-27 kritz - Update CONTRIBUTING.md\r\n5d38b73 2020-01-24 kamilritz - Update description of Firmware build tests\r\ne3af91c 2020-01-24 bresch - Ekf: use helper functions to centralize the checks of horizontal aiding (gps, flow, ev_pos, ev_vel)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14062/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14046","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14046/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14046/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14046/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14046","id":556338023,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY4MTIwOTA2","number":14046,"title":"perf: keep dt in microseconds to avoid numerical problems","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-01-28T16:50:57Z","updated_at":"2020-02-27T20:23:41Z","closed_at":"2020-02-07T18:04:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14046","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14046","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14046.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14046.patch","merged_at":null},"body":"Over long periods (eg overnight) I was seeing some weird perf counter drift that became apparent after we started using the perf counter value to update filters with actual measured sample rates.\r\n\r\nThis is from a pixracer running overnight.\r\n\r\n![Screenshot from 2020-01-28 10-02-24](https://user-images.githubusercontent.com/84712/73293437-e68a1200-41d1-11ea-9a34-87b9a2428866.png)\r\n\r\nIt's obvious this was wrong when the next morning I reset perf and the value immediately corrected.\r\n\r\n![Screenshot from 2020-01-28 10-04-05](https://user-images.githubusercontent.com/84712/73293494-fc97d280-41d1-11ea-9a91-6818ef0bcaa1.png)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14046/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14032","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14032/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14032/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14032/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14032","id":555631723,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY3NTM4NDE0","number":14032,"title":"Only do SW flow control for 3DR radio","user":{"login":"nicovanduijn","id":14265408,"node_id":"MDQ6VXNlcjE0MjY1NDA4","avatar_url":"https://avatars.githubusercontent.com/u/14265408?v=4","gravatar_id":"","url":"https://api.github.com/users/nicovanduijn","html_url":"https://github.com/nicovanduijn","followers_url":"https://api.github.com/users/nicovanduijn/followers","following_url":"https://api.github.com/users/nicovanduijn/following{/other_user}","gists_url":"https://api.github.com/users/nicovanduijn/gists{/gist_id}","starred_url":"https://api.github.com/users/nicovanduijn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicovanduijn/subscriptions","organizations_url":"https://api.github.com/users/nicovanduijn/orgs","repos_url":"https://api.github.com/users/nicovanduijn/repos","events_url":"https://api.github.com/users/nicovanduijn/events{/privacy}","received_events_url":"https://api.github.com/users/nicovanduijn/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":1450324872,"node_id":"MDU6TGFiZWwxNDUwMzI0ODcy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Communication%20(MAVLink)%20%F0%9F%93%A1","name":"Communication (MAVLink) 📡","color":"f66608","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-01-27T14:59:42Z","updated_at":"2020-02-03T14:49:49Z","closed_at":"2020-02-03T14:49:48Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14032","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14032","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14032.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14032.patch","merged_at":"2020-02-03T14:49:48Z"},"body":"Since the removal of the `type` field in  https://github.com/PX4/Firmware/pull/10395, the type of a radio was always assumed to be 3DR. Removal made sense, because the corresponding mavlink message does not contain a type field.\r\n\r\nConsequently, when other components report a `radio_status`, the mavlink instance would be automatically using software flow control. This isn't always desired.\r\n\r\nThis fixes #14027","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14032/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14022","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14022/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14022/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14022/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14022","id":554786710,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY2ODc4Mzky","number":14022,"title":"Commander: preflight check fixes","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-01-24T15:03:37Z","updated_at":"2020-01-25T16:18:12Z","closed_at":"2020-01-25T10:17:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14022","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14022","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14022.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14022.patch","merged_at":"2020-01-25T10:17:34Z"},"body":"Fixes some serious bugs around preflight checks:\r\n- fix `prearm` flag to preflightCheck\r\n  This was inverted, i.e. set to false in most cases, whereas it should be true.\r\n  As a consequence, both powerCheck and airspeed.confidence checks were not executed.\r\n- fix commander: run preflight checks on GCS connection\r\n  Regression from 6dec451, leading to preflight failures not being reported at all. Only after a failed arming attempt the messages would be sent. And for GPS check failures, in case they are set to optional (default), arming would be possible, but switching to position would be rejected w/o error.\r\n  We need to run the preflight checks periodically, but this at least restores the previous behavior.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14022/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14021","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14021/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14021/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14021/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14021","id":554662797,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY2Nzc2MDkx","number":14021,"title":"Fixed prearm check for INA226 power monitor","user":{"login":"AmeliaEScott","id":725892,"node_id":"MDQ6VXNlcjcyNTg5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/725892?v=4","gravatar_id":"","url":"https://api.github.com/users/AmeliaEScott","html_url":"https://github.com/AmeliaEScott","followers_url":"https://api.github.com/users/AmeliaEScott/followers","following_url":"https://api.github.com/users/AmeliaEScott/following{/other_user}","gists_url":"https://api.github.com/users/AmeliaEScott/gists{/gist_id}","starred_url":"https://api.github.com/users/AmeliaEScott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AmeliaEScott/subscriptions","organizations_url":"https://api.github.com/users/AmeliaEScott/orgs","repos_url":"https://api.github.com/users/AmeliaEScott/repos","events_url":"https://api.github.com/users/AmeliaEScott/events{/privacy}","received_events_url":"https://api.github.com/users/AmeliaEScott/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-01-24T10:42:34Z","updated_at":"2020-02-21T08:36:47Z","closed_at":"2020-02-21T08:36:46Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14021","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14021","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14021.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14021.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nDuring the prearm check, the commander only checks instance 0 of the `battery_status` uORB topic. This is why, in the analog `battery_status` module, the two different batteries switch uORB advertisements as needed, to ensure that the currently-selected battery is publishing to instance 0. This PR adds that same functionality to the INA226 power monitor driver.\r\n\r\n**Describe your solution**\r\nJust like with the analog power monitor, each INA226 driver determines whether it is the selected source by checking if it is the lowest-index battery connected. If it is, it swaps uORB advertisements with the other, so that it can be instance 0.\r\n\r\n**Describe possible alternatives**\r\n`Commander::battery_status_check()` should be changed to properly account for multiple batteries. However, this is a big change with safety implications, and unanswered questions about failsafes, etc. As a quick fix, I am making the INA226 driver mimic the behavior of the analog power monitor module.\r\n\r\n**Test data / coverage**\r\nI connected the following combinations of batteries to an FMU v5x board:\r\n\r\n - 0 batteries\r\n - 1 battery in port 1\r\n - 1 battery in port 2\r\n - 2 batteries\r\n\r\nand ensured that the correct battery data is being published to instance 0 of `battery_status`. I also checked `vehicle_status_flags.condition_battery_healthy` to ensure that the prearm check is passing.\r\n\r\n**Additional context**\r\nThe INA226 power module is used by FMU v5x. This change is necessary to bring v5x up to the same level of functionality as v5.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14021/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14012","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14012/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14012/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14012/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14012","id":553669765,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY1OTYxMDI3","number":14012,"title":"BMM150: Fix priority assignment","user":{"login":"cmic0","id":7490213,"node_id":"MDQ6VXNlcjc0OTAyMTM=","avatar_url":"https://avatars.githubusercontent.com/u/7490213?v=4","gravatar_id":"","url":"https://api.github.com/users/cmic0","html_url":"https://github.com/cmic0","followers_url":"https://api.github.com/users/cmic0/followers","following_url":"https://api.github.com/users/cmic0/following{/other_user}","gists_url":"https://api.github.com/users/cmic0/gists{/gist_id}","starred_url":"https://api.github.com/users/cmic0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmic0/subscriptions","organizations_url":"https://api.github.com/users/cmic0/orgs","repos_url":"https://api.github.com/users/cmic0/repos","events_url":"https://api.github.com/users/cmic0/events{/privacy}","received_events_url":"https://api.github.com/users/cmic0/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1424478923,"node_id":"MDU6TGFiZWwxNDI0NDc4OTIz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk:%20fmu-v5x","name":"pixhawk: fmu-v5x","color":"b60205","default":false,"description":""},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-22T16:56:04Z","updated_at":"2020-01-23T09:02:56Z","closed_at":"2020-01-22T17:26:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14012","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14012","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14012.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14012.patch","merged_at":"2020-01-22T17:26:50Z"},"body":"This PR fixes the priority assignment for the bmm150 magnetometer.\r\n\r\nIn previous implementation the bmm150 was assigned a priority of 255 even tough was internal.\r\n\r\nThis could have lead to conflicts if an external mag is actually present.\r\nIndeed, depending on the sequence on which sensors are started, the internal mag could have been used as primary one instead of the external one.\r\n\r\n**Test data / coverage**\r\nBefore this PR:\r\n\r\n```\r\nINFO  [sensors] mag status:\r\nINFO  [ecl/validation] validator: best: 0, prev best: 0, failsafe: NO (0 events)\r\nINFO  [ecl/validation] sensor #0, prio: 255, state: OK \r\nINFO  [ecl/validation] \tval:  -0.1671, lp:  -0.1661 mean dev:   0.0000 RMS:   0.0021 conf:   1.0000\r\nINFO  [ecl/validation] \tval:  -0.2658, lp:  -0.2717 mean dev:   0.0000 RMS:   0.0043 conf:   1.0000\r\nINFO  [ecl/validation] \tval:   0.5187, lp:   0.5155 mean dev:   0.0001 RMS:   0.0028 conf:   1.0000\r\nINFO  [ecl/validation] sensor #1, prio: 255, state: OK\r\nINFO  [ecl/validation] \tval:  -0.2244, lp:  -0.2256 mean dev:   0.0000 RMS:   0.0060 conf:   1.0000\r\nINFO  [ecl/validation] \tval:  -0.1465, lp:  -0.1467 mean dev:   0.0000 RMS:   0.0059 conf:   1.0000\r\nINFO  [ecl/validation] \tval:   0.5555, lp:   0.5542 mean dev:   0.0001 RMS:   0.0099 conf:   1.0000\r\n```\r\n\r\nAfter this PR:\r\n\r\n```\r\nINFO  [sensors] mag status:\r\nINFO  [ecl/validation] validator: best: 1, prev best: 0, failsafe: NO (0 events)\r\nINFO  [ecl/validation] sensor #0, prio: 100, state: OK\r\nINFO  [ecl/validation] \tval:  -0.0527, lp:  -0.0529 mean dev:  -0.0002 RMS:   0.0014 conf:   1.0000\r\nINFO  [ecl/validation] \tval:  -0.2135, lp:  -0.2112 mean dev:  -0.0002 RMS:   0.0015 conf:   1.0000\r\nINFO  [ecl/validation] \tval:   0.5476, lp:   0.5467 mean dev:  -0.0001 RMS:   0.0048 conf:   1.0000\r\nINFO  [ecl/validation] sensor #1, prio: 255, state: OK\r\nINFO  [ecl/validation] \tval:  -0.0325, lp:  -0.0316 mean dev:   0.0000 RMS:   0.0005 conf:   1.0000\r\nINFO  [ecl/validation] \tval:  -0.2031, lp:  -0.2045 mean dev:  -0.0001 RMS:   0.0006 conf:   1.0000\r\nINFO  [ecl/validation] \tval:   0.4784, lp:   0.4821 mean dev:   0.0002 RMS:   0.0032 conf:   1.0000\r\n\r\n```\r\nTested on v5x.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14012/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14011","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14011/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14011/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14011/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/14011","id":553641127,"node_id":"MDU6SXNzdWU1NTM2NDExMjc=","number":14011,"title":"navigator bug: \"Takeoff to x meters above home.\" after mission ended","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"assignees":[{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-01-22T16:08:06Z","updated_at":"2020-01-24T07:42:17Z","closed_at":"2020-01-24T07:42:17Z","author_association":"MEMBER","active_lock_reason":null,"body":"When navigator executes a mission with a landing waypoint, **after** the mission ends, QGC shows \"Takeoff to x meters above home.\".\r\nReproducible 100% in SITL.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. simple mission with landing waypoint at the end\r\n2. run the mission and wait until landed and disarmed\r\n\r\nThe problem is that navigator resets the mission after disarming (`need_to_reset_mission()`), and then already sets the first mission item again (`set_mission_items()`), which leads to a user message. We can defer calling `set_mission_items()` until we're armed again, but then mc_pos_control goes into failsafe with a warning (which I don't think it should, as it's disarmed) and I want to avoid unnecessary complex logic.\r\n\r\nIt's not clear to me why navigator does not just switch to land mode, as it does for RTL.\r\nRTL does not have that issue because of the mode switch.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14011/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14009","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14009/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14009/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14009/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14009","id":553630833,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY1OTI4NjU3","number":14009,"title":"commander: fix mission topic publication","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-22T15:51:49Z","updated_at":"2020-01-22T17:08:34Z","closed_at":"2020-01-22T17:08:33Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14009","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14009","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14009.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14009.patch","merged_at":"2020-01-22T17:08:33Z"},"body":"The local scope caused the topic to be unadvertised, which in turn caused a copy() failure in navigator and 'mission update failed' printf error.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14009/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14009/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14002","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14002/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14002/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14002/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14002","id":553138240,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY1NTE5MzYy","number":14002,"title":"navigator: mission WORK_ITEM_TYPE_MOVE_TO_LAND altitude isn't relative","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-21T21:24:13Z","updated_at":"2020-01-21T22:27:25Z","closed_at":"2020-01-21T22:27:24Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14002","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14002","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14002.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14002.patch","merged_at":"2020-01-21T22:27:23Z"},"body":"Possible fix for the VTOL flyaway that showed up in SITL CI. https://github.com/PX4/Firmware/pull/13967","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14002/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14000","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14000/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14000/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14000/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14000","id":552899990,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY1MzIzOTQ3","number":14000,"title":"v5x target: Fix wrong FD for TELEM3","user":{"login":"cmic0","id":7490213,"node_id":"MDQ6VXNlcjc0OTAyMTM=","avatar_url":"https://avatars.githubusercontent.com/u/7490213?v=4","gravatar_id":"","url":"https://api.github.com/users/cmic0","html_url":"https://github.com/cmic0","followers_url":"https://api.github.com/users/cmic0/followers","following_url":"https://api.github.com/users/cmic0/following{/other_user}","gists_url":"https://api.github.com/users/cmic0/gists{/gist_id}","starred_url":"https://api.github.com/users/cmic0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmic0/subscriptions","organizations_url":"https://api.github.com/users/cmic0/orgs","repos_url":"https://api.github.com/users/cmic0/repos","events_url":"https://api.github.com/users/cmic0/events{/privacy}","received_events_url":"https://api.github.com/users/cmic0/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-21T14:08:36Z","updated_at":"2020-01-21T22:28:02Z","closed_at":"2020-01-21T22:28:00Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/14000","html_url":"https://github.com/PX4/PX4-Autopilot/pull/14000","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/14000.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/14000.patch","merged_at":"2020-01-21T22:28:00Z"},"body":"This PR fixes wrong File Descriptor for v5x target.\r\n\r\nAfter this change I was able to use TELEM 3 as expected.\r\n\r\n**Test data / coverage**\r\nTested on v5x\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/14000/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13996","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13996/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13996/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13996/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13996","id":552593555,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY1MDY5ODU1","number":13996,"title":"px4/fmu-v4: restore SPIDEV integers from stable v1.10","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":416735878,"node_id":"MDU6TGFiZWw0MTY3MzU4Nzg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/board:%20pixracer","name":"board: pixracer","color":"5319e7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-21T02:44:47Z","updated_at":"2020-01-21T03:31:32Z","closed_at":"2020-01-21T03:31:31Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13996","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13996","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13996.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13996.patch","merged_at":"2020-01-21T03:31:31Z"},"body":"After the v1.10 release I deleted several obsolete SPIDEVs from the fmu-v4 board_config.h. This arbitrary integer is a factor in the driver device ids, so this inadvertently changed the device ids of the sensors. This is a minor inconvenience for regular calibrations and slightly more of an inconvenience for thermal calibrations (TC_*).\r\n\r\nI'll revert the SPIDEV numbering changes to stay consistent with PX4 stable v1.10 and earlier.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13996/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13972","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13972/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13972/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13972/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13972","id":551557540,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY0MjU3OTgz","number":13972,"title":"land detector: fix ordering of hysteresis updates...","user":{"login":"ndepal","id":8755300,"node_id":"MDQ6VXNlcjg3NTUzMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8755300?v=4","gravatar_id":"","url":"https://api.github.com/users/ndepal","html_url":"https://github.com/ndepal","followers_url":"https://api.github.com/users/ndepal/followers","following_url":"https://api.github.com/users/ndepal/following{/other_user}","gists_url":"https://api.github.com/users/ndepal/gists{/gist_id}","starred_url":"https://api.github.com/users/ndepal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ndepal/subscriptions","organizations_url":"https://api.github.com/users/ndepal/orgs","repos_url":"https://api.github.com/users/ndepal/repos","events_url":"https://api.github.com/users/ndepal/events{/privacy}","received_events_url":"https://api.github.com/users/ndepal/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-17T18:07:24Z","updated_at":"2020-01-17T22:30:16Z","closed_at":"2020-01-17T19:46:18Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13972","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13972","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13972.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13972.patch","merged_at":"2020-01-17T19:46:18Z"},"body":"… to ensure we report LANDED only if also MAYBE LANDED and GROUND CONTACT, and MAYBE LANDED only if also GROUND CONTACT\r\n\r\nWith the existing ordering, `_landed_hysteresis.set_state_and_update(_get_landed_state(), now_us);` uses the `_maybe_landed_hysteresis` immediately before the latter is updated, which leads to `vehicle_land_detected` messages being published where\r\n```\r\nlanded == true\r\nmaybe_landed == false\r\nground_contact == false\r\n```\r\n\r\nSimilarly the following was possible\r\n```\r\nmaybe_landed == true\r\nground_contact == false\r\n```\r\n\r\nThis is a problem if users of `vehicle_land_detected` expect the logic of `landed only if maybe_landed only if ground_contact` to hold. E.g. `mc_pos_control` which only looks at `maybe_landed` and `ground_contact` to decide whether thrust should be cut to 0.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13972/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13972/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13971","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13971/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13971/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13971/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13971","id":551549702,"node_id":"MDExOlB1bGxSZXF1ZXN0MzY0MjUxNTgz","number":13971,"title":"mission: write next mission item into pos_sp_triplet->current if current mission item did not have position","user":{"login":"ndepal","id":8755300,"node_id":"MDQ6VXNlcjg3NTUzMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8755300?v=4","gravatar_id":"","url":"https://api.github.com/users/ndepal","html_url":"https://github.com/ndepal","followers_url":"https://api.github.com/users/ndepal/followers","following_url":"https://api.github.com/users/ndepal/following{/other_user}","gists_url":"https://api.github.com/users/ndepal/gists{/gist_id}","starred_url":"https://api.github.com/users/ndepal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ndepal/subscriptions","organizations_url":"https://api.github.com/users/ndepal/orgs","repos_url":"https://api.github.com/users/ndepal/repos","events_url":"https://api.github.com/users/ndepal/events{/privacy}","received_events_url":"https://api.github.com/users/ndepal/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-01-17T17:48:11Z","updated_at":"2022-06-27T14:40:18Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13971","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13971","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13971.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13971.patch","merged_at":null},"body":"Fixes https://github.com/PX4/Firmware/issues/13668\r\n\r\nI was only able to reproduce the issue described when the drone is already flying.\r\n\r\nThe problem is that, if a new mission begins and it's first item is a command, `Mission::set_mission_items()` will not write to `pos_sp_triplet->current`, but that was marked `invalid` by `reset_triplets()`.\r\n\r\n`FlightTaskAuto` then goes into failsafe. \r\n\r\nhttps://github.com/PX4/Firmware/blob/master/src/modules/mc_pos_control/mc_pos_control_main.cpp#L564-L567\r\n\r\nAdditionally, depending on timing, the takeoff state machine uses NAN constraints to update its state, causing the state machine to fail to progress, which then makes it impossible to detect landing (we ~will make~ have a separate PR to guard against that:  https://github.com/PX4/Firmware/pull/13973).\r\n\r\nhttps://github.com/PX4/Firmware/blob/master/src/modules/mc_pos_control/mc_pos_control_main.cpp#L598","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13971/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13968","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13968/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13968/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13968/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13968","id":551474471,"node_id":"MDU6SXNzdWU1NTE0NzQ0NzE=","number":13968,"title":"EKF2 timestamp issue","user":{"login":"CarlOlsson","id":7795133,"node_id":"MDQ6VXNlcjc3OTUxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7795133?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlOlsson","html_url":"https://github.com/CarlOlsson","followers_url":"https://api.github.com/users/CarlOlsson/followers","following_url":"https://api.github.com/users/CarlOlsson/following{/other_user}","gists_url":"https://api.github.com/users/CarlOlsson/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlOlsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlOlsson/subscriptions","organizations_url":"https://api.github.com/users/CarlOlsson/orgs","repos_url":"https://api.github.com/users/CarlOlsson/repos","events_url":"https://api.github.com/users/CarlOlsson/events{/privacy}","received_events_url":"https://api.github.com/users/CarlOlsson/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-01-17T15:20:35Z","updated_at":"2020-12-25T16:08:34Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Already known issue (mentioned [here](https://github.com/PX4/Firmware/pull/11396)) so this issue is just for documentation.\r\n\r\nEKF2 uses the sensor_combined.timestamp field everywhere instead of system time.\r\n\r\nhttps://github.com/PX4/Firmware/blob/75c8fb12e48058966fff59795d0d11020604ca41/src/modules/ekf2/ekf2_main.cpp#L777-L777\r\n\r\nThis means e.g. that the fields published by ekf2 have the wrong timestamp.\r\n\r\nIt can also lead to other issues, e.g. we had this line of code to check if the airspeed data is not old\r\n```\r\nif (now - _airspeed.timestamp < 1_s)\r\n```\r\n\r\nHowever, this sometimes evaluated to true because _airspeed.timestamp is newer than now and then the subtraction returned a negative value","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13968/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13962","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13962/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13962/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13962/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13962","id":550998734,"node_id":"MDU6SXNzdWU1NTA5OTg3MzQ=","number":13962,"title":"Takeoff bug","user":{"login":"dusan19","id":35773661,"node_id":"MDQ6VXNlcjM1NzczNjYx","avatar_url":"https://avatars.githubusercontent.com/u/35773661?v=4","gravatar_id":"","url":"https://api.github.com/users/dusan19","html_url":"https://github.com/dusan19","followers_url":"https://api.github.com/users/dusan19/followers","following_url":"https://api.github.com/users/dusan19/following{/other_user}","gists_url":"https://api.github.com/users/dusan19/gists{/gist_id}","starred_url":"https://api.github.com/users/dusan19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dusan19/subscriptions","organizations_url":"https://api.github.com/users/dusan19/orgs","repos_url":"https://api.github.com/users/dusan19/repos","events_url":"https://api.github.com/users/dusan19/events{/privacy}","received_events_url":"https://api.github.com/users/dusan19/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":11,"created_at":"2020-01-16T19:08:14Z","updated_at":"2020-06-18T04:53:27Z","closed_at":"2020-06-18T04:53:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nDrone is sent on an auto mission, instead of taking off 4-5m above ground, it lifts itself slightly above ground and hovers there.\r\n\r\n**To Reproduce**\r\nMission that is run: \r\nchange speed cmd -> set roi cmd -> takeoff -> waypoint -> waypoint...\r\nNote: this behavior happens to me less than once in 30 flights\r\n\r\n**Expected behavior**\r\nNormal takeoff to 5m above ground followed by other waypoints\r\n\r\n**Log Files and Screenshots**\r\n![image](https://user-images.githubusercontent.com/35773661/72553370-fa13af80-3898-11ea-83cf-6048be429609.png)\r\n\r\nWe see that the triplet type quickly switches from takeoff(3) to position(0), probably due to the detected takeoff.\r\n\r\nClearly the current triplet altitude is ~5m higher than the drone altitude, so normally the upwards velocity should be commanded by the flight task.\r\n\r\n**Additional context**\r\nMPC_TKO_RAMP_T = 0\r\nMPC_TKO_SPEED = 1.5\r\nMPC_SPOOLUP_TIME = 1\r\n\r\nThe \"position control setpoint update failed\" error might be related to:\r\nhttps://github.com/PX4/Firmware/issues/13668\r\nby the way I get this error on every mission start, and it normally doesn't effect the takeoff in such a way, although it might be a timing issue, such that it depends when the error happens.\r\n\r\n\r\nAny help is in debugging and fixing the issue is appreciated","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13962/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13960","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13960/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13960/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13960/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13960","id":550776574,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYzNjIwMDM5","number":13960,"title":"Fixed digital power module validity check","user":{"login":"AmeliaEScott","id":725892,"node_id":"MDQ6VXNlcjcyNTg5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/725892?v=4","gravatar_id":"","url":"https://api.github.com/users/AmeliaEScott","html_url":"https://github.com/AmeliaEScott","followers_url":"https://api.github.com/users/AmeliaEScott/followers","following_url":"https://api.github.com/users/AmeliaEScott/following{/other_user}","gists_url":"https://api.github.com/users/AmeliaEScott/gists{/gist_id}","starred_url":"https://api.github.com/users/AmeliaEScott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AmeliaEScott/subscriptions","organizations_url":"https://api.github.com/users/AmeliaEScott/orgs","repos_url":"https://api.github.com/users/AmeliaEScott/repos","events_url":"https://api.github.com/users/AmeliaEScott/events{/privacy}","received_events_url":"https://api.github.com/users/AmeliaEScott/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1424478923,"node_id":"MDU6TGFiZWwxNDI0NDc4OTIz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk:%20fmu-v5x","name":"pixhawk: fmu-v5x","color":"b60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-01-16T12:28:13Z","updated_at":"2020-01-16T15:50:55Z","closed_at":"2020-01-16T15:43:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13960","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13960","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13960.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13960.patch","merged_at":"2020-01-16T15:43:24Z"},"body":"**Describe problem solved by this pull request**\r\nWhen using the INA226 digital power module (For example, with the v5x) and the driver added in https://github.com/PX4/Firmware/pull/12673, the vehicle would fail the pre-flight check (`Arming denied! Check battery`). This is because, in the `system_power` uORB topic, the `brick_valid` field was not being properly set. This PR is a quick fix to make sure it is set. A more proper fix would be to completely restructure the power management system. But that will presumably be a large undertaking, so this quick fix will allow the v5x to fly in the meantime.\r\n\r\n**Describe your solution**\r\nI changed the ADC driver. Before, it would only set the `brick_valid` flags if the digital power module is not configured in the board configuration. However, at least on the v5x, power module validity is checked in the same way as the v5 (using one digital GPIO pin for each power source). So, I enabled the validity check even if there are digital power modules available.\r\n\r\n**Describe possible alternatives**\r\nA complete restructure of the power management system would presumably separate the validity checks and other functionality from the ADC driver. The ADC driver should probably just publish raw ADC readings, and not bother with interpreting them. However, as previously mentioned, this will probably be a large project.\r\n\r\n**Test data / coverage**\r\nTested on both v5 and v5x: Armed successfully when a battery is plugged in, and correctly denied arming when there is no battery.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13960/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13956","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13956/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13956/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13956/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13956","id":550361910,"node_id":"MDU6SXNzdWU1NTAzNjE5MTA=","number":13956,"title":"Issue with landing PixRacer FMUV4_K66, FMUv5","user":{"login":"Tony3dr","id":39415493,"node_id":"MDQ6VXNlcjM5NDE1NDkz","avatar_url":"https://avatars.githubusercontent.com/u/39415493?v=4","gravatar_id":"","url":"https://api.github.com/users/Tony3dr","html_url":"https://github.com/Tony3dr","followers_url":"https://api.github.com/users/Tony3dr/followers","following_url":"https://api.github.com/users/Tony3dr/following{/other_user}","gists_url":"https://api.github.com/users/Tony3dr/gists{/gist_id}","starred_url":"https://api.github.com/users/Tony3dr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tony3dr/subscriptions","organizations_url":"https://api.github.com/users/Tony3dr/orgs","repos_url":"https://api.github.com/users/Tony3dr/repos","events_url":"https://api.github.com/users/Tony3dr/events{/privacy}","received_events_url":"https://api.github.com/users/Tony3dr/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":6,"created_at":"2020-01-15T18:43:30Z","updated_at":"2020-04-21T07:35:54Z","closed_at":"2020-04-21T07:35:54Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen flying the vehicle in Mission mode and trigger RTL, upon landing the vehicle does not descend vertically but drifts away with the wind. I had to take command of the vehicle in position mode and landed the vehicle manually. This is an issue that we have seen constantly, with the PixRacer and K66, FMUv5. **We are seeing this issue when the wind is 6 m/s and over.** \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Drone switched on \r\n2. Uploaded mission to the vehicle\r\n3. Took off in Mission Mode \r\n4. All commands were sent form QGC (Armed and takeoff)\r\n5. Once all waypoint completed vehicle switched to RTL\r\n6. When the vehicle was landing, it did not descend vertically, drifted away with the wind and landed the vehicle manually\r\n\r\n**Expected behavior**\r\nThe vehicle should land and disarm.\r\n\r\n**Log Files and Screenshots**\r\nThis is the latest PR tested with the PixRacer and issue persisted, Reference [#13678](https://github.com/PX4/Firmware/pull/13678)\r\nLogs: https://review.px4.io/plot_app?log=67a2120c-a473-43a3-a556-6a542f62f7b1\r\n\r\nIssue noticed on Reference  [#13701](https://github.com/PX4/Firmware/pull/13701\r\n), wind 10.2 m/s, PixRacer.\r\n\r\nIssue noticed on Reference [#13745](https://github.com/PX4/Firmware/pull/13745#event-2883456760), wind 10.2 m/s, PixRacer V4.\r\nLog: https://review.px4.io/plot_app?log=719ab88b-d993-47c8-a9ca-eaf429d4577e\r\n\r\nIssue noticed on Reference [#13613](https://github.com/PX4/Firmware/pull/13613#event-2837043850), 10.2 m / s, PixRacer V4.\r\nLogs: https://review.px4.io/plot_app?log=b0f1f872-fc9e-41ee-89e3-4e146862efc7\r\nLog: https://review.px4.io/plot_app?log=a8a1391c-06c0-475e-943a-48bea5da2e24\r\n\r\nIssue noticed on Reference [#13065](https://github.com/PX4/Firmware/pull/13065), NXP_FMUK66_V3, \r\nLogs: https://review.px4.io/plot_app?log=792db7ac-8738-4bdd-8a03-aa6d88b371b3\r\n\r\n\r\n**Drone (please complete the following information):**\r\n**PixRacer**\r\nFrame: DJI F450\r\nFlight Controller: PixRacer \r\nGPS: Readytosky M8N GPS Module Built-in Compass\r\nMotors: T Motor 2212-920kv\r\nPropellers: DJI Phantom Built-in Nut Upgrade Propellers - MR PH 9.4x5 \r\nReceiver: FrSky D4R-II 2.4G 4CH ACCST Telemetry Receiver\r\nTelemetry:Holibro Telemetry, 100mW Telemetry Radio V3 915MHz\r\nESC: Hobbywing XRotor 20A APAC Brushless ESC\r\nBattery: 3S 5200mAh(Hobbyking)\r\n\r\n**NXP:**\r\nVehicle description:  RDDRONE-FMUK66\r\nFlight Controller: FMUK66 \r\nFrame: ReadytoSky LJI X4 500\r\nMotors: ReadytoSky RS2212 920 kV CW & CCW  \r\nPropellers: LJI 9450 self-locking propellers\r\nGPS: Holybro Pixhawk 4 GPS\r\nESC: ReadytoSky 2-6S 40 A OPTO ESCs\r\nBattery: 3S 5200mAh \r\n\r\n**Additional context**\r\nWe will test when windy on Master and Stable and see if the issue persists. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13956/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13953","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13953/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13953/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13953/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13953","id":550303244,"node_id":"MDU6SXNzdWU1NTAzMDMyNDQ=","number":13953,"title":"GPS blending does not work in EKF2 replay","user":{"login":"CarlOlsson","id":7795133,"node_id":"MDQ6VXNlcjc3OTUxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7795133?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlOlsson","html_url":"https://github.com/CarlOlsson","followers_url":"https://api.github.com/users/CarlOlsson/followers","following_url":"https://api.github.com/users/CarlOlsson/following{/other_user}","gists_url":"https://api.github.com/users/CarlOlsson/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlOlsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlOlsson/subscriptions","organizations_url":"https://api.github.com/users/CarlOlsson/orgs","repos_url":"https://api.github.com/users/CarlOlsson/repos","events_url":"https://api.github.com/users/CarlOlsson/events{/privacy}","received_events_url":"https://api.github.com/users/CarlOlsson/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-01-15T16:44:08Z","updated_at":"2020-02-27T15:23:17Z","closed_at":"2020-02-27T15:23:16Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nBased on [this](https://github.com/PX4/Firmware/pull/10570#issue-218165191) comment it looks like EKF replay has been used in the past to develop the GPS blending algorithm. However, now it seems like it is not working as it should.\r\nHere are the blend weights (added to estimator_status for logging) on a vehicle with two GPS modules connected in a hand held test. Top plot is original logfile, bottom is replayed\r\n![image](https://user-images.githubusercontent.com/7795133/72452617-29092300-37be-11ea-9c11-7c0f47c303f4.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13953/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13952","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13952/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13952/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13952/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13952","id":550153808,"node_id":"MDU6SXNzdWU1NTAxNTM4MDg=","number":13952,"title":"Vehicle starts to descend after backtransition, before reaching land waypoint","user":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-15T12:21:44Z","updated_at":"2020-01-17T17:59:38Z","closed_at":"2020-01-17T17:59:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nIn a VTOL mission with the last waypoint being a land waypoint and the previous ones being navigated as fixed wing, the expectation is that the vehicle transitions before reaching the land waypoint and only starts descending when horizontally reaching the land waypoint.\r\nHowever, on latest master the vehicle executes the transition and after it's completion immediately starts descending, even if it hasn't gotten close to the land waypoint.\r\n\r\n\r\n**To Reproduce**\r\nIn SITL (use standard vtol model) plan a mission using a VTOL takeoff item, a couple of way waypoints and lastly add a land waypoint. Due to the excessive drag of the gazebo model the vehicle will finish the transition back to hover well before it has gotten close to the land waypoint. However, you will see that while moving to the land waypoint for the landing it will start descending as well.\r\n\r\n\r\n**Expected behavior**\r\nThe vehicle should finish the back-transition, move to the landing waypoint while maintaining altitude and only start descending once the land waypoint has been reached.\r\n\r\n**Log Files and Screenshots**\r\nhttps://logs.px4.io/plot_app?log=4769c91c-9c71-4db5-b98b-b580a3efa943\r\n\r\nAdd screenshots to help explain your problem.\r\n![image](https://user-images.githubusercontent.com/7610489/72433595-b3e02280-37aa-11ea-9583-cb820edc5823.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13952/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13950","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13950/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13950/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13950/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13950","id":550082805,"node_id":"MDU6SXNzdWU1NTAwODI4MDU=","number":13950,"title":"macOS gazebo_sitl build broken after a Qt update","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"},{"id":663879765,"node_id":"MDU6TGFiZWw2NjM4Nzk3NjU=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/gazebo%20classic","name":"gazebo classic","color":"EE7F04","default":false,"description":"Gazebo classic simulator"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-15T10:00:22Z","updated_at":"2020-01-16T15:16:50Z","closed_at":"2020-01-16T15:16:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This is a heads up that currently the build of the gazebo plugins is broken after a `brew upgrade`.\r\n\r\nWith Qt 5.14 on macOS, I get the following:\r\n\r\n```\r\ncd /Users/travis/Firmware/build/px4_sitl_default/build_gazebo/include && /usr/local/opt/qt/bin/moc @/Users/travis/Firmware/build/px4_sitl_default/build_gazebo/include/moc_gazebo_video_stream_widget.cpp_parameters\r\n\r\nusr/local/Cellar/tbb/2020_U0/include/tbb/tbb_profiling.:28: Parse error at \"{\"\r\n```\r\n\r\nMore info:\r\nhttps://github.com/PX4/homebrew-px4/pull/47\r\nhttps://bugreports.qt.io/browse/QTBUG-80990\r\nhttps://bitbucket.org/osrf/gazebo/issues/2681/moc-compilation-error-with-qt-514-tbb\r\n\r\nI'm hoping that this will be resolved by a patch for Gazebo or Qt.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13950/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13946","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13946/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13946/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13946/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13946","id":549908272,"node_id":"MDU6SXNzdWU1NDk5MDgyNzI=","number":13946,"title":"Firmware broken on Crazyflie 2.0 hardware -- unable to connect to the nsh console using mavlink ","user":{"login":"xiangyu-wu","id":26755691,"node_id":"MDQ6VXNlcjI2NzU1Njkx","avatar_url":"https://avatars.githubusercontent.com/u/26755691?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangyu-wu","html_url":"https://github.com/xiangyu-wu","followers_url":"https://api.github.com/users/xiangyu-wu/followers","following_url":"https://api.github.com/users/xiangyu-wu/following{/other_user}","gists_url":"https://api.github.com/users/xiangyu-wu/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangyu-wu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangyu-wu/subscriptions","organizations_url":"https://api.github.com/users/xiangyu-wu/orgs","repos_url":"https://api.github.com/users/xiangyu-wu/repos","events_url":"https://api.github.com/users/xiangyu-wu/events{/privacy}","received_events_url":"https://api.github.com/users/xiangyu-wu/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null},{"id":1847689142,"node_id":"MDU6TGFiZWwxODQ3Njg5MTQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/manufacturer:%20crazyflie","name":"manufacturer: crazyflie","color":"7ad35d","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-01-15T01:13:51Z","updated_at":"2021-01-17T21:11:20Z","closed_at":"2021-01-17T21:11:20Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nUnable to connect to the nsh console of crazyflie 2.0. I did a bisection on the Firmware commits and found that the connection problem started from [this merge](https://github.com/PX4/Firmware/pull/11256). I was able to compile and flash the codes, but I was unable to connect to the nsh console using mavlink afterwards. [A similar issue](https://github.com/PX4/Firmware/issues/11750) was reported before but was not resolved.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Compile the default PX4 firmware for the crazyflie 2.0. \r\n2. Connect your computer to the vehicle via a usb port and flash the vehicle.\r\n3. Try to connect to the nsh console using the command *./Tools/mavlink_shell.py /dev/ttyACM0* (You may use *dmesg* to see if the crazyflie 2.0 corresponds to /dev/ttyACM0 or some other path.)\r\n4. The connection get stuck forever after displaying \"Connecting to MAVLINK...\" and no error message was displayed. \r\n\r\n**Expected behavior**\r\nThe connection succeeds and the console displays *nsh>*\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13946/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13935","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13935/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13935/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13935/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13935","id":549029968,"node_id":"MDU6SXNzdWU1NDkwMjk5Njg=","number":13935,"title":"Vision velocity covariance is not handled correctly.","user":{"login":"kamilritz","id":23532607,"node_id":"MDQ6VXNlcjIzNTMyNjA3","avatar_url":"https://avatars.githubusercontent.com/u/23532607?v=4","gravatar_id":"","url":"https://api.github.com/users/kamilritz","html_url":"https://github.com/kamilritz","followers_url":"https://api.github.com/users/kamilritz/followers","following_url":"https://api.github.com/users/kamilritz/following{/other_user}","gists_url":"https://api.github.com/users/kamilritz/gists{/gist_id}","starred_url":"https://api.github.com/users/kamilritz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamilritz/subscriptions","organizations_url":"https://api.github.com/users/kamilritz/orgs","repos_url":"https://api.github.com/users/kamilritz/repos","events_url":"https://api.github.com/users/kamilritz/events{/privacy}","received_events_url":"https://api.github.com/users/kamilritz/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1450324872,"node_id":"MDU6TGFiZWwxNDUwMzI0ODcy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Communication%20(MAVLink)%20%F0%9F%93%A1","name":"Communication (MAVLink) 📡","color":"f66608","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-13T16:07:39Z","updated_at":"2020-05-15T06:11:29Z","closed_at":"2020-05-15T06:11:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Ekf2_main was sending position variance also as velocity variance. We need to replace `pose_covariance` with `velocity_covariance` in these [lines](https://github.com/PX4/Firmware/blob/master/src/modules/ekf2/ekf2_main.cpp#L1113-L1118).\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13935/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13926","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13926/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13926/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13926/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13926","id":548662917,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxODk4MTQy","number":13926,"title":"navio_sysfs_rc_in: only publish input_rc if connected and all channels are non-zero","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":326832167,"node_id":"MDU6TGFiZWwzMjY4MzIxNjc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hardware:%20raspberry%20pi%20%F0%9F%8D%93","name":"hardware: raspberry pi 🍓","color":"867624","default":false,"description":""},{"id":1502478333,"node_id":"MDU6TGFiZWwxNTAyNDc4MzMz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/safety","name":"safety","color":"d93f0b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-13T01:35:30Z","updated_at":"2020-01-13T02:19:55Z","closed_at":"2020-01-13T02:19:54Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13926","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13926","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13926.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13926.patch","merged_at":"2020-01-13T02:19:54Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13926/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13925","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13925/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13925/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13925/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13925","id":548654197,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxODkxMzQx","number":13925,"title":"lsm9ds1_mag: fix orientation","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":326832167,"node_id":"MDU6TGFiZWwzMjY4MzIxNjc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hardware:%20raspberry%20pi%20%F0%9F%8D%93","name":"hardware: raspberry pi 🍓","color":"867624","default":false,"description":""},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-13T00:37:45Z","updated_at":"2020-01-13T01:35:23Z","closed_at":"2020-01-13T01:35:22Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13925","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13925","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13925.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13925.patch","merged_at":"2020-01-13T01:35:22Z"},"body":"![Screenshot from 2020-01-12 19-37-18](https://user-images.githubusercontent.com/84712/72228230-00411d80-3573-11ea-96c3-f93241f78873.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13925/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13922","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13922/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13922/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13922/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13922","id":548486849,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxNzY5NTI0","number":13922,"title":"Fix velocity state usage in multicopter position control","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-01-11T22:15:23Z","updated_at":"2020-01-18T09:57:14Z","closed_at":"2020-01-18T09:57:13Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13922","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13922","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13922.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13922.patch","merged_at":"2020-01-18T09:57:13Z"},"body":"**Describe problem solved by this pull request**\r\nWe had a crash while using terrain following and I found out that the vertical velocity estimate of the EKF is getting ignored in that configuration. This was introduced in https://github.com/PX4/Firmware/commit/bf4ac7a9d639f26fc7557345a219ffd1bec04764 and I couldn't find a viable use case for doing that at least with the current implementation. Maybe it was rather experimental back then maybe @Stifael could give us some insights.\r\n\r\n**Describe your solution**\r\nWhile fixing the above root problem I changed three things (3 commits with detailed descriptions):\r\n1. Still use the vertical velocity estimate from the estimator in terrain following and do not override it with the dist_bottom_rate.\r\n1. Do not use the vertical velocity estimate if it's flagged invalid. A bug I realized while comparing to the horizontal velocity case in the same function. This probably never showed up because the vertical velocity is almost always valid but in case it's not it would be fatal to feed position control with it.\r\n1. Reset the velocity derivatives instead of updating them with zero to avoid spikes when regaining the velocity estimate. I found that bug while looking at the update calls since we had the derivative spike problem before with timing issues when switching modes in #13522.\r\n\r\n**Test data / coverage**\r\nNot tested at all yet, I have to follow up with reports. Reveiws and tests are welcome.\r\n\r\n**Additional context**\r\nHere's a screenshot where you see the distance being reported too high up because of this bug: https://github.com/PX4/ecl/pull/706 and since terrain following was enabled the wrong dist_bottom rate was used before the changes in this pr and made the drone go vertically unstable and cut thrust to idle:\r\n![dist_bottom_rate](https://user-images.githubusercontent.com/4668506/72212747-d0bce300-3496-11ea-924a-546e8cc0acaa.PNG)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13922/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13921","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13921/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13921/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13921/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13921","id":548475338,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxNzYxNDky","number":13921,"title":"PAW3902: fix mode change shutter thresholds","user":{"login":"joevn","id":4419344,"node_id":"MDQ6VXNlcjQ0MTkzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4419344?v=4","gravatar_id":"","url":"https://api.github.com/users/joevn","html_url":"https://github.com/joevn","followers_url":"https://api.github.com/users/joevn/followers","following_url":"https://api.github.com/users/joevn/following{/other_user}","gists_url":"https://api.github.com/users/joevn/gists{/gist_id}","starred_url":"https://api.github.com/users/joevn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joevn/subscriptions","organizations_url":"https://api.github.com/users/joevn/orgs","repos_url":"https://api.github.com/users/joevn/repos","events_url":"https://api.github.com/users/joevn/events{/privacy}","received_events_url":"https://api.github.com/users/joevn/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":{"login":"nicovanduijn","id":14265408,"node_id":"MDQ6VXNlcjE0MjY1NDA4","avatar_url":"https://avatars.githubusercontent.com/u/14265408?v=4","gravatar_id":"","url":"https://api.github.com/users/nicovanduijn","html_url":"https://github.com/nicovanduijn","followers_url":"https://api.github.com/users/nicovanduijn/followers","following_url":"https://api.github.com/users/nicovanduijn/following{/other_user}","gists_url":"https://api.github.com/users/nicovanduijn/gists{/gist_id}","starred_url":"https://api.github.com/users/nicovanduijn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicovanduijn/subscriptions","organizations_url":"https://api.github.com/users/nicovanduijn/orgs","repos_url":"https://api.github.com/users/nicovanduijn/repos","events_url":"https://api.github.com/users/nicovanduijn/events{/privacy}","received_events_url":"https://api.github.com/users/nicovanduijn/received_events","type":"User","site_admin":false},"assignees":[{"login":"nicovanduijn","id":14265408,"node_id":"MDQ6VXNlcjE0MjY1NDA4","avatar_url":"https://avatars.githubusercontent.com/u/14265408?v=4","gravatar_id":"","url":"https://api.github.com/users/nicovanduijn","html_url":"https://github.com/nicovanduijn","followers_url":"https://api.github.com/users/nicovanduijn/followers","following_url":"https://api.github.com/users/nicovanduijn/following{/other_user}","gists_url":"https://api.github.com/users/nicovanduijn/gists{/gist_id}","starred_url":"https://api.github.com/users/nicovanduijn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicovanduijn/subscriptions","organizations_url":"https://api.github.com/users/nicovanduijn/orgs","repos_url":"https://api.github.com/users/nicovanduijn/repos","events_url":"https://api.github.com/users/nicovanduijn/events{/privacy}","received_events_url":"https://api.github.com/users/nicovanduijn/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-01-11T20:17:09Z","updated_at":"2020-01-13T19:05:28Z","closed_at":"2020-01-13T19:05:28Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13921","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13921","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13921.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13921.patch","merged_at":"2020-01-13T19:05:28Z"},"body":"**Describe problem solved by this pull request**\r\nMode switching of PAW3903 wasn't working as expected\r\n\r\n**Describe your solution**\r\nChanged the shutter threshold logic according to datasheet\r\n\r\n**Test data / coverage**\r\nTested that modes were stable after the change, but not flown or tested in low light\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13921/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13913","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13913/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13913/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13913/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13913","id":548195029,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxNTQ1MTcz","number":13913,"title":"px4_work_queue: revert inherited sched attr and run wq:manager and max priority","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-10T17:13:53Z","updated_at":"2020-01-10T22:57:53Z","closed_at":"2020-01-10T22:57:52Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13913","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13913","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13913.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13913.patch","merged_at":"2020-01-10T22:57:52Z"},"body":"More discoveries about pthread consistentcy across all supported platforms and platform configurations (running privileged or not, ulimit settings, etc).\r\n\r\n - setting PTHREAD_EXPLICIT_SCHED was necessary on linux to create WQ\r\nthreads with priorities relative to max\r\n - we can't rely pthread_attr_setinheritsched everywhere as it's\r\ndependent on system ulimit configuration or running privileged\r\n - instead we create the wq:manager at the maximum desired priority and\r\nallow each WQ thread to have a relative priority\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13913/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13911","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13911/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13911/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13911/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13911","id":548125611,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxNDg4MTY1","number":13911,"title":"px4_work_queue: don't inherit pthread attributes from creating thread","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-10T14:58:15Z","updated_at":"2020-01-10T16:02:51Z","closed_at":"2020-01-10T16:02:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13911","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13911","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13911.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13911.patch","merged_at":"2020-01-10T16:02:50Z"},"body":" - this is necessary on linux so that the WQ threads priorities are set\r\nrelative to max, and not relative to the wq:manager thread\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13911/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13906","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13906/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13906/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13906/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13906","id":547954922,"node_id":"MDU6SXNzdWU1NDc5NTQ5MjI=","number":13906,"title":"SITL laundry list","user":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null},{"id":1598294845,"node_id":"MDU6TGFiZWwxNTk4Mjk0ODQ1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/CI%20%F0%9F%A4%96","name":"CI 🤖","color":"3b0dc4","default":false,"description":"Continuous Integration"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-10T09:12:17Z","updated_at":"2020-04-09T09:37:45Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Here are things that I saw happening in SITL. I believe most of them are real issues that are just surfaced.\r\n\r\nA lot of them are easier to reproduce when building with -O0:\r\n\r\n * Application boot: EKF goes into a bad mag state\r\n   * https://github.com/PX4/Firmware/runs/381058730#step:6:1386\r\n * EKF nav failures (these might be SITL-specific)\r\n   * https://github.com/PX4/Firmware/runs/381058730#step:6:1156\r\n   * https://github.com/PX4/Firmware/runs/381058730#step:6:1446\r\n * Application boot: Apps seem to potentially boot in wrong order, leading to indefinite wait","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13906/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13906/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13904","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13904/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13904/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13904/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13904","id":547848642,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxMjYxNzM5","number":13904,"title":"batt_smbus: fix potential buffer overrun bug","user":{"login":"dakejahl","id":37091262,"node_id":"MDQ6VXNlcjM3MDkxMjYy","avatar_url":"https://avatars.githubusercontent.com/u/37091262?v=4","gravatar_id":"","url":"https://api.github.com/users/dakejahl","html_url":"https://github.com/dakejahl","followers_url":"https://api.github.com/users/dakejahl/followers","following_url":"https://api.github.com/users/dakejahl/following{/other_user}","gists_url":"https://api.github.com/users/dakejahl/gists{/gist_id}","starred_url":"https://api.github.com/users/dakejahl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakejahl/subscriptions","organizations_url":"https://api.github.com/users/dakejahl/orgs","repos_url":"https://api.github.com/users/dakejahl/repos","events_url":"https://api.github.com/users/dakejahl/events{/privacy}","received_events_url":"https://api.github.com/users/dakejahl/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-01-10T03:47:15Z","updated_at":"2020-01-24T10:01:27Z","closed_at":"2020-01-24T10:01:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13904","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13904","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13904.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13904.patch","merged_at":"2020-01-24T10:01:26Z"},"body":"The smbus block_read command will always return the `data[]` + 2 bytes of address information. This was not being respected for the `dataflash_write` and `manufacturer_read` functions. These functions now expect the caller to provide the correctly sized buffer for the block_read command.\r\n\r\n@themcfadden please verify on your end, thanks!\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13904/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13903","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13903/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13903/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13903/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13903","id":547767656,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYxMTk2OTY3","number":13903,"title":"atlflight/eagle: minor fixes to get it working again","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289822090,"node_id":"MDU6TGFiZWwyODk4MjIwOTA=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/board:%20snapdragon","name":"board: snapdragon","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-09T22:49:06Z","updated_at":"2020-01-09T23:09:08Z","closed_at":"2020-01-09T23:09:07Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13903","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13903","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13903.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13903.patch","merged_at":"2020-01-09T23:09:07Z"},"body":" - fixed df_ltc2946_wrapper battery depenency\r\n - fixed px4::atomic fetch_add for QuRT\r\n - updated PX4 QuRT SPI wrapper to set bus frequency\r\n - renamed \"qurt-default\" configs to just \"qurt\"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13903/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13896","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13896/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13896/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13896/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13896","id":547501398,"node_id":"MDU6SXNzdWU1NDc1MDEzOTg=","number":13896,"title":"EKF GPS blending does not account for sensor position","user":{"login":"CarlOlsson","id":7795133,"node_id":"MDQ6VXNlcjc3OTUxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7795133?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlOlsson","html_url":"https://github.com/CarlOlsson","followers_url":"https://api.github.com/users/CarlOlsson/followers","following_url":"https://api.github.com/users/CarlOlsson/following{/other_user}","gists_url":"https://api.github.com/users/CarlOlsson/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlOlsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlOlsson/subscriptions","organizations_url":"https://api.github.com/users/CarlOlsson/orgs","repos_url":"https://api.github.com/users/CarlOlsson/repos","events_url":"https://api.github.com/users/CarlOlsson/events{/privacy}","received_events_url":"https://api.github.com/users/CarlOlsson/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-01-09T14:10:21Z","updated_at":"2020-08-22T19:53:26Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"There is a [TODO comment](https://github.com/PX4/Firmware/blob/32a4e3a942533d9863a38dbba6062cfb51f13b06/src/modules/ekf2/ekf2_main.cpp#L2141-L2141) in the code so this is a know issue, but I thought it is still worth documenting it here.\r\nCurrently EKF2 does not support blending the GPS module position offset on the vehicle.\r\nFor the position measurements it is maybe not crucial but for the velocity measurements it can be critical during fast attitude changes. E.g. during a rolling maneuver on a fixed wing with one GPS module in each wing.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13896/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13893","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13893/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13893/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13893/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13893","id":547245364,"node_id":"MDU6SXNzdWU1NDcyNDUzNjQ=","number":13893,"title":"[feature request] support for uavcan buzzer and safety switch","user":{"login":"kevinuav","id":8048038,"node_id":"MDQ6VXNlcjgwNDgwMzg=","avatar_url":"https://avatars.githubusercontent.com/u/8048038?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinuav","html_url":"https://github.com/kevinuav","followers_url":"https://api.github.com/users/kevinuav/followers","following_url":"https://api.github.com/users/kevinuav/following{/other_user}","gists_url":"https://api.github.com/users/kevinuav/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinuav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinuav/subscriptions","organizations_url":"https://api.github.com/users/kevinuav/orgs","repos_url":"https://api.github.com/users/kevinuav/repos","events_url":"https://api.github.com/users/kevinuav/events{/privacy}","received_events_url":"https://api.github.com/users/kevinuav/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-01-09T04:43:12Z","updated_at":"2020-10-15T18:02:49Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Everything works perfectly,except the arming switch,magnetometer(rm3100), air pressure meter(ms5611)and the beeper. They can't work.\r\n\r\nI think that it should be the driver issue.Could you help me to fix the problem?Thank you!\r\n\r\nKevin from CUAV\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13893/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13892","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13892/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13892/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13892/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13892","id":547164822,"node_id":"MDU6SXNzdWU1NDcxNjQ4MjI=","number":13892,"title":"Pixhawk 3 Pro v4_ failed connection to the RC","user":{"login":"Tony3dr","id":39415493,"node_id":"MDQ6VXNlcjM5NDE1NDkz","avatar_url":"https://avatars.githubusercontent.com/u/39415493?v=4","gravatar_id":"","url":"https://api.github.com/users/Tony3dr","html_url":"https://github.com/Tony3dr","followers_url":"https://api.github.com/users/Tony3dr/followers","following_url":"https://api.github.com/users/Tony3dr/following{/other_user}","gists_url":"https://api.github.com/users/Tony3dr/gists{/gist_id}","starred_url":"https://api.github.com/users/Tony3dr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tony3dr/subscriptions","organizations_url":"https://api.github.com/users/Tony3dr/orgs","repos_url":"https://api.github.com/users/Tony3dr/repos","events_url":"https://api.github.com/users/Tony3dr/events{/privacy}","received_events_url":"https://api.github.com/users/Tony3dr/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":555313006,"node_id":"MDU6TGFiZWw1NTUzMTMwMDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk3","name":"pixhawk3","color":"e99695","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-01-08T23:38:39Z","updated_at":"2020-02-24T18:22:50Z","closed_at":"2020-02-24T18:22:50Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThe vehicle did not connect to RC, it would not let the user bind the RC nor calibrate, the same issue was noticed on Master it seems to be working on Stable firmware. This is a brand new flight controller shipped from Drotek, the previous flight controller had bad vibrations and the mag data looked bad. We suspect the issue was something electrical and the flight controller was replaced. Now we are having a failed connection to the RC.  \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nBinding Procedure:\r\n\r\nRC Steps:\r\n1- Turn on RC\r\n2- Activate Biding mode (RC will make beeping sounds)\r\n\r\nVehicle Steps:\r\n\"With the vehicle turned on\"\r\n1- Unplug the receptor\r\n2- Press Binding button and keep pressed\r\n3- Plug in receptor (without letting the binding button go) and make sure both red and green light of the receptor are turned on.\r\nRC Step\r\n1- Disable binding mode\r\nVehicle Step:\r\n1- Confirm binding by having the receptor with a solid green light on (algo confirm by moving flight modes switches.)\r\n\r\n**Log Files and Screenshots**\r\nPR13837: https://review.px4.io/plot_app?log=51c918b7-763c-41c8-b7c8-4a162be0fd3d\r\nMaster: https://review.px4.io/plot_app?log=e9b18b85-685e-4f30-8931-9bfdafbc159a\r\n![81888019_596289817600621_1788273439723749376_n](https://user-images.githubusercontent.com/39415493/72025384-ce575080-322c-11ea-88b9-ac3ce3e1d483.jpg)\r\n![81572634_469390607331633_522361898293788672_n](https://user-images.githubusercontent.com/39415493/72025419-ea5af200-322c-11ea-8ee1-09cbf3c265b8.png)\r\n![83031236_1268661076637838_3741699096512036864_n](https://user-images.githubusercontent.com/39415493/72025421-ec24b580-322c-11ea-8d17-60e68567841b.png)\r\n\r\n**Drone Information**\r\n- Pixhawk 3 Pro v4\r\n- DJI F450 Frame\r\n- CUAV GPS\r\n\r\n**Additional context**\r\n Below is the last working logs on Master for the Pixhawk Pro. The PixRacer seems to be working fine.\r\nFlight card 1\r\nLog: https://review.px4.io/plot_app?log=35d59e70-c3f1-4bfc-a76a-ec8de20261c3\r\nFlight card 2\r\nLog: https://review.px4.io/plot_app?log=0ebede1a-549f-4638-af23-7dcfe365e371\r\nFlight card 3\r\nLog: https://review.px4.io/plot_app?log=5bbb5e95-acd1-4fd1-a78d-5f2e028d8fb7\r\nFlight card 4\r\nLog: https://review.px4.io/plot_app?log=81e3f2bd-bcca-4263-9b00-20f9beea0d6a\r\n\r\n@dagar ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13892/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13886","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13886/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13886/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13886/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13886","id":546926420,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYwNTA5MjQ1","number":13886,"title":"FW: Allow counterclockwise loiter","user":{"login":"dayjaby","id":164396,"node_id":"MDQ6VXNlcjE2NDM5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/164396?v=4","gravatar_id":"","url":"https://api.github.com/users/dayjaby","html_url":"https://github.com/dayjaby","followers_url":"https://api.github.com/users/dayjaby/followers","following_url":"https://api.github.com/users/dayjaby/following{/other_user}","gists_url":"https://api.github.com/users/dayjaby/gists{/gist_id}","starred_url":"https://api.github.com/users/dayjaby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dayjaby/subscriptions","organizations_url":"https://api.github.com/users/dayjaby/orgs","repos_url":"https://api.github.com/users/dayjaby/repos","events_url":"https://api.github.com/users/dayjaby/events{/privacy}","received_events_url":"https://api.github.com/users/dayjaby/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-08T15:17:25Z","updated_at":"2020-01-08T17:30:51Z","closed_at":"2020-01-08T17:30:51Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13886","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13886","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13886.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13886.patch","merged_at":"2020-01-08T17:30:51Z"},"body":"**Describe problem solved by this pull request**\r\nThere was a bug preventing us to set a loiter radius individually for each waypoint and to loiter counterclockwise.\r\n\r\n**Describe your solution**\r\nFixed the check whether the radius is 0 or not.\r\n\r\n**Test data / coverage**\r\nTested in sitl_gazebo with MAV_CMD_NAV_LOITER_UNLIMITED waypoints with param3 (radius) being set to 100.0 and -100.0.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13886/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13885","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13885/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13885/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13885/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13885","id":546922904,"node_id":"MDExOlB1bGxSZXF1ZXN0MzYwNTA2MzAy","number":13885,"title":"MAVSDK tests follow-up/cleanup","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1598294845,"node_id":"MDU6TGFiZWwxNTk4Mjk0ODQ1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/CI%20%F0%9F%A4%96","name":"CI 🤖","color":"3b0dc4","default":false,"description":"Continuous Integration"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-08T15:11:29Z","updated_at":"2020-01-24T11:04:50Z","closed_at":"2020-01-24T11:04:48Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13885","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13885","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13885.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13885.patch","merged_at":"2020-01-24T11:04:48Z"},"body":"This is follow-up and cleanup after #13772.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13885/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13884","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13884/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13884/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13884/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13884","id":546883837,"node_id":"MDU6SXNzdWU1NDY4ODM4Mzc=","number":13884,"title":"Intermittent MAVSDK integration test failures","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"},{"id":1598294845,"node_id":"MDU6TGFiZWwxNTk4Mjk0ODQ1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/CI%20%F0%9F%A4%96","name":"CI 🤖","color":"3b0dc4","default":false,"description":"Continuous Integration"}],"state":"closed","locked":false,"assignee":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"assignees":[{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-01-08T14:10:27Z","updated_at":"2020-03-31T07:28:44Z","closed_at":"2020-03-31T07:28:44Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"It looks like intermittent CI MAVSDK integration test failures are appearing:\r\n\r\nhttps://github.com/PX4/Firmware/runs/379020145\r\n\r\n```\r\n2020-01-08T09:16:03.5701314Z Filters: Fly square Multicopter Missions\r\n2020-01-08T09:16:03.5702236Z ^[[34m[09:16:03|Info ] ^[[0mMAVSDK version: 0.21.3 (mavsdk_impl.cpp:25)\r\n2020-01-08T09:16:03.5704001Z Waiting for system connect\r\n2020-01-08T09:16:03.6041295Z INFO  [param] selected parameter default file eeprom/parameters_10016\r\n2020-01-08T09:16:03.6493425Z [param] Loaded: eeprom/parameters_10016\r\n2020-01-08T09:16:03.7270474Z COM_DL_LOSS_T set to 30\r\n2020-01-08T09:16:03.7535284Z COM_RC_LOSS_T set to 30\r\n2020-01-08T09:16:03.7788181Z COM_OF_LOSS_T set to 30\r\n2020-01-08T09:16:04.5557671Z INFO  [init] Mixer: etc/mixers/quad_w.main.mix on /dev/pwm_output0\r\n2020-01-08T09:16:05.5165654Z INFO  [mavlink] MAVLink only on localhost (set param MAV_BROADCAST = 1 to enable network)\r\n2020-01-08T09:16:05.5172425Z ^[[34m[09:16:05|Info ] ^[[0mNew system on: 127.0.0.1:14580 (udp_connection.cpp:263)\r\n2020-01-08T09:16:05.5173276Z ^[[32m[09:16:05|Debug] ^[[0mNew: System ID: 1 Comp ID: 1 (mavsdk_impl.cpp:390)\r\n2020-01-08T09:16:05.5177761Z ^[[32m[09:16:05|Debug] ^[[0mComponent Autopilot (1) added. (system_impl.cpp:401)\r\n2020-01-08T09:16:05.5298186Z ^[[32m[09:16:05|Debug] ^[[0mDiscovered 1 component(s) (UUID: 5283920058631409231) (system_impl.cpp:561)\r\n2020-01-08T09:16:05.5707861Z Waiting for system to be ready\r\n2020-01-08T09:16:06.5880052Z ^[[32m[09:16:06|Debug] ^[[0mMAVLink: info: [logger] file: ./log/2020-01-08/09_16_05.ulg (system_impl.cpp:308)\r\n2020-01-08T09:16:07.5715977Z ^[[32m[09:16:07|Debug] ^[[0mSend mission item 0 (mission_impl.cpp:1201)\r\n2020-01-08T09:16:07.5725996Z ^[[32m[09:16:07|Debug] ^[[0mSend mission item 1 (mission_impl.cpp:1201)\r\n2020-01-08T09:16:07.5740331Z ^[[32m[09:16:07|Debug] ^[[0mSend mission item 2 (mission_impl.cpp:1201)\r\n2020-01-08T09:16:07.5741278Z ^[[32m[09:16:07|Debug] ^[[0mSend mission item 3 (mission_impl.cpp:1201)\r\n2020-01-08T09:16:07.5747511Z ^[[34m[09:16:07|Info ] ^[[0mMission accepted (mission_impl.cpp:171)\r\n2020-01-08T09:16:07.6687200Z ^[[32m[09:16:07|Debug] ^[[0mMAVLink: info: ARMED by Arm/Disarm component command (system_impl.cpp:308)\r\n2020-01-08T09:16:07.6769927Z ^[[32m[09:16:07|Debug] ^[[0mMAVLink: info: Takeoff to 10.0 meters above home. (system_impl.cpp:308)\r\n2020-01-08T09:16:07.8392104Z ^[[32m[09:16:07|Debug] ^[[0mMAVLink: info: Takeoff detected (system_impl.cpp:308)\r\n2020-01-08T09:16:09.8525828Z ^[[32m[09:16:09|Debug] ^[[0mMAVLink: emergency: Critical navigation failure! Check sensor calibra (system_impl.cpp:308)\r\n2020-01-08T09:16:09.8526266Z ^[[33m[09:16:09|Warn ] ^[[0mUnknown StatusText severity (telemetry_impl.cpp:698)\r\n2020-01-08T09:16:09.8576026Z ^[[32m[09:16:09|Debug] ^[[0mMAVLink: critical: Failsafe enabled: no global position (system_impl.cpp:308)\r\n2020-01-08T09:16:10.5560677Z ^[[32m[09:16:10|Debug] ^[[0mMAVLink: info: Failsafe mode activated (system_impl.cpp:308)\r\n2020-01-08T09:16:13.7928395Z ^[[32m[09:16:13|Debug] ^[[0mMAVLink: info: Landing detected (system_impl.cpp:308)\r\n2020-01-08T09:16:13.8052330Z ^[[32m[09:16:13|Debug] ^[[0mMAVLink: info: DISARMED by Auto disarm initiated (system_impl.cpp:308)\r\n2020-01-08T09:16:13.8112703Z ^[[32m[09:16:13|Debug] ^[[0mMAVLink: info: Failsafe mode deactivated (system_impl.cpp:308)\r\n2020-01-08T09:16:13.8172179Z ^[[32m[09:16:13|Debug] ^[[0mMAVLink: info: Takeoff to 10.0 meters above home. (system_impl.cpp:308)\r\n2020-01-08T09:16:13.8236265Z ^[[32m[09:16:13|Debug] ^[[0mMAVLink: info: Takeoff to 10.0 meters above home. (system_impl.cpp:308)\r\n2020-01-08T09:17:13.6710435Z \r\n2020-01-08T09:17:13.6711301Z ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n2020-01-08T09:17:13.6711697Z mavsdk_tests is a Catch v2.9.2 host application.\r\n2020-01-08T09:17:13.6712729Z Run with -? for options\r\n2020-01-08T09:17:13.6712990Z \r\n2020-01-08T09:17:13.6713935Z -------------------------------------------------------------------------------\r\n2020-01-08T09:17:13.6714251Z Fly square Multicopter Missions\r\n2020-01-08T09:17:13.6714448Z   Mission including RTL\r\n2020-01-08T09:17:13.6714892Z -------------------------------------------------------------------------------\r\n2020-01-08T09:17:13.6715298Z /__w/Firmware/Firmware/test/mavsdk_tests/test_mission_multicopter.cpp:32\r\n2020-01-08T09:17:13.6715510Z ...............................................................................\r\n2020-01-08T09:17:13.6715654Z \r\n2020-01-08T09:17:13.6715858Z /__w/Firmware/Firmware/test/mavsdk_tests/autopilot_tester.cpp:106: FAILED:\r\n2020-01-08T09:17:13.6716802Z   REQUIRE( poll_condition_with_timeout( [this]() { return _mission->mission_finished(); }, std::chrono::seconds(60)) )\r\n2020-01-08T09:17:13.6717078Z with expansion:\r\n2020-01-08T09:17:13.6717268Z   false\r\n2020-01-08T09:17:13.6717397Z \r\n2020-01-08T09:17:13.6738400Z ^[[34m[09:17:13|Info ] ^[[0mMAVSDK version: 0.21.3 (mavsdk_impl.cpp:25)\r\n2020-01-08T09:17:13.6738585Z Waiting for system connect\r\n2020-01-08T09:17:13.7276993Z ^[[34m[09:17:13|Info ] ^[[0mNew system on: 127.0.0.1:14580 (udp_connection.cpp:263)\r\n2020-01-08T09:17:13.7281879Z ^[[32m[09:17:13|Debug] ^[[0mNew: System ID: 1 Comp ID: 1 (mavsdk_impl.cpp:390)\r\n2020-01-08T09:17:13.7286032Z ^[[32m[09:17:13|Debug] ^[[0mComponent Autopilot (1) added. (system_impl.cpp:401)\r\n2020-01-08T09:17:13.8316477Z ^[[32m[09:17:13|Debug] ^[[0mDiscovered 1 component(s) (UUID: 5283920058631409231) (system_impl.cpp:561)\r\n2020-01-08T09:17:14.6741955Z Waiting for system to be ready\r\n2020-01-08T09:17:16.6745786Z ^[[32m[09:17:16|Debug] ^[[0mSend mission item 0 (mission_impl.cpp:1201)\r\n2020-01-08T09:17:16.6760578Z ^[[32m[09:17:16|Debug] ^[[0mSend mission item 1 (mission_impl.cpp:1201)\r\n2020-01-08T09:17:16.6775853Z ^[[32m[09:17:16|Debug] ^[[0mSend mission item 2 (mission_impl.cpp:1201)\r\n2020-01-08T09:17:16.6783518Z ^[[34m[09:17:16|Info ] ^[[0mMission accepted (mission_impl.cpp:171)\r\n2020-01-08T09:17:16.6845668Z ^[[33m[09:17:16|Warn ] ^[[0mcommand temporarily rejected (176). (mavlink_commands.cpp:170)\r\n2020-01-08T09:17:16.6848772Z -------------------------------------------------------------------------------\r\n2020-01-08T09:17:16.6850028Z Fly square Multicopter Missions\r\n2020-01-08T09:17:16.6850467Z   Mission with manual RTL\r\n2020-01-08T09:17:16.6851063Z -------------------------------------------------------------------------------\r\n2020-01-08T09:17:16.6851188Z /__w/Firmware/Firmware/test/mavsdk_tests/test_mission_multicopter.cpp:41\r\n2020-01-08T09:17:16.6851366Z ...............................................................................\r\n2020-01-08T09:17:16.6851450Z \r\n2020-01-08T09:17:16.6851567Z /__w/Firmware/Firmware/test/mavsdk_tests/autopilot_tester.cpp:44: FAILED:\r\n2020-01-08T09:17:16.6851844Z   REQUIRE( result == Action::Result::SUCCESS )\r\n2020-01-08T09:17:16.6851957Z with expansion:\r\n2020-01-08T09:17:16.6852064Z   5 == 1\r\n2020-01-08T09:17:16.6852112Z \r\n2020-01-08T09:17:16.6942230Z ^[[34m[09:17:16|Info ] ^[[0mMAVSDK version: 0.21.3 (mavsdk_impl.cpp:25)\r\n2020-01-08T09:17:16.6942437Z Waiting for system connect\r\n2020-01-08T09:17:16.6959109Z ^[[34m[09:17:16|Info ] ^[[0mNew system on: 127.0.0.1:14580 (udp_connection.cpp:263)\r\n2020-01-08T09:17:17.5691852Z ^[[32m[09:17:16|Debug] ^[[0mNew: System ID: 1 Comp ID: 1 (mavsdk_impl.cpp:390)\r\n2020-01-08T09:17:17.5693457Z ^[[32m[09:17:16|Debug] ^[[0mComponent Autopilot (1) added. (system_impl.cpp:401)\r\n2020-01-08T09:17:17.5695027Z ^[[32m[09:17:16|Debug] ^[[0mDiscovered 1 component(s) (UUID: 5283920058631409231) (system_impl.cpp:561)\r\n2020-01-08T09:17:17.6946324Z Waiting for system to be ready\r\n2020-01-08T09:17:17.7019392Z ^[[32m[09:17:17|Debug] ^[[0mMAVLink: info: Takeoff to 10.0 meters above home. (system_impl.cpp:308)\r\n2020-01-08T09:17:19.7013436Z ===============================================================================\r\n2020-01-08T09:17:19.7014022Z test cases:  1 |  0 passed | 1 failed\r\n2020-01-08T09:17:19.7014257Z assertions: 23 | 21 passed | 2 failed\r\n```\r\n\r\nThanks to @jkflying for raising this.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13884/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13873","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13873/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13873/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13873/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13873","id":545942321,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU5NzE2MDUx","number":13873,"title":"Fix and add warnings for RTL with invalid landing","user":{"login":"Kjkinney","id":24501673,"node_id":"MDQ6VXNlcjI0NTAxNjcz","avatar_url":"https://avatars.githubusercontent.com/u/24501673?v=4","gravatar_id":"","url":"https://api.github.com/users/Kjkinney","html_url":"https://github.com/Kjkinney","followers_url":"https://api.github.com/users/Kjkinney/followers","following_url":"https://api.github.com/users/Kjkinney/following{/other_user}","gists_url":"https://api.github.com/users/Kjkinney/gists{/gist_id}","starred_url":"https://api.github.com/users/Kjkinney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kjkinney/subscriptions","organizations_url":"https://api.github.com/users/Kjkinney/orgs","repos_url":"https://api.github.com/users/Kjkinney/repos","events_url":"https://api.github.com/users/Kjkinney/events{/privacy}","received_events_url":"https://api.github.com/users/Kjkinney/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"},{"id":1443093719,"node_id":"MDU6TGFiZWwxNDQzMDkzNzE5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Failsafe","name":"Failsafe","color":"1f7c00","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-01-06T21:13:01Z","updated_at":"2021-12-21T08:36:25Z","closed_at":"2021-12-21T08:36:25Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13873","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13873","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13873.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13873.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nCurrently RTL skips this segment of code which displays an error if the vehicle is unable to use the mission.:\r\n`} else {\r\n\t\t\t\t// Otherwise use regular RTL.\r\n\t\t\t\tmavlink_log_critical(_navigator->get_mavlink_log_pub(), \"RTL: unable to use mission landing\");\r\n\t\t\t}`\r\nWe have also ran into issues with users missing this initial message. This has lead to users being confused as to why the fixedwing vehicle is not landing. \r\n\r\n**Describe your solution**\r\nThis gets rid of the dead code introduced previously, and fixes the bug with the warning message not being displayed. It also adds a message that displays every 30 seconds warning the user that the vehicle cannot use the mission landing. \r\n\r\n**Describe possible alternatives**\r\nThe best alternative would be to reject invalid missions and keep the current valid mission on the vehicle. This would get rid of an invalid landing being uploaded to the vehicle.  \r\n\r\n**Test data / coverage**\r\nThis was tested in SITL\r\nhttps://review.px4.io/plot_app?log=cfa987ce-62c4-4a50-b018-ca3456d892c3\r\n\r\nA version of this has also been in use on our Fixedwing vehicles since August. \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13873/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13869","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13869/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13869/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13869/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13869","id":545777150,"node_id":"MDU6SXNzdWU1NDU3NzcxNTA=","number":13869,"title":"MAVSDK tests only multicopter","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-06T15:12:55Z","updated_at":"2020-04-06T15:03:07Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The MAVSDK tests claim to test multicopter, VTOL, and fixedwing but it's all multicopter so far from what I can tell. This needs to be improved.\r\n\r\nFYI @LorenzMeier ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13869/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13868","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13868/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13868/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13868/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13868","id":545760106,"node_id":"MDU6SXNzdWU1NDU3NjAxMDY=","number":13868,"title":"SITL issues","user":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-01-06T14:39:03Z","updated_at":"2020-01-07T07:41:44Z","closed_at":"2020-01-06T15:47:21Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Throwing in some things I noticed when testing in SITL with jmavsim on lastest master.\r\n\r\n\r\n\r\n- [x] console hangs when you do a \"sensors stop\"\r\nAccording to @julianoes this is expected as everything stops due to lockstep stopping\r\n\r\n- [ ]  If you stop the simulator from publishing mag data and then try to takeoff you get a PreflightFail indicating that there is no valid mag data. But the system does not stop you from taking off, is this intentionally?\r\n\r\nFurthermore, I tried to debug first issue using gdb but had not luck getting something to work.\r\n\r\n![image](https://user-images.githubusercontent.com/7610489/71824773-63cad700-30ab-11ea-8f6a-73c5c9ccf13d.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13868/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13856","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13856/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13856/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13856/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13856","id":545466740,"node_id":"MDU6SXNzdWU1NDU0NjY3NDA=","number":13856,"title":"Intel Aero build configuration problem","user":{"login":"altshuler","id":27805917,"node_id":"MDQ6VXNlcjI3ODA1OTE3","avatar_url":"https://avatars.githubusercontent.com/u/27805917?v=4","gravatar_id":"","url":"https://api.github.com/users/altshuler","html_url":"https://github.com/altshuler","followers_url":"https://api.github.com/users/altshuler/followers","following_url":"https://api.github.com/users/altshuler/following{/other_user}","gists_url":"https://api.github.com/users/altshuler/gists{/gist_id}","starred_url":"https://api.github.com/users/altshuler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/altshuler/subscriptions","organizations_url":"https://api.github.com/users/altshuler/orgs","repos_url":"https://api.github.com/users/altshuler/repos","events_url":"https://api.github.com/users/altshuler/events{/privacy}","received_events_url":"https://api.github.com/users/altshuler/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2020-01-05T21:06:35Z","updated_at":"2020-02-08T20:22:42Z","closed_at":"2020-02-08T20:22:42Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhile building Intel Aero default configuration on latest master\r\nstrange behavior observed. Created build/intel_aerofc-v1_default\r\nfolder, but inside modalai_fc-v1_default.px4     modalai_fc-v1_default.elf    and     \r\nmodalai_fc-v1_default.map   binary files  generated.\r\nSame behavior seen on v1.10.0.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nissue     **make intel_aerofc-v1_default**    command\r\n\r\n**Expected behavior**\r\nCorrect binaries generation for intel_aerofc-v1_default configuration\r\n\r\n**Log Files and Screenshots**\r\nevgeny@quad:~/Firmware$ make intel_aerofc-v1_default\r\n-- PX4 version: v1.11.0-beta1-144-g5dfc8f1\r\n-- PX4 config file: /home/evgeny/Firmware/boards/modalai/fc-v1/default.cmake\r\n-- PX4 config: modalai_fc-v1_default\r\n-- PX4 platform: nuttx\r\n-- cmake build type: MinSizeRel\r\n-- The CXX compiler identification is GNU 7.2.1\r\n-- The C compiler identification is GNU 7.2.1\r\n-- The ASM compiler identification is GNU\r\n-- Found assembler: /home/evgeny/gcc-arm-none-eabi-7-2017-q4-major/bin/arm-none-eabi-gcc\r\n-- Check for working CXX compiler using: Ninja\r\n-- Check for working CXX compiler using: Ninja -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Check for working C compiler using: Ninja\r\n-- Check for working C compiler using: Ninja -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Enabling double FP precision hardware instructions\r\n-- Found PythonInterp: /usr/bin/python (found version \"2.7.12\") \r\n-- Found PY_jinja2: /usr/local/lib/python2.7/dist-packages/jinja2  \r\n-- PX4 ECL: Very lightweight Estimation & Control Library v1.9.0-rc1-107-g1813034\r\n-- Using C++11\r\n-- Release build type: MinSizeRel\r\n-- ROMFS: px4fmu_common\r\n-- ROMFS: Adding rc.board_defaults\r\n-- ROMFS: Adding rc.board_sensors\r\n-- ROMFS: Adding rc.board_mavlink\r\n-- Found SVD: \r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /home/evgeny/Firmware/build/intel_aerofc-v1_default\r\n[1/1236] git submodule platforms/nuttx/NuttX/nuttx\r\n[11/1236] git submodule platforms/nuttx/NuttX/apps\r\n[12/1236] git submodule src/lib/ecl\r\n[15/1236] git submodule src/drivers/gps/devices\r\n[16/1236] git submodule src/drivers/uavcan/libuavcan\r\n[18/1236] git submodule mavlink/include/mavlink/v2.0\r\n[1234/1236] Linking CXX executable modalai_fc-v1_default.elf\r\nMemory region         Used Size  Region Size  %age Used\r\n            itcm:          0 GB      2016 KB      0.00%\r\n           flash:     1614593 B      2016 KB     78.21%\r\n            dtcm:          0 GB       128 KB      0.00%\r\n           sram1:       47304 B       368 KB     12.55%\r\n           sram2:          0 GB        16 KB      0.00%\r\n[1236/1236] Creating /home/evgeny/Firm...c-v1_default/modalai_fc-v1_default.px4\r\n\r\n\r\n**Drone (please complete the following information):**\r\nINTEL AERO RTF","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13856/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13843","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13843/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13843/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13843/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13843","id":545301324,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU5MjI1MTY3","number":13843,"title":"mpu9250: fix error return on reset fail","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-04T16:06:40Z","updated_at":"2020-01-04T16:41:58Z","closed_at":"2020-01-04T16:41:57Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13843","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13843","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13843.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13843.patch","merged_at":"2020-01-04T16:41:57Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13843/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13832","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13832/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13832/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13832/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13832","id":544863828,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU4ODgzMTU0","number":13832,"title":"fix bug if speed reach minium during ramp","user":{"login":"jinchengde","id":5361334,"node_id":"MDQ6VXNlcjUzNjEzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5361334?v=4","gravatar_id":"","url":"https://api.github.com/users/jinchengde","html_url":"https://github.com/jinchengde","followers_url":"https://api.github.com/users/jinchengde/followers","following_url":"https://api.github.com/users/jinchengde/following{/other_user}","gists_url":"https://api.github.com/users/jinchengde/gists{/gist_id}","starred_url":"https://api.github.com/users/jinchengde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinchengde/subscriptions","organizations_url":"https://api.github.com/users/jinchengde/orgs","repos_url":"https://api.github.com/users/jinchengde/repos","events_url":"https://api.github.com/users/jinchengde/events{/privacy}","received_events_url":"https://api.github.com/users/jinchengde/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-03T06:08:23Z","updated_at":"2020-01-04T15:55:26Z","closed_at":"2020-01-04T15:55:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13832","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13832","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13832.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13832.patch","merged_at":"2020-01-04T15:55:26Z"},"body":"1. set parameter _param_rwto_ramp_time to 10s\r\n2. set minium speed for takeoff 10m/s\r\n3. start to takeoff and the speed reached 9m/s in 5s\r\n4. need to change the stage to CLAMPED_TO_RUNWAY","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13832/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13826","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13826/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13826/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13826/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13826","id":544391204,"node_id":"MDU6SXNzdWU1NDQzOTEyMDQ=","number":13826,"title":"PARAM_SET in SITL take a second on Mac OS","user":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"assignees":[{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-01-01T19:39:56Z","updated_at":"2020-06-26T11:39:13Z","closed_at":"2020-06-26T11:39:13Z","author_association":"MEMBER","active_lock_reason":null,"body":"This points to something being off with locking or priorities (and not just on Mac OS, but it is just showing there).","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13826/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13822","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13822/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13822/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13822/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13822","id":544190764,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU4MzU4OTYy","number":13822,"title":"RTPS compile error  because of FASTRTPSGEN_DIR","user":{"login":"stmoon","id":3262128,"node_id":"MDQ6VXNlcjMyNjIxMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3262128?v=4","gravatar_id":"","url":"https://api.github.com/users/stmoon","html_url":"https://github.com/stmoon","followers_url":"https://api.github.com/users/stmoon/followers","following_url":"https://api.github.com/users/stmoon/following{/other_user}","gists_url":"https://api.github.com/users/stmoon/gists{/gist_id}","starred_url":"https://api.github.com/users/stmoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stmoon/subscriptions","organizations_url":"https://api.github.com/users/stmoon/orgs","repos_url":"https://api.github.com/users/stmoon/repos","events_url":"https://api.github.com/users/stmoon/events{/privacy}","received_events_url":"https://api.github.com/users/stmoon/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":661334604,"node_id":"MDU6TGFiZWw2NjEzMzQ2MDQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/rtps%20(depreciated)","name":"rtps (depreciated)","color":"0087B3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-12-31T13:35:25Z","updated_at":"2020-01-10T16:48:31Z","closed_at":"2020-01-10T16:48:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13822","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13822","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13822.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13822.patch","merged_at":"2020-01-10T16:48:22Z"},"body":"I found compile error happens when there is no \"FASTRTPSGEN_DIR\" environment variable for RTPS.\r\nEspecially, the environment variable is not set, if the fastrtpsgen is installed by binary files.\r\n\r\nTo solve this problem, I check and insert the fastrtpsgen path automatically in python code.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13822/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13822/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13819","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13819/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13819/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13819/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13819","id":543996666,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU4MjA0MTIx","number":13819,"title":"drivers/adc: start WQ cycle on init","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1424478923,"node_id":"MDU6TGFiZWwxNDI0NDc4OTIz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk:%20fmu-v5x","name":"pixhawk: fmu-v5x","color":"b60205","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-12-30T20:07:38Z","updated_at":"2019-12-31T12:42:45Z","closed_at":"2019-12-31T12:42:44Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13819","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13819","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13819.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13819.patch","merged_at":"2019-12-31T12:42:44Z"},"body":"The adc periodic ORB publications (`adc_report` and `system_power`) weren't started until the first open of `/dev/adc0`. On boards without analog power bricks (eg fmu-v5x) the adc device might never be opened, which means the cycle wouldn't be started.\r\n\r\nLater we should probably extract `system_power` from drivers/adc entirely.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13819/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13818","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13818/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13818/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13818/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13818","id":543910324,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU4MTM2ODY1","number":13818,"title":"posix I2C::init() should also probe() (sync with NuttX)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":326832167,"node_id":"MDU6TGFiZWwzMjY4MzIxNjc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hardware:%20raspberry%20pi%20%F0%9F%8D%93","name":"hardware: raspberry pi 🍓","color":"867624","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-12-30T15:07:13Z","updated_at":"2019-12-30T15:37:09Z","closed_at":"2019-12-30T15:37:08Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13818","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13818","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13818.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13818.patch","merged_at":"2019-12-30T15:37:08Z"},"body":"I noticed this was missing in https://github.com/PX4/Firmware/pull/13814.\r\n\r\n@SalimTerryLi ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13818/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13799","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13799/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13799/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13799/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13799","id":543283554,"node_id":"MDU6SXNzdWU1NDMyODM1NTQ=","number":13799,"title":"Offboard Mode not Switching after Arming","user":{"login":"hsilvaga","id":29446797,"node_id":"MDQ6VXNlcjI5NDQ2Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/29446797?v=4","gravatar_id":"","url":"https://api.github.com/users/hsilvaga","html_url":"https://github.com/hsilvaga","followers_url":"https://api.github.com/users/hsilvaga/followers","following_url":"https://api.github.com/users/hsilvaga/following{/other_user}","gists_url":"https://api.github.com/users/hsilvaga/gists{/gist_id}","starred_url":"https://api.github.com/users/hsilvaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsilvaga/subscriptions","organizations_url":"https://api.github.com/users/hsilvaga/orgs","repos_url":"https://api.github.com/users/hsilvaga/repos","events_url":"https://api.github.com/users/hsilvaga/events{/privacy}","received_events_url":"https://api.github.com/users/hsilvaga/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442618266,"node_id":"MDU6TGFiZWwxNDQyNjE4MjY2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Offboard","name":"Offboard","color":"d8954e","default":false,"description":"Offboard mode control"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-12-28T21:37:28Z","updated_at":"2021-08-30T11:52:26Z","closed_at":"2021-08-30T11:52:26Z","author_association":"NONE","active_lock_reason":null,"body":"Issue: Switching to offboard after arming sets off error on real-world Drone, however switching straight into offboard is possible\r\n\r\nSteps:\r\n1. ROS_Node is run that:\r\n       1.Arms drone\r\n       2. Then sends stream of setpoints \r\n       3. Switches to offboard mode\r\n2. Warning is displayed on PX4 log\r\n      [ WARN] [1577568026.571076614]: CMD: Unexpected command 176, result 0\r\n3. While the drone is still armed and receiving setpoints, switching to offboard via RC is possible but exits after a split second.\r\n\r\n\r\nPX4 LOG:\r\n```\r\nNODES\r\n  /\r\n    mavros (mavros/mavros_node)\r\n\r\nauto-starting new master\r\nprocess[master]: started with pid [9871]\r\nROS_MASTER_URI=http://localhost:11311\r\n\r\nsetting /run_id to ae23efc6-29b7-11ea-8058-00044be6704f\r\nWARNING: Package name \"Drone\" does not follow the naming conventions. It should start with a lower case letter and only contain lower case letters, digits, underscores, and dashes.\r\nWARNING: Package name \"schoolThings\" does not follow the naming conventions. It should start with a lower case letter and only contain lower case letters, digits, underscores, and dashes.\r\nprocess[rosout-1]: started with pid [9882]\r\nstarted core service [/rosout]\r\nprocess[mavros-2]: started with pid [9890]\r\n[ INFO] [1577567950.983533636]: FCU URL: /dev/ttyACM0:57600\r\n[ INFO] [1577567950.993841604]: serial0: device: /dev/ttyACM0 @ 57600 bps\r\n[ INFO] [1577567950.996088252]: GCS bridge disabled\r\n[ INFO] [1577567951.195053799]: Plugin 3dr_radio loaded\r\n[ INFO] [1577567951.205287286]: Plugin 3dr_radio initialized\r\n[ INFO] [1577567951.205849430]: Plugin actuator_control loaded\r\n[ INFO] [1577567951.218821136]: Plugin actuator_control initialized\r\n[ INFO] [1577567951.349121587]: Plugin adsb loaded\r\n[ INFO] [1577567951.360487747]: Plugin adsb initialized\r\n[ INFO] [1577567951.361059891]: Plugin altitude loaded\r\n[ INFO] [1577567951.364989586]: Plugin altitude initialized\r\n[ INFO] [1577567951.365421988]: Plugin cam_imu_sync loaded\r\n[ INFO] [1577567951.367913849]: Plugin cam_imu_sync initialized\r\n[ INFO] [1577567951.368404637]: Plugin command loaded\r\n[ INFO] [1577567951.387956755]: Plugin command initialized\r\n[ INFO] [1577567951.388408532]: Plugin companion_process_status loaded\r\n[ INFO] [1577567951.393551110]: Plugin companion_process_status initialized\r\n[ INFO] [1577567951.393931220]: Plugin debug_value loaded\r\n[ INFO] [1577567951.405495612]: Plugin debug_value initialized\r\n[ INFO] [1577567951.405627437]: Plugin distance_sensor blacklisted\r\n[ INFO] [1577567951.406209217]: Plugin fake_gps loaded\r\n[ INFO] [1577567951.434577196]: Plugin fake_gps initialized\r\n[ INFO] [1577567951.435246633]: Plugin ftp loaded\r\n[ INFO] [1577567951.457281027]: Plugin ftp initialized\r\n[ INFO] [1577567951.457754368]: Plugin global_position loaded\r\n[ INFO] [1577567951.496433856]: Plugin global_position initialized\r\n[ INFO] [1577567951.496840737]: Plugin gps_rtk loaded\r\n[ INFO] [1577567951.502291809]: Plugin gps_rtk initialized\r\n[ INFO] [1577567951.502772858]: Plugin hil loaded\r\n[ INFO] [1577567951.535181679]: Plugin hil initialized\r\n[ INFO] [1577567951.535688874]: Plugin home_position loaded\r\n[ INFO] [1577567951.545151777]: Plugin home_position initialized\r\n[ INFO] [1577567951.545810537]: Plugin imu loaded\r\n[ INFO] [1577567951.564496287]: Plugin imu initialized\r\n[ INFO] [1577567951.565104525]: Plugin landing_target loaded\r\n[ INFO] [1577567951.607008645]: Plugin landing_target initialized\r\n[ INFO] [1577567951.607483444]: Plugin local_position loaded\r\n[ INFO] [1577567951.622882426]: Plugin local_position initialized\r\n[ INFO] [1577567951.623460039]: Plugin log_transfer loaded\r\n[ INFO] [1577567951.633395970]: Plugin log_transfer initialized\r\n[ INFO] [1577567951.633889258]: Plugin manual_control loaded\r\n[ INFO] [1577567951.640757330]: Plugin manual_control initialized\r\n[ INFO] [1577567951.641162076]: Plugin mocap_pose_estimate loaded\r\n[ INFO] [1577567951.649337303]: Plugin mocap_pose_estimate initialized\r\n[ INFO] [1577567951.650025907]: Plugin mount_control loaded\r\n[ INFO] [1577567951.659725897]: Plugin mount_control initialized\r\n[ INFO] [1577567951.660209498]: Plugin obstacle_distance loaded\r\n[ INFO] [1577567951.667647579]: Plugin obstacle_distance initialized\r\n[ INFO] [1577567951.668090138]: Plugin odom loaded\r\n[ INFO] [1577567951.678262270]: Plugin odom initialized\r\n[ INFO] [1577567951.678733839]: Plugin onboard_computer_status loaded\r\n[ INFO] [1577567951.685217322]: Plugin onboard_computer_status initialized\r\n[ INFO] [1577567951.685845353]: Plugin param loaded\r\n[ INFO] [1577567951.695682949]: Plugin param initialized\r\n[ INFO] [1577567951.696142018]: Plugin px4flow loaded\r\n[ INFO] [1577567951.711075160]: Plugin px4flow initialized\r\n[ INFO] [1577567951.711207089]: Plugin rangefinder blacklisted\r\n[ INFO] [1577567951.711747565]: Plugin rc_io loaded\r\n[ INFO] [1577567951.721560994]: Plugin rc_io initialized\r\n[ INFO] [1577567951.721872822]: Plugin safety_area blacklisted\r\n[ INFO] [1577567951.722344131]: Plugin setpoint_accel loaded\r\n[ INFO] [1577567951.729847734]: Plugin setpoint_accel initialized\r\n[ INFO] [1577567951.730641131]: Plugin setpoint_attitude loaded\r\n[ INFO] [1577567951.754769307]: Plugin setpoint_attitude initialized\r\n[ INFO] [1577567951.755314680]: Plugin setpoint_position loaded\r\n[ INFO] [1577567951.792490916]: Plugin setpoint_position initialized\r\n[ INFO] [1577567951.793004986]: Plugin setpoint_raw loaded\r\n[ INFO] [1577567951.814774845]: Plugin setpoint_raw initialized\r\n[ INFO] [1577567951.815367042]: Plugin setpoint_trajectory loaded\r\n[ INFO] [1577567951.828349581]: Plugin setpoint_trajectory initialized\r\n[ INFO] [1577567951.828841255]: Plugin setpoint_velocity loaded\r\n[ INFO] [1577567951.842054995]: Plugin setpoint_velocity initialized\r\n[ INFO] [1577567951.843149752]: Plugin sys_status loaded\r\n[ INFO] [1577567951.870197398]: Plugin sys_status initialized\r\n[ INFO] [1577567951.870785272]: Plugin sys_time loaded\r\n[ INFO] [1577567951.885222833]: TM: Timesync mode: MAVLINK\r\n[ INFO] [1577567951.888833200]: Plugin sys_time initialized\r\n[ INFO] [1577567951.889287217]: Plugin trajectory loaded\r\n[ INFO] [1577567951.901037967]: Plugin trajectory initialized\r\n[ INFO] [1577567951.901510422]: Plugin vfr_hud loaded\r\n[ INFO] [1577567951.903667694]: Plugin vfr_hud initialized\r\n[ INFO] [1577567951.903790768]: Plugin vibration blacklisted\r\n[ INFO] [1577567951.904182753]: Plugin vision_pose_estimate loaded\r\n[ INFO] [1577567951.921912083]: Plugin vision_pose_estimate initialized\r\n[ INFO] [1577567951.922364329]: Plugin vision_speed_estimate loaded\r\n[ INFO] [1577567951.930803779]: Plugin vision_speed_estimate initialized\r\n[ INFO] [1577567951.931347746]: Plugin waypoint loaded\r\n[ INFO] [1577567951.946356617]: Plugin waypoint initialized\r\n[ INFO] [1577567951.946555422]: Plugin wheel_odometry blacklisted\r\n[ INFO] [1577567951.946993710]: Plugin wind_estimation loaded\r\n[ INFO] [1577567951.949341246]: Plugin wind_estimation initialized\r\n[ INFO] [1577567951.949515519]: Autostarting mavlink via USB on PX4\r\n[ INFO] [1577567951.949883858]: Built-in SIMD instructions: ARM NEON\r\n[ INFO] [1577567951.949976047]: Built-in MAVLink package version: 2019.12.12\r\n[ INFO] [1577567951.950076465]: Known MAVLink dialects: common ardupilotmega ASLUAV autoquad icarous matrixpilot paparazzi slugs standard uAvionix ualberta\r\n[ INFO] [1577567951.950150789]: MAVROS started. MY ID 1.240, TARGET ID 1.1\r\n[ INFO] [1577567951.968636432]: IMU: High resolution IMU detected!\r\n[ INFO] [1577567951.970489637]: IMU: Attitude quaternion IMU detected!\r\n[ INFO] [1577567951.993582432]: RC_CHANNELS message detected!\r\n[ INFO] [1577567952.201876088]: CON: Got HEARTBEAT, connected. FCU: PX4 Autopilot\r\n[ INFO] [1577567952.211798008]: IMU: High resolution IMU detected!\r\n[ INFO] [1577567952.213290322]: IMU: Attitude quaternion IMU detected!\r\n[ INFO] [1577567952.240405106]: RC_CHANNELS message detected!\r\n[ERROR] [1577567952.856373856]: FCU: REJECT POSITION CONTROL\r\n[ERROR] [1577567952.907173683]: FCU: Manual control lost\r\n[ INFO] [1577567952.955694726]: FCU: Manual control regained after 669ms\r\n[ERROR] [1577567953.005133803]: FCU: Manual control lost\r\n[ INFO] [1577567953.056567233]: FCU: Manual control regained after 588ms\r\n[ INFO] [1577567953.216666518]: VER: 1.1: Capabilities         0x000000000000e4ef\r\n[ INFO] [1577567953.218138936]: VER: 1.1: Flight software:     010a00ff (4f6faac2c8000000)\r\n[ INFO] [1577567953.220683297]: VER: 1.1: Middleware software: 010a00ff (4f6faac2c8000000)\r\n[ INFO] [1577567953.222034515]: VER: 1.1: OS software:         071d00ff (427238133be2b0ec)\r\n[ INFO] [1577567953.223093281]: VER: 1.1: Board hardware:      00000011\r\n[ INFO] [1577567953.223882147]: VER: 1.1: VID/PID:             26ac:0011\r\n[ INFO] [1577567953.225017008]: VER: 1.1: UID:                 3337510e31303337\r\n[ WARN] [1577567953.225645507]: CMD: Unexpected command 520, result 0\r\n[ INFO] [1577567955.492892913]: FCU: Manual control regained after 3890ms\r\n[ WARN] [1577567956.340414471]: GP: No GPS fix\r\n[ INFO] [1577567962.203184899]: HP: requesting home position\r\n[ INFO] [1577567967.215087572]: WP: mission received\r\n[ INFO] [1577567972.203889482]: HP: requesting home position\r\n[ INFO] [1577567982.202857996]: HP: requesting home position\r\n[ WARN] [1577567986.446954895]: GP: No GPS fix\r\n[ INFO] [1577567992.203256429]: HP: requesting home position\r\n[ INFO] [1577567999.609928479]: FCU: [logger] file: /fs/microsd/log/2019-12-28/21_19_5\r\n[ INFO] [1577568002.203472254]: HP: requesting home position\r\n[ INFO] [1577568012.203384429]: HP: requesting home position\r\n[ WARN] [1577568016.455092484]: GP: No GPS fix\r\n[ INFO] [1577568018.183989078]: FCU: ARMED by Arm/Disarm component command\r\n[ INFO] [1577568018.230233264]: FCU: [logger] file: /fs/microsd/log/2019-12-28/21_20_1\r\n[ INFO] [1577568022.202710866]: HP: requesting home position\r\n[ WARN] [1577568026.571076614]: CMD: Unexpected command 176, result 0\r\n[ INFO] [1577568028.180467556]: FCU: DISARMED by Auto disarm initiated\r\n[ INFO] [1577568032.202880597]: HP: requesting home position\r\n[ INFO] [1577568042.203011109]: HP: requesting home position\r\n^C[mavros-2] killing on exit\r\nDebug:   mavconn: serial0: recv: v2.0 !CRC Message-Id: 111 [13 bytes] IDs: 1.1 Seq: 147\r\nDebug:   mavconn: serial0: recv: v2.0 !CRC Message-Id: 65 [42 bytes] IDs: 1.1 Seq: 148\r\nDebug:   mavconn: serial0: recv: v2.0 !CRC Message-Id: 141 [32 bytes] IDs: 1.1 Seq: 149\r\n[rosout-1] killing on exit\r\n[master] killing on exit\r\nshutting down processing monitor...\r\n... shutting down processing monitor complete\r\ndone\r\n```\r\nDrone Description:\r\n-QuadCopter\r\n-PX4 \r\n-Jetson Nano companion\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n\r\n**Code used for the ROS_NODE works in Gazebo simulation","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13799/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13793","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13793/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13793/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13793/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13793","id":542746763,"node_id":"MDU6SXNzdWU1NDI3NDY3NjM=","number":13793,"title":"Altitude Fluctuation in Constant-Altitude Missions","user":{"login":"jordancoult","id":33331023,"node_id":"MDQ6VXNlcjMzMzMxMDIz","avatar_url":"https://avatars.githubusercontent.com/u/33331023?v=4","gravatar_id":"","url":"https://api.github.com/users/jordancoult","html_url":"https://github.com/jordancoult","followers_url":"https://api.github.com/users/jordancoult/followers","following_url":"https://api.github.com/users/jordancoult/following{/other_user}","gists_url":"https://api.github.com/users/jordancoult/gists{/gist_id}","starred_url":"https://api.github.com/users/jordancoult/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordancoult/subscriptions","organizations_url":"https://api.github.com/users/jordancoult/orgs","repos_url":"https://api.github.com/users/jordancoult/repos","events_url":"https://api.github.com/users/jordancoult/events{/privacy}","received_events_url":"https://api.github.com/users/jordancoult/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":594107991,"node_id":"MDU6TGFiZWw1OTQxMDc5OTE=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/State%20Estimation","name":"State Estimation","color":"006b75","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-12-27T05:10:18Z","updated_at":"2022-08-15T13:31:33Z","closed_at":"2022-08-15T13:31:32Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen flying a basic mission with constant-altitude waypoints, the drone’s altitude erroneously fluctuates. Our use-case requires a much more reliable altitude for precision deployment of sensors. Let me know if you can/can't reproduce this issue.\r\n\r\n![altitudegrpah2](https://user-images.githubusercontent.com/33331023/71501357-f2736480-281e-11ea-87d5-d1f1c158680b.PNG)\r\n\r\nNotice how the estimated altitude doesn't follow the setpoint altitude in mission mode (purple region), but it follows exactly in position mode (green region). This shows that the instruments and sensors are capable of producing altitude-accurate flight.\r\n\r\nI also posted this issue here: [https://discuss.px4.io/t/altitude-fluctuation-in-missions/14416](url)\r\n\r\n**To Reproduce**\r\n1. Use Pixhawk1 or Pixhawk Cube with 1.8.2, 1.9.2, or 1.10 firmware\r\n2. Upload mission detailed below\r\n3. Take off and start mission\r\n4. See drone fluctuate 1-2 meters from setpoint.\r\n\r\nMission:\r\n\r\nMission Start - 0m\r\nTakeoff - 8m rel to home\r\nWaypoint - 8m rel to home, 5sec hold\r\nWaypoint - 8m rel to home, 5sec hold\r\nWaypoint - 8m rel to home\r\nWaypoint - 8m rel to home\r\nWaypoint - 8m rel to home\r\nWaypoint - 8m rel to home\r\n\r\n**Expected behavior**\r\nI expect the drone's altitude to follow the setpoint altitude in mission mode with the same accuracy as position mode.\r\n\r\n**Log Files Analysis**\r\n[https://review.px4.io/plot_app?log=624517a3-9159-415c-8974-4fc790206f6f](url)\r\nMore log files for different missions are available upon request. They have all resulted in the same issue--despite using different setpoint altitudes and types of waypoints.\r\n\r\n**Drone**\r\nThis problem was reproduced on two drones; a Flamewheel 450 and a custom drone that is much larger--about 1 meter span between opposite motors. We tried multiple configurations for each drone consisting of Pixhawk 1, Pixhawk Cube, v1.8.2 PX4 and v1.9.2 PX4. For each Pixhawk, we used the standard recommended GPS. Both drones were adequately powered.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13793/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13788","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13788/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13788/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13788/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13788","id":542375080,"node_id":"MDU6SXNzdWU1NDIzNzUwODA=","number":13788,"title":"Intermittent arming and flying issues in mission mode even with position lock","user":{"login":"myeabhishek","id":24542655,"node_id":"MDQ6VXNlcjI0NTQyNjU1","avatar_url":"https://avatars.githubusercontent.com/u/24542655?v=4","gravatar_id":"","url":"https://api.github.com/users/myeabhishek","html_url":"https://github.com/myeabhishek","followers_url":"https://api.github.com/users/myeabhishek/followers","following_url":"https://api.github.com/users/myeabhishek/following{/other_user}","gists_url":"https://api.github.com/users/myeabhishek/gists{/gist_id}","starred_url":"https://api.github.com/users/myeabhishek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myeabhishek/subscriptions","organizations_url":"https://api.github.com/users/myeabhishek/orgs","repos_url":"https://api.github.com/users/myeabhishek/repos","events_url":"https://api.github.com/users/myeabhishek/events{/privacy}","received_events_url":"https://api.github.com/users/myeabhishek/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-12-25T18:46:35Z","updated_at":"2020-03-30T11:31:01Z","closed_at":"2020-03-30T11:31:01Z","author_association":"NONE","active_lock_reason":null,"body":"Hi team, I have been using PX4 since last 3 years. I have been facing intermittent issues with arming and flying in mission mode across various versions.\r\n\r\nThe exact use case is:\r\n\r\nAfter uploding a valid mission on the drone, I try to start mission using qgroundcontrol. I have observed following intermittent issues with this:\r\n\r\n1. Drone fails to arm with EKF internal checks errors. I adjusted COM_ARM parameters but still I face issues even with proper calibration of all sensors.\r\n2. Drone gets armed but fails to switch to mission mode therefore automatically disarms after 5 seconds as defined in the params.\r\n3. Drone armed, mode is switched to mission but the drone doesnt fly.\r\n\r\nI face these issues only intermittently. Ideally it does fly. I am looking for more reliability wherein my drone flies each time or atleast gives meaningful errors which can be comprehended. \r\n\r\nI can look and fix the issues, I just need some pointers onto where the issue could lie. \r\n\r\nThankyou in advance.\r\n\r\nHardware details:\r\nPixhawk 2\r\nHere 2\r\n\r\nSoftware details:\r\nPX4 firmware: V1.7.2\r\nMulticopter\r\nGcs: qgroundcontrol\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13788/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13787","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13787/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13787/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13787/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13787","id":542198259,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU2NjkxNjIx","number":13787,"title":"To test [PX4/NuttX] [BACKPORT] STM32F7 and STM32H7 SDMMC internal pull up usage fixed (#78)","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-12-24T19:27:40Z","updated_at":"2020-01-09T04:53:24Z","closed_at":"2020-01-08T17:23:03Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13787","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13787","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13787.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13787.patch","merged_at":"2020-01-08T17:23:03Z"},"body":"This is to test the F7 and H7 boards in the PR\r\n\r\n -   Code was flawed in that the Pins are defined with the\r\n   pullups in the definition. Since there are no alterntes pins\r\n   there is no way to remove them. So not enabling the CONFIG\r\n   pull up did nothing as did enabling them.\r\n\r\n -  This is now a compile time feature as there was no reason for\r\n   it to be a run time. It wasted both flash and ram.\r\n\r\n  - The code ignored the use of D0 for ready detection causing\r\n   3X+ the chatter.\r\n\r\nNo Internal PU and 100K External Note 2.5 us of chatter\r\n \r\n![image](https://user-images.githubusercontent.com/1945821/71418551-d3f34a80-261f-11ea-990c-d4552cbaaff3.png)\r\n\r\nWith Internal PU and 100K External Note 0.7 us of chatter\r\n \r\n![image](https://user-images.githubusercontent.com/1945821/71420060-ea050900-2627-11ea-9d6a-6be066a3ef29.png)\r\n\r\nFlash & RAM Prior PR\r\n```\r\n            itcm:          0 GB      2016 KB      0.00%\r\n           flash:     1713705 B      2016 KB     83.01%\r\n            dtcm:          0 GB       128 KB      0.00%\r\n           sram1:       44616 B       368 KB     11.84%\r\n           sram2:          0 GB        16 KB      0.00%\r\n```\r\nFlash & RAM This PR\r\n```\r\nMemory region         Used Size  Region Size  %age Used\r\n            itcm:          0 GB      2016 KB      0.00%\r\n           flash:     1713677 B      2016 KB     83.01%\r\n            dtcm:          0 GB       128 KB      0.00%\r\n           sram1:       44616 B       368 KB     11.84%\r\n           sram2:          0 GB        16 KB      0.00%\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13787/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13781","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13781/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13781/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13781/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13781","id":542110461,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU2NjE5NTU4","number":13781,"title":"MPU9250 failed to start its AK8963 via internal SPI to I2C bridge","user":{"login":"SalimTerryLi","id":10492472,"node_id":"MDQ6VXNlcjEwNDkyNDcy","avatar_url":"https://avatars.githubusercontent.com/u/10492472?v=4","gravatar_id":"","url":"https://api.github.com/users/SalimTerryLi","html_url":"https://github.com/SalimTerryLi","followers_url":"https://api.github.com/users/SalimTerryLi/followers","following_url":"https://api.github.com/users/SalimTerryLi/following{/other_user}","gists_url":"https://api.github.com/users/SalimTerryLi/gists{/gist_id}","starred_url":"https://api.github.com/users/SalimTerryLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SalimTerryLi/subscriptions","organizations_url":"https://api.github.com/users/SalimTerryLi/orgs","repos_url":"https://api.github.com/users/SalimTerryLi/repos","events_url":"https://api.github.com/users/SalimTerryLi/events{/privacy}","received_events_url":"https://api.github.com/users/SalimTerryLi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":326832167,"node_id":"MDU6TGFiZWwzMjY4MzIxNjc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hardware:%20raspberry%20pi%20%F0%9F%8D%93","name":"hardware: raspberry pi 🍓","color":"867624","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-12-24T12:13:24Z","updated_at":"2020-01-04T03:29:47Z","closed_at":"2020-01-04T03:29:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13781","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13781","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13781.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13781.patch","merged_at":"2020-01-04T03:29:47Z"},"body":"This is a bug report which contains a further hacked result, not to be merged.\r\n\r\nThis is the version that I have modified something to get MPU9250 works on a pure SPI bus.\r\nThe [macro](https://github.com/PX4/Firmware/blob/0e70578052d938ea87c70837a15185b99dbb2309/src/drivers/imu/mpu9250/mpu9250.h#L46) in mpu9250.h should be changed to\r\n`#if defined(PX4_I2C_OBDEV_MPU9250) && defined(PX4_I2C_BUS_EXPANSION)`\r\nThat is what I'm sure about.\r\n\r\nIf I deploy the master branch after set correct SPI bus in `broad_config.h`, ak8963 would randomly fails to start. Here is the sample output:\r\n```\r\nINFO  [px4] assuming working directory is rootfs, no symlinks needed.\r\n\r\n______  __   __    ___ \r\n| ___ \\ \\ \\ / /   /   |\r\n| |_/ /  \\ V /   / /| |\r\n|  __/   /   \\  / /_| |\r\n| |     / /^\\ \\ \\___  |\r\n\\_|     \\/   \\/     |_/\r\n\r\npx4 starting.\r\n\r\nINFO  [px4] Calling startup script: /bin/sh test.config 0\r\nINFO  [dataman] Unknown restart, data manager file './dataman' size is 11798680 bytes\r\nMPU9250 on SPI bus 0 at 0 (1000 KHz)\r\nWARN  [mpu9250] AK8963: bad id 0 retries 9\r\nWARN  [mpu9250] AK8963: bad id 0 retries 8\r\nWARN  [mpu9250] AK8963: bad id 0 retries 7\r\nWARN  [mpu9250] AK8963: bad id 0 retries 6\r\nWARN  [mpu9250] AK8963: bad id 0 retries 5\r\nWARN  [mpu9250] AK8963: bad id 0 retries 4\r\nWARN  [mpu9250] AK8963: bad id 0 retries 3\r\nWARN  [mpu9250] AK8963: bad id 0 retries 2\r\nWARN  [mpu9250] AK8963: bad id 0 retries 1\r\nWARN  [mpu9250] AK8963: bad id 0 retries 0\r\nERROR [mpu9250] AK8963: failed to initialize, disabled!\r\nERROR [mpu9250] driver start failed\r\nWARN  [commander] LED: getHandle fail\r\n\r\nWARN  [commander] LED init failed\r\nINFO  [mavlink] mode: Normal, data rate: 1000000 B/s on udp port 14556 remote port 14550\r\nINFO  [logger] logger started (mode=all)\r\nINFO  [px4] Startup script returned successfully\r\npxh> INFO  [mavlink] partner IP: 192.168.200.113\r\n\r\nExiting...\r\npxh> Shutting down\r\n```\r\nThe driver completely failed to start in the above log. But sometimes it could and maybe works properly? And sometimes mag fails but accel and gyro works.\r\n\r\nI copied and modified some of codes from old DriverFramework and it now works. Because the mpu9250 is too complex to design or examine a driver implement so I tried to hack the problem in this way. I'm not sure how it can be improved.\r\n\r\nI think the [passthrough_read](https://github.com/PX4/Firmware/blob/0e70578052d938ea87c70837a15185b99dbb2309/src/drivers/imu/mpu9250/MPU9250_mag.cpp#L172) and something related may not be designed properly which caused this problem.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13781/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13774","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13774/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13774/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13774/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13774","id":541806107,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU2MzcxNTk0","number":13774,"title":"Jenkins PX4 ROS2 bridge don't specify python binary","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-12-23T15:44:45Z","updated_at":"2019-12-23T16:06:55Z","closed_at":"2019-12-23T16:06:51Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13774","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13774","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13774.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13774.patch","merged_at":"2019-12-23T16:06:51Z"},"body":"Attempting to fix a build failure in master.\r\n\r\n![image](https://user-images.githubusercontent.com/84712/71366857-393c3280-2571-11ea-88f0-e62cea5a465b.png)\r\n\r\n![image](https://user-images.githubusercontent.com/84712/71366880-478a4e80-2571-11ea-9d02-c18da44a9625.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13774/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13761","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13761/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13761/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13761/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13761","id":539648275,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU0NTg1ODcz","number":13761,"title":"Navigator: VTOL: enable weather vane in auto mode outside of mission","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-12-18T12:21:56Z","updated_at":"2019-12-28T17:13:18Z","closed_at":"2019-12-28T17:13:16Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13761","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13761","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13761.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13761.patch","merged_at":"2019-12-28T17:13:16Z"},"body":"Alternative to https://github.com/PX4/Firmware/pull/13740.\r\n\r\nWith PR, I tried to fix https://github.com/PX4/Firmware/issues/13725 by changing the logic of the \"allow_weather_vane\" flag in the position_setpoint message by converting it to \"disable_weather_vane\". Weather vane is per default always enabled in all mission modes, and only gets disabled during the alignment phase of the transition. \r\n\r\n**Test data / coverage**\r\nSITL tested\r\n\r\nWhat do you think @xdwgood , do these changes solve your issues?\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13761/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13758","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13758/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13758/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13758/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13758","id":539373779,"node_id":"MDExOlB1bGxSZXF1ZXN0MzU0MzYyNzU0","number":13758,"title":"Fixes V5 and V5X over current not being reported","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-12-17T23:54:37Z","updated_at":"2019-12-18T02:33:26Z","closed_at":"2019-12-18T02:33:22Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13758","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13758","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13758.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13758.patch","merged_at":"2019-12-18T02:33:22Z"},"body":"As recommended in the BQ24315 datasheet V5 introduced a series 47K Ohm resistor in the FAULT line connection to the CPU on `GPIO_VDD_5V_HIPOWER_OC` and `GPIO_VDD_5V_PERIPH_OC`. \r\n\r\nThis PR remove the pullup in GPIO config for `GPIO_VDD_5V_HIPOWER_OC` and `GPIO_VDD_5V_PERIPH_OC` to correct VinL when /FAULT is true.\r\n\r\nFMUV5 Before this PR with 2A load on Telem1 & Telem2\r\n\r\n```\r\n system_power_s\r\n        timestamp: 564569926  (0.000410 seconds ago)\r\n        voltage5v_v: 5.1321\r\n        voltage3v3_v: 3.3322\r\n        v3v3_valid: 1\r\n        usb_connected: 0\r\n        brick_valid: 1\r\n        usb_valid: 0\r\n        servo_valid: 1\r\n        periph_5v_oc: 0\r\n        hipower_5v_oc: 0\r\n```\r\nFMUV5 With this PR with 2A load on Telem1 & Telem2\r\n\r\n```\r\n system_power_s\r\n        timestamp: 564569926  (0.000410 seconds ago)\r\n        voltage5v_v: 5.1321\r\n        voltage3v3_v: 3.3322\r\n        v3v3_valid: 1\r\n        usb_connected: 0\r\n        brick_valid: 1\r\n        usb_valid: 0\r\n        servo_valid: 1\r\n        periph_5v_oc: 1\r\n        hipower_5v_oc: 1\r\n```\r\n\r\nFYI @DuganY ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13758/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13756","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13756/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13756/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13756/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13756","id":539029731,"node_id":"MDU6SXNzdWU1MzkwMjk3MzE=","number":13756,"title":"make px4_sitl_rtps fails to find fastrtpsgen in default location","user":{"login":"deb0ch","id":6248219,"node_id":"MDQ6VXNlcjYyNDgyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/6248219?v=4","gravatar_id":"","url":"https://api.github.com/users/deb0ch","html_url":"https://github.com/deb0ch","followers_url":"https://api.github.com/users/deb0ch/followers","following_url":"https://api.github.com/users/deb0ch/following{/other_user}","gists_url":"https://api.github.com/users/deb0ch/gists{/gist_id}","starred_url":"https://api.github.com/users/deb0ch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deb0ch/subscriptions","organizations_url":"https://api.github.com/users/deb0ch/orgs","repos_url":"https://api.github.com/users/deb0ch/repos","events_url":"https://api.github.com/users/deb0ch/events{/privacy}","received_events_url":"https://api.github.com/users/deb0ch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2019-12-17T12:15:28Z","updated_at":"2021-11-20T16:19:49Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nAfter installing dependencies using the [official script](https://raw.githubusercontent.com/PX4/Devguide/v1.9.0/build_scripts/ubuntu_sim.sh), running `make px4_sitl_rtps` fails saying that `fastrtpsgen` (which is installed in the default location `/usr/local/bin`) is not found, whereas [this is not supposed to be the case](https://dev.px4.io/v1.9.0/en/middleware/micrortps.html#agent-not-builtfastrtpsgen-is-not-found). \r\n\r\nDigging up the code, I found out that if `FASTRTPSGEN_DIR` is not set before _the first time_ that `make px4_sitl_rtps` is run, then the wrong command is issued by cmake with an empty `--fastrtpsgen-dir` option (`src/modules/micrortps_bridge/micrortps_client/CMakeLists.txt:74`).\r\n\r\nAccording to the docs, you should not need the environment variable if fastRTPS is installed in the default location. Moreover, `make` states that it found `fastrtpsgen` with the correct version.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install dependencies using the [official script](https://raw.githubusercontent.com/PX4/Devguide/v1.9.0/build_scripts/ubuntu_sim.sh)\r\n2. Build the sitl_rtps variant: `make px4_sitl_rtps`\r\n4. See error\r\n\r\n**Expected behavior**\r\nNo error, successful build.\r\n\r\n**Log Files and Screenshots**\r\n```\r\n-- PX4 version: v1.11.0-beta1-3-g7abadabc19\r\n-- PX4 config file: /home/deb0ch/src/PX4Firmware/boards/px4/sitl/rtps.cmake\r\n-- PX4 config: px4_sitl_rtps\r\n-- PX4 platform: posix\r\n-- PX4 lockstep: enabled\r\n-- cmake build type: RelWithDebInfo\r\n-- The CXX compiler identification is GNU 7.4.0\r\n-- The C compiler identification is GNU 7.4.0\r\n-- The ASM compiler identification is GNU\r\n-- Found assembler: /usr/bin/cc\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Check for working C compiler: /usr/bin/cc\r\n-- Check for working C compiler: /usr/bin/cc -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Found PythonInterp: /usr/bin/python (found version \"2.7.17\") \r\n-- Found PY_jinja2: /usr/lib/python2.7/dist-packages/jinja2  \r\n-- PX4 ECL: Very lightweight Estimation & Control Library v1.9.0-rc1-107-g1813034\r\n-- fastrtpsgen version 1.7.1\r\n-- RTPS send: home_position, wind_estimate, radio_status, satellite_info, adc_report, iridiumsbd_status, vtol_vehicle_status, airspeed, sensor_selection, cpuload, sensor_baro, battery_status, estimator_status, distance_sensor, vehicle_odometry, vehicle_attitude, collision_constraints, sensor_combined, \r\n-- RTPS receive: trajectory_waypoint, position_setpoint, camera_capture, collision_report, obstacle_distance, debug_array, debug_key_value, debug_vect, position_setpoint_triplet, debug_value, camera_trigger, vehicle_trajectory_waypoint, optical_flow, vehicle_mocap_odometry, vehicle_visual_odometry\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /home/deb0ch/src/PX4Firmware/build/px4_sitl_rtps\r\n[11/771] git submodule src/drivers/gps/devices\r\n[23/771] Generating RTPS topic bridge\r\nFAILED: src/modules/micrortps_bridge/micrortps_client/micrortps_agent/home_position_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/home_position_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/wind_estimate_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/wind_estimate_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/radio_status_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/radio_status_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/satellite_info_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/satellite_info_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/adc_report_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/adc_report_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/iridiumsbd_status_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/iridiumsbd_status_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vtol_vehicle_status_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vtol_vehicle_status_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/airspeed_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/airspeed_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/sensor_selection_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/sensor_selection_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/cpuload_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/cpuload_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/sensor_baro_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/sensor_baro_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/battery_status_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/battery_status_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/estimator_status_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/estimator_status_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/distance_sensor_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/distance_sensor_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_odometry_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_odometry_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_attitude_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_attitude_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/collision_constraints_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/collision_constraints_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/sensor_combined_Publisher.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/sensor_combined_Publisher.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/trajectory_waypoint_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/trajectory_waypoint_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/position_setpoint_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/position_setpoint_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/camera_capture_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/camera_capture_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/collision_report_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/collision_report_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/obstacle_distance_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/obstacle_distance_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_array_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_array_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_key_value_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_key_value_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_vect_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_vect_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/position_setpoint_triplet_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/position_setpoint_triplet_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_value_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/debug_value_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/camera_trigger_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/camera_trigger_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_trajectory_waypoint_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_trajectory_waypoint_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/optical_flow_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/optical_flow_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_mocap_odometry_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_mocap_odometry_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_visual_odometry_Subscriber.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_agent/vehicle_visual_odometry_Subscriber.h src/modules/micrortps_bridge/micrortps_client/micrortps_client/microRTPS_client.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_client/microRTPS_transport.cpp src/modules/micrortps_bridge/micrortps_client/micrortps_client/microRTPS_transport.h \r\ncd /home/deb0ch/src/PX4Firmware/build/px4_sitl_rtps/src/modules/micrortps_bridge/micrortps_client && /usr/bin/python /home/deb0ch/src/PX4Firmware/msg/tools/generate_microRTPS_bridge.py --fastrtpsgen-dir --generate-idl --mkdir-build --generate-cmakelists --topic-msg-dir /home/deb0ch/src/PX4Firmware/msg --uorb-templates-dir templates/uorb_microcdr --urtps-templates-dir templates/urtps --agent-outdir /home/deb0ch/src/PX4Firmware/build/px4_sitl_rtps/src/modules/micrortps_bridge/micrortps_client/micrortps_agent --client-outdir /home/deb0ch/src/PX4Firmware/build/px4_sitl_rtps/src/modules/micrortps_bridge/micrortps_client/micrortps_client --idl-dir /home/deb0ch/src/PX4Firmware/build/px4_sitl_rtps/src/modules/micrortps_bridge/micrortps_client/micrortps_agent/idl >micrortps_bridge.log >/dev/null\r\nTraceback (most recent call last):\r\n  File \"/home/deb0ch/src/PX4Firmware/msg/tools/generate_microRTPS_bridge.py\", line 261, in <module>\r\n    \"FastRTPSGen not found. Specify the location of fastrtpsgen with the -f flag\")\r\nException: FastRTPSGen not found. Specify the location of fastrtpsgen with the -f flag\r\n[29/771] Generating uORB topic headers\r\nninja: build stopped: subcommand failed.\r\nMakefile:193: recipe for target 'px4_sitl_rtps' failed\r\nmake: *** [px4_sitl_rtps] Error 1\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13756/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13756/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13754","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13754/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13754/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13754/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13754","id":538870402,"node_id":"MDU6SXNzdWU1Mzg4NzA0MDI=","number":13754,"title":"LAND commanded but not land.","user":{"login":"hyonlim","id":6064011,"node_id":"MDQ6VXNlcjYwNjQwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/6064011?v=4","gravatar_id":"","url":"https://api.github.com/users/hyonlim","html_url":"https://github.com/hyonlim","followers_url":"https://api.github.com/users/hyonlim/followers","following_url":"https://api.github.com/users/hyonlim/following{/other_user}","gists_url":"https://api.github.com/users/hyonlim/gists{/gist_id}","starred_url":"https://api.github.com/users/hyonlim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyonlim/subscriptions","organizations_url":"https://api.github.com/users/hyonlim/orgs","repos_url":"https://api.github.com/users/hyonlim/repos","events_url":"https://api.github.com/users/hyonlim/events{/privacy}","received_events_url":"https://api.github.com/users/hyonlim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1443093719,"node_id":"MDU6TGFiZWwxNDQzMDkzNzE5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Failsafe","name":"Failsafe","color":"1f7c00","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-12-17T06:43:33Z","updated_at":"2020-03-20T10:54:27Z","closed_at":"2020-03-20T10:54:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nLand was commanded, but vehicle is not landing at all.\r\n\r\n**To Reproduce**\r\nVehicle was hit on the wall, EKF lost a little bit. Then, land is keep commanded, but never land.\r\nVehicle was drifted along wind direction. And later, battery was drained, it finally landed.\r\n\r\n**Expected behavior**\r\nLand immediately.\r\n\r\n**Log Files and Screenshots**\r\nhttps://logs.px4.io/plot_app?log=2b373434-6c98-4c93-bbc3-675000b4725d\r\n\r\n**Drone (please complete the following information):**\r\nFirmware is bit old version. 6e395fe885740f88aa633ce747fb12e950110cb0.\r\nHowever, I think this is not an issue.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13754/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13752","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13752/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13752/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13752/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13752","id":538365038,"node_id":"MDU6SXNzdWU1MzgzNjUwMzg=","number":13752,"title":"Kakute F7 - Not saving params","user":{"login":"sevet","id":4628214,"node_id":"MDQ6VXNlcjQ2MjgyMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4628214?v=4","gravatar_id":"","url":"https://api.github.com/users/sevet","html_url":"https://github.com/sevet","followers_url":"https://api.github.com/users/sevet/followers","following_url":"https://api.github.com/users/sevet/following{/other_user}","gists_url":"https://api.github.com/users/sevet/gists{/gist_id}","starred_url":"https://api.github.com/users/sevet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sevet/subscriptions","organizations_url":"https://api.github.com/users/sevet/orgs","repos_url":"https://api.github.com/users/sevet/repos","events_url":"https://api.github.com/users/sevet/events{/privacy}","received_events_url":"https://api.github.com/users/sevet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"assignees":[{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2019-12-16T11:53:06Z","updated_at":"2023-07-13T11:14:51Z","closed_at":"2020-04-29T15:56:15Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nAny change to config is not restored after power cycle or reboot\r\n\r\n**To Reproduce**\r\n1. connect with qground control\r\n2. make a config change like \"sys_has_mag\"\r\n3. save & reboot\r\n4. power on and see change was not saved.\r\n\r\n**Log Files and Screenshots**\r\n*Always* provide a link to the flight log file:\r\nfrom console:\r\nnsh>\r\nnsh> ERROR [parameters] param auto save failed (-27)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13752/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13751","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13751/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13751/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13751/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13751","id":538093896,"node_id":"MDU6SXNzdWU1MzgwOTM4OTY=","number":13751,"title":"Takeoff not happening when switching mode at the same time as arming","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":2,"created_at":"2019-12-15T19:23:18Z","updated_at":"2023-04-11T12:29:41Z","closed_at":"2023-04-11T12:29:40Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nSadly I found another corner case of race condition with the thrust setpoint state when switching from Stabilized to a position controlled mode. I found that sometimes in SITL jMAVsim the drone instead of taking of when giving it the command just detects takeoff, landing and disarms.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. SITL jMAVsim on master\r\n2. Make sure it starts and stays in Manual mode\r\n3. Wait for GPS lock\r\n4. Send takeoff command from QGC\r\n5. See problem in ~ 1 out of 5 cases\r\n\r\n**Expected behavior**\r\nThe vehicle should still take off even if the takeoff command, mode transition and arming are basically instantaneous like in a SITL setup.\r\n\r\n**Log Files and Screenshots**\r\nExample log: https://logs.px4.io/plot_app?log=03e85548-bd0e-449a-a0cf-9a3b3426b46c\r\n![log_screen](https://user-images.githubusercontent.com/4668506/70867650-0a71fb00-1f78-11ea-829b-51570df6c678.PNG)\r\n\r\n**Additional context**\r\nThe problem is very similar to https://github.com/PX4/Firmware/issues/12171\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13751/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13746","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13746/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13746/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13746/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13746","id":537636347,"node_id":"MDU6SXNzdWU1Mzc2MzYzNDc=","number":13746,"title":"Main Motor Output Before Arming","user":{"login":"nbelanger99","id":38227189,"node_id":"MDQ6VXNlcjM4MjI3MTg5","avatar_url":"https://avatars.githubusercontent.com/u/38227189?v=4","gravatar_id":"","url":"https://api.github.com/users/nbelanger99","html_url":"https://github.com/nbelanger99","followers_url":"https://api.github.com/users/nbelanger99/followers","following_url":"https://api.github.com/users/nbelanger99/following{/other_user}","gists_url":"https://api.github.com/users/nbelanger99/gists{/gist_id}","starred_url":"https://api.github.com/users/nbelanger99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nbelanger99/subscriptions","organizations_url":"https://api.github.com/users/nbelanger99/orgs","repos_url":"https://api.github.com/users/nbelanger99/repos","events_url":"https://api.github.com/users/nbelanger99/events{/privacy}","received_events_url":"https://api.github.com/users/nbelanger99/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-12-13T16:15:47Z","updated_at":"2022-04-04T18:54:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nUsing the 16001 Heli mixer on 1.9, the FMU outputs to MAIN5 (the tail rotor) before arming. The output will start at 1110 uS, and then after a few seconds to about 1750 uS and stay there until Armed, but will change as I physically yaw the controller. PWM_DISARMED is set to the default, 900, and all PWM_MAIN_DIS are set to the default -1. When Armed, the output is as expected\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Use the 16001 airframe\r\n2. Scope MAIN5 (or connect to an ESC or servo or something)\r\n3. Power Cycle the Autopilot\r\n4. See error\r\n\r\n**Expected behavior**\r\nThere should be no output, as with the other MAIN outputs\r\n\r\nBefore Arming (after a few seconds of 1110 uS output):\r\n![image](https://user-images.githubusercontent.com/38227189/70814290-2c615700-1d99-11ea-96c8-86e0102e1e4c.png)\r\n\r\nAfter arming- tail rotor (blue) and main rotor (yellow) are at minimum as expected\r\n![image](https://user-images.githubusercontent.com/38227189/70814259-1d7aa480-1d99-11ea-9e82-39b127065d31.png)\r\n\r\n\r\n**Hardware:**\r\n- Conventional Heli with tail rotor\r\n- Pixhawk 4\r\n\r\n**Note**\r\nThe minimums for both motors when armed is not exactly the same as the default mixer; we've adjusted it a bit for out aircraft, but the behavior is seem both with the modified and unmodified mixer file. \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13746/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13746/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13743","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13743/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13743/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13743/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13743","id":537563272,"node_id":"MDU6SXNzdWU1Mzc1NjMyNzI=","number":13743,"title":"make after a board.h changes does not rebuild correctly and is HUGE time sink","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2019-12-13T13:55:44Z","updated_at":"2020-07-02T07:34:04Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"This is becoming a problem on HIGH cycle time debug-fix-build-download loops. \r\n\r\nMake a change build and download - still have the bug! Oh make did not work. \r\n\r\nFYI @dinomani ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13743/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13736","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13736/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13736/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13736/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13736","id":537064409,"node_id":"MDExOlB1bGxSZXF1ZXN0MzUyNDg2NDY3","number":13736,"title":"ECL fix for v1.10.0 release","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/25","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/25","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/25/labels","id":2491597,"node_id":"MDk6TWlsZXN0b25lMjQ5MTU5Nw==","number":25,"title":"Release v1.10.0","description":"","creator":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":157,"state":"closed","created_at":"2017-05-01T13:31:10Z","updated_at":"2023-07-28T12:48:24Z","due_on":"2019-09-01T07:00:00Z","closed_at":"2020-03-02T09:02:17Z"},"comments":0,"created_at":"2019-12-12T15:55:25Z","updated_at":"2019-12-12T17:59:37Z","closed_at":"2019-12-12T17:59:25Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13736","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13736","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13736.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13736.patch","merged_at":"2019-12-12T17:59:25Z"},"body":"This fixes https://github.com/PX4/ecl/issues/682 for the v1.10.0 release.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13736/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13732","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13732/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13732/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13732/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13732","id":536678428,"node_id":"MDU6SXNzdWU1MzY2Nzg0Mjg=","number":13732,"title":"Durandal Mission transfer fail","user":{"login":"Tony3dr","id":39415493,"node_id":"MDQ6VXNlcjM5NDE1NDkz","avatar_url":"https://avatars.githubusercontent.com/u/39415493?v=4","gravatar_id":"","url":"https://api.github.com/users/Tony3dr","html_url":"https://github.com/Tony3dr","followers_url":"https://api.github.com/users/Tony3dr/followers","following_url":"https://api.github.com/users/Tony3dr/following{/other_user}","gists_url":"https://api.github.com/users/Tony3dr/gists{/gist_id}","starred_url":"https://api.github.com/users/Tony3dr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tony3dr/subscriptions","organizations_url":"https://api.github.com/users/Tony3dr/orgs","repos_url":"https://api.github.com/users/Tony3dr/repos","events_url":"https://api.github.com/users/Tony3dr/events{/privacy}","received_events_url":"https://api.github.com/users/Tony3dr/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2019-12-11T23:54:50Z","updated_at":"2020-04-04T13:39:55Z","closed_at":"2020-04-04T13:39:55Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWe were able to flash master on the latest QGC 3.5.6 on the Durandal flight controller. The problem is that we are getting a Mission transfer fail error message when loading the Mission on QGC. We tried with USB and Mission failed, USB and battery connected and Mission failed, it seems to work via Telemetry. We formatted the SD card and we encountered the same issue. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Make sure you have the latest QGC 3.5.6\r\n2. Flash firmware Master branch\r\n3. Uploaded mission to the vehicle\r\n4. Error message \"Mission transfer failed\" see picture below.\r\n![78786969_1548876298601624_6122367445408677888_n (1)](https://user-images.githubusercontent.com/39415493/70669964-b63fe180-1c2c-11ea-98e9-66581acb430c.png)\r\n\r\n**Log Files**\r\n**Modes Tested**\r\nPosition Mode: Good.\r\nAltitude Mode: Good.\r\nStabilized Mode: Good.\r\nMission Plan Mode (Automated): Good.RTL (Return To Land): Good.\r\nhttps://review.px4.io/plot_app?log=0a193cd7-9b3b-483f-86de-aea71489b32b\r\nhttps://review.px4.io/plot_app?log=62b6b784-7e3a-41c2-a47b-b27791a90635\r\n\r\n**Drone Information**\r\nFirmware: v1.10.0 (beta) (d6ffdc09)\r\nFlight Controller: Durandal(Holybro)\r\nGPS: Holybro GPS\r\nFrame: F450\r\nTelemetry: Holybro 915Mhz\r\n\r\n**Additional Note:**\r\nWhen we removed the SD card and uploaded the logs 2 flight logs were not saved on the SD card. The logs are shown on the SD but no information was registered. The total flights completed were 4 and only 2 flight logs registered the data. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13732/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13731","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13731/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13731/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13731/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13731","id":536480842,"node_id":"MDU6SXNzdWU1MzY0ODA4NDI=","number":13731,"title":"Kakute F7 - baro sensor #0 missing","user":{"login":"sevet","id":4628214,"node_id":"MDQ6VXNlcjQ2MjgyMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4628214?v=4","gravatar_id":"","url":"https://api.github.com/users/sevet","html_url":"https://github.com/sevet","followers_url":"https://api.github.com/users/sevet/followers","following_url":"https://api.github.com/users/sevet/following{/other_user}","gists_url":"https://api.github.com/users/sevet/gists{/gist_id}","starred_url":"https://api.github.com/users/sevet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sevet/subscriptions","organizations_url":"https://api.github.com/users/sevet/orgs","repos_url":"https://api.github.com/users/sevet/repos","events_url":"https://api.github.com/users/sevet/events{/privacy}","received_events_url":"https://api.github.com/users/sevet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-12-11T16:27:41Z","updated_at":"2020-03-12T18:53:31Z","closed_at":"2020-03-12T18:53:31Z","author_association":"NONE","active_lock_reason":null,"body":"Failing prearm check with error: baro sensor #0 missing compiled from source on 11th dec 2019\r\n\r\n**Steps to reproduce**\r\nCompile\r\nFlash\r\nCalibrate and setup all\r\nTry to arm.\r\n\r\nYou can also see on the map in q ground control that the altitude is not changing when elevating the quad\r\n\r\n**Expected behavior**\r\nAltitude support\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13731/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13731/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13730","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13730/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13730/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13730/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13730","id":536366053,"node_id":"MDExOlB1bGxSZXF1ZXN0MzUxOTA5OTM2","number":13730,"title":"Remove MPC_ACC_HOR_ESTM parameter","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/32","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/32/labels","id":4728829,"node_id":"MDk6TWlsZXN0b25lNDcyODgyOQ==","number":32,"title":"Release v1.11.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":7,"closed_issues":167,"state":"open","created_at":"2019-10-07T16:06:51Z","updated_at":"2023-04-11T12:29:40Z","due_on":"2020-04-01T07:00:00Z","closed_at":null},"comments":2,"created_at":"2019-12-11T13:22:01Z","updated_at":"2019-12-11T15:22:02Z","closed_at":"2019-12-11T15:21:58Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/13730","html_url":"https://github.com/PX4/PX4-Autopilot/pull/13730","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/13730.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/13730.patch","merged_at":"2019-12-11T15:21:58Z"},"body":"Remove [MPC_ACC_HOR_ESTM](https://dev.px4.io/master/en/advanced/parameter_reference.html#MPC_ACC_HOR_ESTM)\r\n\r\nThis was used back in time when no soothing was done to avoid large steps when the estimator stops sending a maximum velocity (e.g.:GPS gained during optical flow flight). Since smoothing is applied later, this is not required anymore.\r\n\r\nThis fixes the issue found by @PX4/testflights  https://github.com/PX4/Firmware/pull/13561#issuecomment-564531310","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13730/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13730/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13724","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13724/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13724/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13724/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/13724","id":535881485,"node_id":"MDU6SXNzdWU1MzU4ODE0ODU=","number":13724,"title":"Once camera_capture on, no fmu pwm outputs","user":{"login":"hyonlim","id":6064011,"node_id":"MDQ6VXNlcjYwNjQwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/6064011?v=4","gravatar_id":"","url":"https://api.github.com/users/hyonlim","html_url":"https://github.com/hyonlim","followers_url":"https://api.github.com/users/hyonlim/followers","following_url":"https://api.github.com/users/hyonlim/following{/other_user}","gists_url":"https://api.github.com/users/hyonlim/gists{/gist_id}","starred_url":"https://api.github.com/users/hyonlim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyonlim/subscriptions","organizations_url":"https://api.github.com/users/hyonlim/orgs","repos_url":"https://api.github.com/users/hyonlim/repos","events_url":"https://api.github.com/users/hyonlim/events{/privacy}","received_events_url":"https://api.github.com/users/hyonlim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"},{"id":1589020676,"node_id":"MDU6TGFiZWwxNTg5MDIwNjc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/stale","name":"stale","color":"ffffff","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-12-10T17:36:53Z","updated_at":"2020-03-20T10:54:43Z","closed_at":"2020-03-20T10:54:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen a system is using FMU output as main PWM and camera_capture running, no motor spin when it is armed.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Set FMU PWM as main output\r\n2. Run camera_capture and on\r\n3. Try to arm\r\n\r\n**Expected behavior**\r\nMotor should spin but it is not. If I do $ fmu test and arm again, it spins.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/13724/timeline","performed_via_github_app":null,"state_reason":"completed"},