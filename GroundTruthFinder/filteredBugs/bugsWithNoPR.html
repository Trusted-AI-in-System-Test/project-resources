<!DOCTYPE html>
<html>
	<head>
		<meta charset='UTF-8'>
			<title>JSON To HTML using codebeautify.org</title>
		</head>
		<body>
			<table border=1>
				<thead>
					<tr>
						<th>title</th>
						<th>html_url</th>
						<th>body</th>
						<th>state</th>
						<th>pull_request</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Broken Loiter: loitering at wrong position, erratic loiter direction</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/20477</td>
						<td>## Describe the bug
The drone sometimes loiters around a wrong position and doesn't respect NAV_LOITER_RAD nor the desired turning direction.

I've observed it regularly on SITL VTOLs, and I could also break it once on a SITL plane. On VTOLs it's always the first HOLD command after a transition in mission mode which fucks up. The drone either holds around Home or at next Waypoint, but not at current position as it's supposed to. Resuming mission and then triggering Hold again works fine. Even the Hold in MC mode is affected by this, if triggered after a back transition.

On a pure FW drone I don't know what it takes to break, but it's possible as well. I've had one occurrence where the drone flew to the next WP instead of Loitering at current position.

Also, if this happens, then the NAV_LOITER_RAD is ignored and the drone is just flying with max bank angle. 

The bug is present in both v1.13 and current main.

## To Reproduce
Steps to reproduce the behavior:
1. `make px4_sitl gazebo_standard_vtol`
2. Upload a mission containing a transition, e.g. the one here: 
[Zurich FT loiter bug.zip](https://github.com/PX4/PX4-Autopilot/files/9858850/Zurich.FT.loiter.bug.zip)
3. Launch the mission. Trigger Hold at some point after the front transition.
4. See error
5. Feel free to resume mission, trigger Hold again, and observe that it works correctly again. Then resume mission, launch a back transition via QGC interface, and Hold again -> broken again.

## Expected behavior
The drone should loiter around the point where the HOLD command was sent.

## Log Files and Screenshots
Log on v1.13 (roughly, our fork contains some minor changes but nothing which affects this) where the drone more or less returns home for Loiter : https://logs.px4.io/plot_app?log=f24d5c4e-b495-4d9b-93dc-b6e321beda15

Log on upstream where I consistently managed to break the logic after transitioning, even after back transitions : https://logs.px4.io/plot_app?log=4e307d13-c94a-4543-a625-3e54d88ae0b9

Log on upstream with tailsitter. Same behaviour as with standard VTOL: https://logs.px4.io/plot_app?log=f1441279-1e2f-42e1-8599-b17ff4881f19

Log on upstream on a FW plane where I managed once (on the second trigger) to break the logic, but not the first time nor any time after: https://logs.px4.io/plot_app?log=683f7ffa-58c3-4860-ae32-debca6c1433e

Log on upstream on a MC drone where I couldn't break it (not sure if nothing is broken for MC or if I just haven't found how to break it): https://logs.px4.io/plot_app?log=d2fafa11-a5fa-4bed-a6ed-108749353267

Add screenshots to help explain your problem.
![position_controller_status type](https://user-images.githubusercontent.com/48206725/197734350-158a8591-dcf8-42ae-8ea3-f3d4035fe66e.png)
I've found so far that during the Loiter which goes badly the position_controller_status/type stays at 0 instead of being the usual 2.

## Drone (please complete the following information):
I haven't dared to check on a real drone yet. The following SITL models have so far found to be affected:
- gazebo_standard_vtol
- gazebo_tailsitter
- gazebo_plane
</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Fixedwing RTL failsafe makes the vehicle crash right after takeoff</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/20260</td>
						<td>## Describe the bug
When running takeoff in SITL without QGC running, the plane immediately goes into failsafe, goes into RTL and then crases

## To Reproduce
Steps to reproduce the behavior: (Make sure no QGC is running)
1. Start plane SITL simulation
```
make px4_sitl gazebo_plane
```
2. Command takeoff
```
commander takeoff
```

## Expected behavior
- Vehicle should either takes off or rejects the takeoff command

## Log Files and Screenshots
![plane_bug](https://user-images.githubusercontent.com/5248102/191316218-3a925953-5b73-4fca-82e9-a51dd60b0ded.gif)
- Flight log: https://review.px4.io/plot_app?log=0314e693-cb1e-4675-a7ef-bad36473a129
- Log:
```
pxh> commander takeoff
pxh> INFO  [commander] Armed by internal command	
INFO  [tone_alarm] arming warning
INFO  [navigator] Using minimum takeoff altitude: 30.00 m	
INFO  [fw_pos_control_l1] Takeoff on runway	
INFO  [commander] Takeoff detected	
WARN  [commander] Failsafe enabled: no datalink	
INFO  [commander] Failsafe mode activated	
INFO  [tone_alarm] battery warning (fast)
INFO  [navigator] RTL: landing at home position.	
INFO  [navigator] RTL: climb to 589 m (100 m above destination)	
INFO  [commander] Failsafe mode deactivated	
WARN  [health_and_arming_checks] Preflight Fail: velocity estimate error
ERROR [commander] Critical failure detected: lockdown	
WARN  [commander] Motor failure detected	
WARN  [health_and_arming_checks] Preflight Fail: velocity estimate error
```

## Additional context
</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Issue with heading estimation</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/19846</td>
						<td>We are developing a drone with the PX4 firmware, running on a holybro V5x FCU.

We have run into an issue which we can't understand within the team, so I am hoping for someone to help us.
The issue has happened in multiple flights, but can be easiest seen in the following flight log: 
[log](https://review.px4.io/plot_app?log=9d997dff-c93e-4d6b-a257-8a581f824e0a)

The heading estimate is very unstable (a jump of >90 degrees at the 1:12 mark), after which the drone is almost uncontrollable, since all orientations are messed up. This has started happening repeatedly, but we have also made more than 10 flights before where the issue did not arise.

I have noticed that the EKFs are also using the internal magnetometer, while it is set at a lower priority and the external magnetometer does produce data.

If anyone can assist (even if only giving some pointers on how to analyse this issue) that'd be greatly appreciated.</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>v1.13.0-beta1 UAVCAN Battery Can't Take Off Due to RTL Time Estimate</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/19642</td>
						<td>I am unable to take off on v1.13.0-beta1 using a uavcan battery in any mode. As soon as I start throttling up, it throws a "Remaining flight time low, returning to land" error and switches into RTL.

https://review.px4.io/plot_app?log=761b3a20-94ae-43d9-aba3-1205751f58ce
https://review.px4.io/plot_app?log=25386252-9972-4f8f-bac0-716c54559f68

Beta on a different non uavcan battery drone. ARK GPS + ARK Flow flies well.
https://review.px4.io/plot_app?log=3618593a-4485-4606-9236-2316af742a07

Comparing the two, in the failure case, the RTL Time Estimate values are very low, below 100. But in the working case, the values are in the 1000000's.</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>icm20649 glitches at low IMU_GYRO_RATEMAX on fmu-v5x on v1.12.3</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/19134</td>
						<td>**Describe the bug**
ICM-20649 IMU measurements (both accel and gyro) contain several glitches when `IMU_GYRO_RATEMAX` is set to 250 Hz on v1.12.3 (fmu-v5x).
The issue does not show up when `IMU_GYRO_RATEMAX` is set to larger values (e.g. with 400 Hz there is no issue).

**To Reproduce**
* Flash v1.12.3 stable
* From QGC reset parameters to default
* Set `IMU_GYRO_RATEMAX` to 250 Hz
* Reboot
* From the nsh console run `icm20649 status`. Several errors show up.
* Log `sensor_gyro_0` and `sensor_accel_0` for a minute. Check that glitches appear on both gyro and accel (with the autopilot fixed on ground).

```
nsh> icm20649 status
INFO  [SPI_I2C] Running on SPI Bus 3
INFO  [icm20649] FIFO empty interval: 3555 us (281.3 Hz)
icm20649: bad register: 0 events
icm20649: bad transfer: 62 events
icm20649: FIFO empty: 0 events
icm20649: FIFO overflow: 5871 events
icm20649: FIFO reset: 5872 events
icm20649: DRDY missed: 0 events
```

**Expected behavior**
The IMU measurements are expected to contain no glitches/discontinuities. It is expected that running `icm20649 status` shows no errors. The gyros should read (0,0,0) and accels should read constant (0,0,-g) when fixed on ground.

**Log Files and Screenshots**

log at `IMU_GYRO_RATEMAX` 250: glitches show up on gyros and accels
https://logs.px4.io/plot_app?log=64ffb368-d808-4687-b811-7b74288e1183

log at `IMU_GYRO_RATEMAX` 400: no glitches show up
https://logs.px4.io/plot_app?log=ae0a092a-7756-4e00-b394-129a18e8679c

Screenshots in the case of `IMU_GYRO_RATEMAX` 250: the glitches are evident even in the logfile:

![gyro_IMU_GYRO_RATEMAX_250](https://user-images.githubusercontent.com/24300565/152633248-856abf12-dab9-4f69-8294-90e09cffefd6.png)

![accel_IMU_GYRO_RATEMAX_250](https://user-images.githubusercontent.com/24300565/152633252-204574bf-a8f0-41b8-89a0-e79acea73755.png)

**Autopilot hardware:** Holybro Pixhawk 5X (fmu-v5x)
https://docs.px4.io/master/en/flight_controller/pixhawk5x.html

IMUs:
* Accel/Gyro: ICM-20649
* Accel/Gyro: ICM-42688P
* Accel/Gyro: ICM-20602

**Additional context**
Other IMUs mounted on Pixhawk 5X (ICM-42688P and ICM-20602) are not subject to the issue.

```
nsh> icm42688p status
INFO  [SPI_I2C] Running on SPI Bus 2
INFO  [icm42688p] FIFO empty interval: 4000 us (250.0 Hz)
icm42688p: bad register: 0 events
icm42688p: bad transfer: 0 events
icm42688p: FIFO empty: 0 events
icm42688p: FIFO overflow: 0 events
icm42688p: FIFO reset: 1 events
icm42688p: DRDY missed: 0 events

nsh> icm20602 status
INFO  [SPI_I2C] Running on SPI Bus 1
INFO  [icm20602] FIFO empty interval: 4000 us (250.0 Hz)
icm20602: bad register: 0 events
icm20602: bad transfer: 0 events
icm20602: FIFO empty: 0 events
icm20602: FIFO overflow: 0 events
icm20602: FIFO reset: 1 events
icm20602: DRDY missed: 0 events
```
</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>X500V2 kit Jumps when switching to AltHold</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/19046</td>
						<td>After trying to fly with the Holybro X500 V2 kit which flies well with Stabilized mode, I noticed that the drone jumps up and down when switching to Altitude mode. The kit is equipped with Pixhawk 5X. A log is also as below:

https://review.px4.io/plot_app?log=21beb351-f2bb-4767-b71f-725946098ec0

I found something which might be relevant [here](https://github.com/PX4/PX4-Autopilot/issues/11717) but not sure if it is the case!!! 
</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Fixed-wing landing consistently veering off to right</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/18595</td>
						<td>**Describe the bug**
(Presumably this is user error and not a real bug, but I was asked to create an issue so I'll try to follow the template.)

The aircraft tracks the planned path quite well until approximately when it exits the landing loiter for the final approach. At this point, it seems to make a turn to the right and then land on this new path.

I would like to understand why this occurs and ideally how I can correct it.

**To Reproduce**
See logs below. We're flying entirely in mission mode (with the exception of noted aborted landings).

**Expected behavior**
I expected the plane to track the planned landing direction, heading on a path towards the landing waypoint.

**Log Files and Screenshots**

Original example: https://logs.px4.io/plot_app?log=eea3a1e0-be68-470d-98ab-3730bf357679
![image](https://user-images.githubusercontent.com/1906581/140832721-156a392e-96fd-4bf6-b152-4d1b7b5644b3.png)
The divergence can be seen quite clearly in the above PX4 screenshot.
Flight plan: [nov3-flight3.plan.txt](https://github.com/PX4/PX4-Autopilot/files/7500669/nov3-flight3.plan.txt)

Looking at the yaw angle plot for this one, it looks to me like the plane is lagging behind the set point consistently until suddenly the set point is updated to approximately the current estimated yaw. 
![image](https://user-images.githubusercontent.com/1906581/140833088-c69982b5-ab96-45bd-9f82-d939b51459c9.png)

Another example from this morning: https://logs.px4.io/plot_app?log=63428e7b-2bd6-490b-9d14-e347effb02a4
This one I had `FW_LND_HHDIST` set to 0.
There are two landing attempts on this one. The first showed the same behavior of veering off to the right and was going to miss our landing area entirely, so I switched to position control mode and we put it up in a hold. We uploaded a new plan with the landing pattern shifted significantly to the west and let it land on that one. Probably easier to decipher what's happening on the first log.

**Drone (please complete the following information):**
X-UAV Talon (the 1.7 m wingspan one -- not the mini or pro)
Autopilot hardware is a Pixhawk 4 mini with the GPS puck and a Lidar Lite v3.
Mounting of GPS puck and autopilot are as shown below:
![image](https://user-images.githubusercontent.com/1906581/140833310-7a93007f-05cf-4e58-97a0-d8f6eb77593e.png)
![image](https://user-images.githubusercontent.com/1906581/140833427-8a173f63-d96b-4eac-98cc-b4bfb9695d7c.png)
(You can ignore the extra wires in the second picture - they were for some ground testing.)

Both are oriented in their normal direction.

I haven't done any tuning for this platform. I'm just flying it on the X-UAV Mini Talon profile, which seems to be plenty good enough to get it to fly, however I think it's quite clear from the logs that some of the control loops could be better tuned.</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Corner case with takeoff waypoint acceptance radius</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/18576</td>
						<td>**Describe the bug**
There seems to be a corner case where if the vehicle is unable to get close enough to the takeoff waypoint (due to high winds), the vehicle will never use TECS pitch setpoints resulting in a crash.

- TECS pitch setpoints are not used in takeoff flight mode

https://github.com/PX4/PX4-Autopilot/blob/f492fa9d3ab5a1e7b105594a1f637bd6a22bfad4/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L873-L882

- If the vehicle is not close enough to the takeoff waypoint, it will continue to stay in takeoff mode therefore not use the pitch setpoint from TECS

https://github.com/PX4/PX4-Autopilot/blob/f492fa9d3ab5a1e7b105594a1f637bd6a22bfad4/src/modules/navigator/mission_block.cpp#L184-L190

However, the throttle is set from TECS: https://github.com/PX4/PX4-Autopilot/blob/f492fa9d3ab5a1e7b105594a1f637bd6a22bfad4/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L864

- This results in the airspeed getting invalidated and results in a crash
```
 WARN  [airspeed_selector] Airspeed sensor failure detected. Return to launch (RTL) is advised.
```


**To Reproduce**
Steps to reproduce the behavior:
1. Run SITL Plane in a windy environment (set wind speed to 14m/s)
```
make px4_sitl gazebo_plane__windy
```
2. Uploaded mission with a takeoff waypoint up wind


**Log Files and Screenshots**
Test condition: windspeed 14m/s, takeoff waypoint is up wind
- Flight log: https://logs.px4.io/plot_app?log=4f360063-83eb-43bd-81f1-0749f89a9e4e

</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Bug Found in msgID #147 mavlink protocol OOB</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/18385</td>
						<td>Steps to reproduce the behavior:
-----------------------------------------------------------------------------------------
1. Turn the drone on
2. Prepare many MAVLINKs with msgID 147 with different "sysID" and "compID".
3. send a packet
4. Out Of Bound (OOB) vuln occur
5. Turn the drone off

**Describe the bug**
-----------------------------------------------------------------------------------------
The method we tested sets MAVLINK's msgID to 147, compID and sysID to random, and sends a packet.

The source code part where the problem occurs is 1733 code line ~ 1736 code line and 1733 code line of the site below.

The reason for the problem is that MAVLINK packets with different compID and sysID operate the target handler function and
When the "cell_count++" part is calculated at a specific timing, "cell_count" becomes greater than 10 and goes out of the range of the "battery_mavlink.voltages[cell_count]" array (the size of the array is 10).

I found it in sitl mode and also checked it on the drone board.


source code
-----------------------------------------------------------------------------------------
https://github.com/PX4/PX4-Autopilot/blob/master/src/modules/mavlink/mavlink_receiver.cpp

PX4-Autopilot/src/modules/mavlink/mavlink_receiver.cpp (line 1733 ~ line 1737, The line of code where the problem occurs is 1733. )


TEST board
-----------------------------------------------------------------------------------------
px4_fmu-v5
nxp_fmuk66-v3


log file page
-----------------------------------------------------------------------------------------
https://logs.px4.io/plot_app?log=0f0583c3-a609-4b61-a283-6e3df243141c


screen shot
-----------------------------------------------------------------------------------------
![image](https://user-images.githubusercontent.com/91944211/136547203-1b51b617-1aca-4759-bff8-28ea9eeb46c5.png)


</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Catapult launch: Motor delay not working</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/18354</td>
						<td>PX4 (SW 1.12.3 / HW holibro pixhawk 4)
The Motor starts immedialtely after launch is detected.
This causes damage to the propeller, because it hits the catapult.
**Actual behaviour:**
If Accelerometer threshold > LAUN_CAT_A    then  Motor starts immediately
**Expected behaviour:**
If Accelerometer threshold > LAUN_CAT_A    then  Motorstart is delayed by value of LAUN_CATMDEL  waits then motors starts.

Parameters: LAUN_CAT_MDEL and LAUN_CAT_T have no effect. Motor startup is not delayed as expected.
https://review.px4.io/plot_app?log=e1c738f7-7be6-4f54-9af0-c12667ef83d9
This was working in 1.9.1

</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>RTL going to wrong Landing location</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/18271</td>
						<td>**Describe the bug**
With RTL_TYPE = 3 and RTL_TYPE = 1 the drone always flies to mission landing to land even if it's by far not the closest point. To be precise, it first flies to the correct RTL position but then instead of descending to RTL_DESCEND_ALT it flies to mission landing to land there...

More technically: 
The phase corresponding to "RTL: return at 548 m (60 m above destination)" is correct. But as soon as it goes into "RTL: descend to 518 m (30 m above destination)" then it flies to the wrong position.

**To Reproduce**
Reproducible on SITL on v1.12 and master. 
Tested with `make px4_sitl gazebo_standard_vtol` and the following mission: 
[bad RTL.zip](https://github.com/PX4/PX4-Autopilot/files/7204594/bad.RTL.zip)

Trigger RTL when it's closer to home or RP than it is to mission land and observe the bug.

**Expected behavior**
The drone should land at the closest safe point (home, rallypoint) according to the parameter description and not land and mission landing which might be very far away.

**Log Files and Screenshots**
v1.12, RTL_TYPE = 3 : https://logs.px4.io/plot_app?log=98b92060-e3e4-4a81-afcc-16a9dc8315e0
master, RTL_TYPE = 3: https://logs.px4.io/plot_app?log=a5edc70d-8be0-424f-98dc-0c96f8d31c16
master, RTL_TYPE = 1: https://logs.px4.io/plot_app?log=9f6e48ee-6b5b-4b2c-83df-3a8de754352d

For reference, here is what it should look like: (RTL_TYPE = 0)
https://logs.px4.io/plot_app?log=dbb7f55f-6038-41c1-b009-bbd39c177af7 (I don't like the loitering down, but that's another point)

**Additional context**
Potentially linked to changes in https://github.com/PX4/PX4-Autopilot/pull/16377 ? I haven't had time to investigate yet. @sfuhrer @RomanBapst 
</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Consistently bad magnetometer calibration on 1.12</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/18041</td>
						<td>We repeatedly get bad magnetometer calibration results on 1.12: after aircraft rotation yaw drifts. See https://logs.px4.io/plot_app?log=13194004-cc98-49e9-80d2-e1e1aa7196f7 for example. On magnetometer raw data and gyro data plots there are very clear time ranges, when actual rotation happens, but yaw plot demonstrates drift outside of them. Also yaw check bit is 1 in estimator watchdog.

It isn't a hardware issue, because when we switch back to 1.13 firmware we get good results: https://logs.px4.io/plot_app?log=d4f79fd4-1623-43ad-baa6-bd748f4a1e2e.

We have also recorded log on 1.12 with SENS_BOARD_ROT=0 to check if this relates to problem, still getting drift: https://logs.px4.io/plot_app?log=3760a163-3aa2-48f0-84f5-afdacd6dd3b4.</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>1.12 Release everything great except Weather Vane</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/17911</td>
						<td>**Describe the bug**
since the beginning of 2021 Weather Vane no longer works and also in the 1.12.0 release. Is there a trick to activate WV, or is something important missing?

**To Reproduce**
Convergence Airframe
gps+HereFlow
USB disabled to have enough ram left 
(without airspeed sensor)
Forward Thrust enabled
Enough wind
enable wv
start position, mission or rtl

**Expected behavior**
WV should work and turn the aircraft into the wind from a slight roll inclination.
like it was in 1.11 with the same setup

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=a8f081af-ee68-42a0-81e4-71768cec0ed2</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Heading timeout in FW flight</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/17746</td>
						<td>@Silvan Fuhrer 
**Describe the bug**
RTL is trigered in FW flight because timeout for heading in MC triggers, sending this messages:
[navigator] unable to reach heading within timeout
[commander] Mission cannot be completed

**To Reproduce**
Steps to reproduce the behavior:
Firmware: Tailsitter v1.11.3.
1. Set MIS_YAW_TMT to a value lower than the time to turn 180 degree in FW flight.
In mi case I had MIS_YAW_TMT set to 1.
2. Fly a mision with several alt loiters

You wil get a RTL with this messages:
[navigator] unable to reach heading within timeout
[commander] Mission cannot be completed

Seems that this error is triggered here:
[https://github.com/PX4/PX4-Autopilot/blob/release/1.11/src/modules/navigator/mission_block.cpp#L398](https://github.com/PX4/PX4-Autopilot/blob/release/1.11/src/modules/navigator/mission_block.cpp#L398)

**Expected behavior**
Ignore the time out since is FW flight.
Whould be nice also improve the description of MIS_YAW_TMT in the parameter reference, is not clear what a value of 0 does.
Whould be also nice to be able to ignore the transition heading in a mision for VTOLs with a parameter.


**Log Files and Screenshots**
[https://logs.px4.io/plot_app?log=92979fd1-0fc9-44f9-9a14-2c80e6ed66d3](https://logs.px4.io/plot_app?log=92979fd1-0fc9-44f9-9a14-2c80e6ed66d3)

Related:
[https://github.com/PX4/PX4-Autopilot/pull/3740](https://github.com/PX4/PX4-Autopilot/pull/3740)</td>
						<td>closed</td>
						<td></td>
					</tr>
					<tr>
						<td>Yaw setpoint spike, when landing triggered via Mavlink command MAV_CMD_NAV_LAND</td>
						<td>https://github.com/PX4/PX4-Autopilot/issues/17685</td>
						<td>In 1.12.beta, triggering landing via MAV_CMD_NAV_LAND leads to a spike in Yaw at the beginning of the landing phase, which should not occur. This issue is independent from parameter 4 of MAV_CMD_NAV_LAND (setting it to NaN or current yaw):


							<img width="793" alt="Bildschirmfoto 2021-06-01 um 16 21 37" src="https://user-images.githubusercontent.com/7580193/120339553-7fb0c780-c2f5-11eb-9306-82bfc93f0a56.png">
								<img width="793" alt="Bildschirmfoto 2021-06-01 um 16 25 22" src="https://user-images.githubusercontent.com/7580193/120340119-036ab400-c2f6-11eb-90b9-c7826195471c.png">


ULog: [https://logs.px4.io/plot_app?log=07daba2b-95db-4f4b-b5e9-423ebb3f5fa0](https://logs.px4.io/plot_app?log=07daba2b-95db-4f4b-b5e9-423ebb3f5fa0)


								</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>ekf2 replay does not work for SDLOG_PROFILE = 2</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/17578</td>
								<td>A log generated with upstream master using a single EKF instance with only ekf2 replay messages is unable to be replayed. Here is an example log.

https://logs.px4.io/plot_app?log=31ebbb10-97a4-469e-8092-2d3ac1ecbfe4

generated using:

SDLOG_MODE, 2
SDLOG_PROFILE, 2

There are two errors that occur when replaying this log:

1) unrecogonised message definition, ig: ERROR [replay] unknown log definition type 81, size 28 (offset 55043). This can be resolved using https://github.com/priseborough/PX4-Autopilot/commit/13b36e1a5de6829c76762ecb553a976a58d8f844

2) Repeated baro timeouts, eg: WARN  [ecl/EKF] baro hgt timeout - reset to baro

The ability to replay logs with SDLOG_PROFILE=2 is essential for the debug on F4 boards that do ot have adequate resources to log without  dropouts if other log data is included, eg SDLOG_PROFILE = 3</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Motors spin up to ~1500 pwm when vehicle is armed. [Control Allocation V1.12.0Beta]</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/17220</td>
								<td>**The bug**
Motors spin up to ~1500 pwm when vehicle [ Hexacopter Control Allocation V1.12.0Beta] is armed. No response to throttle or stick inputs.

**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on
2. Arm via RC or QGC
3. See motors spin to ~1500 pwm

**Expected behavior**
Motors spin at idle speed (1075 pwm default)

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=f2aa0437-ef1d-416c-aa16-5c64591922fa

**Drone :**
- Pixhawk 4, hexacopter
- 6 x motors connected to PX4 IO out, and 6 x servos connected to FMU out

**Firmware:**
- px4 v1.12.0 beta1 (935c5df)
- Control allocation hexacopter (6003_hexa_x_ctrlalloc)

**Additional context**
- Tried the same setup with normal hexacopter airframe (6001_hexa_x), the issue did not show up.
- CA_ACTX parameters have MIN 0, MAX 1
- Changing PWM_MAIN_MIN did not affect the issue
- Throttling up and down shows no changes in motor PWM
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>compass loss causes unsafe maneuvers</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/17192</td>
								<td>**Describe the bug**
During the landing sequence, a compass failure leads to a position loss and the vehicle jerks violently. Tested on recent commit. 

**To Reproduce**
1. Takeoff
2. Land
3. While landing, fail every compass instance

**Expected behavior**
The vehicle to proceed through the landing sequence.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=b9da48e7-9b6a-4a87-a9b0-4d1ffb8d4e26

**Drone (please complete the following information):**
SITL Gazebo Iris

**Additional context**
N/A
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>HITL Simulation very jumpy</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16670</td>
								<td>**Describe the bug**
I performed HITL Simulation with Pixhawk 1 hardware using 1.10.2 firmware version with jMAVsim simulator. The controller performance for a simple mission was very jumpy and not smooth at all.  


**To Reproduce**
Steps to reproduce the behavior:
1. Flash the [1.10.2 firmware](https://github.com/PX4/PX4-Autopilot/releases/tag/v1.10.2) on Pixhawk 1.
2. Follow the steps mentioned in this [doc](https://docs.px4.io/master/en/simulation/hitl.html#setting-up-hitl)  on how to set up the QGC for HITL.
3. Follow the steps mentioned [here](https://docs.px4.io/master/en/simulation/hitl.html#jmavsim-quadrotor-only) for starting the jMAVSim simulator in HITL mode.
4. Create a simple mission, upload it and start. Follow the instructions mentioned [here](https://docs.px4.io/master/en/simulation/hitl.html#fly-an-autonomous-mission-in-hitl) .
5. Observe the jumpy behaviour

**Expected behavior**
I expect a smooth controller performance. 

**Log Files and Screenshots**
- The log flight review can be found [here](https://review.px4.io/plot_app?log=ef92140a-b1bc-4c82-80c6-48ccb6224838). 
- The video of the quadcopter performing the mission in jMAVSim can be seen [here](https://drive.google.com/file/d/13PI-148FiCjFmpaoCSy16xiPDDERk-RD/view?usp=sharing).

</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>PX4 Rover, mission mode doesn't work in a real vehicle.</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16586</td><td>**Describe the bug**
In SITL rover in master mission mode works in qgroundcontrol with takeoff waypoint. but in the a real vehicle in mission mode,
rover stands still. it arms and works in stabilized mode, but does nothing on the mission mode.

**To Reproduce**
Steps to reproduce the behavior:
1. Upload any mission to a rover that is working in stabilized mode.
2. switch to mission mode (either from the transmitter or from the qgc )
3. it goes to mission mode (shows in qgc)
4. actuators doesn't respond.

**Expected behavior**
Rover should navigate the mission just like in the SITL

**Log Files and Screenshots**

log file ----> it's on master, i only did change some comments as i was going through the code. 
https://review.px4.io/plot_app?log=a108e8e8-a0b8-41ce-93b5-8ed9ef1a7720


**Rover Hardware
- just a generic rover frame with Pixhawk 4 - px4_fmu_v5 with a brushless motor and an esc.


</td>
							<td>closed</td>
							<td></td>
						</tr>
						<tr>
							<td>PX4 software crashes and Pixhawk restarts mid-air</td>
							<td>https://github.com/PX4/PX4-Autopilot/issues/16390</td>
							<td>**Describe the bug**
We are using a Pixhawk Holybro V4 for a multicopter setup. It seems that the platform restarts mid-air which causes the vehicle to crash (Motors stop and the Pixhawk reboots immediately). These test flights are done in a MoCap environment and we are using the internal EKF2 by feeding the MoCap pose at 30Hz via the mavlink vision pose topic. Each individual flight produces 3 logfiles:

- First file: Short ~4 second period
- Second file: The longer flight period with the notification of a software error
- Third file: A short ~4 second period again

I'm not sure about the smaller logfiles before and after the flight test but I attached them anyway. The second file however points out a software crash. We are using the latest and unmodified firmware release (v1.11.2) and I can not see a clear cause for the error in the log file.

**To Reproduce**
Steps to reproduce the behavior:
1. We are using the internal EKF2 estimator and feed 30Hz MoCap pose information via the mavlink vision topic
2. Takeoff and let the copter hover in position control for a while
3. In our case, the Pixhawk restarts after 20 seconds or 2 minutes (this varies)
4. Motors turn off and the multicopter performs a hard landing

**Expected behavior**
The PX4/Pixhawk V4 should not restart

**Log Files and Screenshots**

- First file: Short ~4 second period
  - https://logs.px4.io/plot_app?log=fab2c889-e3c8-4ff6-a6cf-6b5af31cd0ba
- Second file: The longer flight period with the notification of a software error
  - https://logs.px4.io/plot_app?log=a288b862-a60b-426c-af81-cf5b57629769
- Third file: A short ~4 second period again
  - https://logs.px4.io/plot_app?log=b5f2e049-dfbb-4b8b-bc7f-2b91eb25634a

**Drone (please complete the following information):**
- Twins V1 Quadcopter with PM07 powerboard (https://www.twins.co.at/wp-content/uploads/2020/11/Produktspezifikationen_SCIENCE.pdf)

**Additional information**
I'm not sure, but this could be related to issue #14075</td>
							<td>closed</td>
							<td></td>
						</tr>
						<tr>
							<td>ekf2 airspeed check bit on a multicopter</td>
							<td>https://github.com/PX4/PX4-Autopilot/issues/16372</td>
							<td>This is from a quadcopter that as far as I know doesn't have an airspeed sensor.


								<img width="801" alt="Screen Shot 2020-12-10 at 9 23 17 PM" src="https://user-images.githubusercontent.com/84712/101853721-1615e480-3b2e-11eb-8f1f-f4f9464e2e27.png">

https://logs.px4.io/plot_app?log=0ad8c6f0-a7d5-47a1-be91-0da064561eea
								</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>[VTOL] 0° yaw/heading after back transition in mission</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16305</td>
								<td>**Describe the bug**
In mission mode, just after a back transition the VTOL (quadplane) always yaws towards due north. This 0° yaw setpoint only changes once the drone moves on to the next waypoint. 

Present in v1.11.2 and on current master. In SITL and on a real drone.


**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on. Both `make px4_sitl gazebo_standard_vtol` and a real drone
2. Uploaded mission: 
[RC club many transitions.zip](https://github.com/PX4/PX4-Autopilot/files/5616756/RC.club.many.transitions.zip)
3. Start the mission
4. Observe the yaw after back transitions.

**Expected behavior**
The drone should either
- keep its current heading 
- use the heading as calculated normally in the MPC trajectory generation
- weathervane
like in v1.10.1 : https://logs.px4.io/plot_app?log=9ba19728-7ba2-4250-8884-e39e3c6a1d7f

**Log Files and Screenshots**
-Real quadplane: https://logs.px4.io/plot_app?log=3b4e3749-8b0e-44a2-9e9b-74b329b3dbab (ignore after 6:00)
-SITL, v1.11.2: https://logs.px4.io/plot_app?log=21bdc8c9-9cfc-4964-90aa-2f123ebb70f6
-SITL, master: https://logs.px4.io/plot_app?log=cc6301a2-0a6f-4100-a973-128cb7784ddf
-SITL, v1.11.2, other flight modes: https://logs.px4.io/plot_app?log=74ae49e6-1d82-4a2f-81ee-2fb387cacd1c (no enforced 0° yaw)

Useless 360 after back transition: 
![image](https://user-images.githubusercontent.com/48206725/100627921-f0b3fa00-3327-11eb-887c-17ef06e2fe98.png)


**Drone (please complete the following information):**
- Quadplane with Pixhawk 4, v1.11.2
- Gazebo Standard VTOL

**Additional context**
I could only reproduce this in mission mode (see 4th log).
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Drone can't Return in a planned mission in v1.11</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16299</td>
								<td>**Describe the bug**
In v1.11 RTL_TYPE parameter changed, which caused the Drone can not Return in a planned mission after "Land Start".
in v1.10 with RTL_TYPE=1 (Return to a planned mission landing, if available, via a direct path, else return to home via direct path)
every this was ok but in v1.11 RTL_TYPE=1,3 causes that drone fly directly to Land location and RTL_TYPE=2 causes that drone resume mission.

**To Reproduce**
Steps to reproduce the behavior:
1. Select VTOL standard HI airframe.
2. Uploaded this mission.
3. during mission change mode to return.
4. See error: drone fly directly to Land location and dismiss Land pattern.

**Expected behavior**
the drone must directly fly to the waypoint after the "land start" command.(planned landing pattern)

**Log Files **
https://logs.px4.io/plot_app?log=5b7ac051-0e0b-4be4-adc9-d8bb75717c56

**Plan**

[2.zip](https://github.com/PX4/PX4-Autopilot/files/5638657/2.zip)







</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Unexpected mode switch from OFFBOARD mode</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16235</td>
								<td>**Describe the bug**
It has been reported by several users that while flying in offboard the Pixhawk randomly changes to a different mode for no apparent reason, i.e. not due to offboard control failure, or sensor failure etc. Usually this change is extremely fast and the reason for is not registered in the flight logs making this issue quite hard to debug. In our case this mode change coincided with the mode that was set in the Pilot RC at the time, in this case ACRO, though @bperseghetti reported haaving the same issue in the past and it even happened without an RC on which seems to indicate it is not an RC issue. He also mentioned that this mode switch seemed random but it's still to be verified. @ThomasRigi also reported facing the same issue more than once and one time also in the kill switch.

This issue was discussed in PX4 Dev call on November 18th 2020: https://discuss.px4.io/t/px4-dev-call-november-18-2020/19554

It was first raised in slack here: https://px4.slack.com/archives/C0W2KUFFT/p1605613677266600

So far it has been reported on V1.09 and V1.10. No instances on V1.11 but most likely it's just from lack of usage. 

All the logs will be provided further below.

**To Reproduce**
Unfortunately this issue seems super hard to reproduce as it does happen quite rarely (@bperseghetti put it in the range of happening once every 150/200 flights). But the steps are to simply fly offboard often and for large periods of time.


**Expected behavior**
The UAV should NOT exit offboard mode for no apparent reason, and while there are many reasons that could explain this mode change, for our current architecture the UAV would have changed into HOLD mode given our parameters, or in more extreme situations it could switch into either POSITION, ALTITUDE, or as a last resort into STABILIZED.

A secondary issue is that even if the UAV is indeed changing modes, that should be explicitly recorded in the logs which is currently not happening as it seems that since it's such a quick change it goes in between the two log points.

**Log Files and Screenshots**

**Log 1** 
UAV changed from OFFBOARD mode to ACRO. No change in the RC Input:

![RC_Input](https://user-images.githubusercontent.com/11491719/99655093-8cf21d00-2a5b-11eb-8f4c-7596eea85591.png)

https://logs.px4.io/plot_app?log=e83a1c3d-99a5-484a-b908-6eff075edc56

User: @RicardoM17 

**Log 2**

Kill switch was engaged for an extremely short time but no action is recorded from the Pilot RC

![image](https://user-images.githubusercontent.com/11491719/99664346-58389280-2a68-11eb-92fa-ca0e0ff30977.png)


![image](https://user-images.githubusercontent.com/11491719/99664255-33441f80-2a68-11eb-80b3-c96b3b2b6a51.png)

https://logs.px4.io/plot_app?log=7ba7eefa-ed3e-4247-96c8-1a0294aea8d6

User: @ThomasRigi 

**Log 3**

Momentary offboard loss with no Pilot RC input.

![image](https://user-images.githubusercontent.com/11491719/99664937-3c81bc00-2a69-11eb-912b-dcfa8385be8f.png)

![image](https://user-images.githubusercontent.com/11491719/99665036-5f13d500-2a69-11eb-860b-138d0c3f9373.png)

User: @ThomasRigi 

@bperseghetti also mentioned being affected by this issue several times. I'm not sure if you have any logs that you could share?

**Possible Solutions/Changes**
These Solutions/Changes were discussed on the Dev Call when this was first raised.

1. Add some hysteresis or more simply a timeout for the mode change. It really shouldn't matter for most of the user base if the mode change takes 50-100ms extra vs being basically instant. For the small use cases where this can be a concern perhaps this could be disabled via a parameter or even the precise timout period could be defined there.

2. Throw an INFO message on mode change. If possible with the reason for mode change. It doesn't really solve this issue but it would help gather data to solve it in a different way in the future. IMO it also makes sense that this is enabled anyway.

3. Change the message logging structure to ensure that no relevant data escapes the log in the presence of such a glitch.

4. ???

FYI @ThomasRigi @bperseghetti @dagar @MaEtUgR 

Many thansk in advance.

P.s. @dagar We would especially like to ask if a fix regarding 1. could be fast tracked as there is a good chance that we are blocked from flying atleast we implement a solution, even if temporary. So this is quite high priority/critical from our side. Of course whatever help that you need just let me know and we'll help out in any way I can but I would assume it would just be changed in commander. If you do not have the bandwidth let me know and I can try to get a PR for you to review but in that case any pointers that you can provide would be helpful.</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Fail to trigger the position (GPS) loss failsafe</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16122</td>
								<td>**Describe the bug**

While I have experimented the GPS loss failsafe, I have found that PX4 fails to trigger the failsafe mode.
I think this issue is related to #15065. Thanks.

**To Reproduce**
Steps to reproduce the behavior:
Frist case, 
- make px4_sitl jmavsim
- Takeoff and fly (e.g. using Joystick in QGC)
- Enable failure injection: param set SYS_FAILURE_EN 1
- param set COM_POS_FS_DELAY -1
- Turn on orbit mode
- failure gps off
- fail to trigger the GPS failsafe
* Result: keep floating in the air

Second case,
- make px4_sitl jmavsim
- Takeoff and fly (e.g. using Joystick in QGC)
- Enable failure injection: param set SYS_FAILURE_EN 1
- param set COM_POS_FS_DELAY -1
- flying into another location (i.e., by using "go to the location" in QGC)
- failure gps off
* Result: blind land

If the flight mode is another mode except orbit or "go to the location", PX4 well triggers the GPS failsafe even though the parameter (COM_POS_FS_DELAY) has a strange value. To fix such issue, I think that PX4 needs to check the valid range of the parameter or something else.

**Expected behavior**
The GPS failsafe is triggered.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=a5823c45-07e5-43f5-9227-e8493ae89e54
https://logs.px4.io/plot_app?log=05fd86e9-3f3f-48c7-aa4f-117894ce26a3
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>VTOL Tailsitter: Thrust issue during transition</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/16057</td>
								<td>**Describe the bug**
When we are performing a VTOL transition with a tailsitter type drone We are getting very weird thrust fluctuations. It seems that it's taking two references basically at the same time, I would assume from the MC and FW controllers.
Also in simulation we don't get this issue.

More over @xdwgood also reported this issue on PX4 slack, thus proving that this issue is on upstream PX4 and not custom software.

**To Reproduce**
Use a VTOL Tailsitter type drone and perform a transition.

**Expected behavior**
The thrust reference should be smooth during transition.

**Log Files and Screenshots**

![bokeh_plot (6)](https://user-images.githubusercontent.com/11491719/97275750-9ad6c880-1836-11eb-9a59-ae861984b5b8.png)

https://logs.px4.io/plot_app?log=1e0b41e7-79d0-4d75-be15-27168f4274cc

![bokeh_plot (5)](https://user-images.githubusercontent.com/11491719/97275673-82ff4480-1836-11eb-8d75-1d0fb814896b.png)

https://review.px4.io/plot_app?log=6ce3fbeb-33d0-44db-8232-f3f9dd0f87b2

**Additional context**
@xdwgood reported that setting MPC_USE_HTE to 0, i.e. disabling the hover throttle estimator, seems to solve the issue. It's still to be confirmed but I'm still creating this issue to keep track of the problem as it should be fixed entirely.

@sfuhrer @RomanBapst  FYI</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>MAVSDK SITL test intermittent failures</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15940</td>
								<td> - standard_vtol: 'Fly forward in position control': failed
    - https://github.com/PX4/Firmware/pull/15939/checks?check_run_id=1236860638
    - https://logs.px4.io/plot_app?log=15eba26f-7e86-439b-b44e-188cb41c0c91
 - iris: 'Land on GPS lost during mission (GPS height mode)': failed
    - https://github.com/PX4/Firmware/pull/15943/checks?check_run_id=1238804612
    - https://logs.px4.io/plot_app?log=bf7c6b14-31b0-43a2-9377-88c0f99d28c7
    - **SIGABRT - Abort (abnormal termination) signal**
        - sitl_gazebo crashing?
 - standard_vtol: 'Continue on mag lost during mission': failed
    - https://github.com/PX4/Firmware/pull/15930/checks?check_run_id=1248017118
    - https://logs.px4.io/plot_app?log=3cf4b823-fdbb-4e84-8ff2-c4a79413d333</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Gazebo simulation of Typhoon causes flip/crash on takeoff</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15879</td>
								<td>I am simulating in Gazebo using Ubuntu 18.04 running on VMWare ESXi. There are a few different models of drones pre-made for use with the simulator. I have been using the 3DR Iris, which works fine, but I want to use the camera plugin so I tried switching to the Yuneec Typhoon. I launch the simulator with the command `make px4_sitl gazebo_typhoon_h480`, as per the simulation tutorial page. When I try to take off (either through my autopilot script or QGroundControl) the drone promptly does a flip and crashes upside-down on the ground

Here are log files for the [successful Iris takeoff](https://logs.px4.io/plot_app?log=f7c7ee5d-fa5a-47cf-b572-ee711f3e1893) and the [Typhoon failure](https://logs.px4.io/plot_app?log=003e3314-1c9f-4860-8e16-a01245fb6003).

Potentially related to #14997 , where another user experiences flips during flight of a simulated drone.</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>hovergames disarm in air</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15810</td>
								<td>
https://review.px4.io/plot_app?log=37ee74be-7c86-41b9-b172-115dcd91cd5b
https://www.youtube.com/watch?v=6e8kV0kW_Gk

![Screenshot from 2020-09-24 11-12-02](https://user-images.githubusercontent.com/84712/94164261-d0168200-fe56-11ea-9e45-b9f9e6f2eb65.png)

https://github.com/PX4/Firmware/pull/13992#issuecomment-698317062

@igalloway </td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>USB connection is only accessible if connected in a window of few seconds</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15667</td>
								<td>**Describe the bug**

If we do not connect the USB to a consumer right after the bootloader, once the RGB LED starts breathing blue (in a window of few seconds), the Pixhawk is inaccessible, no message can be received or sent anymore, but the TTY ACM driver is still up and running, thinking it can communicate.

I could replicate the exact same behavior going one level down, using `libusb1.0` instead of using the kernel `usb-cdc-acm` driver but the exact same behavior happened. This seems to indicate that the last burst would come from the Pixhawk's buffer and not the tty driver buffer. As the log shows below, if nobody subscribes to the data in `/dev/ttyACM0`, the USB connection is not initialized.

**To Reproduce**
Steps to reproduce the behavior:
1. Power the Pixhawk with the USB
2. Wait for the LED to be blue breathing
3. Wait an additional 10 seconds
4. Try to connect Mavros, QGc or `cat /dev/ttyACM0`
5. When connecting, few messages are received
6. The connection hangs: No message can be sent or received

Steps to reproduce the behavior after successful connection:
1. Power the Pixhawk with the USB
2. Wait for the LED to be blue breathing
3. ~Wait an additional 10 seconds~
4. Try to connect Mavros, QGc or `cat /dev/ttyACM0`
5. The connection is successful and can be used for any time you want
6. Disconnect (stop the node)
7. Wait 10 seconds
8. Try to reconnect with the same method
9. When connecting, few messages are received
10. The connection hangs: No message can be sent or received

**Expected behavior**

Steps to reproduce the behavior after successful connection:
1. Power the Pixhawk with the USB
2. Wait for the LED to be blue breathing
3. You can wait any time you want before connecting
4. Try to connect Mavros, QGc or `cat /dev/ttyACM0`
5. The connection is successful and can be used for any time you want

**Log Files and Screenshots**

`sudo apt install vusb-analyzer usbmon`

Following a USB log file showing the problem. The Pixhawk in this log is DEV 1018. To view it, download it, rename it to remove the `.txt` and open it with vusb-analyzer:

[usbmon.mon.txt](https://github.com/PX4/Firmware/files/5160810/usbmon.mon.txt)

```bash
mv usbmon.mon.txt usbmon.mon # .mon files are not supported on Github
vusb-analyzer usbmon.mon
```

*History of the log:*
* `0.00s`: Start the log
* `6.00s`: Connect Pixhawk
* `12.50s`: Pixhawk left the Bootloader (CDC driver advertised)
* `13.50s`: Mavlink node started on `/dev/ttyACM0` (showing normal behavior)
* `21.25s`: Mavlink node manually stopped
* `37.70s`: Mavlink node started on `/dev/ttyACM0` (showing a stuck behavior)
    * The messages **do contain data**

Normal start:
![image](https://user-images.githubusercontent.com/6976744/91954802-998b9280-ed02-11ea-9220-a5228873eb45.png)

Failing start:
![image](https://user-images.githubusercontent.com/6976744/91954851-ac05cc00-ed02-11ea-973e-404da6cb89f4.png)

Example log https://review.px4.io/plot_app?log=85f3ab21-074b-4a19-9baa-820d606824c2

**To reproduce the log:**

```bash
sudo su
modprobe usbmon
cat /sys/kernel/debug/usb/usbmon/1u > usbmon.mon
```

**Drone:**
- Pixhawk 1 (original 3DR)
- Firmware: px4_fmuv2_default 1.11.0, also tested (same error) on 1.9.0
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Possible attitude estimation bug</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15612</td>
								<td>**Describe the bug**
[Flight 1](https://review.px4.io/plot_app?log=70d80c6c-46f4-4d45-a710-bcc0ed0cae1c)
After ~30s of full manual indoor flight (~5m height above floor), the estimated attitude began to drift significantly in the roll angle (even in pitch, but not so much), even though the pose desired by the pilot was the hover state. The pilot tried to compensate by tilting the drone in the opposite direction, however, he reached the limit position of the roll stick on the RC and the roll still continued to drift. The high velocity led to a rough crash into a wooden bench. There was no RC signal loss and we checked that the RC had no trims and subtrims in effect.

This was the first time we experienced this behavior after ~4 years working with PX4 firmware.

[Flight 2](https://review.px4.io/plot_app?log=5dc3d4bb-5c16-4ec6-b7ad-17f2456e4f3b)
The second incident we had was the next day on the same location with different hardware, but the same symptoms. After ~30s of manual flight in altitude mode (~5m height above floor) the UAV started tilting uncontrollably and then crashed into a wall. Again no RC signal losses, no trims and subtrims. We were even flying with this platform the same day in the morning for ~10 minutes without any issues [(OK Flight)](https://review.px4.io/plot_app?log=e0c02122-4335-4ce3-ab3d-598a38e98c7f).

Please find attached logs and description of the hardware in the following sections. My colleague will also upload a video which compares the PX4 estimated attitude with the correctly estimated attitude obtained from a custom attitude estimator run on the recorded IMU flight data.

What is the cause of this behavior? Could there be a bug in the attitude estimator that only manifests in some highly specific conditions? Is there some problem apparent from the logs that we are missing?

Please ask for any relevant additional information that could help solving the issue. Until we resolve this issue we cannot fly indoor in this setup, because it is too unreliable and dangerous.

**To Reproduce**
We tried to reproduce the behavior in lower height above floor with another drone with the same setup as in the first flight without success. 

**Log Files and Screenshots**
[Flight 1](https://review.px4.io/plot_app?log=70d80c6c-46f4-4d45-a710-bcc0ed0cae1c)
[Flight 2](https://review.px4.io/plot_app?log=5dc3d4bb-5c16-4ec6-b7ad-17f2456e4f3b)
[OK Flight](https://review.px4.io/plot_app?log=e0c02122-4335-4ce3-ab3d-598a38e98c7f)

**Drone (please complete the following information):**

***Flight 1***
- Frame: Quadrotor Tarot T650
- Total mass: 3.5 kg
- Motors: Tarot 4114-11 320KV
- ESCs: BL-Heli 32 50A
- FCU: Pixhawk 4 (PX4 FW v1.10.1)
   - attached to the frame by screws
- RC: Hi-Tec Flash 8
- RC receiver: Optima SL

***Flight 2***
- Frame: Custom coaxial octarotor
- Total mass: 5.5 kg
- Motors: T-Motor MT2814-11 710KV
- ESCs: FOXY Multi 30A Opto V2015
- FCU: Pixhawk 2.1 Cube (PX4 FW v1.10.1)
   - attached to the frame by foam dampeners
- RC: Hi-Tec Aurora 9
- RC receiver: Optima SL

**Additional context**
- Magnetometer fusion was turned off for both flights
- All components were used previously in many flights
- Calibration of accelerometers, gyroscopes and level horizon was done the day before the first incident</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Failed to transition from TAKEOFF to MISSION</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15471</td>
								<td>While testing PR #15083 the vehicle was commanded to execute a mission, took off but failed to transition from Takeoff to Mission.

A workaround was to pause the mission and then continue the mission.

Vehicle used: Holybro S500 with Pixhawk 4 and Drotek GPS.

Mission with RTL
In 4/5 missions the vehicle tookoff and didn't went to the next waypoint, I think is related to the issue of the auto-takeoff, land flights. I needed to pause the mission or switch different flight mode and then click continue mission.
https://review.px4.io/plot_app?log=d2dc82d7-0024-4562-b8dc-2edf5e4bbf22
https://review.px4.io/plot_app?log=b1762b52-0ce7-4231-8f66-004e334ccdf2
https://review.px4.io/plot_app?log=7d6db655-f099-4d24-9de9-878498a6cace <- log with no issue
https://review.px4.io/plot_app?log=dbb8da1c-8f3f-4e56-91a3-ee9ed80b6585
https://review.px4.io/plot_app?log=936188a2-8917-4c4e-9820-a519e949d8ba

								</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Sometimes takeoff fails in CI tests</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15450</td>
								<td>When working on the MAVSDK SITL CI tests I often run into the case where a takeoff fails completely, or the landed state toggles back and forth between finally taking off.

Here are examples where takeoff doesn't happen at all:
https://logs.px4.io/plot_app?log=0f20b944-0704-4cbf-b499-1aec5bf6f9d6
https://logs.px4.io/plot_app?log=690f6488-0644-4b5c-a9cb-8ccdcda7f3ae

![bokeh_plot](https://user-images.githubusercontent.com/1419688/88920913-edbbd680-d26d-11ea-91de-f67a65c7d563.png)


And here are examples where takeoff on the second try seems to work:
https://logs.px4.io/plot_app?log=972ffaf8-da85-4142-a469-7195e0ba342f
https://logs.px4.io/plot_app?log=f13ba39e-cab0-4feb-8f6a-f7b8a506bc9c
https://logs.px4.io/plot_app?log=bab77966-e501-4923-9181-e922063a4109

You can see how there is:
```
[commander] Takeoff detected
[commander] Landing detected
[commander] Takeoff detected
```

FYI @MaEtUgR @dagar  </td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>RTL: descending before having reached mission land point</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15410</td>
								<td>**Describe the bug**
Upon RTL the drone starts to descend immediately and does not even reach the Land waypoint of the mission.
You can see how the horizontal velocity stops suddenly but the controller wants to continue:
![image](https://user-images.githubusercontent.com/48206725/88314240-e730da80-cd14-11ea-9911-0527860f7e8c.png)

**To Reproduce**
Steps to reproduce the behavior:
1. Checkout current master (aa7735c)
2. `make px4_sitl gazebo_standard_vtol`
3. Load a mission, e.g. [square vtol.zip](https://github.com/PX4/Firmware/files/4967729/square.vtol.zip)
4. Start the mission and observe. (this uses bug #15409 to trigger RTL with the provided .plan file)
5. Alternatively switch to RTL over QGC once the drone has taken off.


**Expected behavior**
The drone should follow what is outlined in https://docs.px4.io/master/en/flight_modes/return.html . In particular, it should stay at or above RTL_RETURN_ALT until it has reached the landing spot. (or according the cone settings, but the default settings were on no cone)

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=44529271-2e29-4827-a09a-64d78b725c6d
https://logs.px4.io/plot_app?log=32d68ad0-a322-451d-b3ca-4640bda64670

**Drone (please complete the following information):**
Tested with Gazebo standard_vtol
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>[VTOL] Not yawing towards VTOL Takeoff & Transition waypoint</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15409</td>
								<td>**Describe the bug**
The VTOL is no longer yawing towards the VTOL Takeoff & Transition waypoint. This causes the mission to fail, triggering RTL (which then itself has a bug).
@RomanBapst 

**To Reproduce**
Steps to reproduce the behavior:
1. Checkout current master (aa7735c)
2. `make px4_sitl gazebo_standard_vtol`
3. Load a mission with a VTOL Takeoff & Transition waypoint, e.g. [square vtol.zip](https://github.com/PX4/Firmware/files/4967632/square.vtol.zip)
4. Start the mission and observe.

**Expected behavior**
The drone should yaw towards the waypoint and then transition.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=44529271-2e29-4827-a09a-64d78b725c6d (RTL)

**Drone (please complete the following information):**
Gazebo standard_vtol

</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Takeoff ramp broken</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15408</td>
								<td>**Describe the bug**
With MPC_TKO_RAMP_T = 5s the drone does not take off anymore when starting a mission. With MPC_TKO_RAMP_T = 3s it still takes off, but only after 4s not doing anything and then taking off with a ramp time of 1s.

**To Reproduce**
Steps to reproduce the behavior:
1. Checkout current master (aa7735c1c0)
2. Launch SITL. I used `make px4_sitl gazebo_standard_vtol`
3. Set MPC_TKO_RAMP_T = 5 (1st log)
4. Load a mission. E.g. [square vtol.zip](https://github.com/PX4/Firmware/files/4967582/square.vtol.zip)
5. Start the mission
6. The drone does not take off.
7. Repeat with MPC_TKO_RAMP_T = 3 (2nd log) and MPC_TKO_RAMP_T = 1 (3rd log) and observe the differences

**Expected behavior**
The drone should take off gently respecting MPC_TKO_RAMP_T.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=0aa9b360-1230-4944-9159-4fb03aabd9d3
https://logs.px4.io/plot_app?log=44529271-2e29-4827-a09a-64d78b725c6d
https://logs.px4.io/plot_app?log=f698d92c-6636-496b-921a-5bc2c3d8a02f

**Drone (please complete the following information):**
Tested with gazebo standard_vtol
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Goto altitude controlled too late for multicopter</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15402</td>
								<td>When a goto command is used with an altitude (AMSL), a multirotor first goes to the new location, and only then climbs or sinks to the required altitude. I don't consider that the expected behaviour but I would expect the altitude to be assumed first like we see it in missions or at least at the same time.

https://logs.px4.io/plot_app?log=2de5ba52-c66f-46e3-9741-1337465c31fc

This came up in https://github.com/mavlink/MAVSDK-Python/issues/233</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Drone Crash: Motors shutdown on fly</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15347</td>
								<td>During some flight test we had an hexarotor crash. All the motors stopped suddenly and the machine crashed on the ground.
We right now can't explain such a behavior.
Here is the flight log: https://review.px4.io/plot_app?log=f177f3be-1ffc-4040-a86d-5831aefa752c
Can you guys spot any SW related issue?
The firmware is based on bcce75e691657e7da06ff1bf88fc878eb026c92b. It's an April master commit.
The modification we made to the firmware are minors and do not related to navigation. I do not think they can explain such a think.</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Slow large shake on an X680 quad</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15242</td>
								<td>**Describe the bug**
A Chinese user met this situation in his beginning PX4 flight.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=4a16cd09-badf-47e4-a858-58fd7f44d99b
![image](https://user-images.githubusercontent.com/4748411/86071722-8f56d900-bab2-11ea-8129-7202fbb42a7b.png)

And two log before this (vibration is smaller)
https://logs.px4.io/plot_app?log=4be2d974-37d8-4262-9949-0d7f7ce82ed1
https://logs.px4.io/plot_app?log=6eecae0d-733d-4eb9-bf49-0b67752bf796

**Drone (please complete the following information):**
X680, had a nice flight in ArduPilot before.

**Additional context**
My guess is caused by he choosed DJI airframe, makes the MIN PWM too large, but why it shake like this, maybe I was wrong.
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>GPS lost in position control (or RTL) lands without pilot having control</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15065</td>
								<td>**Describe the bug**
When GPS is lost while flying in POSCTL I expect the vehicle to go into ALTCTL so that the pilot can still bring the vehicle safely back. However, what happens instead is that a blind land is initiated, even though the mode displayed in QGC is ALTCTL.

The same can be reproduced in RTL. Switching to Manual control does still work but chances are a user will not try that in time!

**To Reproduce**
Steps to reproduce the behavior:
1. Use: https://github.com/PX4/Firmware/pull/15063
2. `make px4_sitl jmavsim`
3. Takeoff and fly in POSCTL (e.g. using Joystick in QGC).
4. Enable failure injection: `param set SYS_FAILURE_EN 1`
5. Trigger GPS lost: `failure gps off`

**Log Files and Screenshots**

https://logs.px4.io/plot_app?log=8bd577fe-63ea-41da-8846-33f2fef20db5

```
pxh> param set SYS_FAILURE_EN 1
  SYS_FAILURE_EN: curr: 0 -> new: 1
pxh> 
pxh> 
pxh> failure gps off
pxh> WARN  [commander] Failsafe enabled: no local position
INFO  [commander] Failsafe mode activated
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
WARN  [ecl/EKF] 156392000: GPS data stopped
INFO  [ecl/EKF] 156392000: reset position to last known position
INFO  [ecl/EKF] 156392000: reset velocity to zero
WARN  [ecl/EKF] 156392000: stopping navigation
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
INFO  [commander] Landing detected
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
INFO  [commander] Takeoff detected
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
INFO  [commander] Landing detected
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: blind land
WARN  [mc_pos_control] PositionControl: invalid setpoints
INFO  [commander] DISARMED by Auto disarm initiated
INFO  [commander] Failsafe mode deactivated
WARN  [mc_pos_control] Position-Ctrl activation failed with error: Activation Failed
WARN  [mc_pos_control] Previous flight task failed, switching to mode 1
INFO  [logger] closed logfile, bytes written: 9569092
```

And here is another log out of RTL:
https://logs.px4.io/plot_app?log=95824b1d-61df-4a02-ae1b-654f9a8e40d6

FYI @MaEtUgR @dagar </td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>pixracer IMU (icm20608g) errors</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15042</td>
								<td>**Describe the bug**
MAV topic SCALED IMU shows very high noise. Amplitude is about 1000. Unable to calibrate gyro (movement detected). Stable version shows clean data.

**To Reproduce**
Steps to reproduce the behavior:
- Master 5.6.2020
- Pixracer R14
- Standard plane

**Log Files and Screenshots**

10 seconds on qgroundcontrol:
![Kuvakaappaus 2020-06-05 13-53-45](https://user-images.githubusercontent.com/5569656/83868700-07401680-a734-11ea-8b6e-6408874a085e.png)

https://logs.px4.io/plot_app?log=dfc4f4f4-ce6b-4f57-bece-88d0a4f229f7</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>tailsitter vtol frnot/back transmission failed (no pitch set value is generated)</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/15037</td>
								<td>**Describe the bug**
When I used tailsitter to fly, I found that **sometimes**(Sometimes it can enter successfully, in the same flight) even if I switch, vtoll can not enter the fw mode

**To Reproduce**
1. use master branch fly(tailsitter vtol)
2. in altitude mode and try transmission(mc to fw) 
3. The drone pitch angle has not changed, there is no tilt acceleration

**Expected behavior**
Every time a customer uses a stick for transmission, vtol should enter the transmission state correctly

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=4df87c34-da2f-46be-b612-ddcc13b135c8

![840347981](https://user-images.githubusercontent.com/24932258/83841898-55551a00-a734-11ea-9430-6e67fcd8b502.jpg)

**Additional context**
I found that fw to mc sometimes fails when I try to send a transfer command using the remote control. I will do some investigations to see where the problem is. I now suspect 

numerical calculations under certain extreme conditions? (eg:at the start of transmission, the actual/setpoint angle of pitch are both 0)

here: https://github.com/PX4/Firmware/blob/master/src/modules/vtol_att_control/tailsitter.cpp#L206-L218

Because I compared the two switches, the only difference I found was that the drone angle/setpoint angle was close to 0 before the failed transmission started

FYI: @sfuhrer  :smiley: 
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>[VTOL] Adaptive Quadchute is broken</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/14947</td>
								<td>**Describe the bug**
The "loss of altitude" quadchute only triggers when it's already too late. 

The problem seems to lie with the non-documented hard-coded conditions on TECS height rate which take too long to be set to true: https://github.com/PX4/Firmware/blob/6c16a29d26b2c79d63f1459be361c8972399d9ce/src/modules/vtol_att_control/vtol_type.cpp#L246-L249

**To Reproduce**
I only tested with gazebo_standard_vtol, v1.11.0-beta2.
Steps to reproduce the behavior:
Version 1: (worst I found, quadchute has no possibility to recover the drone)
1. Disable the elevator in the sdf file, e.g. by setting [the area of the elevator](https://github.com/PX4/sitl_gazebo/blob/4acd679d17a735a1f62781349d14289a29b01014/models/standard_vtol/standard_vtol.sdf#L732) to 0 (you could also comment out the whole elevator block)
2. `make px4_sitl gazebo_standard_vtol`
3. Make sure VT_FW_ALT_ERR is set accordingly (in my logs 15m)
4. Launch a mission (or something else) that makes the drone transition to FW
5. In FW mode the drone will tip over and lose altitude
6. Observe how late the the quadchute is triggered

Version 2: (not as extremely late, drone still crashed though after quadchute)
1. Have the gazebo_standard_vtol model fly a normal mission with FW flight
2. Make sure VT_FW_ALT_ERR is set accordingly (in my logs 15m)
3. Disable the pusher motor (via motor failure plugin)
4. Watch the drone lose altitude and eventually trigger the quadchute (still late, but not as late as with Version 1)

**Expected behavior**
Quadchute should activate as soon as you have lost VT_FW_ALT_ERR meters of altitude with respect to the altitude setpoint. I understand the idea behind also checking if the drone is falling to not trigger in situations where for example you ask for a steep climb that the drone can't immediately react to, but the current implementation clearly doesn't work well if it only triggers when the drone is falling out of the sky with more than 20m/s vertical speed with already more than 25m of altitude lost.

**Log Files and Screenshots**
Version 1, disabled elevator: https://logs.px4.io/plot_app?log=5e45b915-3e91-4156-9d14-956cbffbc73e

Version 2, disabled pusher motor: https://logs.px4.io/plot_app?log=b3cf09c8-9b47-4832-98bf-b453ebd7cfa2

**Drone (please complete the following information):**
- Gazebo standard VTOL

**Additional context**
(Part of) the reason why it triggers so late with Version 1 is that TECS first still needs to initialise after the front transition, but the drone is already dropping. It takes way too long until TECS actually asks for +1m/s height rate

@sfuhrer @RomanBapst I think some thoughts should be spent on how to best set the trigger logic.</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>MC position controller not engaging cleanly</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/14927</td>
								<td>https://logs.px4.io/plot_app?log=677d9349-3e6e-4242-b253-44d1ef488568

![Screenshot from 2020-05-18 18-07-19](https://user-images.githubusercontent.com/84712/82264189-6e875980-9932-11ea-9422-df53e8a69149.png)
</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>EKF2 altitude jump when GPS checks first pass in flight</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/14926</td>
								<td>https://logs.px4.io/plot_app?log=677d9349-3e6e-4242-b253-44d1ef488568

![Screenshot from 2020-05-18 18-03-08](https://user-images.githubusercontent.com/84712/82263884-dab58d80-9931-11ea-9b66-8071ae09fb27.png)

![Screenshot from 2020-05-18 18-04-28](https://user-images.githubusercontent.com/84712/82263972-0b95c280-9932-11ea-8d78-1a44a11bef6a.png)

The z reset counter is 0 the entire flight.

</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>NAV_DELAY not working properly</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/14909</td>
								<td>**Describe the bug**
When a NAV_DELAY mission item is used, a multicopter oscillates back and forth around the waypoint where it is supposed to wait.

**To Reproduce**
Can be reproduced in SITL jMAVSim. Here is a plan file: 
[delay.zip](https://github.com/PX4/Firmware/files/4633983/delay.zip)

**Expected behavior**
It should nicely hold the position.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=f284d761-8709-4701-bb26-1dba665b187a

![bokeh_plot(2)](https://user-images.githubusercontent.com/1419688/82044691-1a6c4300-96ae-11ea-9365-17a7435dfa83.png)

This is required to resolve https://github.com/PX4/Firmware/issues/14904.</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Takeoff altitude is not correctly respected</td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/14903</td>
								<td>**Describe the bug**
A multicopter does not go to the correct takeoff altitude but actually lower, presumably it is `MIS_TAKEOFF_ALT` - `NAV_MC_ALT_RAD` because once it "reaches" takeoff altitude it switches to HOLD and doesn't keep climbing.  

**To Reproduce**
SITL:
```
param set NAV_RCL_ACT 0
param set NAV_DLL_ACT 0
param set MIS_TAKEOFF_ALT 2.5
commander takeoff
listener local_position -n 1
```

To "fix" it, set the threshold smaller:
```
param set NAV_MC_ALT_RAD 0.05
```

**Expected behavior**
It should go to the correct altitude as it used to.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=eaae3517-b6bd-460a-be32-a2eae6506eb0

![bokeh_plot(1)](https://user-images.githubusercontent.com/1419688/81953319-d161b380-9607-11ea-86b7-3bc9b92b5731.png)

</td>
								<td>closed</td>
								<td></td>
							</tr>
							<tr>
								<td>Poor Fixed wing runway takeoff tracking </td>
								<td>https://github.com/PX4/PX4-Autopilot/issues/14851</td>
								<td>Fixed wing runway takeoff tracking is very poor on various firmwares and aircraft types that i've been testing and had others test.

I've compiled some notes and logs on this and it was even brought up (in a different context) in https://github.com/PX4/Firmware/issues/11785 but the more we look at it, the more this is a true issue and from a practical standpoint is making using autonomous takeoff not feasible given the high risk.

Let me also preface this by saying a many things have been tested and changed and a makeshift solution was come up with as well but that doesn't solve the problem. Wheel Rate settings have been altered to various extreme and subdued amounts (as seen in the logs). This has reduced some things present like sudden full wheel deflection upon mission start but it never fixes the trajectory of the takeoff and that it does not generally point or aim to the takeoff waypoint but goes off course many time more than it does not.

Multiple different aircraft and aircraft types were used, even though the mixer is the same, that is only because we have varying sizes and weights of test aircraft and even foam ones where the setup, weight and geometry on the nose gear and linkages is completely different (which is good to rule out a single hardware type or build as the culprit).

I often have seen the wheel channel output (main 5) swing up and down 500us over neutral, essentially max on both extremes and even when that isnt having the same type of behavior exists at +/200. The scaling factor probably helps in these cases by reducing movement (so long as you are still on course enough or at least not going to crash on takeoff) but the thing to remember is this entire process is only 3-8 seconds long before you're airborne so it's easy to not see or overlook.

The hacked solution? Limit min/max pwm value of the wheel servo either in PX4 or at the servo level to limit how much steering can physically occur. This is not a solution but gets things airborne by quasi limiting the ability to go off course. Not a true solution.

Logs:

https://review.px4.io/plot_app?log=efad594a-afe0-451a-a1dd-a6130e49a03b
This log has an sudden full right wheel right as the mission is initiated.


									<img width="815" alt="Screen Shot 2020-05-06 at 4 09 07 PM" src="https://user-images.githubusercontent.com/31726584/81230497-38072180-8fb7-11ea-9942-27b46c07db99.png">

https://review.px4.io/plot_app?log=25ce0df8-15d6-4591-8578-83042921cffe - This is similar but not as severe as the previous log (still has huge wheel swings though).

https://review.px4.io/plot_app?log=53e17faa-3f52-4a3f-8e7e-b2d8c8ede219 - This log is interesting that the aircraft was purposely moved to the corner of the runway because the previous flights had it going to the right during the takeoff portion and it sill went much too hard right and then off the runway.


										<img width="825" alt="Screen Shot 2020-05-06 at 4 35 30 PM" src="https://user-images.githubusercontent.com/31726584/81230726-a1873000-8fb7-11ea-846f-1522b97372cc.png">


https://review.px4.io/plot_app?log=ee6bef2c-167c-4d43-ae96-8ac2144df2e1 - This takes off successfully because of the large area, thats the only reason. There is video of the takeoff if need be.

https://review.px4.io/plot_app?log=bc807a89-07c1-44ac-836b-7d9e09ee7d0a - This log actually doenst look as bad except if you zoom out and look at the first waypoint, it's still off to the left.


https://review.px4.io/plot_app?log=668ab1af-c9f8-4c30-b6fb-f26b998c85b4 - This log takes off successfully but zoom into the wheel output. It's successful because the area used was large and it has the time and room to recover and/or just get airborne.

https://review.px4.io/plot_app?log=bac42025-4d70-45d3-ae4c-39c781328b01 This was a taxi test but still shows rapid oscillation (so throttle is only at 30%).
 

											<img width="811" alt="Screen Shot 2020-05-06 at 4 48 22 PM" src="https://user-images.githubusercontent.com/31726584/81231820-6c7bdd00-8fb9-11ea-84cd-6ed33cc17f38.png">

https://review.px4.io/plot_app?log=cbb044ac-211d-49f9-86b9-3d0702427cbe - Same place, post taxi test (same wheel rate settings) and less rapid oscillation but still really bad, had to abort since about to go off runway.


												<img width="813" alt="Screen Shot 2020-05-06 at 5 01 44 PM" src="https://user-images.githubusercontent.com/31726584/81233100-b5cd2c00-8fbb-11ea-9a40-f8fe560be6eb.png">

https://review.px4.io/plot_app?log=08ff0f58-b264-49b0-a694-58eab9b76ffd


https://review.px4.io/plot_app?log=bd117170-1dca-42a8-a309-58b537296419

Below are a collection more, some are very extreme, some less. Multiple combinations of the wheel rate parameters were altered but this still represents multiple settings where oscillation occurred severely.

https://review.px4.io/plot_app?log=7758631a-a5ae-4ead-97b4-f496cfa2a3c8
https://review.px4.io/plot_app?log=10e31631-552f-4585-b1f4-bc73da6ac094
https://review.px4.io/plot_app?log=75486b4a-385b-47a6-a851-c54ae909c077
https://review.px4.io/plot_app?log=d6d43381-14ac-4ba7-9cf2-f9b68d0ed7b7
https://review.px4.io/plot_app?log=b0be9c38-62e5-4cee-9f2e-9c40b603c143
https://review.px4.io/plot_app?log=c1dcab38-8c6b-42a8-91a2-4e89ab1ec26a
https://review.px4.io/plot_app?log=6130efca-f4dd-4a81-b648-f1ed5424f585
 https://review.px4.io/plot_app?log=e7e3027f-8cf0-4ef8-ace5-640383a2775b
https://review.px4.io/plot_app?log=6130efca-f4dd-4a81-b648-f1ed5424f585
https://review.px4.io/plot_app?log=7c70673a-5d26-4996-9de1-35e1b1633d3c

@dagar - as discussed




												</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Misfire at catapult launch (custom FW version 1.7.2)</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/14838</td>
												<td>**Describe the bug**
From 55 test flights we had 2x misfire at catapult launch. It looks like PWM was not send on ESC and motor didn't start. I need suggestion what to check in ulg files.

**To Reproduce**
We do not know how to reproduce.

**Expected behavior**
Motor should always start at catapult launch

**Log Files and Screenshots**
ULG files
[misfire2x.zip](https://github.com/PX4/Firmware/files/4583095/misfire2x.zip)
or
https://review.px4.io/plot_app?log=530849b9-21cb-4097-9acb-cf0d311b97bf
https://review.px4.io/plot_app?log=b78cdaff-b13b-43a9-8d57-0168c43b90e7

**Drone (please complete the following information):**
https://www.unmannedtechshop.co.uk/product/unmanned-pixhawk-autopilot-kit/
pixhawk 2 fmuv2
Stack: PX4 Pro
Vehicle: Fixed wing
FW Version: 1.7.2 custom build
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>EKF2 velocity estimate wrong - v1.11-beta</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/14735</td>
												<td>**Describe the bug**
We are flying in indoor environments with VIO, and while testing recently, discovered that the EKF's velocity estimate significantly differed from that provided by the vision system. We don't know if this is a new issue, or whether this already existed before, since we have not flown this setup so extensively before. We also only recently plumbed the vision system's velocity estimate through to PX4, so it's easy to confirm the issue now.

*EDIT: older logs (~1 mo old - upstream `d7a9b123e6b84df4a7c01daaac64706c39abd3d7`) don't show this velocity offset, and have lower vibration levels. I think the on-sensor DLPF was disabled between then and now.* https://logs.px4.io/plot_app?log=ff62827a-7eff-45c6-b2e6-6ea22cd087c6

![image](https://user-images.githubusercontent.com/5557676/80012224-f8aae200-849a-11ea-8594-8472c7f0853b.png)

**Expected behavior**
The velocity estimate matches the one provided by the vision system, which is accurate and has been benchmarked against groundtruth. Also the vehicle was flying in a straight line, and that velocity offset wasn't actually there in real life.

**Log Files and Screenshots**
Here are two logs from boot illustrating the issue. The first one is without velocity fusion enabled, and the second one is with velocity fusion enabled (which doesn't make much of a difference).

1. EKF2_AID_MASK = 24 (ev pos, ev yaw): https://logs.px4.io/plot_app?log=6eb5a9cb-a4e9-4b4a-89eb-e71e11419670
2. EKF2_AID_MASK = 280 (ev pos, ev yaw, ev vel): https://logs.px4.io/plot_app?log=dcb3b53b-07d2-4db9-a118-592ef82d5cba

These are both replayable. Our branch is based on upstream `746b3124abe9df486c6d88a3d9ec0c438e63654d`

#### First log
Accel bias estimate:
![image](https://user-images.githubusercontent.com/5557676/80014423-470db000-849e-11ea-9028-a36471ee2864.png)

Velocity estimates:
![image](https://user-images.githubusercontent.com/5557676/80014748-bb485380-849e-11ea-9c1d-a0703bd55958.png)

#### Second log
Accel bias estimate:
![image](https://user-images.githubusercontent.com/5557676/80014567-7a503f00-849e-11ea-940e-11f289aad6bf.png)

Velocity estimate:
![image](https://user-images.githubusercontent.com/5557676/80014810-d6b35e80-849e-11ea-9c49-2de800e50f8d.png)

#### Last good log
https://logs.px4.io/plot_app?log=ff62827a-7eff-45c6-b2e6-6ea22cd087c6

Based on upstream `d7a9b123e6b84df4a7c01daaac64706c39abd3d7`

**Drone (please complete the following information):**
- 550 sized carbon quadcopter.
- Hardmounted Pixhawk 4.
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>[VTOL] Front transition deviates</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/14718</td>
												<td>**Describe the bug**
During the front transition, the drone rolls into the wrong direction and deviates from the expected path. Observed in SITL, probably linked to https://github.com/PX4/Firmware/pull/14405 @RomanBapst 

**To Reproduce**
Steps to reproduce the behavior:
1. Run SITL: `make px4_sitl gazebo_standard_vtol`
2. Launch a mission with a vtol takeoff and transition waypoint 
3. Observe

**Expected behavior**
The drone should face / fly towards the front transition waypoint 

**Log Files and Screenshots**
Log file: (transition northwards) https://logs.px4.io/plot_app?log=af78e5c4-99fc-46fb-924c-c706a9fe6964

Similar behaviour when transitioning towards East or South:
![image](https://user-images.githubusercontent.com/48206725/79860129-6dfeb000-83d2-11ea-84d6-19be4600bafd.png)

**Drone (please complete the following information):**
- SITL standard VTOL on Gazebo
- run on master from 20.04.2020

**Additional context**
Going through the code changes of https://github.com/PX4/Firmware/pull/14405, I additionally noticed the hard coded limit in https://github.com/PX4/Firmware/blob/809b45eac89cd89cb20a9a5cba646396ef136730/src/modules/vtol_att_control/vtol_type.cpp#L193 that I would prefer to have as a parameter and a comment that should be adapted at https://github.com/PX4/Firmware/blob/809b45eac89cd89cb20a9a5cba646396ef136730/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L1579 to include the transitions.

I think there is also a problem with the yaw alignment when the drone initiates the transition. It still rotates at around 45°/s in the log shared above. But that's I guess a separate point.</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>MC throttle drop STABILIZED -> ALTCTL (v1.11.0-beta1)</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/14704</td>
												<td>"if take off in stable mode, then change to altitude hold mode; the altitude drops quickly"

https://logs.px4.io/plot_app?log=6b774a27-5f7a-403f-ade2-0c53df838ebc

![Screenshot from 2020-04-19 11-41-28](https://user-images.githubusercontent.com/84712/79692370-bb441b80-8232-11ea-9092-0f38d3348c16.png)


</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Multicopter v1.11 beta testing - max throttle is suddenly asserted</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/14677</td>
												<td>https://logs.px4.io/plot_app?log=23c4f03d-819d-4f6e-a9fa-f6a8fdc57e01</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Unstable GPS data while using the 2nd telemetry on TELEM2 port - v1.11.0-beta1</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/14659</td><td>**Describe the bug**
Hi, I found very strange GPS behavior after uploaded "v1.11.0-beta1" to pixhawk 4. Firstly, I configured MAV_1_CONFIG = TELEM2 (My UAV has been flown using this config. before since firmware v1.8.2, v1.9.2 and v1.10.2 and I got no error). Then, I investigated using"mavlink inspector" in QGC and take a look at GPS_RAW_INT. 

GPS signal seems unstable, the fluctuation ranges from 0 to 5 Hz. It should be a constant value or nearly constant (compared with an older firmware, I have already tested before).

Finally, the result is the flight mode could not be changed from ALTITUDE to POSITION, No Green GPS LED light visible. I managed the test as follows 

**To Reproduce / Test Case**
Case 1: v1.11.0-beta1 --> OK
MAV_1_CONFIG = Disabled
https://review.px4.io/plot_app?log=9764baca-ec06-40aa-b1ba-79719d0b75fc

Case 2: v1.11.0-beta1 --> Error / ubx msg warning
MAV_1_CONFIG = TELEM2
https://review.px4.io/plot_app?log=a670c429-592e-4e52-a200-b811bd45f14d

Case 3: v1.11.0-beta1 --> OK
MAV_1_CONFIG = TELEM/SERIAL4 
https://review.px4.io/plot_app?log=98b8c1ec-d492-48b5-823a-870af29e5686

Case 4:  v1.11.0-beta1 --> Error / ubx msg warning
MAV_2_CONFIG =  TELEM2  

Case 5: v1.11.0-beta1 --> OK
MAV_2_CONFIG =  TELEM/SERIAL4 

Case 6: v1.11.0-beta1 --> Error / ubx msg warning
MAV_1_CONFIG = TELEM/SERIAL4 
MAV_2_CONFIG =  TELEM2  

Case 7: v1.10.1 --> OK (compare to Case 2 v1.11.0-beta1. It is not the same result even config. is the same)
MAV_1_CONFIG = TELEM2
https://review.px4.io/plot_app?log=29bea816-da9d-4cd4-b042-c0fdb14e489d

The error is the same whether telemetry is available on that port or not, indoor or outdoor if I configure MAV_X_CONFIG to TELEM2. According to the flight log of Case 2, you will see the strange GPS behavior at "GPS Uncertainty and GPS Noise & Jamming". In every test case, Telemetry works fine.

However, GPS works fine if I upload the older firmware "v1.10.1" (v1.8.2 / v1.9.2 is the same) Is it firmware bug ? or Did I miss anything?

**Drone (please complete the following information):**
- Describe the type of drone: Tiltrotor using E-flite Convergence airframe
- Hardware: Pixhawk4 + GPS pixhawk 4 + Holybro telemetry

</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>bad altitude hold v1.11.0-beta1 vs v1.10.0</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14640</td>
											<td>User reported worse altitude hold after upgrading from PX4 stable v1.10.0 to the current v1.11 beta.

### v1.10.1
 - https://review.px4.io/plot_app?log=664c4e7a-9bb1-423f-935f-5abbf69f6170
 - (**new 2020-04-22**) https://review.px4.io/plot_app?log=d26da1f6-24a8-43e3-aadc-0bf5a634d86f

### master (slightly before v1.11.0-beta1 with old IMU drivers)
 - https://review.px4.io/plot_app?log=ba162746-c163-4b68-9259-251410e4d053

### v1.11.0-beta1
 - (windy): https://review.px4.io/plot_app?log=c27b7984-de30-4f85-ac27-4b6083007d02
 - (windy): https://review.px4.io/plot_app?log=672dcf31-f717-4136-830e-e20fd5e80038
 - https://review.px4.io/plot_app?log=047d7d42-f16f-4dfd-a9a2-33613455eeeb
 - (**new 2020-04-22**): https://review.px4.io/plot_app?log=e625d55b-613c-43f8-bad7-ce666000b264
 - (**new 2020-04-22**): EKF2_HGT_MODE=GPS https://review.px4.io/plot_app?log=7f123d8b-0c5d-4188-88b8-df5752340d4d
 - (**new 2020-04-22**): EKF2_BARO_NOISE baro noise tuning: https://review.px4.io/plot_app?log=d178c0b5-b863-4038-bead-9026c0a0a598


### Local Position Z (v1.10.0 vs v1.11.0-beta1)
![Screenshot from 2020-04-10 11-16-18](https://user-images.githubusercontent.com/84712/79001600-bb4e6800-7b1c-11ea-90c8-4d77405c2f78.png)

### Velocity Z (v1.10.0 vs v1.11.0-beta1)
![Screenshot from 2020-04-10 11-18-58](https://user-images.githubusercontent.com/84712/79001772-1d0ed200-7b1d-11ea-92f9-e6196679637f.png)
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>imu rotation issue</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14612</td>
											<td>**Describe the bug**
The first IMU of my cube black have a bad rotation.

**To Reproduce**
- flash a cube black with master
- (reset all acc off to 0 and scale to 1 and reboot)
- see estimated orientation or sensors measures (my cube was leveled) :
![image](https://user-images.githubusercontent.com/59083163/78683411-890bf300-78ef-11ea-9aee-1b321347a1aa.png)


**Expected behavior**
Acc 0 should measure about -9.81m/s/s not +9.81

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=9531c76c-abd9-4656-9fd1-3d50dbc8ced5

**Additional context**
@bkueng it was ok at 2f3174abb0ee2503a94d8b41b99e729fc1946ebb and not after 532ccd18ad2d82f72a33d1c0915a50b49f53eada

Another issue happened when I tried to calibrated the acceleros with this issue: scales of imu 1 and 2 were negative.
Shouldn't be great to have test on this</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>logger watchdog triggered on FW fmu-v5</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14600</td>
											<td>https://logs.px4.io/plot_app?log=b815c6b1-707c-4a9b-bdf3-5bb7f41af758
CPU usage went to 100% shortly after arming due to the logger watchdog triggering.


![Screenshot from 2020-04-05 13-04-37](https://user-images.githubusercontent.com/84712/78504931-0859c500-773e-11ea-9bcb-095914384391.png)
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>[Gazebo][Tailsitter] Drone angle is unstable when fw to mc</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14588</td>
											<td>**Describe the bug**
I used the latest mastre branch and performed the gazebo_tailsitter test. I found that when I choose fw to mc, the drone attitude is unstable!

I'm not sure if this is a simulation problem? Or is there a mistake in the recent changes?

**To Reproduce**

1. make px4_sitl gazebo_tailsitter
2. open QGC ,send takeoff
3. switch mc to fw
4. Wait a minute
5. switch fw to mc
6. see unstable angle(by gazebo display)

**Expected behavior**
have stable back-transmission

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=25a0b4df-5602-4274-8d8f-b933c0dff8ac

![11111](https://user-images.githubusercontent.com/24932258/78357807-aa659a00-75e4-11ea-88d8-13998196e639.png)

</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>[uorb] sensor_mag advertise failed (5)</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14579</td>
											<td>**Describe the bug**
On the Pixhawk cube, the ULog file is full off these logged messages: "[uorb] sensor_mag advertise failed (5)"

**To Reproduce**
Steps to reproduce the behavior:
1. Upload the latest stable PX4 firmware (v1.10.1)
2. Boot UAV and start logging (via shell "logger on")
3. Stop logging after a short time ("logger stop")
4. Open ULog, see messages

**Expected behavior**
There should be no error when the sensor_mag message is advertised

**Log Files and Screenshots**
*Always* provide a link to the flight log file:
- Uploaded fresh firmware, no configuration done ([PX4 Flight Review](https://logs.px4.io/plot_app?log=2ddaa946-d048-4160-a762-a151b25efb83)).
- Did the basic config (choose airframe, calibrate sensors, etc) ([PX4 Flight Review](https://logs.px4.io/plot_app?log=ceb8e90c-d4f8-4a30-8de9-fe4f771f944b)).

**Drone (please complete the following information):**
- Octocopter
- Pixhawk Cube
- Here+ gps

**Additional context**
This started when uploaded a modified 1.10.0 version for the first time, previously there was a modified 1.8.x version of the PX4 firmware. 
On a second Pixhawk (Pixhawk 1) this problem does not occur.</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Battery emergency RTL initiate climb command, even if drone already landing</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14479</td>
											<td>**Describe the bug**
I found on a flight that I have came to nearly empty battery that there is something that look to me like bug in the emergency and critical battery logic.
I started to land in nearly empty battery, but then the emergency battery logic intiated, and instead of continue landing, it started to RTL (climbing), I took control to RC and landed.
it seems that COM_LOW_BAT_ACT doesn't respect the current flight mode, and if the drone has already started to land, it can re-initiate action, that might be climbing.

**To Reproduce**
 * in order to reproduce easily in simulator I have changed the next parameters:
BAT_LOW_THR = 30%
BAT_EMERGEN_THR  = 20%
BAT_CRIT_THR = 10%
COM_LOW_BAT_ACT = 3 (Return mode at critically low level, Land mode at current position if reaching dangerously low levels)
RTL_RETURN_ALT = 100m
SIM_BAT_MIN_PCT = 0%

 * take-off
 * fly to another location
 * climb to 20m
 * wait that the battery will get to ~30% and start land
 * the RTL will be initiated, starting with climbing (and here the bug)

**Expected behavior**
in case of already started landing, don't initiate RTL. and don't re-initiate landing

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=c50117f1-3f81-4141-af5f-5e905ea239e5
![image](https://user-images.githubusercontent.com/29940676/77550563-ecdaf880-6eb9-11ea-8598-910b5f52d097.png)


**Drone (please complete the following information):**
- simulation (master 25/3/2020)
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Position control failure when MPC_TILTMAX_AIR >= 90 degrees</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14456</td>
											<td>**Describe the bug**
A tilt parameter of 90 (or more) degrees creates invalid setpoints in the position controller

**To Reproduce**
Steps to reproduce the behavior:
1. Takeoff in stabilized/altitude
2. Set `MPC_TILTMAX_AIR` >=90
3. Switch to position control
```
pxh> param set MPC_TILTMAX_AIR 90
+ MPC_TILTMAX_AIR: curr: 45.0000 -> new: 90.0000
pxh> WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] Failsafe: stop and wait
WARN  [mc_pos_control] PositionControl: invalid setpoints
WARN  [mc_pos_control] PositionControl: invalid setpoints
```


**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=c772812b-eba6-47f0-b2ed-965f2e1d9f4a</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>SITL jmavsim crazy pitch rate oscillations</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14303</td>
											<td>**To Reproduce**
Steps to reproduce the behavior:
1. master on this commit https://github.com/PX4/Firmware/commit/2b087a92c277d542405c79fd98e99e5ccfb358ca
2. run `make px4_sitl jmavsim`
3. immediately switch to altitude mode and takeoff by pushing up with the stick
4. Don't move the sticks anymore and see the drone having fast and extreme pitch oscillation for multiple seconds

**Expected behavior**
There used to be stable flight from the beginning on.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=44c727a2-9b7c-43e7-b86d-f4d58e5e50d3
![image](https://user-images.githubusercontent.com/4668506/75981578-16b98480-5ee5-11ea-9515-f98cd07ffddf.png)

**Additional context**
- ~Suspect might be https://github.com/PX4/Firmware/pull/14228 (NOT YET VERIFIED)~
I'll do some further testing to narrow it down.

~FYI @TSC21 @Jaeyoung-Lim~ 
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Fixed-wing position controller not ouputting attitude setpoints if GPS switched off in altitude mode</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14243</td>
											<td>**Describe the bug**
Fixed-wing altitude mode doesn't work without GPS data because it seems to run only with a [valid global position](https://github.com/PX4/Firmware/blob/18754225c93ee18c76c227cc66f687835e4a0046/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L1481). 
It is though currently possible to switch to altitude flight mode (at least for a VTOL) without a GPS connected.

**To Reproduce**
In sitl, fly a VTOL in fixed-wing mode or a plane, and disable GPS fusing in air by setting the EKF2_AID_MASK to 0. Switch to stabilized and back to altitude mode.

**Expected behavior**
I expect that altitude flight mode works without issues after a GPS loss (at least with valid baro data).
Till we have that we should disable the ability to switch to altitude flight mode if you don't have a valid global position (resp. for VTOL disable transition to FW mode in altitude mode).

**Log Files and Screenshots**
This is a sitl flight where I disabled GPS fusing in air (by setting the EKF2_AID_MASK to 0). When then switching out and in again into altitude flight mode, the attidue sp and control signals are frozen. 
https://review.px4.io/plot_app?log=3cfedd2d-14e0-4f6f-8afd-781823577aa6

Add screenshots to help explain your problem.

**Additional context**
I became aware of this problem recently while flying a VTOL without GPS sensor.

Should we maybe split TECS and L1 into separate modules @RomanBapst @dagar ? Just as an effort to disentangle this all a bit.
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>ROS test of tiltrotor fails</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14200</td>
											<td>The ROS test of tiltrotor started failing in CI and this can also be reproduced locally:

```
PX4_DOCKER_REPO=px4io/px4-dev-ros-melodic:2020-02-11 Tools/docker_run.sh bash
DONT_RUN=1 make px4_sitl gazebo
test/rostest_px4_run.sh mavros_posix_test_mission.test mission:=VTOL_mission_1 vehicle:=tiltrotor
```

What happens is that the tiltrotor does not actually seem to take off but only switches to in-air for about 1 second and then auto-disarms again. I have seen this manually in testing as well, especially with tailsitter.

Test output:
```
INFO  [ecl/EKF] 5188000: reset position to GPS
INFO  [ecl/EKF] 5188000: reset velocity to GPS
INFO  [ecl/EKF] 5188000: commencing GPS fusion
[ INFO] [1582276040.013415824, 17.360000000]: WP: mission received
[ INFO] [1582276040.660517600, 18.004000000]: WP: mission sended
[ WARN] [1582276041.664164514, 19.012000000]: CMD: Unexpected command 176, result 0
[ INFO] [1582276042.674148856, 20.020000000]: FCU: ARMED by Arm/Disarm component command
[ INFO] [1582276042.726149218, 20.072000000]: FCU: Takeoff to 15.0 meters above home.
INFO  [commander] Takeoff detected
[ INFO] [1582276049.615119419, 26.948000000]: FCU: Takeoff detected
INFO  [commander] Landing detected
[ INFO] [1582276050.309446351, 27.640000000]: FCU: Landing detected
[ INFO] [1582276050.421811711, 27.752000000]: FCU: DISARMED by Auto disarm initiated
INFO  [logger] closed logfile, bytes written: 2344626

PX4 Exiting...
Shutting down
[Testcase: testVTOL_mission_1] ... ok

[ROSTEST]-----------------------------------------------------------------------

[px4.rosunit-VTOL_mission_1/test_mission][FAILURE]------------------------------
position not reached | lat: 47.397736151, lon: 8.547064163, alt: 503.05, current pos_xy_d: 110.65, current pos_z_d: 14.77, best pos_xy_d: 110.47, best pos_z_d: 14.24, index: 0 | timeout(seconds): 60
  File "/usr/lib/python2.7/unittest/case.py", line 329, in run
    testMethod()
  File "/home/julianoes/src/Firmware/integrationtests/python_src/px4_it/mavros/mission_test.py", line 271, in test_mission
    index)
  File "/home/julianoes/src/Firmware/integrationtests/python_src/px4_it/mavros/mission_test.py", line 228, in reach_position
    best_pos_z_d, index, timeout))
  File "/usr/lib/python2.7/unittest/case.py", line 422, in assertTrue
    raise self.failureException(msg)
--------------------------------------------------------------------------------


SUMMARY
 * RESULT: FAIL
 * TESTS: 1
 * ERRORS: 0
 * FAILURES: 1
```

https://logs.px4.io/plot_app?log=feba07e1-cd9d-4ee6-8f77-f570f2ebc8fb</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>EKF2 estimates for x and y unstable with constant optical flow innovation </td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14165</td>
											<td>Hey everyone,
first of all shoutout for your great work, it's really impressive.

Remark: In hindsight I've written quite a long story here, but I hope providing what I figured out help digging into the problem faster.

I'm currently working with the Intel Aero RTF drone with the PX4 v1.9.0 firmware. I'm trying to fly indoors (hence no GPS) with ORB-SLAM2. This basically works already, fusing the data to the EKF2 via /mavros/vision_pose/pose. However, I experienced undesired behavior if SLAM fails (e.g. when it looses track after fast motions). I thought it should be possible to still get decent state estimates using only internal sensors, PX4Flow, and the LeddarOne distance sensor (the sonar on the PX4Flow board is still active but not used. Also I'm sharing the Telemetry port for PX4flow and LeddarOne as suggested here https://github.com/intel-aero/meta-intel-aero/issues/315#issuecomment-391439235).

So I did some experiments without SLAM running, and dragging around the drone by hand only for safety. Indeed, the position and velocity estimates are quite ok for multiple minutes (note that I put down the drone from time to time to observe the integration drifts). But at some point x and y drift off devastatingly and need to be resetted by the EKF2 all the time. I'm not sure why this happens. All I found out (using fw_px4_plottools) is that the optical flow innovations just freeze at some point and that's exactly the timestamp when everything gets messy. I'm not sure whether that's the cause or just another effect though. Note that also lifting the drone to a height where optical flow values should be plausible didn't make it recover anymore.

The z position / velocity do not seem to be affected. However, I noticed an issue there as well, although I personally can't see any connection: there are non-zero z-velocities (up to 0.4m/s), even when the drone is standing still and the z position is constant. Thinking of their kinematic relationship, that doesn't really make sense. Looking at some plots one could think they behave the same way, i.e. z velocity is just a scaled version of z position (which would explain why it's static and then it'd only be a bug in the log). Also looking at different static phases, the z positions are not necessarily equal (although the floor is the same). I saw that the LeddarOne tends to output 0 when the drone is on the floor, so I tried to fix this by forcing EKF2_MIN_RNG to 0.0m, but it didn't do the trick.

Here are two logs where the drone is dragged around and xy goes nuts after some minutes.
https://logs.px4.io/plot_app?log=91bc8ed4-6044-45e8-bfcf-5416976ad011
https://logs.px4.io/plot_app?log=907f8a65-388e-40ad-83d9-3bdee61bc29c

Here's one log where I actually flew around with the RC using POSITION flight mode. Note how here first OF innovations go constant and simultaneoulsy xy drift off. But then when SLAM is fed xy recovers. However, apparently I lost SLAM at some point during flight and the drone skyrocketed to the left (as far as I can tell at a faster rate than I thought MPC_XY_VEL_MAX would allow).
https://logs.px4.io/plot_app?log=af47b24a-1a44-4eee-898d-7f9a72c8412b

Here are also 2 screenshots to show the main problem without the need of opening any logs, i.e. drifting xy position (and velocity) and constant optical flow innovations:
![constant_flow_innovation_xy_drift](https://user-images.githubusercontent.com/46818571/74592643-77ab1680-5023-11ea-9731-9bb9127b42fa.png)

The third case makes clear why I want to make sure, a scenario without SLAM would lead to a safe landing at least. Hopefully some more experienced people can have a look at this and we find out whether it's my setup, some parameters, or the EKF2 (for the latter I assume @priseborough to be the ideal contact person). I'm of course happy to provide more info on my setup if needed.

Best,
Dominik
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>EKF2 stops, causing a flight termination</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14133</td>
											<td>**Describe the bug**
During flight, the ekf2 module stops publishing all messages, causing a flight termination.  
It is remarkable that before it's stops publishing, it publishes one more time all messages at the exact same moment and with exact same timestamp.  
Sensor data (sensor_combined, vehicle_magnetometer, etc) keeps publishing as expected.  

**To Reproduce**
This occurred twice, no idea if it's possible to trigger it.  

**Expected behavior**
ekf2 should keep working en publishing it's messages.  

**Log Files and Screenshots**
- [first log](https://logs.px4.io/plot_app?log=b40595e7-efe5-43dd-8594-7fa282d267ca) (17:28)
- [second log](https://logs.px4.io/plot_app?log=61ed5269-868b-4e7c-bc16-e0ff5420335f) (8:12)
_How can I delete location (gps) information before uploading the Ulogs?_

Screenshot from plotted timestamps (sensors + ekf2), __added delay__ to view them separately.
![Screenshot from 2020-02-06 18-03-56-2](https://user-images.githubusercontent.com/6920950/74146602-b72bca00-4c01-11ea-9ea6-c2d510b5f154.png)

**Drone:**
- generic quad-copter, with onboard companion computer
- Pixhawk 1
- Firmware PX4 v10.0.0 with small modifications

**Additional context**
Flight is mostly done in auto modes (takeoff, loiter, mission)
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>PX4 10.0.1 Stable, Hard Fault in file:armv7-m/up_hardfault.c</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14075</td>
											<td>Hello,
I encountered an issue with PX4 1.10.1 Stable where the copter seems to make a 180° flip upside down. I am using a MoCap pose input over MavRos, mapped to the vision pose topic as described in the [tutorial](https://dev.px4.io/v1.10/en/ros/external_position_estimation.html ). The logs indicate that this seems to be a software crash, thus the movement might be a random result due to the underlying error. The Pixhawk 4 gives multiple beeper signals after engaging the killswitch.
Both logfiles below show 'Type:Hard Fault in file:armv7-m/up_hardfault.c at line: 148 running task: init'

**To Reproduce**
Steps to reproduce the behavior:
1. Map the MoCap pose to the vision pose topic
2. Enable the vision pose estimate
3. Start the copter in altitude mode and take off
4. Switch to position mode
5. The copter holds its position stable for ~5 seconds until the described issue occurs 

**Expected behavior**
The copter should hold its position.

**Log Files**
MoCap at 120Hz, the log indicates I2C3 low on the stack:
https://logs.px4.io/plot_app?log=92b60ea2-4b1e-4fac-9402-e1c797494866
MoCap at 30Hz, the log does not point out a clear error but the same issue occurred:
https://logs.px4.io/plot_app?log=afa24f21-0f51-42a4-bd2e-9b90ef29b14c

**Hardware**
Pixhawk 4 Holybro</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Huge amount of drifting on IRIS in SITL simulation</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/14068</td>
											<td>Hello,

I am using IRIS for SITL simulation, I am using 4 quadrotors at the same time, all of them use the same PX4 version. Only one of them is facing a huge amount of drifting during the flight. 
Here is the last flight with this quadrotor
https://logs.px4.io/plot_app?log=460f767c-25fe-4702-b910-66f3645203af
You can notice a spiral landing which I have been observing only with this one. 

Any thought?
Best regards,
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Issue with landing PixRacer FMUV4_K66, FMUv5</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13956</td>
											<td>**Describe the bug**
When flying the vehicle in Mission mode and trigger RTL, upon landing the vehicle does not descend vertically but drifts away with the wind. I had to take command of the vehicle in position mode and landed the vehicle manually. This is an issue that we have seen constantly, with the PixRacer and K66, FMUv5. **We are seeing this issue when the wind is 6 m/s and over.** 

**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on 
2. Uploaded mission to the vehicle
3. Took off in Mission Mode 
4. All commands were sent form QGC (Armed and takeoff)
5. Once all waypoint completed vehicle switched to RTL
6. When the vehicle was landing, it did not descend vertically, drifted away with the wind and landed the vehicle manually

**Expected behavior**
The vehicle should land and disarm.

**Log Files and Screenshots**
This is the latest PR tested with the PixRacer and issue persisted, Reference [#13678](https://github.com/PX4/Firmware/pull/13678)
Logs: https://review.px4.io/plot_app?log=67a2120c-a473-43a3-a556-6a542f62f7b1

Issue noticed on Reference  [#13701](https://github.com/PX4/Firmware/pull/13701
), wind 10.2 m/s, PixRacer.

Issue noticed on Reference [#13745](https://github.com/PX4/Firmware/pull/13745#event-2883456760), wind 10.2 m/s, PixRacer V4.
Log: https://review.px4.io/plot_app?log=719ab88b-d993-47c8-a9ca-eaf429d4577e

Issue noticed on Reference [#13613](https://github.com/PX4/Firmware/pull/13613#event-2837043850), 10.2 m / s, PixRacer V4.
Logs: https://review.px4.io/plot_app?log=b0f1f872-fc9e-41ee-89e3-4e146862efc7
Log: https://review.px4.io/plot_app?log=a8a1391c-06c0-475e-943a-48bea5da2e24

Issue noticed on Reference [#13065](https://github.com/PX4/Firmware/pull/13065), NXP_FMUK66_V3, 
Logs: https://review.px4.io/plot_app?log=792db7ac-8738-4bdd-8a03-aa6d88b371b3


**Drone (please complete the following information):**
**PixRacer**
Frame: DJI F450
Flight Controller: PixRacer 
GPS: Readytosky M8N GPS Module Built-in Compass
Motors: T Motor 2212-920kv
Propellers: DJI Phantom Built-in Nut Upgrade Propellers - MR PH 9.4x5 
Receiver: FrSky D4R-II 2.4G 4CH ACCST Telemetry Receiver
Telemetry:Holibro Telemetry, 100mW Telemetry Radio V3 915MHz
ESC: Hobbywing XRotor 20A APAC Brushless ESC
Battery: 3S 5200mAh(Hobbyking)

**NXP:**
Vehicle description:  RDDRONE-FMUK66
Flight Controller: FMUK66 
Frame: ReadytoSky LJI X4 500
Motors: ReadytoSky RS2212 920 kV CW & CCW  
Propellers: LJI 9450 self-locking propellers
GPS: Holybro Pixhawk 4 GPS
ESC: ReadytoSky 2-6S 40 A OPTO ESCs
Battery: 3S 5200mAh 

**Additional context**
We will test when windy on Master and Stable and see if the issue persists. </td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Vehicle starts to descend after backtransition, before reaching land waypoint</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13952</td>
											<td>**Describe the bug**
In a VTOL mission with the last waypoint being a land waypoint and the previous ones being navigated as fixed wing, the expectation is that the vehicle transitions before reaching the land waypoint and only starts descending when horizontally reaching the land waypoint.
However, on latest master the vehicle executes the transition and after it's completion immediately starts descending, even if it hasn't gotten close to the land waypoint.


**To Reproduce**
In SITL (use standard vtol model) plan a mission using a VTOL takeoff item, a couple of way waypoints and lastly add a land waypoint. Due to the excessive drag of the gazebo model the vehicle will finish the transition back to hover well before it has gotten close to the land waypoint. However, you will see that while moving to the land waypoint for the landing it will start descending as well.


**Expected behavior**
The vehicle should finish the back-transition, move to the landing waypoint while maintaining altitude and only start descending once the land waypoint has been reached.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=4769c91c-9c71-4db5-b98b-b580a3efa943

Add screenshots to help explain your problem.
![image](https://user-images.githubusercontent.com/7610489/72433595-b3e02280-37aa-11ea-9583-cb820edc5823.png)

</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Pixhawk 3 Pro v4_ failed connection to the RC</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13892</td>
											<td>**Describe the bug**
The vehicle did not connect to RC, it would not let the user bind the RC nor calibrate, the same issue was noticed on Master it seems to be working on Stable firmware. This is a brand new flight controller shipped from Drotek, the previous flight controller had bad vibrations and the mag data looked bad. We suspect the issue was something electrical and the flight controller was replaced. Now we are having a failed connection to the RC.  

**To Reproduce**
Steps to reproduce the behavior:
Binding Procedure:

RC Steps:
1- Turn on RC
2- Activate Biding mode (RC will make beeping sounds)

Vehicle Steps:
"With the vehicle turned on"
1- Unplug the receptor
2- Press Binding button and keep pressed
3- Plug in receptor (without letting the binding button go) and make sure both red and green light of the receptor are turned on.
RC Step
1- Disable binding mode
Vehicle Step:
1- Confirm binding by having the receptor with a solid green light on (algo confirm by moving flight modes switches.)

**Log Files and Screenshots**
PR13837: https://review.px4.io/plot_app?log=51c918b7-763c-41c8-b7c8-4a162be0fd3d
Master: https://review.px4.io/plot_app?log=e9b18b85-685e-4f30-8931-9bfdafbc159a
![81888019_596289817600621_1788273439723749376_n](https://user-images.githubusercontent.com/39415493/72025384-ce575080-322c-11ea-88b9-ac3ce3e1d483.jpg)
![81572634_469390607331633_522361898293788672_n](https://user-images.githubusercontent.com/39415493/72025419-ea5af200-322c-11ea-8ee1-09cbf3c265b8.png)
![83031236_1268661076637838_3741699096512036864_n](https://user-images.githubusercontent.com/39415493/72025421-ec24b580-322c-11ea-8d17-60e68567841b.png)

**Drone Information**
- Pixhawk 3 Pro v4
- DJI F450 Frame
- CUAV GPS

**Additional context**
 Below is the last working logs on Master for the Pixhawk Pro. The PixRacer seems to be working fine.
Flight card 1
Log: https://review.px4.io/plot_app?log=35d59e70-c3f1-4bfc-a76a-ec8de20261c3
Flight card 2
Log: https://review.px4.io/plot_app?log=0ebede1a-549f-4638-af23-7dcfe365e371
Flight card 3
Log: https://review.px4.io/plot_app?log=5bbb5e95-acd1-4fd1-a78d-5f2e028d8fb7
Flight card 4
Log: https://review.px4.io/plot_app?log=81e3f2bd-bcca-4263-9b00-20f9beea0d6a

@dagar </td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Altitude Fluctuation in Constant-Altitude Missions</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13793</td>
											<td>**Describe the bug**
When flying a basic mission with constant-altitude waypoints, the drone’s altitude erroneously fluctuates. Our use-case requires a much more reliable altitude for precision deployment of sensors. Let me know if you can/can't reproduce this issue.

![altitudegrpah2](https://user-images.githubusercontent.com/33331023/71501357-f2736480-281e-11ea-87d5-d1f1c158680b.PNG)

Notice how the estimated altitude doesn't follow the setpoint altitude in mission mode (purple region), but it follows exactly in position mode (green region). This shows that the instruments and sensors are capable of producing altitude-accurate flight.

I also posted this issue here: [https://discuss.px4.io/t/altitude-fluctuation-in-missions/14416](url)

**To Reproduce**
1. Use Pixhawk1 or Pixhawk Cube with 1.8.2, 1.9.2, or 1.10 firmware
2. Upload mission detailed below
3. Take off and start mission
4. See drone fluctuate 1-2 meters from setpoint.

Mission:

Mission Start - 0m
Takeoff - 8m rel to home
Waypoint - 8m rel to home, 5sec hold
Waypoint - 8m rel to home, 5sec hold
Waypoint - 8m rel to home
Waypoint - 8m rel to home
Waypoint - 8m rel to home
Waypoint - 8m rel to home

**Expected behavior**
I expect the drone's altitude to follow the setpoint altitude in mission mode with the same accuracy as position mode.

**Log Files Analysis**
[https://review.px4.io/plot_app?log=624517a3-9159-415c-8974-4fc790206f6f](url)
More log files for different missions are available upon request. They have all resulted in the same issue--despite using different setpoint altitudes and types of waypoints.

**Drone**
This problem was reproduced on two drones; a Flamewheel 450 and a custom drone that is much larger--about 1 meter span between opposite motors. We tried multiple configurations for each drone consisting of Pixhawk 1, Pixhawk Cube, v1.8.2 PX4 and v1.9.2 PX4. For each Pixhawk, we used the standard recommended GPS. Both drones were adequately powered.
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>LAND commanded but not land.</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13754</td>
											<td>**Describe the bug**
Land was commanded, but vehicle is not landing at all.

**To Reproduce**
Vehicle was hit on the wall, EKF lost a little bit. Then, land is keep commanded, but never land.
Vehicle was drifted along wind direction. And later, battery was drained, it finally landed.

**Expected behavior**
Land immediately.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=2b373434-6c98-4c93-bbc3-675000b4725d

**Drone (please complete the following information):**
Firmware is bit old version. 6e395fe885740f88aa633ce747fb12e950110cb0.
However, I think this is not an issue.</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Takeoff not happening when switching mode at the same time as arming</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13751</td>
											<td>**Describe the bug**
Sadly I found another corner case of race condition with the thrust setpoint state when switching from Stabilized to a position controlled mode. I found that sometimes in SITL jMAVsim the drone instead of taking of when giving it the command just detects takeoff, landing and disarms.

**To Reproduce**
Steps to reproduce the behavior:
1. SITL jMAVsim on master
2. Make sure it starts and stays in Manual mode
3. Wait for GPS lock
4. Send takeoff command from QGC
5. See problem in ~ 1 out of 5 cases

**Expected behavior**
The vehicle should still take off even if the takeoff command, mode transition and arming are basically instantaneous like in a SITL setup.

**Log Files and Screenshots**
Example log: https://logs.px4.io/plot_app?log=03e85548-bd0e-449a-a0cf-9a3b3426b46c
![log_screen](https://user-images.githubusercontent.com/4668506/70867650-0a71fb00-1f78-11ea-829b-51570df6c678.PNG)

**Additional context**
The problem is very similar to https://github.com/PX4/Firmware/issues/12171
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Durandal Mission transfer fail</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13732</td>
											<td>**Describe the bug**
We were able to flash master on the latest QGC 3.5.6 on the Durandal flight controller. The problem is that we are getting a Mission transfer fail error message when loading the Mission on QGC. We tried with USB and Mission failed, USB and battery connected and Mission failed, it seems to work via Telemetry. We formatted the SD card and we encountered the same issue. 

**To Reproduce**
Steps to reproduce the behavior:
1. Make sure you have the latest QGC 3.5.6
2. Flash firmware Master branch
3. Uploaded mission to the vehicle
4. Error message "Mission transfer failed" see picture below.
![78786969_1548876298601624_6122367445408677888_n (1)](https://user-images.githubusercontent.com/39415493/70669964-b63fe180-1c2c-11ea-98e9-66581acb430c.png)

**Log Files**
**Modes Tested**
Position Mode: Good.
Altitude Mode: Good.
Stabilized Mode: Good.
Mission Plan Mode (Automated): Good.RTL (Return To Land): Good.
https://review.px4.io/plot_app?log=0a193cd7-9b3b-483f-86de-aea71489b32b
https://review.px4.io/plot_app?log=62b6b784-7e3a-41c2-a47b-b27791a90635

**Drone Information**
Firmware: v1.10.0 (beta) (d6ffdc09)
Flight Controller: Durandal(Holybro)
GPS: Holybro GPS
Frame: F450
Telemetry: Holybro 915Mhz

**Additional Note:**
When we removed the SD card and uploaded the logs 2 flight logs were not saved on the SD card. The logs are shown on the SD but no information was registered. The total flights completed were 4 and only 2 flight logs registered the data. </td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Bad system behavior when airspeed data disapears</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13697</td>
											<td>There is some bad system behavior we've observed in legacy firmware (between v1.8-v1.9) related to airspeed data disappearing, for example if the I2C bus flakes out or if power is lost to the airspeed sensor.

I submit this for review against the new airspeed selector work @sfuhrer and others are contributing in hopes the new airspeed features will robustly handle these difference cases.

If airspeed data suddenly disappears there are several bad behaviors:

1. The system seems to keep sending the last known airspeed reading down the MAVlink pipe to the ground station (might need to be verified).  It should instead stop sending airspeed data if no new data is available.

2. There are no warnings to the user that airspeed data has gone missing. There should be some warning inidcation if airspeed data is expected but disappeared.  There should also be an indication if it returns.  (note: similar data disappeared, data returned indications should be extended to all sensor types).

3. On a failed takeoff, if the autopilot stops receiving airspeed data, the LandDetector may think the vehicle is still flying because the last reported airspeed still seems to be piping into the system. The motor may still run at full throttle! Ideally airpseed would stop updating and "zero" or "null" would be reported and the system would understand that it should not be using airspeed as part of the LandDetector.

4. If airspeed disappears during flight there is no indication that it disappeared. TECS will silently switch to non-airspeed mode and not tell the user and by-passes the airspeed failsafe functionality. There should be warning indications and the airspeed failsafe functionality should be followed.

Here are some flight logs showing the last example of airspeed data disappearing during the middle of a flight:
https://review.px4.io/plot_app?log=d378dac5-1061-444d-ba8d-ee911c6315cf
https://review.px4.io/plot_app?log=35be23c2-6bdf-4caa-9075-f9805b6d2035
https://review.px4.io/plot_app?log=5ffc7018-9793-4b88-89a3-8066988b1e54

FYI @sfuhrer </td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Yaw during takeoff</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13675</td>
											<td>**Describe the bug**
Sometimes I observe a multicopter doing a strange yaw back and forth right during takeoff.

**To Reproduce**
Do many takeoff in SITL and every now and then it's visible.

**Expected behavior**
It should not yaw during takeoff, period.

**Log Files and Screenshots**
![17_39_47-yaw-on-takeoff](https://user-images.githubusercontent.com/1419688/70135447-64c2b000-168a-11ea-976a-6f576dc582fb.png)
![14_03_52-yaw-on-takeoff](https://user-images.githubusercontent.com/1419688/70135449-64c2b000-168a-11ea-8778-48dca6c56703.png)

https://logs.px4.io/plot_app?log=907be591-f04b-4187-8e5a-153435b0bfe1
https://logs.px4.io/plot_app?log=bb0b86a5-a23c-4acd-a88a-fda4a8b6b78c

**Drone (please complete the following information):**
- The logs are from a VTOL takeoff without weathervane activated, however, I've also seen the behaviour with iris.</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Error message "unable to read from microSD" when flying a mission with "jump to item"</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13592</td>
											<td>**Describe the bug**
When flying a mission on a VTOL with a "jump to item" in it, it does what it is supposed to do (go back to selected item and then continue the mission from there on again), but it gives the following error message every time it reaches the "jump to item" waypoint:
![image](https://user-images.githubusercontent.com/26798987/69558813-2d2c7780-0fa9-11ea-8d0d-f8b3859a2831.png)

https://review.px4.io/plot_app?log=e3b60ca9-d232-46d3-99f4-65220f2360b2


</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Throttle quickly goes to 0 on RTL init after idle HOLD/RTL on ground</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13533</td>
											<td>**Describe the bug**
We found the corner case where throttle intermittently went to 0 when RTL is engaged.
The reason seems to be a faulty logic of triplet resetting and publishing in navigator.

More specifically, navigator publishes an idle setpoint while in HOLD on ground:
https://github.com/PX4/Firmware/blob/84fe64b1c20a4ae8067f04b1e21a961263bac4db/src/modules/navigator/navigator_main.cpp#L662-L666

then in POSCTL the triplet is set to invalid
https://github.com/PX4/Firmware/blob/84fe64b1c20a4ae8067f04b1e21a961263bac4db/src/modules/navigator/navigator_main.cpp#L675-L679

but not published because it's invalid.
https://github.com/PX4/Firmware/blob/84fe64b1c20a4ae8067f04b1e21a961263bac4db/src/modules/navigator/navigator_main.cpp#L730-L736

So later when switching to RTL, flight task still has the idle setpoint until navigator has run and published the new RTL setpoint.

**To Reproduce**
Steps to reproduce the behavior in SITL with QGC and a joystick set-up:
1. Start SITL, wait for GPS
2. Switch mode to HOLD, arm, then disarm without taking off
3. Arm and takeoff in POSCTL
4. Switch to RTL. This is when the spike to 0 usually happens. It might not based on timing and it might only be visible in a log.

**Expected behavior**
The thrust should not go to 0 even if navigator takes a while to figure out what to do. In the meantime flight task should do a failsafe and stay where it is.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=f1b66ae0-3751-481a-89cb-c7b9adc12037

![bokeh_plot(1)](https://user-images.githubusercontent.com/1419688/69226852-2c4aae80-0b81-11ea-9f9e-3036154486dd.png)


**Drone (please complete the following information):**
Initially this happened on a S500 with Pixhawk 4. The log is in SITL.

**Additional context**
The log features a lot more that goes wrong but this was one of the findings.</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>EKF gps hgt timeout - reset to baro</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13508</td>
											<td>**Describe the bug**
EKF gps hgt timeout - reset to baro problem.
It basically says GPS data is lagged because _gps_hgt_intermittent flag is on.

_gps_hgt_intermittent = !((_time_last_imu - gps_init.time_us) < 2 * GPS_MAX_INTERVAL);

However, it seems very difficult to meet this condition unless otherwise GPS has unstable connection. But it's not. It seems some timing issue.

**To Reproduce**
Not exactly reproducible

**Expected behavior**

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=d8997f75-e796-4a42-9b90-ea5c06a3d54d

**Drone (please complete the following information):**
- FMUv5.

											</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Thrust value oscillating (repeatedly dropping to 0)</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13507</td>
											<td>Hey,

My Pixhawk 4 mini hexarotor with PX4 1.9.2 release wasn't maintaining altitude while hovering, so I increased the mid throttle from 50% to 60%.

What I got is this super odd thrust oscillation, while hovering (the thrust value is going to 0 for a short period of time -> see the logs). Even though I'm trying to land, it's only reacting to increasing the throttle, but not to not lowering -> also visible in the logs. I had to use kill switch.

The oscillations occur across all modes.
After going back to 50% mid-throttle the problem disappears. 

The battery warnings are result of the voltage sag (the actual voltage was 3.75V/cell and the default BAT_V_EMPTY is pretty high, at 3.50V/cell). 

Logs:
https://logs.px4.io/plot_app?log=ececa147-2ad7-4aa7-9e0a-bcc0761c06af
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Unexpected Freefall druing Loiter Mode</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13479</td>
											<td>I have flight three times with my vtol plane two days ago. In the last flight,  during loiter mode at 280meters, the plane start to descent its altitude. I commanded RTL at 25meters and it return back to home but It still losing altitude during rtl mode. RTL altitude set to 40m but the plane did not climbout to 40m during rtl mode. I switch to manual at about 10 meters and landed the plane. Loiter mode does not appear in flight log records. I think that fw control module stops to work in air. The plane did not try to reach cruise airspeed during this period. Actually, it did not try to correct anything. 

After landing, I was able to run lifter motors, servos and pusher motor. The plane was able to take off and landing normally after landing. There was no hardware problem. You can see easily, there is long dropout on flightlog at all plots. You can watch the flight from "Open 3D View", the plane was flying backwards bcause of dropouts on log file.

Flight log: https://review.px4.io/plot_app?log=ecc40545-1384-4185-828e-c14322655122</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>v1.10.0-rc quadcopter doesn't take off in HITL/jMAVsim </td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13471</td>
											<td>**Describe the bug**
Set up HITL simulation with jMAVsim on Ubuntu 18.04,  Pixhawk 4 with v1.10.0-rc, locally built px4_fmu-v5-multicopter. 

**To Reproduce**
Steps to reproduce the behavior:
1. Follow the recipe from [px4 website](https://dev.px4.io/v1.9.0/en/simulation/hitl.html#jmavsimgazebo-hitl-environment)
2. Using Manual/Stabilized mode, arm vehicle and apply throttle
3. Vehicle does not take off
4. Mavlink shell (`listener` command) shows actuator_outputs_1 with *valid* values and actuator_outputs_0 with 0 values

**Expected behavior**
SERVO_OUTPUT_RAW or HIL_ACTUATOR_CONTROLS should follow actuator_outputs_1 and the vehicle should take off in simulation

**Log Files and Screenshots**
[Flight Review Link](https://review.px4.io/plot_app?log=8890b998-3b24-4a96-af5a-da4c10910bff)

Add screenshots to help explain your problem.

**Drone:**
- Pixhawk4 running in HITL Quad Mode
- Photo of the IMU / autopilot setup if possible.
![IMG_8020](https://user-images.githubusercontent.com/11541631/68861820-46d0e380-06ba-11ea-98e2-76585b3bb031.JPG)



</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Violent jerk when switching from manual to position mode</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13415</td>
											<td>**Firmware**: 1.9.2 (with #13312 and #13325)

**Describe the bug**
I'm seeing huge pitch/roll setpoints when switching from manual to position mode . It seems like it's the velocity controller, but I don't really understand how the velocity controller ends up demanding such large effort of the attitude controller. I've detuned the P gain on the velocity controller and am still seeing a violent jerk when switching from manual to position. Here's a log with 3 mode switch, the first one being the most violent.


**To Reproduce**
Steps to reproduce the behavior:
1. Switch from `manual` to `position` mode. The more velocity you have before the switch, the more violent the jerk.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=4fa7056e-d1bc-437f-829d-0b45e3087276
![Selection_038](https://user-images.githubusercontent.com/37091262/68419559-afb6d980-0157-11ea-96b3-72665d0f29f1.png)
![Selection_041](https://user-images.githubusercontent.com/37091262/68419888-5307ee80-0158-11ea-93d5-1dddd621be10.png)


The velocity setpoints are not changing dramatically, so the attitude effort should not be there.
![Selection_039](https://user-images.githubusercontent.com/37091262/68419561-b1809d00-0157-11ea-9cd0-991be8fbca65.png)

@bresch @mhkabir @TSC21 

Related to #12389
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>FW: vehicle stays forever in takeoff mode if airspeed fails</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13413</td>
											<td>If the airspeed is invalid (eg NAN) during FW mission takeoff (runway takeoff), the take off state is never exited. 

![image](https://user-images.githubusercontent.com/26798987/68403081-ad1aab00-017c-11ea-8368-b965edd717d8.png)

https://review.px4.io/plot_app?log=ce5a3aee-13a2-4ee6-bd07-8e1f9b7a497a

This will btw also not be fixed with https://github.com/PX4/Firmware/pull/12887 and the default values (fallback to ground-windspeed would need to be enabled), and is part of the reason that the SITL CI fails for this PR till now).

FYI @dagar @RomanBapst 

</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Hard-fault produced when GPS is driver is started in-flight</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13352</td>
											<td>**Describe the bug**
This may not be a regular use-case, but while testing to reproduce #13350, I had a bad crash, which turns out was a hard-fault.

**Steps taken**
Steps to reproduce the behavior:
1. Drone with optical flow (pmw3901), GPS actively used. Commanded via MAVLink
2. Stopped the GPS driver
3. Take-off
4. `gps start -b 115200`
5. BOOM

**Elaboration**
I mention that the vehicle was commanded via MAVLink because I did the exact same test again immediately afterwards, with the only difference that I was using an RC and it did not hard-fault. I was scared to attempt to reproduce... Joysticks don't let you map a kill switch!

**Log Files and Screenshots**
[Log](https://review.px4.io/plot_app?log=b3af87ef-bc79-4795-be5e-6c99e36557a9)
[Hard-fault file](https://drive.google.com/file/d/1IxdO0bjZCKV5n7AkUgmThaM9rMiLva93/view?usp=sharing)
[ELF file](https://drive.google.com/file/d/1P0VStSh6af39KoXZ0IefE6NJOosAE7jF/view?usp=sharing)</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>MC Landing Gear Don't Deploy at Correct Altitude at End of Mission</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13313</td>
											<td>**Describe the bug**
Landing gear are enabled via a mixer to AUX1. Landing gear properly retract upon takeoff. When landing, the gear do not start to deploy until the copter is around 1m above the ground.

**To Reproduce**
Steps to reproduce the behavior:
1. Power on and wait for GPS lock
2. Uploaded mission. Mission End is set to "Return to Launch" [gear-test.txt](https://github.com/PX4/Firmware/files/3786802/gear-test.txt)
3. Took off in mission mode
4. Verified during testing at two locations, 4 flights each.

**Expected behavior**
During the landing phase, landing gear should be commanded to deploy when RTL_DECEND_ALT, LAND_ALT_1, or LAND_ALT_2 is reached though I am not sure which it is (but would like to know). 

**Log Files and Screenshots**
Flight Log showing a very quick flight with one waypoint:
https://logs.px4.io/plot_app?log=c57c04e0-a6bd-4f04-9fe2-eb986cbcc1b4

**Drone (please complete the following information):**
- Tarot X6 (with Tarot retracts)
- Pixhawk Cube 2.1
- Here2 GNSS
- PX4 1.9.2
- QGC 3.5.5

**Additional context**
A file named lgear.aux.mix is placed in /fs/microsd/etc/mixers. This Tarot landing gear controller requires an PWM output of less than 1520 for the gear to retract and greater that 1520 for the gear to extend which is the reason for the (-) scaling. It has the following content:
```
M: 1
S: 0 7 -10000 -10000 0 -10000 10000
```
A file named config.txt is placed in /fs/microsd/etc with the following content:
```
set MIXER_AUX lgear
set PWM_AUX_OUT 1234
set PWM_AUX_DISARMED 1500
set PWM_AUX_MIN 1000
set PWM_AUX_MAX 2000
set PWM_AUX_RATE 50
```
The gear are working properly in mission mode on takeoff as well as manual mode using an RC channel assigned by RC_MAP_GEAR_SW.</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Commander mode offboard triggers PX4 freeze</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13309</td>
											<td>**Describe the bug**
Using px4_sitl_default together with gazebo and sending set_actuator_control_target via pymavlink successfully establishes a mavlink connection and actuator commands are received on the px4 stack and uorb topic offboard_control_mode is published. When using the system console and sending `commander mode offboard` the stack freezes. No uorb topics are published and no mavlink messages are received (gazebo plugin correspondingly outputs `[Err] [gazebo_mavlink_interface.cpp:1155] poll timeout` in the mavlink poll function). The pxh system console remains responsive but commands to any module (e.g. commander, uorb) have no effect and hence indicating the system wide freeze. No error message from PX4 is shown and gdb debugger catches no signals.

**To Reproduce**
- run `px4_sitl_default gazebo`
- send mavlink messages via pymavlink `c.mav.set_actuator_control_target_send(0, 0, 0, 0, controls)`
- switch to offboard mode using `commander mode offboard`

**Expected behavior**
Px4 was expected to switch `vehicle_control_mode` into offboard mode.

**Log Files and Screenshots**
- https://review.px4.io/plot_app?log=86db944d-af82-456a-bb6c-79e8e5b223dd

**Additional context**
- PX4 firmware (v1.9.2)
- mavlink (release/kinetic/mavlink/2019.10.10-1)
- mavros (0.33.0)
- Approaches so far:
  - PX4_INFO() print outputs showed that commander reaches publishing in run() loop
  - gdb info variables and inspecting last variables gave no further insights

The freeze presumably happens after the system console arguments are parsed and published in the commander run loop. It could also be that the crash happens earlier and all modules get stuck at the file descriptor polling. Maybe a problem from global variables causing a race condition with the main commander thread? Maybe I am missing something but it does not seem that variable access is coordinated when parsing the mode argument.

Any advice on how to approach or debug this problem are very much appreciated!</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>flight termination circuit braker not working</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13244</td>
											<td>**Describe the bug**
As reported by Michael as well on https://discuss.px4.io/t/pixhawk-2-px4-fd-fail-flight-termination-not-working/13281 the CBRK_FLIGHTTERM seems not to work.

**To Reproduce**
Steps to reproduce the behavior:
1. set CBRK_FLIGHTTERM to 0 to enable circuit breaker
2. set one of the PWM_MAIN_FAIL to 2000us and connect e.g. servo to that PWM port.
3. arm drone and take off
4. force drone to exeed the max roll/pitch angle of the default 60° (FD_FAIL_P and FD_FAIL_R)
5. motors DO NOT stop now and a programmed PWM_MAIN_FAIL is not set (servo not moving)

**Expected behavior**
angle of more than 60 degrees should be detected. Motors to be stopped and PWM_MAIN_FAIL settings to become active.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=58de9b83-0cf3-4e7f-9a0e-55df674bfdbf

Add screenshots to help explain your problem.
![grafik](https://user-images.githubusercontent.com/3907200/67264491-7de11a00-f4ab-11e9-9c98-ef1a5ebd57f7.png)
![grafik](https://user-images.githubusercontent.com/3907200/67264500-83d6fb00-f4ab-11e9-9aa8-f41c602c23b9.png)

**Drone (please complete the following information):**
- LJI500S test drone with NXP FMUK66 revC
- Red flash light connected to PWM6 port (flash light starts blinking at >1500us) to indicate status of PWM output.
- CBRK_FLIGHTTERM set to 0
- PWM_MAIN_DIS6 set to 900us
- PWM_MAIN_FAIL6 set to 2000us

**Additional context**
Testing of the PWM_MAIN_FAIL6 settings was previously done by setting RC loss Failsave to "Terminate". With this configuration and by swithing off the RC transmitter motors were shut down and PWM_MAIN_FAIL6 set to 2000us got active. So the issue seems to be related to the CBRK_FLIGHTTERM (FD_FAIL_P and FD_FAIL_R) behaviour only.

Test was executed without propellers! Drone was armed at ground floor and throttle value was set to 50%. Drone was carried up to 5th floor of building and flipped over (upside down).

</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Land detector edge case in descend mode</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13231</td>
											<td>**Describe the bug**
The land detector seems to detect ground contact in Descend mode (RC land failsafe without GPS).

1. `vertical_movement` to be `false`: https://github.com/PX4/Firmware/blob/95dc522b99688a08402ac6462ad28f5dfd338eda/src/modules/land_detector/MulticopterLandDetector.cpp#L154
2. `hit_ground` to be `true`: https://github.com/PX4/Firmware/blob/95dc522b99688a08402ac6462ad28f5dfd338eda/src/modules/land_detector/MulticopterLandDetector.cpp#L165

This happens because the z controller only reacts slowly to the new setpoint so the z velocity down is much less than the z velocity setpoint here:
https://github.com/PX4/Firmware/blob/95dc522b99688a08402ac6462ad28f5dfd338eda/src/modules/land_detector/MulticopterLandDetector.cpp#L151-L154

One observation of the descend case is that the velocity setpoint jumps to the land speed instead of gradually reaching it like in Land (with GPS) mode.

![bokeh_plot(1)](https://user-images.githubusercontent.com/1419688/67103273-14b88880-f1c5-11e9-932a-827e357f7cc7.png)


**To Reproduce**
This is hard to reproduce in SITL because the drone seems to follow the setpoint quicker.

**Expected behavior**
It should not detect ground contact until actually landed.

**Log Files and Screenshots**

This happened in a failsafe descend test:
https://review.px4.io/plot_app?log=3104d449-dd29-473f-9055-354984ff8afa

This does **not** happen in normal landing:
https://review.px4.io/plot_app?log=2ea6423f-b232-45c9-8c40-32e775118359

More info in https://github.com/PX4/Firmware/pull/13143#issuecomment-543682487.

FYI @bresch @MaEtUgR 
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>Offboard position setpoints with loiter type mask makes Fixed wing vehicle fly away</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13180</td>
											<td>**Describe the bug**
Offboard position setpoints with loiter type masks result in a fly away of a fixed wing vehicle. The roll and pitch setpoints are set to zero and continues to fly to the last direction where offboard mode was triggered. The offboard position setpoints fly as expected without the loiter type mask.

![Screenshot from 2019-10-14 12-05-00](https://user-images.githubusercontent.com/5248102/66743792-fe37c780-ee7a-11e9-8d67-0b0f06dd44d1.png)

**To Reproduce**
Steps to reproduce the behavior:
1. Take off FW vehicle in SITL
2. Send `SET_POSITION_LOCAL_NED` setpoint with `type_mask=0x3000` ([see](https://github.com/PX4/Firmware/blob/master/src/modules/mavlink/mavlink_receiver.cpp#L774)
3. Swich mode to offboard mode


**Expected behavior**
The FW vehicle circles around the loiter setpoint

**Log Files and Screenshots**
The [log](https://review.px4.io/plot_app?log=8617fe45-3269-4098-9165-e94b176d74a4) shows the offboard setpoint resulting in a fly away. A local position setpoint of [0.0, 0.0, 20.0] was being streemed with`type_mask=0x3000`

**Additional context**
Currently flying offboard position setpoints are passed as a reference position for the L1 controller, which results the vehicle turning around and traversing the setpoint as can be seen [here](https://review.px4.io/plot_app?log=209a8f30-a2aa-45f1-85b0-6755170b88a2). Supporting circling the waypoints may be useful for various robotic applications using fixed wing.
</td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>QGC _altitude issues_CUAV Nano</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13148</td>
											<td>**Describe the bug**
We have noticed the altitude issues on the CUAV Nano this issue was noted on QGC altitude reading. (and relative altitude) not being displayed correctly. 

**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on
2. Uploaded mission
3. Takeoff, Position Mode 
4. Switch from Position mode to Mission mode 
4. See altitude reading on QGC

**Log Files and Screenshots**
Log Nano V5:   
https://review.px4.io/plot_app?log=e3d7bc0a-891d-4ecf-8ebd-01afb7630ab7
![nano V5](https://user-images.githubusercontent.com/39415493/66510657-4d03ec80-ea8a-11e9-8544-4bf23e4d8059.jpg)
![nano V5](https://user-images.githubusercontent.com/39415493/66510679-5725eb00-ea8a-11e9-84a6-876ba6643988.jpg)

**Drone (please complete the following information):**
FC- CUAV Nano 
Frame: F450 frame
GPS- NEO V2
![f450_cuav5_nano_complete](https://user-images.githubusercontent.com/39415493/66511077-1e3a4600-ea8b-11e9-90dd-80041808b8cc.jpg)


**Additional context**
The vehicle flight performance is well but the altitude is off by approximately 10 to 13 meters.@dagar what could be the issue? </td>
											<td>closed</td>
											<td></td>
										</tr>
										<tr>
											<td>CUAV V5+_Accel inconsistent</td>
											<td>https://github.com/PX4/PX4-Autopilot/issues/13083</td>
											<td>**Describe the bug**
We are getting this constant error message of Accel inconsistent error with the CUAV V5+. We did all the calibrations, then try to arm again and again mark Accel inconsistent. We did a complete reset in the flight controller did the calibrations and the same issue. 

**Log Files and Screenshots**

												<img width="960" alt="CUAV+ Accels inconsistent" src="https://user-images.githubusercontent.com/39415493/66089260-64dfeb80-e533-11e9-93a4-3610550da5ba.png">

Log: 
https://review.px4.io/plot_app?log=37067a71-b746-4f44-8013-8c4fe57b3bfa

Last working flight log: 
https://review.px4.io/plot_app?log=66332487-04b5-47f5-b1a3-a241e23a4dd7  

**Drone (please complete the following information):**
- FC- CUAV V5+
- Frame- DJI f450
- GPS- NEO V2
![CUAV close pic](https://user-images.githubusercontent.com/39415493/66089507-7970b380-e534-11e9-8a08-7fc280ed0082.jpg)

**Additional context**
Today we tried the Master branch but I had already tried it in Stable & a PR and still the same error, I also changed the GPS from the working unit Nano CUAV but it remains the same.
@dagar what could be the issue? 
												</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>VTOL transition no rate sp for 1 second</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/13030</td>
												<td>**Describe the bug**
No rate sp are being published in the first second of a front transition.

![image](https://user-images.githubusercontent.com/26798987/65669005-13bb8d80-e043-11e9-80c2-4e8607d602b4.png)

log file (todays master in sitl): 
https://review.px4.io/plot_app?log=7e8f18ac-0800-4c4b-a947-7773ed1ddc41


**To Reproduce**
Do a VTOL front transition in sitl, all control modes (stabilized, alt, pos) seem to be affected.


**Additional context**
Noticed it only because of accidentally triggered front transition, while also giving some roll input before. Then the rate_sp froze for 1s at a large value, almost resulting in a flip of the VTOL.
![image](https://user-images.githubusercontent.com/26798987/65669305-9a706a80-e043-11e9-882a-93d21eba2ddf.png)

@dagar @RomanBapst  FYI</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>CM8JL65 switches uORB instance mid-air</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12987</td>
												<td>**Describe the bug**
I've seen a bug where the distance sensor CM8JL65 switches the uORB topic it is publishing on, mid-air. This doesn't seem to bother EKF2 much, but it still doesn't sound like a great idea.

This was seen when testing a rebased version of https://github.com/PX4/Firmware/pull/12950, but I don't think the issue is related to the PR.

Would be interesting to know if anybody has seen similar behavior with other sensors, or if this is more likely a bug in the CM8JL65 driver.

**Screenshots**
![image](https://user-images.githubusercontent.com/14265408/65228612-1100eb80-dacb-11e9-93e1-cefa6e4880f9.png)

**Logs**
[Log file](https://review.px4.io/plot_app?log=c5c192d0-ae47-4bbc-a8de-2c887bddaf87)
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>VTOL: no control in FW after transition in ALT control</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12910</td>
												<td>reproducable in sitl: take off in alt, switch to FW. Not possible to change flight direction.

sitl log:
https://review.px4.io/plot_app?log=a60bffd8-f43f-4ca1-b59e-18d7dbe46bc9

flight log:
https://review.px4.io/plot_app?log=a14d1d71-bb8c-4438-a0bb-6ae8daed4190</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Parameter tuning MPC_ALT_MODE</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12833</td>
												<td>**Describe the bug**
A clear and concise description of the bug.
I was trying to bind the parameter to (using parameter tuning in QGroundcontrol) to my low-medium-high settings of a 3-way switch, but only got
![image](https://user-images.githubusercontent.com/30323691/63894397-d8e71b00-c9ec-11e9-978b-f9c6442df40f.png)
low:
![image](https://user-images.githubusercontent.com/30323691/63894404-de446580-c9ec-11e9-8d8b-0d61111617ab.png)
medium:
![image](https://user-images.githubusercontent.com/30323691/63894416-e1d7ec80-c9ec-11e9-9b02-b86878c058f6.png)
high:
![image](https://user-images.githubusercontent.com/30323691/63894432-e8666400-c9ec-11e9-9abc-e86b5f19fe65.png)
Please advice.
Best 
--Seeelefant

**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on '...'
2. Uploaded mission '....' (attach QGC mission file)
3. Took off '....'
4. See error

**Expected behavior**
A clear and concise description of what you expected to happen.
Low-0: Altitude following
Medium-1: Terrain following
High-2: Terrain hold
**Log Files and Screenshots**
*Always* provide a link to the flight log file:
- Download the flight log file from the vehicle ([tutorial](https://docs.px4.io/en/getting_started/flight_reporting.html)).
- Share the link to a log showing the problem on [PX4 Flight Review](http://logs.px4.io/).

Add screenshots to help explain your problem.

**Drone (please complete the following information):**
- Describe the type of drone.
- Photo of the IMU / autopilot setup if possible.

**Additional context**
Add any other context about the problem here.
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>[VTOL] No Global Position Failsafe not working properly in FW mode</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12758</td>
												<td>**Describe the bug**
The following points don't work as they should upon triggering a GPS Failsafe on a VTOL drone in FW (flying in an AUTO mode):
1) The drone doesn't do the fixed bank loiter upon a GPS Failsafe. Instead, it pretty much continues to fly in whatever pose it happened to be upon triggering. 
2) Also, the landing doesn't seem to work. In SITL it just keeps flying.
3) Recovering the GPS signal doesn't work properly.
4) It "randomly" falls back to the previous flight mode after some time (after it should have initiated landing)

**To Reproduce**
Steps to reproduce the behavior:

1. Start SITL with `make px4_sitl gazebo_standard_vtol`
1. Set the NAV_GPSF_* parameters to some non-zero value
1. Launch a mission or just loiter in FW
1. Trigger the failsafe by disabling the GPS signal: `gpssim stop`
1. The drone will not be doing the fixed bank loiter properly
1. Enable the GPS driver again: `gpssim start`
1. The drone will not (directly) recover its global position even though on QGC you can see its exact position
1. Wait
1. The drone will not initiate landing (even though navigator says Terminate)
1. At some point the drone will switch back to what it was doing before (Mission or Loiter)

**Expected behavior**
The drone should do the fixed bank loiter as a FW plane and upon recovery of its global position continue its mission or whatever it was doing before.

**Log Files and Screenshots**
SITL, v1.9 : https://logs.px4.io/plot_app?log=5befa577-0ade-4c90-b82c-045830915138
SITL, current master : https://logs.px4.io/plot_app?log=ac15492a-04b5-4e27-851e-cdb00cb27d62

Real flight, v1.9 : https://logs.px4.io/plot_app?log=7c1a4be9-8e6b-41e2-b7fa-dd29cd270795

* our pilot took over after 7s, but clearly the fixed bank angle didn't work.
![bokeh!UNITO-UNDERSCORE!plot(1)](https://user-images.githubusercontent.com/48206725/63368099-7d2de980-c37d-11e9-8b3b-44fddc5429c9.png)

**Drone (please complete the following information):**

* SITL : standard VTOL quadplane
* Real drone : standard VTOL, running v1.9 on a Cube

**Additional context**
I tested the Failsafe on the Gazebo plane and it works as it should. I also tested the Failsafe on SITL VTOL in MC and it's good too.

Insights on the root cause of the failsafe on the real drone would be very welcome too :) I can't quite pin down what caused the velocity and position innovations to diverge suddenly.
I know that the vibrations and the magnetic interference could have been part of the issue, but we have over 10h of flight time with the same setup (or even more vibrations) on v1.8.2 where to my knowledge it never occurred and another 5h on v1.9 (with two triggers so far)

</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Pixhawk Cube_calibration issue on Master</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12692</td>
												<td>**Describe the bug**
When setting up the vehicle for a flight, on arming the vehicle I get a "Compass not found" message, see image below:
![image](https://user-images.githubusercontent.com/39415493/62976692-0a979980-bdd2-11e9-9e1e-65a1f90f1168.png)
This issue is on Master e25db016 & PR Pull[12650](https://github.com/PX4/Firmware/pull/12650#event-2540347567), tried on Stable version and was able to fly. v1.9.2 (10690587).
**To Reproduce**
Steps to reproduce the behavior:
1. Power on the Drone
2. Uploaded mission 
3. Arm vehicle and Takeoff
4. Error, "Preflight Fail: COmpass #2 uncalibrated"
5. Calibrate vehicle 
6. Error message Gyro 1 no matching uORB devid
7. Unable to calibrate the vehicle on Master
![image](https://user-images.githubusercontent.com/39415493/62978246-ad054c00-bdd5-11e9-8470-26f7e1acde02.png)


**Log Files**
Compass not found and Calibration issue log on Master:
https://review.px4.io/plot_app?log=13cc9db5-4a03-41ff-a9e2-b80013d3e104

Stable  v1.9.2 (10690587) log:
https://logs.px4.io/plot_app?log=71a782cc-7979-4ff1-a6e8-f3d8f4757f55

PR 12650 log issue:
https://review.px4.io/plot_app?log=18094d44-f808-4b67-b7d6-8ef0df7f4f05
 
**Drone **
Frame- DJI F450
Flight Controller: Pixhawk 2(The Cube)

@dagar we tried calibrating the vehicle and get an Error message Gyro 1 no matching uORB devid. On Stable version, we were able to arm, calibrate and fly the vehicle with no issues.

</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Arm authorization fails on first attempt, succeeds erroneously after</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12685</td>
												<td>I’m trying to get arm authorization working and running into some issues. First here’s my setup:

- Pixhawk Cube
- Authorizer is a Linux board running pymavlink using v2 dialect
- Param COM_ARM_AUTH = 1280001 (require one arm, 5s timeout, authorizer sysid 1)
- Param COM_ARM_MIS_REQ = 2 (require auth but not valid mission)
- Arming via Qground

I can go into more detail on the setup if needed, but all the basics appear to be working. When arming I see the COMMAND_LONG 3001 arrive in the python script, and I have even rebuilt PX4 for the Cube to check that the COMMAND_ACKs I send to it are being received in the mavlink module. Here is the behavior I observe:

- After reboot of Cube, the first arming attempt fails. It appears to fail even before the first COMMAND_ACK (with result MAV_RESULT_IN_PROGRESS) reaches the arm_auth module via uORB
- Subsequent arming attempts succeed, but they appear to rely on acks that are still queued from the first attempt. I have tested killing the python script after the first arming attempt (fail) and the second attempt still succeeds, despite no new acks being sent.

Here is a snippet showing what the python script does:
```
in_msg = self._mav_sock.recv_match(blocking=False)
  if in_msg != None:
    if in_msg.get_type() == ‘COMMAND_LONG’:
      self._mav.command_ack_send(3001, 5, 255, 5, 1, 1) # in progress
      self._mav.command_ack_send(3001, 0, 255, 5, 1, 1) # arm cmd, accept
```

A log probably isn't that helpful in this scenario but here it is anyway:
https://logs.px4.io/plot_app?log=bb57f1ee-6991-4190-b62b-6d2bdc7d013d

Here's the nsh listener output showing that auth fails before my acks arrive (on this run I rebuilt PX4 with extra debug messages):
[arm_auth_debug_fail_on_first_auth_attempt_txt.txt](https://github.com/PX4/Firmware/files/3495153/arm_auth_debug_fail_on_first_auth_attempt_txt.txt)

Please let me know what additional info would help.

This was also posted on the forum here: https://discuss.px4.io/t/arm-authorization/12383</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Logger stopped completely during flight?</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12565</td>
												<td>**Describe the bug**
We did 4 flight tests on Tuesday, the first two logged fine, the last two stopped logging during fight. The other parts of the system were working as usual so I didn't even notice anything until reading the logs and finding out most of it is missing.
I am logging everything at the highest rates so I am not surprised by the frequent dropouts, but why did it just go off completely? 

Now I am trying to increase the buffer size by multiplying it in line 283. [https://github.com/PX4/Firmware/blob/36534d5bab3d6a73f146e671df1b8f40772174b7/src/modules/logger/logger.cpp#L283](http://url)
Multiplying it by 4 makes the dropouts less frequent but sometimes the buffer still saturates. If I try to multiply it by 5 the logger won't start at all. Why there is a limit? 
The stack size seems unaffected but I try to increase it to 5000 anyway, making no difference.

**Expected behavior**
I would expect the logging to resume after the buffer clears up, not just to stop completely.
Also maybe the way to increase the buffer correctly is not completely clear to me.

**Log Files and Screenshots**
Here the logging stopped even before takeoff. There is 10+ minutes of flight missing.
https://review.px4.io/plot_app?log=0fd05bfa-c092-49f5-8cf6-c89c3d950f51

This is the last flight, there should be another 5+ minutes tracked.
https://review.px4.io/plot_app?log=fdb9b50f-cc70-48d0-92d1-04215f50c64c

**System**
Pixhawk 4

</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Fixedwing position controller not able follow position setpoints in offboard mode</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12517</td>
												<td>**Describe the bug**
When streaming position setpoints to the fixed wing vehicle, it can enter offboard mode as the setpoint is sreamed. However, rather than following the setpoints (usually defined in local coordinates) it simply flies straight. 

This seems to be because the fixed wing position controller blindly reads from the setpoints in global coordinates from the position_setpoint_triplets.

https://github.com/PX4/Firmware/blob/master/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L854-L855

**To Reproduce**
1. Run SITL and start mission while streaming position_setpoints through mavros with setpoint_raw messages to takeoff and loiter
2. After takeoff, switch vehicle to offboard mode

**Expected behavior**
When given a position setpoint, the desired behavior is to use it as a reference for the L1 position controller.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=f6204199-f876-4253-8d12-cb454c1e816b

As can be seen in the picture below, once the vehicle is in offboard mode, the vehicle simply flies straight.
![Screenshot from 2019-07-19 00-59-14](https://user-images.githubusercontent.com/5248102/61497647-84e62100-a9c0-11e9-845e-d8893c43ba88.png)

**Additional context**
Attitude setpoints for offboard mode in fixed wing is currently working. However, to use this a l1 like path tracking controller needs to be implemented on the companion side to make it usable. Being able to stream position setpoints to a fixed wing drone would greatly simplify the interface for robotic applications in fixed wing</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>EKF2 offboard position control doesn't work with px4 firmware 1.9.2</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12476</td>
												<td>**Expected behavior**
The goal is to do offboard position control, simply to make the quad take off from the groud to a set point (0,0,0.5) and hover. But it failed.
**Log Files and Screenshots**
https://dev.px4.io/v1.9.0/en/ros/external_position_estimation.html
![image](https://user-images.githubusercontent.com/36159013/61189437-8f6c8780-a65b-11e9-9f7c-aa8d4dc12af2.png)
The .ulg file is shown here.
https://logs.px4.io/plot_app?log=e9b8b3cb-be93-4ef5-973c-5f1e553b19a3

1. I updated the latest px4 firmware 1.9.2 through QGC. The pixhawk is fmu-v2, I use a companion compute board insatlled ros kinetic and mavros. And I'm trying to do offboard control indoor with vicon device.
2. As the  screenshot shows, I publish the vicon data to the mavros/vision_pose/pose topic, and the left window shows the data with commander line: rostopic echo mavros/vision_pose/pose, the middle window shows the data with commander line: rostopic echo mavros/local_position/pose, and the right window is the QGC analyzer, and the three sets of position data is consistent. So I think I set the EKF2 parameters in QGC right based on this 
3. After I keep publishing data through the topic mavros/vision_pose/pose and run the script which continues to publish the waypoint to the topic /mavros/setpoint_position/local, I can change the drone to the offboard mode by using QGC,  when the drone is in offboard mode, it just takes off and seems not be able to reach the fixed point and hover, which should be the position (0,0,0.5) as I set in my code,  it just drifted away in one direction, and seems to rise up constantly. I also tried the code here, https://github.com/mzahana/px4_indoor_navigation/blob/master/scripts/px4_offbaord_test.py
and it has the same results and can not hold position. I tuned the yaw rate controller PID, roll and pitch controller PID and they are fine. But I don't know whether this is a firmware issue or I need to tune the position controller PID. 
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>thermal calibration issues</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12412</td>
												<td>I am trying to perform a [offboard thermal calibration on my pixhawk 3] with v1.9.0 firmware (https://docs.px4.io/en/advanced_config/sensor_thermal_calibration.html).  And I am getting step like response for my bias compensation (see attached figure).  Notice the z acceleration bias is very large.  Looking at the [flight review](https://review.px4.io/plot_app?log=9ef38f6d-629e-43c8-84f3-5af83118771b) it seems that the raw data is fine and has temperature drift, but the estimate rpy angle and rate go crazy.  

Why do I get step like responses for my bias curves? Is this a hardware or software problem?
 Has anybody got this issues before and if so how can I resolve it? This problem exist and my 3 new pixhawk 3 systems.

[log001.ulg.pdf](https://github.com/PX4/Firmware/files/3357190/log001.ulg.pdf)

thanks





</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Rate setpoint dropout during transition</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12359</td>
												<td>While flying a quadplane one v1.9 I noticed that there is always a 1 second gap in the vehicle_rates_setpoint topic at the beginning of the transition. Normally the fixed wing attitude controller should be publishing values. The rate controllers still seem to run.

![image](https://user-images.githubusercontent.com/7610489/60328611-e8b39600-998e-11e9-9269-062976e5a34f.png)

In the figure above you can see the gap in the rate setpoint topic (top right).
At the beginning of the transition we switch from multicopter attitude controller to fixed wing attitude controller to produce the rate setpoint. However, i don't see the reason yet why it takes the fixed wing attitude controller 1 second to publish to the rates setpoint topic.

@dagar Any ideas?

Log: https://logs.px4.io/plot_app?log=5bca4650-96a8-4f92-8619-b9b1cadccf4a</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>MPC_THR_HOVER gets passed unconstrained to the thrust setpoint in manual mode.</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12338</td>
												<td>**Describe the bug**
An incorrect value of MPC_THR_HOVER will get passed unconstrained to the manual thrust setpoint.  In 1.8.2 the manual thrust setpoint was constrained between MPC_THR_MIN and MPC_THR_MAX.  If the user entered a MPC_THR_HOVER of 50 instead of 0.50 a centered stick would result in a thrust setpoint of 50 where the mixer expects values between 0 and 1.0.

**To Reproduce**
Steps to reproduce the behavior:
Set MPC_THR_HOVER to a value of 59 (instead of the correct 0.59).  In QGC this is would have to be entered as 5900 but in a startup script as 59.

**Expected behavior**
The hover thrust setpoint should not be greater than 1.0, or MPC_THR_MAX

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=4a38b5fc-4684-4b16-9313-16dcda6294cd

![image](https://user-images.githubusercontent.com/6790455/60197003-5aef7380-97f3-11e9-850c-6330f6c9bdd1.png)


Yeah, this was a dumb mistake on my part to fat finger the entry, but in 1.8.2 I would have to fat finger two separate parameters.  It's up to you guys if you want to protect against this kind of dumb.
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>RC loss behavior</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12307</td>
												<td>**Describe the bug**
Drone lost communication and then descended to ground.

**To Reproduce**
Steps to reproduce the behavior:
Fly drone in Position mode and lose communication with it. I don't know how to reproduce this consistently.

**Expected behavior**
I would expect the drone to continue to do what it was doing before because NAV_RCL_ACT  was set to 0.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=d97a8a6f-94a6-42fa-abf0-0dff97ba8102

**Drone:**
- Teal One

**Additional context**
PX4 1.9.0</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>EKF2 not fusing the Rangefinder</td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12247</td>
												<td>**Describe the bug**
The estimated altitude and the local_position.z seem to ignore the rangefinder data.
Using the Lidar Lite through PWM,
Pixhawk 4 fmu_v5,
stable release 1.9.0,
quadrotor_x in position control or altitude hold mode.

The distance sensor data show that the sensor outputs correct readings but the altitude estimates seem uninfluenced.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=d19babaf-06b4-4074-b14e-af8828fb51c2

Add screenshots to help explain your problem.
![Screenshot 2019-06-11 at 20 51 47](https://user-images.githubusercontent.com/22155994/59302939-072a4980-8c8d-11e9-9eeb-36fe5cfd2355.png)
</td>
												<td>closed</td>
												<td></td>
											</tr>
											<tr>
												<td>Position control problems with typhoon_h480 model in gazebo sitl </td>
												<td>https://github.com/PX4/PX4-Autopilot/issues/12221</td>
												<td>**The bug**

Since Firmware Commit https://github.com/PX4/Firmware/commit/43e3fc707de823faa19b16091e5ee4a900e3c446 the typhoon_h480 model does not exhibit good position control in gazebo simulation with mavros. Still the case as at https://github.com/PX4/Firmware/commit/b0176dc88aecd22363f771bfe62dafa57a6a194a. The error message ```Critical navigation failure! Check sensor calibration``` is logged in conjunction with the problem.

From release v1.9.0 to the commit prior to the reported issue (4a4d323) seem to work fine.

**To Reproduce**
Steps to reproduce the behavior:
1. Load commit version and ensure a totally clean build/initialisation (problem may not manifest unless all these steps are followed):
```
cd 
													<FIRMWARE LOCATION>
git checkout 
														<COMMIT UNDER TEST>
make clean
git submodule update
rm ~/.ros/eeprom/parameters
make px4_sitl_default gazebo_typhoon_h480
```
2. roslaunch model ```roslaunch px4 mavros_posix_sitl.launch vehicle:=typhoon_h480```
3. Arm / transition to offboard mode
4. Send position target

**Expected behavior**
Stable position control behaviour (from commit 4a4d323):
https://logs.px4.io/plot_app?log=6c788665-95f7-4b2b-a963-9ad58911024c

**Log Files and Screenshots**
Unstable position control behaviour:
https://logs.px4.io/plot_app?log=894c8553-18b1-4fc1-ad4a-d1587485637e


**Additional context**
- Iris model still seems to work OK in this regard
- Have also observed ```Preflight Fail: Compass #0 uncalibrated``` but possibly due to not clearing parameter files between different build levels.
- when using ```commander takeoff``` in gazebo via the pxh> shell the vehicle seems stable.

														</td>
														<td>closed</td>
														<td></td>
													</tr>
													<tr>
														<td>Compass calibration fail PixRacer V4 on Master </td>
														<td>https://github.com/PX4/PX4-Autopilot/issues/12193</td>
														<td>**Describe the bug**
Uploaded PR [#12120](https://github.com/PX4/Firmware/pull/12120) tried to arm and had an error "compass Inconsistent". Performed the compass calibrations and got error message "Error: failed to get current calibration 2". Uploaded  Master branch ac44584. To replicate the issue performed calibrations and got the same message, "Error: failed to get current calibration 2". Tried on Stable ea48cd4, performed the calibrations and went through successfully. Vehicle armed and had no issues.  
**To Reproduce**
Steps to reproduce the behavior:
1. Upload Master branch or PR
2. Perform compass calibration
3. Failed calibrations 
4. See error

**Expected behavior**
The expected behavior is for the vehicle to pass the calibrations and able to arm the vehicle.
**Log Files and Screenshots**

															<img width="960" alt="error" src="https://user-images.githubusercontent.com/39415493/58993834-89090700-87a3-11e9-9d66-fa505e8772a1.png">
@dagar There seems to be an error when uploading the log on Flight Review. 

																<img width="960" alt="error al cargar log" src="https://user-images.githubusercontent.com/39415493/58994274-cc17aa00-87a4-11e9-961e-060511c72f9a.png">

**Additional** context
The last working log
https://review.px4.io/plot_app?log=116ede6d-d632-4836-91a7-fced724c82be-- 


																</td>
																<td>closed</td>
																<td></td>
															</tr>
															<tr>
																<td>Custom firmware crash</td>
																<td>https://github.com/PX4/PX4-Autopilot/issues/12071</td>
																<td>**Describe the bug**
This is a vtol plane I flew for about 15+ flights. 

1. The FC is a hex cube. 
1. Firmware version is derived from 1.8.1 stable, RTK gps driver is modified. 
1. Before this crash flight, I encontered
This time when plane is in mission, reached the 5th waypoint, the plane didn't continue mission, however, it continued to fly towards the 5th point, the flight path is like a "8", then all the command from QGC became useless, still I can see all the plane status (attitude/vel/pos...). At the end the plane ran out of battery and crashed. (no RC, or I would have saved the plane)

**To Reproduce**
Two ways to reproduce the behavior:

1. Prepare the plane with RC, upload the mission, then plug out the sd card before manually take-off. Fly the plane, then switch to mission mode, the plane would fly to the only known point, the flght path is an "8".
1. In HIL with rotory wing (can't use fw hil), make the rw excecuting mission, then plug out the sd card, the rw would stop at the moment it reaches the current waypoint and stop there. Made several tests, seems that MAVLINK_MISSION and NAVIGATOR modules stopped. COMMANDER module works normally. Switching mode in QGC is useless, mavlink console is dead. RTL is also useless. Only RC can truely switch the mode to manual/altitude/position. 
I checked code, I doubt it's a datamanager problem, maybe one semaphore is blocked... But I don't know how to dig this deeper.

**Log Files and Screenshots**
Here is the 4 minutes log for this crash, sorry I don't have a tlog as I use Ipad.
https://logs.px4.io/plot_app?log=34ff913a-5414-4046-87db-181a0ea7b507

**Additional context**
The same thing I suffered one year ago is shown below, after that crash, I changed my SD card to a Kingston card. Then this problem seems solved. However it crashed again as the SD card is obviously not good enough. I will use industriel sd card in the future, but I hope we can do something in code side, we can't guarantee the sd card quality every time...
https://github.com/PX4/Firmware/issues/9271#issuecomment-383260595

Please help me out of this, I would like to offer any message you need.</td>
																<td>closed</td>
																<td></td>
															</tr>
															<tr>
																<td>System wide replay broken in master</td>
																<td>https://github.com/PX4/PX4-Autopilot/issues/12006</td>
																<td>**Describe the bug**
General system wide replay, is broken on master (and likely v1.9). EKF2 replay works fine.

**To Reproduce**
Steps to reproduce the behavior:
1. Follow instructions for system-wide replay (not EKF2 replay) here : https://dev.px4.io/master/en/debug/system_wide_replay.html
2. Set logfile path `export replay=~/
																	<path>/41b1370f-0007-4537-b245-2fe3344e4f69.ulg`
3. Run `make px4_sitl_default jmavsim`

**Log Files and Screenshots**
- Log to reproduce : https://logs.px4.io/plot_app?log=41b1370f-0007-4537-b245-2fe3344e4f69

- Terminal output:

```
[0/1] cd /Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay/tmp && /Users/kabir/Development/PX4/Firmware/Tools/sitl_run.sh /Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay/bin/px4 none jmavsim none /Users/kabir/Development/PX4/Firmware /Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay
SITL ARGS
sitl_bin: /Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay/bin/px4
debugger: none
program: jmavsim
model: none
src_path: /Users/kabir/Development/PX4/Firmware
build_path: /Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay
empty model, setting iris as default
SITL COMMAND: "/Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay/bin/px4" "/Users/kabir/Development/PX4/Firmware"/ROMFS/px4fmu_common -s etc/init.d-posix/rcS -t "/Users/kabir/Development/PX4/Firmware"/test_data
INFO  [uorb] Using orb rules from ./orb_publisher.rules
+ SYS_AUTOSTART: curr: 50001 -> new: 10016
+ BAT_N_CELLS: curr: 8 -> new: 3
+ CAL_ACC0_ID: curr: 0 -> new: 1376264
+ CAL_ACC1_ID: curr: 0 -> new: 1310728
+ CAL_ACC_PRIME: curr: 6488106 -> new: 1376264
+ CAL_GYRO0_ID: curr: 0 -> new: 2293768
+ CAL_GYRO_PRIME: curr: 6553642 -> new: 2293768
+ CAL_MAG0_ID: curr: 466977 -> new: 196616
+ CAL_MAG_PRIME: curr: 466977 -> new: 196616
+ COM_DISARM_LAND: curr: -1.0000 -> new: 0.1000
+ COM_OBL_ACT: curr: 0 -> new: 2
+ COM_OF_LOSS_T: curr: 0.0000 -> new: 5.0000
+ COM_RC_IN_MODE: curr: 0 -> new: 1
+ EKF2_AID_MASK: curr: 24 -> new: 1
+ EKF2_HGT_MODE: curr: 3 -> new: 0
+ EKF2_GBIAS_INIT: curr: 0.1000 -> new: 0.0100
+ MIS_TAKEOFF_ALT: curr: 0.0100 -> new: 2.5000
+ NAV_DLL_ACT: curr: 0 -> new: 2
+ RTL_DESCEND_ALT: curr: 30.0000 -> new: 5.0000
+ RTL_LAND_DELAY: curr: -1.0000 -> new: 5.0000
+ RTL_RETURN_ALT: curr: 60.0000 -> new: 30.0000
+ SDLOG_MODE: curr: 2 -> new: 1
+ SDLOG_DIRS_MAX: curr: 0 -> new: 7
+ SENS_BOARD_X_OFF: curr: -1.4278 -> new: 0.0000
+ SENS_DPRES_OFF: curr: 0.0000 -> new: 0.0010
+ SYS_RESTART_TYPE: curr: 0 -> new: 2
* RTL_DESCEND_ALT: curr: 5.0000 -> new: 10.0000
* RTL_LAND_DELAY: curr: 5.0000 -> new: 0.0000
+ PWM_MAX: curr: 1800 -> new: 1950
+ PWM_MIN: curr: 1200 -> new: 1075
INFO  [replay] using replay log file: /Users/kabir/Development/Driverless/EKFtuning/log_7_2019-5-10-17-48-16.ulg
INFO  [replay] Applying params from ULog file...
Buildfile: /Users/kabir/Development/PX4/Firmware/Tools/jMAVSim/build.xml

make_dirs:

compile:

create_run_jar:

copy_res:

BUILD SUCCESSFUL
Total time: 0 seconds
Options parsed, starting Sim.
Starting GUI...
Init MAVLink
+ MAV_TYPE: curr: 10 -> new: 2
INFO  [init] Mixer: etc/mixers/quad_w.main.mix on /dev/pwm_output0
INFO  [mavlink] MAVLink only on localhost (set param MAV_BROADCAST = 1 to enable network)
INFO  [px4] Creating symlink /Users/kabir/Development/PX4/Firmware/ROMFS/px4fmu_common -> /Users/kabir/Development/PX4/Firmware/build/px4_sitl_default_replay/tmp/rootfs/etc

______  __   __    ___ 
| ___ \ \ \ / /   /   |
| |_/ /  \ V /   / /| |
|  __/   /   \  / /_| |
| |     / /^\ \ \___  |
\_|     \/   \/     |_/

px4 starting.

INFO  [px4] Calling startup script: /bin/sh etc/init.d-posix/rcS 0
INFO  [dataman] Unknown restart, data manager file './dataman' size is 11798680 bytes
INFO  [simulator] Waiting for simulator to connect on TCP port 4560
INFO  [simulator] Simulator connected on TCP port 4560.
INFO  [mavlink] mode: Normal, data rate: 4000000 B/s on udp port 14570 remote port 14550
INFO  [mavlink] mode: Onboard, data rate: 4000000 B/s on udp port 14580 remote port 14540
INFO  [logger] logger started (mode=all)
INFO  [logger] Start file log (type: full)
INFO  [logger] Opened full log file: ./log/2019-05-13/00_31_38_replayed.ulg
INFO  [replay] Applying params from ULog file...
INFO  [px4] Startup script returned successfully
INFO  [replay] Replay in progress...
WARN  pxh> [replay] Formats for vehicle_status don't match. Will ignore it.
WARN  [replay]  Internal format: uint64_t timestamp;uint32_t onboard_control_sensors_present;uint32_t onboard_control_sensors_enabled;uint32_t onboard_control_sensors_health;float arspd_check_level;float load_factor_ratio;uint8_t nav_state;uint8_t arming_state;uint8_t hil_state;bool failsafe;uint8_t system_type;uint8_t system_id;uint8_t component_id;bool is_rotary_wing;bool is_vtol;bool vtol_fw_permanent_stab;bool in_transition_mode;bool in_transition_to_fw;bool rc_signal_lost;uint8_t rc_input_mode;bool data_link_lost;uint8_t data_link_lost_counter;bool high_latency_data_link_lost;bool engine_failure;bool mission_failure;uint8_t failure_detector_status;bool aspd_check_failing;bool aspd_fault_declared;bool aspd_use_inhibit;bool aspd_fail_rtl;uint8_t[4] _padding0;
WARN  [replay]  File format    : uint64_t timestamp;uint32_t onboard_control_sensors_present;uint32_t onboard_control_sensors_enabled;uint32_t onboard_control_sensors_health;uint8_t nav_state;uint8_t arming_state;uint8_t hil_state;bool failsafe;uint8_t system_type;uint8_t system_id;uint8_t component_id;bool is_rotary_wing;bool is_vtol;bool vtol_fw_permanent_stab;bool in_transition_mode;bool in_transition_to_fw;bool rc_signal_lost;uint8_t rc_input_mode;bool data_link_lost;uint8_t data_link_lost_counter;bool high_latency_data_link_lost;bool engine_failure;bool mission_failure;uint8_t failure_detector_status;
WARN  [replay] Formats for vehicle_status_flags don't match. Will ignore it.
WARN  [replay]  Internal format: uint64_t timestamp;bool condition_calibration_enabled;bool condition_system_sensors_initialized;bool condition_system_hotplug_timeout;bool condition_system_returned_to_home;bool condition_auto_mission_available;bool condition_global_position_valid;bool condition_home_position_valid;bool condition_local_position_valid;bool condition_local_velocity_valid;bool condition_local_altitude_valid;bool condition_power_input_valid;bool condition_battery_healthy;bool circuit_breaker_engaged_power_check;bool circuit_breaker_engaged_airspd_check;bool circuit_breaker_engaged_enginefailure_check;bool circuit_breaker_engaged_gpsfailure_check;bool circuit_breaker_flight_termination_disabled;bool circuit_breaker_engaged_usb_check;bool circuit_breaker_engaged_posfailure_check;bool offboard_control_signal_found_once;bool offboard_control_signal_lost;bool offboard_control_set_by_command;bool offboard_control_loss_timeout;bool rc_signal_found_once;bool rc_input_blocked;bool rc_calibration_valid;bool vtol_transition_failure;bool usb_connected;bool avoidance_system_required;bool avoidance_system_valid;uint8_t[2] _padding0;
WARN  [replay]  File format    : uint64_t timestamp;bool condition_calibration_enabled;bool condition_system_sensors_initialized;bool condition_system_hotplug_timeout;bool condition_system_returned_to_home;bool condition_auto_mission_available;bool condition_global_position_valid;bool condition_home_position_valid;bool condition_local_position_valid;bool condition_local_velocity_valid;bool condition_local_altitude_valid;bool condition_power_input_valid;bool condition_battery_healthy;bool circuit_breaker_engaged_power_check;bool circuit_breaker_engaged_airspd_check;bool circuit_breaker_engaged_enginefailure_check;bool circuit_breaker_engaged_gpsfailure_check;bool circuit_breaker_flight_termination_disabled;bool circuit_breaker_engaged_usb_check;bool circuit_breaker_engaged_posfailure_check;bool offboard_control_signal_found_once;bool offboard_control_signal_lost;bool offboard_control_set_by_command;bool offboard_control_loss_timeout;bool rc_signal_found_once;bool rc_input_blocked;bool rc_calibration_valid;bool vtol_transition_failure;bool usb_connected;uint8_t[4] _padding0;
WARN  [replay] Topic vehicle_body_state not found internally. Will ignore it
WARN  [replay] Topic vehicle_ackermann_setpoint not found internally. Will ignore it
WARN  [replay] Topic wheel_odometry not found internally. Will ignore it
ERROR [sensors] Gyro #0 fail:  STALE!
ERROR [sensors] Sensor Gyro #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Gyro #0 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 75
WARN  [ekf2] accel id changed, resetting IMU bias
ERROR [sensors] Accel #1 fail:  STALE!
ERROR [sensors] Sensor Accel #1 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 1: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 1: Accel #1 priority: 1
WARN  [ekf2] accel id changed, resetting IMU bias
ERROR [sensors] Baro #0 fail:  STALE!
ERROR [sensors] Sensor Baro #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Baro #0 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
INFO  [ekf2] Mag sensor ID changed to 196616
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1
ERROR [sensors] Accel #0 fail:  STALE!
ERROR [sensors] Sensor Accel #0 failed. Reconfiguring sensor priorities.
WARN  [sensors] Remaining sensors after failover event 0: Accel #0 priority: 1
WARN  [sensors] Remaining sensors after failover event 0: Accel #1 priority: 1

floating point exception
INFO  [log] Backtrace: 3
INFO  [log] 0   px4                                 0x00000001084b6bfc px4_backtrace + 44
INFO  [log] 1   ???                                 0x0000000000000019 0x0 + 25
INFO  [log] 2   ???                                 0x0000700009cc28e8 0x0 + 123145466685672

floating point exception
INFO  [log] Backtrace: 3
INFO  [log] 0   px4                                 0x00000001084b6bfc px4_backtrace + 44
INFO  [log] 1   ???                                 0x0000000000000019 0x0 + 25
INFO  [log] 2   ???                                 0x0000700009cc28e8 0x0 + 123145466685672

...

```
																	</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Unable to biuld px4 v 1.9.0 on beagle bone blue native</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11942</td>
																	<td>**Describe the bug**
A clear and concise description of the bug.

**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on '...'
2. Uploaded mission '....' (attach QGC mission file)
3. Took off '....'
4. See error

**Expected behavior**
A clear and concise description of what you expected to happen.

**Log Files and Screenshots**
*Always* provide a link to the flight log file:
- Download the flight log file from the vehicle ([tutorial](https://docs.px4.io/en/getting_started/flight_reporting.html)).
- Share the link to a log showing the problem on [PX4 Flight Review](http://logs.px4.io/).

Add screenshots to help explain your problem.

**Drone (please complete the following information):**
- Describe the type of drone.
- Photo of the IMU / autopilot setup if possible.

**Additional context**
Add any other context about the problem here.
</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>High sensor noise in SITL when disarmed</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11912</td>
																	<td>I realized that in SITL Gazebo (using `standard_vtol`) the sensor noise (especially accel) is quite high.

In my opinion this is far from reality and should be improved.

I stumbled upon this in SDK tests where arming failed with the message:
```
[commander] Preflight Fail: Accel Range, hold still on arming
```
https://logs.px4.io/plot_app?log=01919d08-3298-45ff-8cb2-c99929b890ca

@bresch also saw it in SITL CI.</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Poor initial climbout performance, fixed wing</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11907</td>
																	<td>part of a related discussion with @LorenzMeier @RomanBapst @dagar here https://github.com/PX4/Firmware/pull/11883#discussion_r278098852

We sometimes see poor initial climb out performance on our hand-launched fixed wing. Looking at some logs it is not achieving the target pitch angle (15 deg), but the control system isn't trying very hard to get there.

Might there be an integrator issue or is something else going on with airspeed and gain scaling?

![image](https://user-images.githubusercontent.com/12117027/56701401-91f6bb00-66c4-11e9-835e-3dbd02233b24.png)


Example logs here:
https://review.px4.io/plot_app?log=a8b193bc-f3d7-4cab-ae3e-ba0302c1834b
and
https://review.px4.io/plot_app?log=09b99ed1-aef6-4eff-8d44-d166307f7132</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Elevator servo twitching in stabilized FW mode</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11880</td>
																	<td>
**To Reproduce**
Steps to reproduce the behavior:
1. UAV switched on 
2. Put on a leveled surface 
3. Press safety switch on
4. Activate stabilized mode
5. Move elevator to the maximum up or maximum down position by manual controls
6. Wait few seconds for elevator servo twitch it will be repeated randomly

**Expected behavior**

I expect a stable output of servo command without any random glitch or twitching.

**Log Files and Screenshots**

[Log file containing the bug](https://logs.px4.io/plot_app?log=b70751e1-6844-4d59-b85f-9495ca968ac5)

Following graph clearly shows elevator twitches

![Actuator output](https://user-images.githubusercontent.com/1194177/56459724-2ea11c00-6398-11e9-8ae8-b67a55cda1ff.png)


**Additional context**
The amplitude of glitch seems to be proportional and fixed to elevator deflection. 

</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Poor EKF2 yaw performance without compass</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11847</td>
																	<td>**Describe the bug**
When using EKF2 without magnetometer fusion enabled, there is significant yaw drift. I'm using an ADIS16497 IMU (orders of magnitude better than the onboard sensors) on a Pixhawk 4 for tests.

This has been previously reported independently in https://github.com/PX4/ecl/issues/567 with analysis and logs.

**To Reproduce**
Steps to reproduce the behavior:
1. Set EKF2_MAG_TYPE to "None" or "MC Custom"
2. Reboot
3. Look at heading estimate

I also played with the inhibit imu bias estimation flag, but it didn't seem to make much of a difference.

**Expected behavior**
Drift lower than the order of degrees per second.

**Log Files and Screenshots**
Logs from boot and screenshots showing Z gyro integral compared to heading estimate. All tests are done with vehicle static on desk:

1. EKF2_MAG_TYPE = None (https://logs.px4.io/plot_app?log=edb5aada-9f19-424b-958d-9f932517fa9f)

![image](https://user-images.githubusercontent.com/5557676/56095622-b1177080-5eac-11e9-86ec-cc670f837027.png)

2. EKF2_MAG_TYPE = None, EKF2_AID_MASK has "inhibit imu bias estimation" (https://logs.px4.io/plot_app?log=074aab41-8e42-41a8-a83e-9bd0430743a0)

![image](https://user-images.githubusercontent.com/5557676/56095648-e9b74a00-5eac-11e9-9651-2924fe924fa6.png)

3. EKF2_MAG_TYPE = MC Custom (https://logs.px4.io/plot_app?log=53912bb1-dd88-4168-b7a0-988edd0afa1b)

![image](https://user-images.githubusercontent.com/5557676/56095721-a6a9a680-5ead-11e9-9584-69fb92750b90.png)

4. EKF2_MAG_TYPE = MC Custom, EKF2_AID_MASK has "inhibit imu bias estimation" (https://logs.px4.io/plot_app?log=6b17e1d2-6d03-4c29-8c01-ec087c4faf9a)

![image](https://user-images.githubusercontent.com/5557676/56095728-b75a1c80-5ead-11e9-9e16-4c6e60b08d26.png)

</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Pixhawk Cube v2 Return to land failure</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11824</td>
																	<td>**Describe the bug**
- Modes Tested
Position Mode: Good.
Mission Plan Mode (Automated)
RTL (Return To Land

- Procedure
Arm and Take off in position mode, after flying for approximately one minute, switched to mission plan mode  behavior,the vehicle took-off and reached the designated altitude (35m) as expected; issue started once it reached the altitude of 35m, UAV began to oscillate and descend at the same time but the descend was not continuous, it had short pauses.

https://review.px4.io/plot_app?log=e9d7b116-487a-45c2-98f9-52d9cec4d88f

**Drone (please complete the following information):**
- Describe the type of drone.F450 Pixhawk Cube v2

Video:  https://www.youtube.com/watch?v=Sv2jUGdmNBo&feature=youtu.be</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>ECL breaks gazebo when there is a lidar</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11812</td>
																	<td>After the ECL update of April 4th, if the vehicle model has a lidar the local position drift like crazy when the vehicle is unarmed on ground.  Green line is vehicle local position

![crazy](https://user-images.githubusercontent.com/15078736/55722173-c81a1680-5a05-11e9-851b-23405bd22d2a.png)


Log: https://review.px4.io/plot_app?log=f1ff8c5b-d47a-4065-8a6a-1beafacd1b6c
Reported by @mrivi</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>nxp_fmuk66-v3 rev C issues</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11767</td>
																	<td>

**Tested on NXP v3.x**

**Modes Tested** 
_Position Mode:_ Armed and took-off as expected, once in the air the vehicle was oscillating. 

_Mission Plan Mode (Automated):_ Once switched from position to mission vehicle gain altitude but did not start the mission then switched back to position but UAV did not respond and crashed. 

_RTL (Return To Land):_ Untested. 

**Notes** 
Vehicle took-off in position mode but was oscillating while in the air. 
The vehicle did not respond to RC commands after switching from mission mode back to position mode.

https://review.px4.io/plot_app?log=d9e76bc4-5c82-42c5-84bf-19c127e78016
@igalloway @davids5 @dagar </td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Fixed wing mission and altitude transition fail</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11759</td>
																	<td>Vehicle Information:
Airframe: Phantom FPV Flying Wing
Hardware: | PX4_FMU_V3 (V2)
Software Version: | v1.9.0 (beta) (25bf4ba7)
Steps:

1.  Vehicle arms 
1. Take off is smooth

Notes: Flight as expected, but once the mission plan (automated) is triggered, fixed-wing accelerates towards the ground with the nose facing down.

PR #10179 and Master same issues.
https://review.px4.io/plot_app?log=d1c75dae-a1fe-4fc6-b6aa-20cb1f979aa8
Initially, we thought it was the hardware. Last week we did several reboots and inspected the hardware. We tested again today and the same issue persisted.

Video of the issue below:
https://www.youtube.com/watch?v=CdgrCeFI8A0&feature=youtu.be
@dagar what could be the issue?

</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Hard-fault in NuttX?</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11703</td>
																	<td>**Describe the bug**
We flew in position control testing some of the collision prevention capabilities (together with the avoidance on the companion), when suddenly the drone fell out of the sky.

**Log Files and Screenshots**
[Firmware: 2ebb9d](https://github.com/PX4/Firmware/commit/2ebb9d2ab52bce56a74d34d3b36c7130422577c2)
[Logfile](https://review.px4.io/plot_app?log=a2750cab-5785-4dd2-bc34-c54e8ca32668)
[.elf file](https://drive.google.com/file/d/12XRtolO2OdMxlqsjAS1kktjLkBmqnFY_/view?usp=sharing)

**Drone :**
Quad X racer, with a pixracer

My hard-fault debugging skills are severely limited, best I could tell is that it seemed to come from `fs_poll.c`, but I wouldn't trust myself about that. Maybe @bkueng or @julianoes are more qualified to debug this?</td>
																	<td>closed</td>
																	<td></td>
																</tr>
																<tr>
																	<td>Achievable speed against heavy wind depends on auto vs manual</td>
																	<td>https://github.com/PX4/PX4-Autopilot/issues/11646</td>
																	<td>**Describe the bug**
I cannot be 100% sure that this also happens on master but I'm assuming this now and verify.

**To Reproduce**
Steps to reproduce the behavior:
1. Set the mission cruise speed and the manual position full stick flight speed to the same relatively high value e.g. 10m/s
1. Fly away from you in very heavy wind
1. Fly back to you in manual position mode full speed against the wind
Setpoint is full speed but you don't reach full speed because of the wind
1. Switch to RTL which should continue flight with the cruise speed (you configured it to be the same)
Setpoint stays the same and now you reach it

I repeated this several times and verified it's not the wind changing drastically in between the two modes.

**Expected behavior**
You can reach the same speed in both modes even against the wind if the vehicle has enough power (which it clearly had in my case).

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=f8817dcc-abda-466a-b223-9e504e3486fd

																		<img width="1559" alt="log_bug" src="https://user-images.githubusercontent.com/4668506/54364606-81870580-466d-11e9-904d-fdf4ca82bfd9.PNG">

**Drone:**
Yuneec H520

**Additional context**
- Both times it's a velocity setpoint that should be reached and it's not a feed forward to position control.
- `MPC_TILTMAX_AIR` is the maximum tilt for auto and manual position flight so this should not be the reason.
- Do the maximum rates in the rate setpoint make a difference?

Any help or even hint is appreciated, otherwise I'll try to solve it myself.
																		</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>High CPU load on Pixhawk 4 (fmu-v5)</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11604</td>
																		<td>When flashing master I noticed very high CPU loads when arming the vehicle. Depending on my parameters, the CPU load can go between 85 and 100%. Also when disarmed the cpu load is way higher than usual.

Log: https://review.px4.io/plot_app?log=6d8f3085-a624-4cbb-8974-5ae992ba51d7

This log is from my bench setup with no external SPI or I2C sensors.

![ph4_cpu_issue](https://user-images.githubusercontent.com/35664507/54019920-c05c1d80-418c-11e9-81ab-d3f122544a9a.png)

FYI @LorenzMeier @dagar @davids5 @bkueng</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Must reboot Pixhawk Between Missions</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11588</td>
																		<td>After we land and finish a mission, if we disarm then arm back up or simply don't disarm but re-run the mission, mission mode engages but not take-off occurs (no throttle spin up). Flaps go down (take-off flaps are enabled) but there is no motor-spin up. The only way to fix it is to reboot the plane from QGC.

This is occurring on master but likely not new since it has done this repeatedly (nothing but this) on master from a week or two ago as well.

FMU_v2 with v3 firmware on fixed-wing.

Logs:
Successful flight:
https://review.px4.io/plot_app?log=ba1a4634-1c12-4461-9938-097c743a3e6c
Log right after taxing back:
https://review.px4.io/plot_app?log=3cca3276-7b5a-4a50-8073-9a4fd1947557
Quick Disarm then arm and then taxing to try and takeoff (which didnt work:
https://review.px4.io/plot_app?log=575072f3-09a1-4c50-bbe9-3edcd923b9b6
After the last log, a reboot of the plane from QGC and the next mission (same exact mission) flew fine.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Pixhawk 4 and Pikhawk 4mini v5 not disarming.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11569</td>
																		<td>**Description**
UAV is not disarming manually nor automatically, same issue when using Kill Switch.
Changed to Stable firmware and disarm functions where working as expected.

**Log Files**
Pixhawk 4mini v5 _Commmit:_ 0df34af1
https://review.px4.io/plot_app?log=b69fc363-d90d-49d1-8cf4-ecb6122f3202&fbclid=IwAR2DQunVucBs96HvJiQ9KvGzdutroVqC33kkPLZk8crRz0QyFi97vb1qy2Q

Pikhawk 4 v5 _Commmit:_ 0df34af1
https://review.px4.io/plot_app?log=e715787a-7f9f-45d4-9947-e5b0e1576773&fbclid=IwAR3dsmfYIADvrCuK_24NColLyb5a2E1UnXGX25eYMjg21_FRJSy3evWkG_4

**Drone**
- Multicopter.
- DJI Flame Wheel F450.
@dagar</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Attitude glitches in velocity control</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11551</td>
																		<td>**Describe the bug**
After flying with tightly tuned multicopters in position control mode (basically a racer with a GPS), I realized some attitude twitches that I don't see in stabilized mode. I'm now able to see that those twitches are created by the velocity controller.
In the log below, you can see that the velocity setpoint and estimate is perfectly smooth and that the thrust/pitch/pitchrate setpoint have glitches. Pitch and pitchrate setpoint glitches are a consequence of the thrust glitch and the thrust setpoint should have the shape of the error between the velocity estimate and setpoint (for my tests, I removed the integral and derivative gains to simplify the problem).

Reproduction in SITL with fullrate logging of the relevant topics:
![velocity_control_attitude_glitch](https://user-images.githubusercontent.com/14822839/53484259-b39c4300-3a83-11e9-8537-e9a26d048815.png)

**To Reproduce**
- jMAVSim test in position control mode (default smoothing or velocity smoothing).
- log `vehicle_attitude_setpoint`, `vehicle_local_position` and `vehicle_local_positon_setpoint` at full speed
- set `MPC_VEL_MANUAL` to a small value to be able to give constant full stick and stay far from any saturation (3 m\s for example)
- takeoff and fly full stick straight to the North

**Expected behavior**
A smoooooooth flight

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=a63b076d-b174-40d0-80f3-a57bc4f6a87b

@bkueng @MaEtUgR @Stifael Can you also reproduce the issue?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MC - Loops maneuvers when MPC_XY_CRUISE > MPC_XY_VEL_MAX</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11420</td>
																		<td>Reducing the MPC_XY_VEL_MAX to lower value then MPC_XY_CRUISE make the drone to fly in very strange way, it makes "loops" and fly backwards every few seconds.

This was tested on simulator only.
https://logs.px4.io/plot_app?log=14e8cf1c-2fca-4cf8-ba0d-26ea8c5dd5d1
To reproduce:
• Run simulator, with default parameters
• takeoff and fly-to remote location
• everything normal
• set MPC_XY_VEL_MAX 2
• you will see that every ~10 second the drone fly back, do some strange loop
• set MPC_XY_ CRUISE 2
• the drone fly slow, but ok
![image](https://user-images.githubusercontent.com/29940676/52518803-73525d80-2c59-11e9-96f4-b1143cfea0af.png)

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Issue with Master_vehicle crash</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11408</td>
																		<td>Today we tested Master v1.9.0 (beta) (7f3b1700) with the Pixracer, Pixhawk 4 mini, Pixhawk 4. Created mission. The vehicle armed good, took off. At 30 meters the vehicle started spinning and came down to the ground. Resulted in a crash. Same behavior for all 3 platforms. 

Steps to reproduce the behavior:

1. Uploaded mission
1. Drone switched on
1. Vehicle armed
1. Took off
1. Elevated to 30 meters
1. vehicle started spinning out of control
1. The vehicle came down and crashed

Pixracer:
https://review.px4.io/plot_app?log=4f0c2692-5f27-4d83-bfbd-765bf48a989e

Pixhawk 4 Mini:
https://review.px4.io/plot_app?log=53fa724b-906d-4e93-87fe-5a4f4c2a50b8

Pixhawk 4:
https://review.px4.io/plot_app?log=69f42b00-6259-4a97-96c1-bd8f06b4d29d

@dagar

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FW SITL intermittent failure</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11257</td>
																		<td>http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/master_nuttx_7.28%2B/3/pipeline

Exiting early?
![image](https://user-images.githubusercontent.com/84712/51485124-4eaa4a80-1d6b-11e9-9c78-c4a1e7122eb9.png)
https://logs.px4.io/plot_app?log=214c70d1-d6c9-4cf7-a655-5faab83328e1



Examples
 1. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/master_nuttx_7.28%2B/3/pipeline
 2. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/master_nuttx_7.28%2B/5/pipeline
 3. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/master_nuttx_7.28%2B/6/pipeline
 4. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/PR-11234/9/pipeline
 5. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/master_nuttx_7.28%2B/9/pipeline
 6. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/PR-11274/2/pipeline/
 7. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/PR-11277/2/pipeline
 8. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/improve-slow-landing/3/pipeline
 9. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/master_nuttx_7.28%2B/14/pipeline</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>PX4 receives input_rc and arms by itself with no RC attached</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11238</td>
																		<td>**Describe the bug**
Intermittently, the aircraft, when powered on and sitting on the ground with no RC transmitter turned on, will print out that it lost RC control, arm itself, spin up the motors, then switch into LAND failsafe because  GPS hasn't locked yet. The problem seems somewhat intermittent, but we can go for stretches of hours where it will do it on every boot. 

Logs of the event show that it receives input_rc messages every 3-20 seconds, with  SOURCE=RC_INPUT_SOURCE_MAVLINK and 8 channels of 65535 values. When looking at the scaled manual control inputs in the log viewer, that gives an almost full yaw command and zero throttle, which may be the source of the arming.


We also have ensured that the RC_IN lines while not connected to an RC transmitter are not floating electrically. 


**To Reproduce**
Steps to reproduce the behavior:
1. Unplug RC receiver, and remove props!
2. Power on aircraft 
3. Wait
4. Sometimes it will arm and takeoff.

(Note that in our case we have the CBRK_IO_SAFETY set so that is NOT necessary to press the safety switch before launch), otherwise the arm would be prevented.

**Expected behavior**
We expect the aircraft to sit there and never arm

**Log Files and Screenshots**
Because the system arms, it starts logging. here are some logs from the events. It is worth noting that the input_rc message in the logs show a few received values, even though there are no  RC receivers connected, and the source is listed as MAVLINK.
https://logs.px4.io/plot_app?log=4abb3756-1202-4d7f-93df-7278dcec0897
https://logs.px4.io/plot_app?log=d12666c6-faed-4645-bc04-0d5a94d05116
https://logs.px4.io/plot_app?log=508c3766-012d-4a24-a538-80235388be71
https://logs.px4.io/plot_app?log=2f046532-ae41-4327-b683-57cdfe3e1d70
https://logs.px4.io/plot_app?log=7cd79b51-c6b8-4ee0-9b33-311ef4f6c0ae


**Drone (please complete the following information):**
Our  system is based on a custom adapter board with a Pixhawk 2.1 cube on it, a wifi module, and a long range radio. The adapter board has an MCU that can communicate with the cube. In order to rule out all external sources of mavlink traffic, we wiped the adapter MCU and disabled the wifi serial port and unplugged long range RF, and can still get it to happen. Our PX4 code fork is based on 1.7.3 release with a custom CAN driver for our ESCs.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Tiltrotor SITL interrmittant failure</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11213</td>
																		<td>Originally reported in https://github.com/PX4/Firmware/issues/11144

New failures -
 - http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/pr-2swhoop-params/3/pipeline

> Different issue, tiltrotor arming failing due to accels. http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/PR-11136/4/pipeline/81
> 
> ![image](https://user-images.githubusercontent.com/84712/50703875-830bd000-1023-11e9-84c1-955c9948209f.png)
> 
> What's going on with the vibration in the tiltrotor model?
> 
> From the failure log - https://logs.px4.io/plot_app?log=33db160e-75a1-413c-9401-9bda6daa063b
> ![image](https://user-images.githubusercontent.com/84712/50704053-09281680-1024-11e9-99fb-255e3a00c938.png)
> 
> From a successful log - https://logs.px4.io/plot_app?log=a20570ad-bd94-446d-b910-f56e441610b5
> ![image](https://user-images.githubusercontent.com/84712/50704081-1d6c1380-1024-11e9-8906-9a46c923ddeb.png)


@RomanBapst any ideas?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>HITL jmavsim fail</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11203</td>
																		<td>**Describe the bug**
I follow http://dev.px4.io/en/simulation/hitl.html
but meet error.
It can obviously get RC signal, I can easily see it arm and disarm in the qground. I can also see it
'MSG: Landing detected'
and
'MSG: Takeoff detected',when I control my RC controller.
but virtual copter moves nothing in the Jmavsim simulator. Virtual copter keeps staying still.



I tested it indoors, is it a problem about GPS thing? If is, why there is also no reponse in Z direction.



**Expected behavior**
Virtual copter moves as I control with RC Controller.

**Log Files and Screenshots**
*Always* provide a link to the flight log file:

Here's the flight log.
[test log 5](https://logs.px4.io/plot_app?log=1ec6070f-2028-4292-b4c1-61336bb4e2c6)
[test log 4](https://logs.px4.io/plot_app?log=4cbc7ec5-7625-40ae-a3f2-b80e6640ea90)
[test log 3](https://logs.px4.io/plot_app?log=2bf8dd8e-1deb-427d-972e-fa1bf658085b)
[test log 2](https://logs.px4.io/plot_app?log=39d6a810-b31b-4735-9bf1-f9e712f2d945)
[test log 1](https://logs.px4.io/plot_app?log=ad447bfa-4857-431a-b89f-f9fe4ca15065)

screenshots
![2019-01-13 22-32-10](https://user-images.githubusercontent.com/44794635/51086905-1c0abb80-1787-11e9-9b15-d78ddeb3e0f8.png)


**Additional context**
Thanks for your team's work</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Multicopter takes off in HOLD on ground</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11197</td>
																		<td>I found a regression while running the Dronecode SDK integration tests. Before arming, the SDK sets PX4 into HOLD mode. That way we make sure that a drone does not shoot up right after being armed but always sits on ground and just spins the motors in idle, so this is a safety precaution.

However, after 5887a2393cefad7268d165e07352384be61e1404 the drone suddenly starts hovering right after arming even though it's in HOLD mode.

The SDK command to test this is:
```
make && build/default/integration_tests/integration_tests_runner --gtest_filter="SitlTest.ActionHoverAsync"
```

FYI: @Stifael 

https://logs.px4.io/plot_app?log=c387cdf8-120a-4aab-90ca-bcfb559a5ea5</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[ecl/EKF] EKF stopping navigation in every flight</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11071</td>
																		<td>Hello,

I am constantly getting this error in my flights: "[ecl/EKF] EKF stopping navigation". I am using a PX4FLOW and a Lidar Lite v3 for range data and I am flying without GPS. I am using fmu-v3 (master) with a small alteration to make the Lidar boot before the PX4FLOW (https://github.com/PX4/Firmware/issues/11009).

From the logs I see that my local position estimates vary wildly at the beginning until I get the error and, after that, the estimating stops (obviously). However, the condition_local_position_valid flag drops to zero even before EKF stops navigation and it never goes back to one. Here is an example of a short test I did this morning:

https://review.px4.io/plot_app?log=95d3f262-f3ef-4dea-9398-91dcce53d245

I was flying outdoors and neither take-off nor landing were exactly smooth. I thought it might be an issue with the PX4FLOW, but I have tried both indoors and outdoors flights on floors with different textures and the quality data I get seems to be good enough. Also, even though the acceleration power spectral density data is not ideal, I get much better values indoors and yet I still get the same error, so I doubt vibration is an issue.

Any ideas?

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>survey control lost at turn point</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/11041</td>
																		<td>Performing a survey, we saw a weird behaviour at the first turn point. Reaching the turning point, the copter started to tumble violently and loose height. Quickly toggling to altitude and then position to stop the mission didn't stop the behaviour. The machine crashed into the ground tumbling, stayed grounded for a few seconds, and took off again, now hovering stable in position mode.

The tumbling seems to start with a jump of the yaw setpoint. At mission start the machine had a successfully yaw into flight direction however.

The tuning and general reaction tested before the survey in position and altitude mode seemed very stable.

Any hints on possible reasons are very appreciated!

https://review.px4.io/plot_app?log=c7976cfc-d926-4596-ae1a-44c4e216800b</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Strange drift on velocity tracking</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10881</td>
																		<td>https://logs.px4.io/plot_app?log=06cbb7ce-198a-45ff-9e9f-557143f20b93

Here is the log.
Around 2:00, there is a significant divergence on velocity tracking, but until then, it is fine.

P.S.
https://logs.px4.io/plot_app?log=a14f4203-1ad1-4a58-a9ee-cfde69bf0d9a
another log too.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Too many false positive "Preflight Fail: HIGH IMU ACCEL BIAS" warning messages</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10833</td>
																		<td>**Problem:**

We are getting a lot of false positive "Preflight Fail: HIGH IMU ACCEL BIAS" warning messages preventing arming.  This seems to have started in master this past spring and continues in stable 1.8.0.  I believe a lot of other PX4 users are getting these false positive warnings as well.

- (Note: in recent master the text of this warning as changed to "Preflight Fail: High Accelerometer Bias")

This happens to us frequently on known good aircraft that are great fliers and continue to fly great once the fault is cleared. 

We recently noticed the error seems correlated to a vehicle sitting level on the ground for some period of time.  @priseborough made a helpful suggestion to try pitching and rolling the vehicle slowly so that the X and Y accels could spend some time facing down (gravity) and EKF2 could better estimate their bias.  This worked to clear the error!  Here is an example of the error which was then easily cleared by pitching and rolling the vehicle:
https://review.px4.io/plot_app?log=278fa376-2a02-4027-b465-12507dbc9062

**Possible solution:**
It has been suggested that using the bias state uncertainty as a factor in the bias level check could help eliminate false positives.  The bias level check in Commander could use the already existing additional information from EKF2 for this.


**Further support:**

Anecdotally I know of this exact ACCEL BIAS warning happening to handfuls of other PX4 users, many of whom do not post to Github or Discuss.

There are a large number of github issues and PX4Discuss posts about getting this error.  Probably there are many complicating factors involved with each report, but the fact that there are so many makes me believe there is a systemic issue with the check, or the checks and warnings need to be more specific.
https://github.com/PX4/Firmware/issues/9241
https://github.com/PX4/Firmware/issues/9474
http://discuss.px4.io/t/preflight-fail/7023/10
http://discuss.px4.io/t/ekf2-problem-z-velocity-estimate-weird-behaviour/8395
http://discuss.px4.io/t/auto-land-ekf2-test-ratios-flight-controller-reset/8264</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>DANGEROUS: VEHICLE_CMD_DO_REPOSITION broken on master</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10757</td>
																		<td>Had a Drone fly into a pole and smash into the ground when issuing a VEHICLE_CMD_DO_REPOSITION. I looked at the log and everything looked fine. This is broken on current `master` 294af5daada2fa08da8d9f1c4310779683fe9750
https://review.px4.io/plot_app?log=cc6bccfc-44a5-4eca-bc2f-7a4be13a0a7a
![selection_019](https://user-images.githubusercontent.com/37091262/47468014-45ceca80-d7b6-11e8-8a72-808d278e3b66.png)

As you can see we were just adjusting the altitude setpoint and nothing else.

I then tested this in SITL using `make posix_sitl_default gazebo` and issued via QGroundControl a **`goto`** command and saw the vehicle fly to the new location, but then fly super far an a random direction for a while, then returns back to that location, wanders around a bit more, flys off in the opposite direction... then I got bored of watching.
![selection_020](https://user-images.githubusercontent.com/37091262/47468301-c8a45500-d7b7-11e8-8acc-f1d56e639669.png)

Isn't CI supposed to catch these types of bugs? This is extremely concerning to me.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Restore LNDMC_THR_RANGE for faster disarm on land</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10712</td>
																		<td>As of https://github.com/PX4/Firmware/commits/master/src/modules/land_detector the land detector cannot be configured to transition from `ground_contact` to `maybe_landed` via the now deprecated parameter LNDMC_THR_RANGE. 

It now takes a considerable amount of time to disarm due to throttle down time.
https://review.px4.io/plot_app?log=43987a80-5752-4f55-89a7-eec60e9298c3
![selection_011](https://user-images.githubusercontent.com/37091262/47110927-65428200-d20f-11e8-8e41-0ab7008884d7.png)
![selection_013](https://user-images.githubusercontent.com/37091262/47110989-8a36f500-d20f-11e8-86b4-ef158f78e931.png)

If there is a better way to do this lets discuss it, otherwise I think the parameter should be restored.

**Note:** current implementation sets a hard coded limit
```
// 10% of throttle range between min and hover once we entered ground contact
float sys_min_throttle = _params.minThrottle + (_params.hoverThrottle - _params.minThrottle) * 0.1f;
```</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Position setpoint drift during takeoff</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10679</td>
																		<td>A strange update in the local position setpoint seems to occur during takeoff on a fairly recent branch (few weeks old):

https://review.px4.io/plot_app?log=1d33a68b-c88b-420c-8e8f-4a4382675963

During a mission, The vehicle takes off 4 meters in the air then suddenly changes position. as seen on local position setpoint X/Y. it does resume its takeoff to final altitude.

The position it moved to seems like it is the location where the first home lock occurred. 

![image](https://user-images.githubusercontent.com/14801663/46794991-52c8d400-cd49-11e8-8a9f-fe8fda09f7b9.png)


@dagar @RomanBapst @bresch</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FlightTask: implement MPC_LAND_ALT1/2</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10659</td>
																		<td>MPC_LAND_ALT1 and MPC_LAND_ALT2 should be used for a final approach speed during landing.
According to the param spec the vehicle should descend at MPC_Z_VEL_MAX_DN speed and slow down between MPC_LAND_ALT1 and MPC_LAND_ALT2 to MPC_LAND_SPEED.

There is a massive energy consumption benefit in having this

Currently this is not implemented in the FlightTask: https://github.com/PX4/Firmware/blob/bee6a6b8b08d30b36475628e0750edcb6038d798/src/lib/FlightTasks/tasks/AutoMapper/FlightTaskAutoMapper.cpp#L117

The params are used for takeoff which does not seem to be documented behavior: https://github.com/PX4/Firmware/blob/bee6a6b8b08d30b36475628e0750edcb6038d798/src/lib/FlightTasks/tasks/AutoMapper/FlightTaskAutoMapper.cpp#L128

Perhaps implementing it as indicated currently is not a good idea, the altitudes default to 10 and 5m above home and we might be flying over a different altitude.

There are a few options on how this can be implemented safely;
1. Within a small radius around home / for RTL only
2. Only when a range finder is installed
3. If QGC has given the terrain altitude
4. When enabled by a param
5. When enabled in the waypoint (explicitly chosen in QGC)

If there are any other ideas on how to do this please share.

Log demonstrating the behavior: https://review.px4.io/plot_app?log=642eae62-6203-4ab3-b372-ef0b58f01e4c
MPC_LAND_SPEED was 0.7
MPC_Z_VEL_MAX_DN was 2.5

/cc @dagar @bresch @LorenzMeier</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Skywalker X8 VTOL unable to recover from gust</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10639</td>
																		<td>After attempting to climb to 30 m in mission mode a moment is applied due to a gust. This causes the DeltaQuad to bank excessively sending it into a pitch down dive. We attempted to take over manual control but we didn't have enough altitude to recover. 

We flashed our flight controller (Dropix V2.1) with the Master branch (Updated 24th September). We then tested our DeltaQuad in manual mode quickly to ensure everything was working correctly and we set up a simple mission (with a few way-points then a land only in QC mode). It began climbing normally until 24 m when a gust caused the drone to enter a roll. The drone wasn't able to recover from this and caused an adverse roll followed by a nose down attitude until contact with the ground.

Link to the log file: https://review.px4.io/plot_app?log=992ecb6b-8410-4bd6-91e2-e82a7fa5e826

Our drone is a Skywalker X8 with VTOL modules.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>pixhawk 2.1 voltage issues.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10620</td>
																		<td>@dagar @Tony3dr 
 I had problems with pixhawk 2.1 voltage reading,  I have calibrated the voltage several times  and even with the full battery, activate the fail safe immediately. 
I already tested with another voltage sensor and reset the parameters and it's still the same.

https://review.px4.io/plot_app?log=8c1f6603-3183-4bf6-87fd-6d527988a276
https://review.px4.io/plot_app?log=23ce4f5f-e26c-4a00-96e7-5e7cf5c8138c</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FW altitude control overshoot</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10495</td>
																		<td>FW altitude change, there is overshoot control
![image](https://user-images.githubusercontent.com/5361334/45616312-9f4e2600-baa1-11e8-905a-d2a777287d56.png)


Looking at the pitch control, that is good for setpoint
![image](https://user-images.githubusercontent.com/5361334/45616361-cad11080-baa1-11e8-9a06-07bacbc0ccd5.png)

the log attach is 
[Flight Review](https://logs.px4.io/plot_app?log=ba6fc1bf-ef2a-4bd0-b357-7db23e39c1f4)

and also discuss in
 [DroneCode Discussion](http://discuss.px4.io/t/fw-overshoot-when-changing-altitude/2382)</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Navigator: Land/RTL quad flys towards home lat/lot/alt</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10412</td>
																		<td>**Describe the bug**
Auto modes `land` and `rtl` cause quad to fly directly towards home lat/lon/alt. This is the third time I've seen this in two weeks. I've seen it ~10 times since the introduction of FlightTasks. We are flying ~7 hours a week, so this is a very rare edge case bug. Logging either dies completely or drops out when this happens. I finally have a partial log (2 minute long dropout) of a flight where this happened. 

**To Reproduce**
1. Takeoff using mode `takeoff`
2. Fly around in position mode
3. Issue `land` or `rtl`
4. This behavior will persist through a land/disarm/arm/takeoff

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=7955d3de-31c9-4434-b30d-cb31fadefb32

**Additional context**
I am pretty sure `takeoff` is causing the bug. I am fairly certain `navigator` gets stuck in a loop somewhere, this would explain the logger dropouts due to thread starvation (navigator priority is higher than logger). I am guessing all `auto` modes will cause this, we only use `land` and `rtl`, but both of those modes do the same thing, fly right towards home.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[Intel Aero]: Arms but non responsive attitude</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10406</td>
																		<td>booted, waited for about 2 minutes, successfully armed and motors spun up to idle but copter non responsive to throttle input

https://logs.px4.io/plot_app?log=12385dd2-7b2a-4cff-a7b7-711d50a7a270
https://logs.px4.io/plot_app?log=332bc3b6-2bae-4503-95b2-b4dadda12d42

seeing errors in log [mc_pos_control] Stabilized-Ctrl failed with error: Activation Failed</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Switching to HOLD mode using LPE or EKF performs different response</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10391</td>
																		<td>When EKF is used as a position estimator with activating both vision position and GPS bitmask, it is possible to switch HOLD mode but in LPE i cannot switch to HOLD mode with GPS and vision position fusion, the fcu rejects auto hold. LPE allows to switch to HOLD mode when only GPS bitmask activated. I cannot combine GPS and vision position in LPE while EKF has this feature. Is this desired feature or just a bug? In both cases, mavros fake_gps module was used and vision position data transferred as fake_gps at the same time.

**Firmware version:** 1.8.0

**Log samples:**
LPE(vision+gps) reject auto hold: https://logs.px4.io/plot_app?log=5fc00993-5f27-4d65-a009-f6f09ca3bf6e
EKF2(vision+gps) switches to hold mode: https://logs.px4.io/plot_app?log=a37b9199-a058-4642-8133-73f1c2a37004</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>**BUG** Timed Loiter running indefinitely</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10376</td>
																		<td>PX4 1.8.0 - QGC 3.3.2 Android

A timed (30 sec.) loiter was planned just before the landing pattern. The loiter was entered and continued for 4 minutes before I had to manually select the next waypoint to go to.

I created an issue in QGC and was directed to open an issue in firmware.

https://logs.px4.io/plot_app?log=3ceb70c2-c26b-4c48-818c-0c1c7d31044</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>SITL test intermittent failures</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10352</td>
																		<td>The SITL mission tests are periodically failing due to anomalies detected by the ecl analysis script. FW is the most frequent, but VTOL is also failing.

https://logs.px4.io/plot_app?log=88a0abf0-78bf-430b-8867-5821e8595f76
![image](https://user-images.githubusercontent.com/84712/44729947-de461880-aaad-11e8-9379-4735065ee985.png)

http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests/detail/pr-vehicle_trajectory_waypoint-limit/6/pipeline

Do we need to relax the script or is this something that should be adjusted in the gazebo models?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[Logger]: Log size doubled</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10345</td>
																		<td>a few weeks ago, the log size doubled on the same flights.

two 5 minute flight running commit 7c76028 weighing in at 10.9 MB:
https://logs.px4.io/plot_app?log=b0973caa-e51d-4612-8c70-3c13576cd8a8
https://logs.px4.io/plot_app?log=7bdf4aa5-f309-4afa-af1e-31578b82a3a7

same two flights running commit 9a23295 weighing in at 22 MB:
https://logs.px4.io/plot_app?log=0be6630a-0e50-4a23-ad50-561110cdee8a
https://logs.px4.io/plot_app?log=632011ec-1d3b-4eba-82b8-fe6fe85b6fa7

today's master bbc0c28 for reference also weighing in at 22 MB:
https://logs.px4.io/plot_app?log=5af821ab-b9af-4514-9b98-804fdde019a8
https://logs.px4.io/plot_app?log=afa1ca96-1f58-4cfc-9435-2e33be98dc0d

@dagar thoughts?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Random yawing when RC loss</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10296</td>
																		<td>**Describe the bug**
The vehicle loses RC connection and yaws to `home` heading. (We have loiter as our RC loss behavior: NAV_RCL_ACT = 1)
![selection_001](https://user-images.githubusercontent.com/37091262/44433460-92eab200-a563-11e8-80e5-8b9efc0f3e8f.png)



**To Reproduce**
Current `master` just cause an RC loss. 

**Expected behavior**
Keep the current heading.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=d9f20475-0558-45f8-9fc9-56d7389f173c

**Additional context**
We are hitting a failsafe which we should not be hitting. `FlightTasks::update()` is failing at line `607` in `mc_pos_control_main.cpp`. This triggers `failsafe()`. Note the vehicle does not actually descend....

![selection_002](https://user-images.githubusercontent.com/37091262/44433521-e6f59680-a563-11e8-8ea0-95868c0d5849.png)</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FlightTasks Auto activation failed</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10282</td>
																		<td>I've noticed this in a couple logs. Any ideas what's going on?

https://logs.px4.io/plot_app?log=f15dc101-491f-47fc-a547-5427060bb1a7
https://logs.px4.io/plot_app?log=573371f3-4d7a-4a2a-b4d2-c7fd0d9aad73

![image](https://user-images.githubusercontent.com/84712/44375367-58c8d400-a4c1-11e8-979a-146643427f5e.png)

Why is it only a warning?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[Global position] unable to obtain lock despite good sat count</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10258</td>
																		<td>Running current master 57052ed and it took several attempts and almost 3 minutes to obtain global position, successful flights:
https://logs.px4.io/plot_app?log=641838bc-50ff-4654-997f-24cba2347631
https://logs.px4.io/plot_app?log=a3837f58-7045-4539-9270-2f9b1d7a525c

Turned on logging from boot and after 3+ minutes, was unable to obtain global position:
https://logs.px4.io/plot_app?log=ca259319-8446-4dbf-abc0-d55f073387bf

Reverted to yesterday's master 36403e9 and could obtain lock under 30 seconds as normal:
https://logs.px4.io/plot_app?log=79330666-0f92-4cbb-917d-4dc13f66a20f
https://logs.px4.io/plot_app?log=872eb963-c9ef-40a6-8d44-dc53d8941704

@dagar @priseborough thoughts?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Yaw setpoint jumps sharply</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10230</td>
																		<td>I am having an issue with a very heavy prototype VTOL that I'm building and I am seeing an issue that I am not sure where this behavior could be coming from. As I am hovering, sometimes the bird yaws hard and loses altitude. I think the fact I lose altitude indicates to me that we don't have enough thrust to push through the decent caused by spooling down half of the motors in the yaw.

While I have been digging through the logs, I noticed a point where the yaw setpoint jump sharply at 7:36. I also noticed a baro EKF error and would that case an EKF reset on the mags which could cause a sharp heading change?

I feel like this might just be a poor calibration and tune but I thought I would ping you to see if you have any great ideas.

https://review.px4.io/plot_app?log=ca81fd27-ac49-4d8f-aac2-da9e1532396d</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Flight Tasks Issues</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10223</td>
																		<td>**Description**
1) When releasing the x/y stick in position control mode the drone decelerates as it should but there is always a twitch in attitude. You can see in the log that for some reason the velocity setpoint pulls towards the current velocity.
![flight_task_issue](https://user-images.githubusercontent.com/7610489/44019998-c1dbb0a2-9ee0-11e8-9814-5fde82b233b6.png)

2) For some reason it seemed like our parameter changes did not take effect. We e.g. changed the parameter MPC_XY_VEL_MAX from 2 to 8 but the drone would not move faster than 2 m/s.
The parameter changes were logged so it was not a communication issue. 

We were on this commit from master:
30fb82d9b4157b74c741ec7e1e16d7408e5dfa3f

Log file:
https://logs.px4.io/plot_app?log=798b9ed5-d68c-4c22-99a8-3b3540386f50

@Stifael @MaEtUgR Do you have an idea what went wrong? I tested flight tasks a week before on a different vehicle and I had no such issues.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>no pwm output in rover mode</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10221</td>
																		<td>**Describe the bug**
I am using px4 in rover mode with 1/10 scale RC cars. After successfully arming and no errors reported in QGroundControl, there is no pwm output in any port.

- hardware: pixfalcon
- Firmware: v1.7.3 and v1.8.0 (tested both and neither works)
- Airframe: Traxxas Stampede vxd 2wd
- Mode: Manual or Stabilized 

I also tested Firmware v1.6.5 and everything works fine. The reason I preferred newer version is that I wanted to use pixhawk with mocap system and use EKF2 estimator. 

log file:
https://logs.px4.io/plot_app?log=5e97ce09-9c4b-4817-8d5a-38c24bacf376</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MPC_YAW_MODE stuck/not responding to changes in value</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10176</td>
																		<td>Flew a few flights on a Pixracer (v4) running master d3f5c06b
parameter MPC_YAW_MODE seems to be stuck in mode 3 where the heading points towards the trajectory

First couple flights with the value set to 3 intentionally:
https://logs.px4.io/plot_app?log=32f554d3-c66e-4604-a731-63a4e9e721ff
https://logs.px4.io/plot_app?log=94bc44cd-673c-4c71-bb89-05b50047397d

Changed MPC_YAW_MODE to 0 and observed the same heading:
https://logs.px4.io/plot_app?log=36bb7811-e852-4c0c-9462-fe18aed4e0b1
https://logs.px4.io/plot_app?log=0c8d6dd0-5f19-4c83-b14e-54e57431943b

Changed MPC_YAW_MODE to 1 and observed the same heading:
https://logs.px4.io/plot_app?log=df2c014f-e2c2-4a61-83c3-dcd9c1add6e2
https://logs.px4.io/plot_app?log=f8f03d5c-9c48-49bf-8cef-bc2ac480c478

@Stifael thoughts? Changing the value seemed to work fine in #10003 not sure why it's not working on master after merge</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Fly Wing can not entry into mission mode</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10057</td>
																		<td>Fly Wing can not entry into mission mode.

here is the log:  https://logs.px4.io/plot_app?log=3ede1a11-2da2-4d10-a582-3ef78658769e

@priseborough could you take a look at these logs?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Yaw during takeoff during first flight after reboot</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10033</td>
																		<td>Every time I take off for the first time after a reboot I get some strange yaw behaviour. As soon as the vehicle takes off I get a very fast yaw (more than 90 degrees). If I land and do a second flight it doesn't happen anymore (probably some initialization issue).

Frame: S500
Autopilot: Pixhawk 4 Mini (fmu-v5)
PX4 version: Today's Master (100f9553cef2203c818ab98e13d39406c6fc3c8c)

Position Mode:
Log: https://review.px4.io/plot_app?log=fe704b1d-0e77-4bc4-9c9f-35aa2da2732c
Video: https://youtu.be/A_9ktAQalvs 

*Log and video are from the same flight
*Log is 'from boot to disarm'</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>review tailsitter CI mission failure</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/10032</td>
																		<td>https://logs.px4.io/plot_app?log=d00d50a1-f448-4c94-8966-1e6bbd136812

http://ci.px4.io:8080/blue/organizations/jenkins/Firmware/detail/pr-update_src%2Fmodules%2Fuavcan%2Flibuavcan/29/pipeline

![image](https://user-images.githubusercontent.com/84712/43202139-93899392-8fe8-11e8-9b25-84eaa8927000.png)</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>pixhack v5 RC is not detected on master </td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9989</td>
																		<td>On the pr and master, the copter does not detect the radio, only on stable works well
first, send to manual mode and later to hold mode


https://review.px4.io/plot_app?log=bf71d883-0596-4723-95cc-ed70f2412ce6

**Drone 
f450, pixhack, 20ams hobbywing esc and iris motors 

on the firmware master 3293fe still work good @dagar</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Intel Aero: mission upload broken on master</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9984</td>
																		<td>Flashed master ade70cb and the mission that was previously stored seemed to be deleted.
Attempted to upload mission and got error: (MAV_MISSION_ERROR) & Unable to write on micro SD
![capture](https://user-images.githubusercontent.com/13203106/42965006-946d4abe-8b4d-11e8-9509-6f8419e8183b.JPG)
![capture1](https://user-images.githubusercontent.com/13203106/42965010-9679f442-8b4d-11e8-948b-6451b4c96fdc.JPG)

Log of failed to engage Auto and failed to upload new mission:
https://logs.px4.io/plot_app?log=e93d393e-eb44-48f8-a457-2be20e8b2e96</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Aerotenna OcPoc failing to engage Auto in master</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9977</td>
																		<td>running master 3293fe4
successful flight with auto take-off and rtl as part of mission:
https://logs.px4.io/plot_app?log=593203b8-e65b-4a5a-9a9a-9cbd65ac5127

after landing, armed again but Auto would not engage
took off manually and still, Auto was not responsive:
https://logs.px4.io/plot_app?log=9fb47e82-36d9-4600-a868-c09b1df59bb0

swapped batteries and Auto still not responsing:
https://logs.px4.io/plot_app?log=0b6bd97b-721f-4acf-aacd-d7147bf9c73a</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>NXPhlite issues.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9973</td>
																		<td>@davids5  Has issues maintaining altitude  in position, altitude and Auto. The accuracy of the GPS is very poor. in POS it maintain the position  but in mission it doesn't.

commit 5b0ad4e1.
https://review.px4.io/plot_app?log=ff6f685c-eb1a-412a-93e3-80354cbf602c
https://review.px4.io/plot_app?log=a5824a2a-e8ff-4f00-b7c4-b1018c694652
https://review.px4.io/plot_app?log=1c2da437-5699-4ddc-bf01-1d5ab0814187
https://review.px4.io/plot_app?log=aa719c97-71c4-4d05-aea6-ef6f8a36ce01
https://review.px4.io/plot_app?log=ff6f685c-eb1a-412a-93e3-80354cbf602c
https://review.px4.io/plot_app?log=b0db2ecc-a6c9-42a1-8a49-f8afea1ffa2e

commit 9e4e19d4.
https://review.px4.io/plot_app?log=910de492-f7b7-4fe4-8983-837c3f130218
https://review.px4.io/plot_app?log=42c37087-c863-4423-9f11-c8bb517da99f</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL: ATTENTION!!! DANGER</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9965</td>
																		<td>PUSHER MOTOR STARTS DURING AIRSPEED CALIBRATION
on the bench.

The plane quad delta wing, the tubes from the pitot were swapped.

We recreated it two times

The second time by any chance we had logging enabled all the time so we have it on log.

https://logs.px4.io/plot_app?log=de51dc5e-e868-426f-90c3-1fcc42855fe1

It happened after we blew in the pitot at the end of the calibration. The calibration went wrong (because of the reversed tubes). Both times the motor started.

After we corrected the tubes never happened again.

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Intel Aero altitude drops</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9939</td>
																		<td>Received new Intel Aero RTF and have issues maintaining altitude in ALT, POS and Auto running current master

Default parameters:
manual flight:
https://logs.px4.io/plot_app?log=bdb2de01-a8af-484c-9399-eb8e486e8e7d
auto take-off and rtl:
https://logs.px4.io/plot_app?log=39b0cf9c-1131-4b01-a8ea-e8faa23944b8

Increased EKF2_ACC_NOISE, EKF2_BARO_NOISE and EKF2_GYR_NOISE to double the default values respectively; minor improvement on the altitude drops but still seeing dips and corrections between most waypoints:
https://logs.px4.io/plot_app?log=bbc94f3a-331d-4554-9321-569a69f8d5ee
https://logs.px4.io/plot_app?log=30c1cae6-8180-4c20-b442-fe7dd305d25f</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF2 Replay not working from SITL logfile</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9927</td>
																		<td>**Describe the bug**
When running replay on a logfile from sitl (```make posix_sitl_default gazebo_standard_vtol```) the generated logfile only contains the topics:

```
ulog_info build/posix_sitl_default_replay/tmp/rootfs/fs/microsd/log/2018-07-16/15_19_56_replayed.ulg
Logging start time: 0:00:00, duration: 0:03:14
No Dropouts
Info Messages:
replay: /home/carl/src/standard_PX4/Firmware/build/posix_sitl_default/tmp/rootfs/fs/microsd/log/2018-07-16/15_15_45.ulg
sys_name: PX4
sys_os_name: Linux
sys_os_ver_release: 67371263
sys_toolchain: GNU GCC
sys_toolchain_ver: 6.4.0 20180424
time_ref_utc: 0
ver_hw: SITL
ver_sw: e2eb84042e5d15b8212b0c0ccb9045c123c39284
ver_sw_branch: master
ver_sw_release: 17301504
Info Multiple Messages: [perf_counter_preflight: 1]
Name (multi id, message size in bytes) number of data points, total bytes
airspeed (0, 24) 17836 428064
ekf2_timestamps (0, 24) 43584 1046016
sensor_combined (0, 44) 43941 1933404
vehicle_attitude (0, 53) 43946 2329138
vehicle_gps_position (0, 95) 696 66120
vehicle_land_detected (0, 16) 162 2592
vehicle_status (0, 39) 165 6435
```

I.e. the topics estimator_status and ekf2_innovations are missing etc. The log file also contains the messages:

```
ulog_messages build/posix_sitl_default_replay/tmp/rootfs/fs/microsd/log/2018-07-16/15_19_56_replayed.ulg
0:00:00 WARNING: [logger] logger: failed to add topic. Too many subscriptions
0:00:00 WARNING: [logger] logger: failed to add topic. Too many subscriptions
```

If a couple of topics are commented out in logger.cpp it seems to work better, i.e. all topics are there:

```
Logging start time: 0:00:00, duration: 0:01:25
No Dropouts
Info Messages:
replay: /home/carl/src/standard_PX4/Firmware/build/posix_sitl_default/tmp/rootfs/fs/microsd/log/2018-07-16/15_34_12.ulg
sys_name: PX4
sys_os_name: Linux
sys_os_ver_release: 67371263
sys_toolchain: GNU GCC
sys_toolchain_ver: 6.4.0 20180424
time_ref_utc: 0
ver_hw: SITL
ver_sw: e2eb84042e5d15b8212b0c0ccb9045c123c39284
ver_sw_branch: master
ver_sw_release: 17301504
Info Multiple Messages: [perf_counter_preflight: 1]

Name (multi id, message size in bytes) number of data points, total bytes
airspeed (0, 24) 7849 188376
ekf2_innovations (0, 164) 6519 1069116
ekf2_timestamps (0, 24) 10646 255504
estimator_status (0, 272) 6518 1772896
sensor_combined (0, 44) 19381 852764
vehicle_air_data (0, 24) 8067 193608
vehicle_attitude (0, 53) 19385 1027405
vehicle_global_position (0, 64) 6265 400960
vehicle_gps_position (0, 95) 373 35435
vehicle_land_detected (0, 16) 60 960
vehicle_local_position (0, 155) 6500 1007500
vehicle_magnetometer (0, 20) 8075 161500
vehicle_status (0, 39) 94 3666
```

However, the output of the estimator that is logged in the replayed file does not match the one in the original file

[Original logile](https://logs.px4.io/plot_app?log=da4a2a16-ec6f-49b3-b09c-8018b791911d) | [Replayed logfile](https://logs.px4.io/plot_app?log=1344016f-79ea-421a-8cb4-cfd8194c4300)
:-------------------------:|:-------------------------:
![image](https://user-images.githubusercontent.com/7795133/42768355-9459dd10-891f-11e8-8884-4025661a775a.png)| ![image](https://user-images.githubusercontent.com/7795133/42768359-96a68dac-891f-11e8-9fa0-7dd3323d7ce7.png)

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Stale mag data not detected</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9901</td>
																		<td>We just had a series of flights with marginally stable position control performance (toilet bowling). Analysis of the logs showed that the mag measurements (external HMC5983, internal mags disabled) are not changing one bit. This was only fixed by power cycling the vehicle, rebooting the FC did not change anything.

There are two problems with this incident:
1) The mag malfunctioned. Has anybody seen something like this before?
2) More importantly: Why was this not detected by the flight controller? Should this data not be marked stale / timed out and arming in position controlled modes/switching to these modes refused?

In addition to the mag measurements being constant, EKF2's heading innovations (configured to heading only fusion) are constant, i.e. no mag measurements are fused. This makes sense considering that the mag measurements are old (`sensor_combined_0.magnetometer_timestamp_relative + sensor_combined_0.timestamp` is constant). But the heading / position estimate is not marked invalid by EKF2.

Our firmware is based on 1.7.4.

Here is a log file: https://logs.px4.io/plot_app?log=8f1505e6-f998-47e4-9693-58c3c0424774

Any help would be appreciated!</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>NaN rate setpoints when switching from acro to manual</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9866</td>
																		<td>The log https://logs.px4.io/plot_app?log=89ab485c-7768-4fca-b7e9-5ed9d09152b3 contains NaN setpoints when switching from acro to manual. Seems to be a race condition when the position controller did not yet publish a valid attitude setpoint but the attitude controller already got the mode switch.

However the position controller does publish an invalid setpoint with constant timestamp before that, as seen in the CSV file:
```
timestamp,roll_body,pitch_body,yaw_body,yaw_sp_move_rate,q_d[0],q_d[1],q_d[2],q_d[3],thrust,landing_gear,q_d_valid,roll_reset_integral,pitch_reset_integral,yaw_reset_integral,fw_control_yaw,disable_mc_yaw_control,apply_flaps
[...]
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
10039547,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0,0,0,0,0,0,0
234508568,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.118343,-1.0,1,0,0,0,0,0,0
234529628,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.118343,-1.0,1,0,0,0,0,0,0
234550563,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.118343,-1.0,1,0,0,0,0,0,0
234571562,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.120316,-1.0,1,0,0,0,0,0,0
234592561,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.123274,-1.0,1,0,0,0,0,0,0
234613560,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.12426,-1.0,1,0,0,0,0,0,0
234634566,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.12426,-1.0,1,0,0,0,0,0,0
234655562,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.126233,-1.0,1,0,0,0,0,0,0
234676562,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.12426,-1.0,1,0,0,0,0,0,0
234697562,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.125247,-1.0,1,0,0,0,0,0,0
234718560,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.12426,-1.0,1,0,0,0,0,0,0
234739571,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.125247,-1.0,1,0,0,0,0,0,0
234760563,0.0,-0.0,1.90531,0.0,0.579523,0.0,0.0,0.814956,0.126233,-1.0,1,0,0,0,0,0,0
234781563,0.0,0.167662,1.90531,0.0,0.577487,-0.0682384,0.0485249,0.812094,0.127219,-1.0,1,0,0,0,0,0,0
234802565,0.0,0.206141,1.90531,0.0,0.576447,-0.0838494,0.059626,0.810631,0.127219,-1.0,1,0,0,0,0,0,0
234823563,0.0,0.241872,1.90531,0.0,0.57529,-0.0983176,0.0699145,0.809004,0.127219,-1.0,1,0,0,0,0,0,0
```

[log001_vehicle_attitude_setpoint_0.zip](https://github.com/PX4/Firmware/files/2175558/log001_vehicle_attitude_setpoint_0.zip)

@MaEtUgR @Stifael can you look into this please?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Descending with MPC_LAND_SPEED instead of MPC_Z_VEL_MAX_DN</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9768</td>
																		<td>**Describe the bug**
When descending during a mission in simulation the Deltaquad does the whole descend with MPC_LAND_SPEED instead of descending with MPC_Z_VEL_MAX_DN until MPC_LAND_ALT1, and than ramping down to MPC_LAND_SPEED. 

**To Reproduce**
Steps to reproduce the behavior:
1. Create "multicopter" mission with delta quad in gazebo (e.g. at 30m altitude)
2. Make sure to set reasonable values for MPC_LAND_SPEED, MPC_Z_VEL_MAX_DN, MPC_LAND_ALT1, MPC_LAND_ALT2
2. Start mission

**Expected behavior**
The vehicle climbs with MPC_Z_VEL_MAX_UP, flies at desired altitude and than descends with MPC_LAND_SPEED all the way to the ground. 

**Log Files**
https://logs.px4.io/plot_app?log=70e15793-db80-4ec7-91d8-d1b6af522e70

**Drone (please complete the following information):**
- Gazebo Deltaquad

**Additional context**
We observed this also in real flights

@lamping7</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF2 wind estimate very wrong</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9726</td>
																		<td>Flown on 6/18 on Master (so almost 1.8 stable)

Actual wind at site was between 12-15 m/s

EKF2 Wind estimate shows ~2-4 m/s.

https://review.px4.io/plot_app?log=e6d82fe3-9b3b-4f4b-b8c6-5af1e930e1a9

Also, if you take look at ground speed vs airspeed we're cruising at about 20 m/s but traveling closer to 35 m/s but wind estimates are nowhere near what we were actually in (we measure wind with an anemometer before testing) and looking at surrounding area wind readings all were consistent with ours. It was blowing your shirt against your body kind of wind, not gentle breeze which is more the 2-5 m/s reported.

Master on 6/18
fmuv3 firmware on Original Pixhawk (2mb flash)
QGC Daily also from 6/18

@dagar</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>A VTOL crash after log stop in the air after 'vtol_att_control low on stack' warning (flight log linked)</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9720</td>
																		<td>Hi~ I hope PX4 developers to help finding the reason of crash.

A delta-quad type VTOL drone crashed on the water while in transition flight trials of a developing drone after logging is stopped after 'vtol_att_control low on stack' warning happened  but telemetry log sustained from the logging stop to the crash.

I am not sure this is a bug or not, but upload logs for analysis.

**Environment:**
PX4 v1.7.3, Pixhawk 2.1, QGC v3.3.1, Ubuntu 14.03, DeltaQuad airframe

**Changed parts of source code:**
Mixer script change for two yaw motors that separately mounted.
Multirotor mixer mix() function change (not to include yaw control in quadrotors)
MAVLink stream SERVO_OUTPUT_RAW_1 and ACTUATOR_CONTROL_TARGET_0 were added.
No change in vtol_attitude_control and other modules.

**Flight procedure:**
In manual (stabilized) mode in multicopter phase of VTOL the drone was hovering.
In the state, the transition switch was turned on and it flew in manual (not stabilized) mode of forward transition phase.
When it reaches to fixed-wing mode, the transition switch was tuned off because its altitude became to decline (the lift force is small because its forward thrust is small).
In the second trial of this transition flight the accident happened.

**Peculiar things:**
In previous several flights, the flight mode of fixed-wing phase was stabilized mode and any accident did not happened. But in the accident the mode was manual mode for the first time though I don't know it is related or not to the cause.

**Log flies:**
- a ulog file ([flight log](https://logs.px4.io/plot_app?log=5ddb8655-0658-4c3b-9282-69bc692587f8))
The below files can be given to people who want more:
- a tlog file (telemetry log) :  the file is corrupted by the abrupt disconnection of communication and cannot be loaded by QGC
- a telemetry text log converted from the tlog file
- a global position text log file extracted from the tlog file</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF2 Indoor Mag Mode not functional</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9716</td>
																		<td>**Describe the bug**
The EKF2 Indoor Mag fusion mode (EKF2_MAG_TYPE = 4) does not function on master and v1.8 release.

**To Reproduce**
Set EKF2_MAG_TYPE=4 and reboot vehicle, or restart ekf2 in SITL (`gazebo_iris_opt_flow`).

**Expected behavior**
The EKF should initialize and produce an attitude estimate. 

In this case, the EKF does not initialise or produce an attitude estimate.

**Log Files and Screenshots**
Log from SITL : https://logs.px4.io/plot_app?log=5c2e7e20-35de-4278-bee8-40ba1b92c242

```
pxh> ekf2 status
INFO  [ekf2] local position OK no
INFO  [ekf2] global position OK no
INFO  [ekf2] time slip: 0 us
```</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Poor land detection</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9696</td>
																		<td>@MaEtUgR @bkueng Could you have a look? This is blocking v1.8

A new flight report just got uploaded:
https://review.px4.io/plot_app?log=22cb36a7-2ac1-4cd8-b42c-cea152c7a141

Description: beta18_mc03_pxr(05)
Feedback: take-off in position mode; steady hold; nice tracking; good nav; poor land detection
Rating: Unsatisfactory
Wind Speed: Breeze
Uploader: santiago@3dr.com

Vehicle type: Quadrotor
Airframe: DJI Flame Wheel F450, Quadrotor x
Hardware: PX4FMU_V4
Vehicle UUID: 003200333435510837363434
Software git hash: aa625d9af880e3be7bd2ddd7ed49d10c74c6ada4</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FW Mission Start - Wheel increases to max deflection (max pwm value)</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9540</td>
																		<td>When starting a mission the nose wheel servo instantly increases to ~2000 pwm and there is no time to recover (turns much too much) - need to actually decrease max angles at which the servo can turn but this is a new issue. Here are three logs with this occurring several times during each log. I was able to fly the missions due to some manual offsetting of the wheel but if left centered it would not work every time.

Using an fmu_v2 during these tests. Logging is on from boot so there is a lot of nothing prior.

https://review.px4.io/plot_app?log=02711563-1bd4-40ee-8107-16fa14017b9e

https://review.px4.io/plot_app?log=0285460d-d71f-422b-9d55-b42bccc66cbb

https://review.px4.io/plot_app?log=732a5f97-563d-4141-ae9b-c4c8691277af</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>jMAVSim SITL ekf2 starting/stopping navigation continuously</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9527</td>
																		<td>Recently in SITL, I've been seeing ekf2 starting and stopping navigation continuously every few seconds.

This seems like a regression somewhere. I see this on macOS with jMAVSim on Java 8.

Here is log where the drone just sits there.
https://logs.px4.io/plot_app?log=8a5d658f-46d1-47a6-845d-44dc40247da6

Edit: this seems to happen back in April (8c9b941e604e6ed971059e5b5fce12b95e9020fb)

```
Init MAVLink
INFO  [simulator] Got initial simulation data, running sim..
INFO  [pwm_out_sim] MODE_16PWM
ERROR [sensors] no ADC found: /dev/adc0 (9)
INFO  [mavlink] mode: Normal, data rate: 4000000 B/s on udp port 14556 remote port 14550
INFO  [mavlink] mode: Onboard, data rate: 4000000 B/s on udp port 14557 remote port 14540
INFO  [mavlink] MAVLink only on localhost (set param MAV_BROADCAST = 1 to enable network)
INFO  [logger] logger started (mode=all)
pxh> INFO  [logger] Start file log
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-05-25/15_07_36.ulg
INFO  [Unknown] EKF aligned, (pressure height, IMU buf: 22, OBS buf: 14)

pxh>
pxh>
pxh>
pxh> ekf2 status
INFO  [ekf2] local position OK no
INFO  [ekf2] global position OK no
INFO  [ekf2] time slip: 2 us
pxh> ekf2 status
INFO  [ekf2] local position OK no
INFO  [ekf2] global position OK no
INFO  [ekf2] time slip: 158 us
pxh> INFO  [Unknown] EKF GPS checks passed (WGS-84 origin set)
INFO  [Unknown] EKF commencing GPS fusion

pxh>
pxh> WARN  [Unknown] EKF GPS data stopped
WARN  [Unknown] EKF stopping navigation
INFO  [Unknown] EKF commencing GPS fusion

pxh>
pxh>
pxh> ekf2 statusWARN  [Unknown] EKF GPS data stopped
WARN  [Unknown] EKF stopping navigation
INFO  [Unknown] EKF commencing GPS fusion

INFO  [ekf2] local position OK yes
INFO  [ekf2] global position OK yes
INFO  [ekf2] time slip: 29 us
pxh>
pxh>
pxh> ekf2 status
INFO  [ekf2] local position OK yes
INFO  [ekf2] global position OK yes
INFO  [ekf2] time slip: 59 us
pxh> gps status
INFO  [gps] not running
Command 'gps' failed, returned -1
pxh> uorb top

update: 1s, num topics: 79
TOPIC NAME                        INST #SUB #MSG #LOST #QSIZE
actuator_controls_0                  0    6  242   653 1
battery_status                       0    6   89   301 1
ekf2_innovations                     0    1  242   237 1
ekf2_timestamps                      0    1  242    22 1
estimator_status                     0    4  242  1114 1
geofence_result                      0    1    4     0 1
rate_ctrl_status                     0    1  242   215 1
sensor_accel                         0    1  242     0 1
sensor_accel                         1    1  249    55 1
sensor_baro                          0    1  100     0 1
sensor_bias                          0    4  242   405 1
sensor_combined                      0    4  242   231 1
sensor_gyro                          0    2  242     0 1
sensor_mag                           0    1  100     0 1
sensor_preflight                     0    1  242   235 1
vehicle_air_data                     0    5  100    49 1
vehicle_attitude                     0    6  242   698 1
vehicle_attitude_groundtruth         0    1  167    73 1
vehicle_attitude_setpoint            0    4  242   650 1
vehicle_global_position              0    5  242   994 1
vehicle_global_position_groundtruth  0    1  167   155 1
vehicle_gps_position                 0    5    9     8 1
vehicle_land_detected                0    7    1     0 1
vehicle_local_position               0    7  242  1107 1
vehicle_local_position_groundtruth   0    1  167   155 1
vehicle_local_position_setpoint      0    4  242   844 1
vehicle_magnetometer                 0    4  100    49 1
vehicle_rates_setpoint               0    4  242   627 1
```</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF errors with Fixed Wing</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9474</td>
																		<td>This was tested on a slightly modified version of PX4 Master

After letting the vehicle sit for an extended period of time we are experiencing two errors "PREFLIGHT FAIL: EKF INTERNAL CHECKS" and "PREFLIGHT FAIL: HIGH IMU ACCEL BIAS". We recalibrated the accelerometers but still experienced these issues. If the plane is armed moderately quickly after booting up and there are no errors thrown, and the aircraft flies normally.

Here are some log examples of the preflight fails on ground:

https://review.px4.io/plot_app?log=a0fb96a2-de2f-4e2d-a4f6-0f930ea53248

https://review.px4.io/plot_app?log=42eda972-2802-4d1e-b236-bed93244427c

We also had a case where the aircraft threw a "PREFLIGHT FAIL: HIGH IMU ACCEL BIAS" error but then still allowed us to arm. On takeoff the aircraft flew erratically and had to be taken over with manual control. Log is posted below.

https://review.px4.io/plot_app?log=e29821e7-9539-46ec-b563-79be1b655cf4</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF2 with optical flow drifts without flow data</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9414</td>
																		<td>So I have been bench-testing a vehicle with a PX4Flow sensor + EKF2. `EKF2_AID_MASK` is set to fuse Flow and GPS. `EKF2_OF_QMIN` is set to 50.

When the vehicle is on the ground (PX4Flow lens blocked), the position estimate from EKF2 keeps drifting around, even the though the flow module returns 0 `quality` and 0 `integrated_x` and `integrated_y`. Here is a log from boot : https://logs.px4.io/plot_app?log=6628dc88-c567-4796-95a6-f0815ab1a535

Would be great if you could have a look @priseborough @ChristophTobler!</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>2 hard faults (on ground + in air) with PX4FW v1.7.4</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9348</td>
																		<td>## Bug Report
We (ASL/ETHZ) have recently had two hard faults that caused Pixhawk to reboot. One of them unfortunately happened in air with a 3.2m wingspan fixed-wing, one happened during on-ground testing.

## Setup
 - Hardware: mRo Pixhawk (px4fmu-v3 / 2MB flash)
 - Firmware: Basically PX4FW v1.7.4, i.e. master-branch from 5 days ago (https://github.com/PX4/Firmware/commit/71170dce0a87ce06e00d721a713dfc3dc92dfc11) but with some slight modifications mainly to adapt the mixers to our platform and one custom sensor driver. The estimator is EKF2, the flight controller is the stock controller.

## Hard fault 1: In-air
We had done 3 short MANUAL flights before that, and in this flight first flew manual for about three minutes and then switched to stabilized. The hard fault ocured 1 minute after switching to stabilized mode. The pilot continued to fly in PX4IO's (important!) manual override mode, and, as he barely noticed the issues, actually went back into stabilized mode for some time before then landing the plane following our instructions. The ulogger-log of part 1 (see below) stops in air. We could not find any fancy stuff in the logs before the log stops. Pixhawk rebooted in-air, and continued logging as usual (part2, see below).

- Log files (with attached hard fault log) from take-off to in-air hardfault and pixhawk reboot: https://review.px4.io/plot_app?log=3b702655-6052-46e6-85e2-fd012d27c25f
- Log file after the crash (i.e. after the pixhawk reboot until landing): https://review.px4.io/plot_app?log=409fcb62-50ca-42d1-82c7-f1bcaccfe9fd
- Telemetry logs:[2018-04-20 15-13-09.log](https://github.com/PX4/Firmware/files/1934640/2018-04-20.15-13-09.log) (rename to .tlog!). The reboot happens after ca 1/3 of the log file length, you can see that it happened because the relative altitude is suddently zero or even negative.

## Hard fault 2: On-ground
This happened during in-lab testing. We performed extensive pre-flight checks, including rebooting FMU (by pressing the reset button) and checking that IO's manual override still works. It did, but (and i assume this is normal because there is already a mixer present) loading the mixer after that provoked reboot fails. We let the plane then just sit there for a couple of minutes, and suddenly Pixhawk rebooted. This was a hard fault, too. We unfortunately assumed this was BECAUSE we had provoked the in-air restart via pushing the FMU reset button (and after testing for another 8 hours in-lab without any hard fault assumed everything was OK). I don't have the ulog-files yet, but i have:

- The hardfault log from the SD card (it looks very similar to the one we saw in flight): 
[fault_2000_01_01_18_53_35.log](https://github.com/PX4/Firmware/files/1934634/fault_2000_01_01_18_53_35.log)
- The console output. Note again that this log starts after we provoked an FMU reset via pushing its reset button, that's why it is an in-air restart. 
[consoleLog.txt](https://github.com/PX4/Firmware/files/1934645/consoleLog.txt)

I might be able to provide the firmware .elf file to allow debugging the hard fault as described in https://dev.px4.io/en/debug/gdb_debugging.html#debugging-hard-faults-in-nuttx if required.

I guess it makes sense to add this to https://github.com/PX4/Firmware/issues/9271 @RomanBapst @LorenzMeier ?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>PX4 allows arming while the control is not fully initialized. (TARGET_LOCAL_NED not yet published) (workaround proposed)</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9200</td>
																		<td>**Bug Report**
We were experiencing from time to time something that looked like a "random rotation towards North" at the takeoff of our copters. Today, we successfully reproduced it in a Gazebo simulation. It seems that we are capable of arming and taking off in offboard mode without any position (GPS or PX4Flow). Therefore, our commands (vx, vy, vz yaw_rate)  are ignored except vz.

The takeoff procedure is the following:
- OFFBOARD
- ARM
- (Vx=0, Vy=0, Vz=3.0, yaw_rate=0) until a certain altitude.

When the simulation is started from a certain time, it works perfectly (well straight takeoff) but when the simulation is just started, we can still go in offboard, arm and takeoff but additionally to the expected drift, the copter rotates to north (the gazebo simulation starts pointing east)

- **Log**: https://logs.px4.io/plot_app?log=5477f120-408d-4ce5-82e1-3b3d695a3a03
- **Expected behaviour**:
  * The copter does not arm until GPS fix or PX4Flow fix
  * If the copter arms, it should drift as the position is not fixed
- **Behaviour**:
  * The copter arms
  * The copter drifts
  * **The copter rotates around the yaw angle** 

- **Steps to reproduce the problem**:
  * Start Mavros over UDP link
    * roslaunch mavros px4.launch fcu_url:="udp://:14540@127.0.0.1:14557"`
  * Prepare your OFFBOARD control method
  * Start the simulation 
    * `make -j8 posix_sitl_default gazebo`
  * Run your OFFBOARD control method

- Results:
  * The copter arms, but rotates from East to North and drifts until we see in the console of the simulator: "EKF GPS checks passed (WGS-84 origin set)" and "EKF commencing GPS fusion". 
  * The rest of the mission works fine.

- Simulation console information:

```
INFO  [mavlink] partner IP: 127.0.0.1
WARN  [mavlink] [timesync] Hard setting offset.
INFO  [lib__ecl] EKF aligned, (pressure height, IMU buf: 15, OBS buf: 14)
INFO  [tone_alarm] positive
INFO  [tone_alarm] positive
INFO  [tone_alarm] arming
INFO  [commander] Takeoff detected
INFO  [tone_alarm] positive
INFO  [lib__ecl] EKF GPS checks passed (WGS-84 origin set)
INFO  [lib__ecl] EKF commencing GPS fusion
```

* **Hardware in simulation**: IRIS+
* **Firmware**: 
  * PX4 1.6.5
  * PX4 1.7.3

* **CURRENT WORKAROUND:**
  * Subscribe to `~setpoint_raw/local` topic (`handle_position_target_local_ned` Mavlink Handler) and do not approve takeoff before the topic is published. 
  * Once published, an additional (optional?) step is to verify that the position (x,y,z,yaw) in the `TARGET_LOCAL` message is **very close to** the current `LOCAL_POSITION`.
  * Takeoff safely</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MultiRotor: Unstable manual flight</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9150</td>
																		<td>Flash current master d2712dc and took off in stabilized; very jumpy/jittery; slow oscillations in heading
Running Pixracer (V4)
https://logs.px4.io/plot_app?log=6ca0b878-b8a4-4700-8040-e09083db4c04

re-calibrated and tried again; same result:
https://logs.px4.io/plot_app?log=64eac19d-2e42-4450-85e3-39dd31930393

compared to stable flight with 1.7.4 beta:
https://logs.px4.io/plot_app?log=12136a55-46ff-449a-bff3-38c58b832542

@dagar this might be related to recent changes to motor saturation handling?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Multi Copter land after loss of position failsafe doesn't disarm</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9137</td>
																		<td>SITL testing using master at commit 7830d35 and with the magnetometer data rotated 90 degrees in yaw inside the ekf2_main.cpp file has show that although the post takeoff failsafe transition into land mode occurs as expected, the vehicle does not disarm automatically after landing. If landing is commanded from the console it does disarm.

Detected during testing of https://github.com/PX4/Firmware/pull/8771

Log file here: https://logs.px4.io/plot_app?log=92090f9f-1e16-45ea-879e-8ef535d949ab</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>PX4 1.7.3: Total crash in loiter.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9108</td>
																		<td>Hello,

We've had a total crash today with 1.7.3 when we engaged loiter in FW flight. We could not find the reason behind this crash in the Log...

While we were flying 1.7.3 for a week we've had no unexpected problems until today.

VTOL deltaquad
PX4 1.7.3
QGC 3.3 Windows
AUAV X2.1 HW
Without airspeed sensor

When the pilot activated Hold the plane just nose dived without any control whatsoever.
During the nose dive the pilot switched to MC flight but did not switch back the loiter switch, so it did not work as expected to safe the VTOL. (We did not test this but what is happening when we switch the transition switch while in loiter?)
There are no HW problems with the machine.

LOG: https://logs.px4.io/plot_app?log=89bd8fa6-6506-4e9a-87d5-81ee2cc9243a

The log seems to be cut at the end... but the video shows it all.

Video: https://www.youtube.com/watch?v=7iCPhtmdQq8&feature=youtu.be

Any ideas?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Not able to give full throttle in fw acro</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9043</td>
																		<td>Throttle was somehow limited in acro mode when flying with the convergence tiltrotor.
In stabilized I was able to go full throttle.


https://logs.px4.io/plot_app?log=1bb49365-b33c-425a-b016-9ceeabc2ac7e</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL takeoff does transition into wrong direction</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9037</td>
																		<td>When using a VTOL takeoff mission item to combine takeoff and transition the vehicle does not consider turning to a heading which is equal to the bearing to the next waypoint. Instead it will transition into the current heading which I think is not expected by the user.

This issue does not occur when using a separate takeoff and transition command;.

We reproduced this two times using the Convergence tiltrotor (SYS_ID = 13012)

Here's the log
https://logs.px4.io/plot_app?log=be4b8af6-31b8-4c01-997a-d6f848ab7839</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>tailsitter mc mode , Uncommanded alt_ref and thrust decreased,</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9032</td>
																		<td>position mode , during flight, thrust decreased ,why?
https://logs.px4.io/plot_app?log=c90e6575-ce6b-4610-b182-86f6fb00b2dd</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Throttle spike on arming</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9022</td>
																		<td>In rare cases after arming throttle level is higher for a second, then goes back to normal values.
I noticed it first time when I used 1.7 firmware, however there is similar topic from previous year http://discuss.px4.io/t/slight-higher-idle-throttle-when-first-arm/2471 .
In related issue was mentioned that MPC_THR_MIN could affect but after I lowered the parameter nothing has changed.
Here's the log https://logs.px4.io/plot_app?log=7c0b159c-bf28-48dc-8677-b3ccd1c2d25b1 .

I've also noticed that it happens after first arm.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>No EKF2 init without Vision Position, arming allowing without attitude estimate</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/9020</td>
																		<td>I am running v1.7.3, estimator is EKF2, EK2_AID_MASK is 9 (GPS and vision position).

I've attempted to fly the copter indoors in stabilized mode (there is no GPS fix) without providing VISION_POSITION_ESTIMATE messages. Flight mode changed successfully, the copter was armed and when I've applied throttle, it took off, but was completely uncontrollable with regards to roll and pitch.

Strangely, if you set EKF2_AID_MASK to 1 (GPS only) and have no GPS fix, you can still take off in modes, that don't need GPS fix (altitude control, stabilized) and everything works as intended.

I've expected the copter either to arm and fly normally or at least refuse to arm.

Here is the flight log: https://review.px4.io/plot_app?log=0d1bf158-5559-4bb6-ab31-c23580292b4a</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>tailsitter  fly forward and fall suddenly</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8997</td>
																		<td>In position mode,tailsiter fly forward , but fall sudenly. 
RC alt chanel(rc_channels_0.channels[3]) no action，Why vehicle_local_position_setpoint decrised.

https://logs.px4.io/plot_app?log=e395b143-1e01-4195-b385-77ca6ab75ef7
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Landing Detector Improvement needed to avoid uncommanded Throttle Cut During Flight</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8984</td>
																		<td>**Bug Report**

Filing a bug report from the original thread here: http://discuss.px4.io/t/uncommanded-throttle-cut-during-flight/5852

Several people have experienced an unexpected / commanded throttle dip with multi rotor vehicles using PX4 1.7.3.

**Here are some log files that were recoverable:**

Equipment and software:
PX4 Version: 1.7.3 Stable
Pixhawk Cube 2.1
Transmitter: Taranis X7 with Orange RX 2.4 GhZ DSMX transmitter module 
Receiver: Spektrum Racer Receiver (SPM4648)

#1. Occurs at about 04:41 (there appear to be two dips in the throttle log)
https://logs.px4.io/plot_app?log=e149c039-ffee-4ca6-a479-1e77856df206

![image](https://user-images.githubusercontent.com/2559382/36805299-e41fdb08-1c71-11e8-9d51-70285bc30314.png)

#2. Occurs at about 10:01
https://logs.px4.io/plot_app?log=30e3d454-18d3-4aac-9d21-6be86641f9b0

**And here is a log file that resulted in a crash:**

Equipment and software: 3DR IRIS 
Indoor: PX4Flow + Teraranger one
PX4 Version: 1.7.3 Stable
Pixhawk 1
Transmitter: 3DR transmitter 
Receiver: 3DR original receiver

The drop happens at 1:11; crash at 1:12. All RC commands seemed to be normal. 
https://logs.px4.io/plot_app?log=57df1304-7bc0-4366-8cbf-9b4233d023ba

![image](https://user-images.githubusercontent.com/2559382/36807904-f63eaf92-1c78-11e8-8eab-bf9b0c14c149.png)</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FW unsuccessful flight 02/26/18</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8980</td>
																		<td>The pilot flew an FW with Pixhawk Mini and master firmware (38e5a06) and faced the next problems:

1: It took a long time to connect to QGC by the telemetry radio, and when it was connected it didn't give data.
2: When it was flying stabilized mode the plane oscillated a lot.
3: In mission mode, the plane was only gaining altitude or advanced to the first waypoint and moved very slow.

The plane only flew well in manual mode.

Logs of the flights:
https://logs.px4.io/plot_app?log=316d5dcf-4773-4298-8e6e-68d85a8d2aeb
https://logs.px4.io/plot_app?log=2e6acbbd-967f-44ed-9ac2-26885cc45720
https://logs.px4.io/plot_app?log=73cdcdbe-128e-41cf-84df-e61ab3bde83d
https://logs.px4.io/plot_app?log=bfc0ef2e-0fdf-417d-b2e3-7f65441837d8
https://logs.px4.io/plot_app?log=29a06e2d-b38b-4a4a-b8f5-417b8f9c50ac
https://logs.px4.io/plot_app?log=6ab92bec-5d20-45b4-a387-fd86e5117a3c

Previous successful flights:
https://logs.px4.io/plot_app?log=e91adbbe-1da4-49a9-a9e3-688921b03f50
https://logs.px4.io/plot_app?log=3005515b-a35e-4cae-8dd2-2fa3176e0c8d
https://logs.px4.io/plot_app?log=ff408fb9-e829-4db4-ab53-c0cbfb9764c6

@dagar @RomanBapst</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Unstable sensors cause Critical problem</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8927</td>
																		<td>Bug Report

I used Pixhawk hardware's (listed below), but in Most of the time see "PREFLIGHT FAIL" message for MAG,GYRO,ACCEL and in one case cause crashed.

[log uploaded (Pixhawk LITE 2.4.6)](https://logs.px4.io/plot_app?log=b0be3ceb-c180-40b9-9cc4-d31ef1c1920a)

```
[commander] PREFLIGHT FAIL: ACCEL #1 UNCALIBRATED
[commander] PREFLIGHT FAIL: GYRO #1 UNCALIBRATED
[commander] PREFLIGHT FAIL: MAG SENSORS INCONSISTENT
[commander] PREFLIGHT FAIL: MAG #1 UNCALIBRATED
```


 - All boards calibrated with USB cable, in some case with WiFi module

The hardware's list (all with PX4 Firmware v1.7.3 + gps module m8n):

- Pixhawk 2.4.6 (maybe 3DR original version)
- Pixhawk 2.4.6 (Copy version)
- Pixhawk LITE 2.4.6</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL Flight Issue</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8864</td>
																		<td>@RomanBapst Could you please have a look at this log file?
https://review.px4.io/plot_app?log=6fa2399a-ccb4-4a2d-8303-091dec28dda0

@PX4/testflights You can tag Roman for future issues directly.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL Crash 02/01/18</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8807</td>
																		<td>We flew a VTOL (Delta - Quad) with Pixhawk 1 (no silicon errata), executed auto (mission) the VTOL climbed, made the transition and reached the first waypoint, then it started to fly in a straight line, tried to recovered and activated kill switch but it continued flying and eventually crashed.

Firmware loaded was master (102c0ea)

Here is the log:
https://review.px4.io/plot_app?log=7b00d0db-adf7-4a22-a9ba-8f8d55bb0419

Thank you!</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF2 Ekf::initialiseFilter() problem (disable mag, enable HGT_MODE Vision) </td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8761</td>
																		<td>Hello.

Ekf::initialiseFilter() has some limitations:

// check to see if we have enough measurements and return false if not
bool hgt_count_fail = _hgt_counter <= 2 * _obs_buffer_length;
Here it doesn't take into account that user may choose HGT_MODE VISION but aircraft is sitting on the ground with camera giving vision only in air. So if there is no vision while we are on the ground then filter init fails.

bool mag_count_fail = _mag_counter <= 2 * _obs_buffer_length;
Here it doesn't take into account that mag may be disabled by user (CAL_MAG0_EN or CAL_MAG1_EN ). So if user disable mag manually then filter init fails.

bool ev_count_fail = ((_params.fusion_mode & MASK_USE_EVPOS) || (_params.fusion_mode & MASK_USE_EVYAW)) && (_ev_counter <= 2 * _obs_buffer_length);
Here it doesn't take into account that aircraft is sitting on the ground with camera giving vision only in air. So if there is no vision while we are on the ground then filter init fails.

Overall, if user choose AID_MASK 24 (vision position and vision yaw only) and do no provide vision data from the start to correctly initialise filter then it fails. But providing vision data when aircraft is sitting on the ground may not be possible in many cases.

if (hgt_count_fail || mag_count_fail || ev_count_fail) {
    return false;
}
 
Flight Log: https://review.px4.io/plot_app?log=7dacafb7-cd48-4296-a4c7-03c62a174c41

Expected behaviour:
1. If user disables mag manually then mag_count_fail must account it correctly depending on CAL_MAG0_EN or CAL_MAG1_EN params.
2. If user choose vision only mode or choose HGT_MODE vision and do not provide vision data while ekf2 is inited then filter must able to init itself without this data.

For the short-term hack it is possible just to setup all three variables to false (mag_count_fail, hgt_count_fail, ev_count_fail), but this solution is quite ugly.


																		</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Mocap follow path unstable</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8747</td>
																		<td>Hi 

I tried us PX4 follow a certain trajectory, with Optitrack. It is configured as below,

PX4 Firmware:  px4fmu-v2_default
Estimator: LPE
Onboard controller: Raspberry Pi
Software: Ubuntu Mate + ROS Kinetic 
Tele: Xbee 900MHz
Drone diagonal size: 300mm
Selected Airframe:DJI Flame Wheel F330 Quadrotor x (4010)

I set a trajectory to let drone to follow. A example log is [here](https://logs.px4.io/plot_app?log=a26cf12c-8248-4d76-82bf-0c6938e70b63). 
The drone cannot follow path stable. There is big drift in height, as well as XY direction. 

how to make our drone follow more stable? 
Should I modify airframe torque, moments and weight in PX4 source code? if yes, how?
 </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[v1.7.x] Initial parameter loading via SiK radios in QGroundcontrol stuck </td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8746</td>
																		<td>I've found a strange issue when initial parameter loading _sometimes_ stuck when using SiK radio.
If I use another channel (for example UART for companion computer) it loads successful. When this happens it persists until controller reboot. Qgroundcontrol reboot doesn't help. I've don't seen this on PX4 v1.6.

Sik radio: tried both mavlink v1 and v2 (from https://github.com/LorenzMeier/SiK).

```
nsh> mavlink status

instance #0:
GCS heartbeat: 355442 us ago
mavlink chan: #0
type: 3DR RADIO
rssi: 208
remote rssi: 200
txbuf: 99
noise: 64
remote noise: 54
rx errors: 0
fixed: 0
flow control: OFF
rates:
tx: 0.713 kB/s
txerr: 0.000 kB/s
rx: 0.051 kB/s
rate mult: 0.411
accepting commands: YES, FTP enabled: NO
MAVLink version: 1
transport protocol: serial (/dev/ttyS1 @57600)

instance #1:
mavlink chan: #1
no telem status.
flow control: OFF
rates:
tx: 7.217 kB/s
txerr: 0.000 kB/s
rx: 0.000 kB/s
rate mult: 0.511
accepting commands: YES, FTP enabled: YES
MAVLink version: 1
transport protocol: serial (/dev/ttyS2 @1500000)
```

https://logs.px4.io/plot_app?log=fc30cd9d-dbd4-45bb-9b78-aed21795e62f

screencast with qgroundcontrol:
https://drive.google.com/open?id=15QIV_hUYvJ9b_k1FzkWRM6zyYOaoDb4S

qgroundcontrol verbose logs:
[qgc.log.zip](https://github.com/PX4/Firmware/files/1653552/qgc.log.zip)

another screencast (with log capture process):
https://drive.google.com/open?id=19XxdTa-akUOsAeQBiqocP5shjNRPeGZd</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL: ATTENTION!!! DANGER</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8730</td>
																		<td>PUSHER MOTOR STARTS DURING AIRSPEED CALIBRATION
on the bench.

The plane quad delta wing, the tubes from the pitot were swapped.

We recreated it two times

The second time by any chance we had logging enabled all the time so we have it on log.

https://logs.px4.io/plot_app?log=de51dc5e-e868-426f-90c3-1fcc42855fe1

It happened after we blew in the pitot at the end of the calibration. The calibration went wrong (because of the reversed tubes). Both times the motor started.

After we corrected the tubes never happened again.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FMU restart after landing and auto re-arming</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8722</td>
																		<td>Bug Report
log1, real flight:
https://logs.px4.io/plot_app?log=c365baf7-9b50-4eed-a6cc-14ad2c211db7
log2, auto-arming after restart:
https://logs.px4.io/plot_app?log=eab3b52a-4522-4c78-8da4-5c150cb48f7a

I made a flight today, at the beginning,  all seems good. After the plane is landed on the ground(already landed, touched ground!), the the FMU restarted. I try to describe the process in detail:
1. land, plane touched ground(for sure);
2. motor stopped;
3. heard from QGC, connection lost
(no more than 1 second later)
4. heard from plane "bi bi bi biiiiiiii~", I suppose it's servo check passed;
5. motor spin;
6. heard from QGC "mission";
7. KILL switch on by me.
 
I repeat the flight for 5 times afterwards, the same situation occurs in 4 times.

In the log, I found that some topics are dead during flight, I made offsets to separate them:
![image](https://user-images.githubusercontent.com/18409502/35088876-1f6ebdae-fc70-11e7-836b-93f71dda956b.png)

if it's some hardware bug, I will replace another board.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Intel Aero: uncontrollable attitude</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8718</td>
																		<td>Running current master 850678b and had a flip upon take-off
looking at the log, pitch and roll do not look to be registering:
https://logs.px4.io/plot_app?log=71f9eb76-8ccc-4444-9f6f-5d4b7ab676d1

reverted to yesterday's master 0e65753 and stabilize is fully responsive:
https://logs.px4.io/plot_app?log=072aada3-d5a4-4f28-bb5d-9cea084674b1
Something might have been damaged in the flight controller because once altitude mode was engaged, the copter shot up in altitude and hit the roof.

last successful flight was on 0e65753
https://review.px4.io/plot_app?log=a3026aee-25ab-431a-b076-941084c0cc28</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MS5525 Sensor does not compensate properly.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8715</td>
																		<td>@dagar 

Hi Daniel, 

I have some flights with MS5525 enabled and the graph does not look good at all. We are currently flying without the airspeed enabled, but the sensor is connected and the readings are there.

The sensor is calibrated once on the field and we left it like this. S don't be suprised that the sensr is not zeroed.

You can clearly see the problem arround 10 deg celsius. I remember 10 degrees and 30 degrees were limit values for the compensation mechanism. So they dont work properly.

https://logs.px4.io/plot_app?log=09a5175f-634a-49f6-a18b-49d22bbab4ca

https://logs.px4.io/plot_app?log=cf8767bf-3933-417a-8fca-e807db8223dd

I have more logs from the past 6 days so if needed I can upload more.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL: Reject position control / Hold / Mission after succeed GPS lock.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8696</td>
																		<td>I've found a strange issue with v1.7.3: PX4 reject to switch to POSCTL, HOLD  or Mission.
GPS is running and got 3D lock. When I try to start mission from QGroundControl is shows message: "vehicle is not ready". I've tried to recalibrate all sensors, but it didn't help. All sensors status are good. 

HW is mRo pixhawk with fmuv3 (2MB) firmware.
Frame is: VTOL quad delta

https://logs.px4.io/plot_app?log=60f77638-9a48-4aac-95a8-66cf25eb19ae
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>LPE local position drifts from GPS position in position hold mode</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8692</td>
																		<td>We are trying to develop autonomous system using GPS and Vision fusion and after few weeks working only with vision we have realized that there's a problem with GPS position. Local position is not following absolute position from gps. Logs are here:

[logs](https://logs.px4.io/plot_app?log=87d618e2-fc5a-4ef3-849b-8fed68e0183a)

I think that all parameters are correct and it should work. `lpe_fusion` parameters is set to `173` which is `10101101_2`. According to [source code](https://github.com/PX4/Firmware/blob/master/src/modules/local_position_estimator/params.c) gps fusion is on.

Could you tell me if that's a bug or something is wrong with our config?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MC: Almost crash, about 1 sec strange PosCTL Setpoint behaviour</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8674</td>
																		<td>**Bug Report**

Since changing ESC for some more aggressive Variant (BLHeli Damped Light replaced "conventional" ESC), I have a Problem when Braking in PosCTL Mode I get a strong Oscilation (probably by switching to Hold/Loiter when Stick is completely centered). I tried to figure MPC Settings in order to sort this out. I have still some strong Oscillation even when slowly moving the Stick back to center. 

Tried in about 12m Alt to check some Roll Movements. Just after centering Roll Stick from a Left Bank, the Copter started to get uncontrollable and spiraled down about halfway when it started to fight the motion and managed to just stabilize about 1-2m off the Ground. 

I would like some Advice on this as to:
- How should I tune MPC Params in order to avoid the Oscillation when braking in PosCTL?
- Why were the Setpoints of Roll/Pitch kind of "sleeping from 3:57 to 3:58.5? There it looked like the Copter got out of control and started to stabilize only after 3:58.5. Also Check Main PWM for Ch0 & 1 it looks like they almost locked on min/max just to swap at about 3:58.5

Any hints are appreciated as I really start to loose trust in my Copter. 

Log is here: https://logs.px4.io/plot_app?log=391170a2-63e6-4f20-9e5b-14d9f33a67ae  </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL: Back transition Ramp Up problem.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8672</td>
																		<td>Hi guys,

I think we found a bug in the Position / Mission modes for vtol.
Trying to fix the #8655 we made the VT_B_TRANS_DUR from 3 sec to 5 sec. And with the VT_B_TRANS_RAMP set to 3 sec. the ramp up of the quad motors to the "commanded thrust" happens in the middle of the transition and the throttle stays at that level up to the end of the transition, then it pasees the throttle to the MC. 

In our case In Position mode the hover throttle is at 0.6 for the MC. So it is logical that the ramp up of the quad in the back transition go from 0 to hover throttle in order to hold the MC at current altitude (the idea behind Position mode) and continue like this up to the end of transition then pass the throttle to the MC to continue in Position mode until it stops.

The problem is that for the back transition ramp up commanded throttle PX4 uses VT_TRANS_THR which is the throttle for the front transition pusher motor. 

You can see it clearly in:

Mission
![mission back tr thrust comanded](https://user-images.githubusercontent.com/12617619/34905059-dbb58ea4-f859-11e7-8af5-8b617b05eb57.png)

LOG: https://logs.px4.io/plot_app?log=e6381c08-4b42-41f2-a01b-bd9f7f0bbb58

Position
![position back tr thrust comanded](https://user-images.githubusercontent.com/12617619/34905110-f9bab6ee-f85a-11e7-93a4-b2d198cb38dc.png)

LOG: https://logs.px4.io/plot_app?log=66fa60a2-e7b4-487e-b916-3c45f024daf3

We could not see this up to now because we had a 3 sec back transition with 3 sec ramp up and with pretty low VT_TRANS_THR = 0.7 .
Now because we fight the fron transition ramp up problem #8664 we made the VT_TRANS_THR = 0.9 and found out that during the back transition in Mission and Position modes the quad trhottle during the transition is so high that the VTOL just gains some 10-15 meters og height during the transition. It holds horizontal level but climbs drastically during the transition and then drops suddenly to hover throttle once in MC.

In Mission and Position modes neither the front transition ramp up neither the back transition ramp up are such to allow a smooth transition. at given altitude.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL: Back transition after the end Nasty Pitch up.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8655</td>
																		<td>Hi guys,

We have a strange problem with the back transition with our delta-quad.

The problem is only in Position mode. No such problem when in Altitude or Stabalized modes.

After the back transition is finished the MC sharply makes a putch up command.

We have MPC_DEC_HOR_MAX and MPC_ACC_HOR_MAX set to 2 but still this kick back.

![back transition pitch up](https://user-images.githubusercontent.com/12617619/34802898-dab458ec-f678-11e7-8a15-421c1d4597c1.png)

Here is the log:
https://logs.px4.io/plot_app?log=a11fdda4-1d23-48c2-8596-f5c5a16e23ba

Any Ideas?
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Possible to Arm wo GPS Lock</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8632</td>
																		<td>**Bug Report**

I could Arm in the Basement with an attached GPS (which did not get a valid Lock) but all Parameters set to - what I assumed - Values preventing Arming when GPS Missing or no valid Lock is available. 

CBRK_GPS_FAIL = 0
COM_ARM_WO_GPS = Disabled
EKF2_GPS_CHECK = 21
EKF2_REQ_EPH = 5.0m
EKF2_REQ_EPV = 8.0m
EKF2_REQ_NSATS = 6
EKF2_REQ_GDOP = 2.5

There was an Error Indication though : `Preflight fail: EKF not using GPS`

Check Log: https://logs.px4.io/plot_app?log=2ad190a6-08df-40bd-96d8-a423fc393970 

Addition: I armed in Stabilized (Manual?? -> See #8613) Flightmode so GPS would not really be necessary. But I usually start in Stab and switch to PositionCtl later on. So one would like to be sure that a valid Position Lock and a working GPS is there.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Eagle: Auto and RTL non responsive</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8603</td>
																		<td>Running master c0c0666
Auto and RTL do not respond despite having good gps lock
Flight in position mode without issues
https://logs.px4.io/plot_app?log=474076d1-969e-41fd-bcf7-eaa0489c3038
https://logs.px4.io/plot_app?log=f9593388-cbae-48b9-a55d-4884dd162644

Logs not showing error messages</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF Replay generates 6 files instead of one</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8567</td>
																		<td>I want to try out the uLog EKF replay but when I follow the [docs](https://dev.px4.io/en/debug/system_wide_replay.html#ekf2-replay) I get for me unexpected results.

The [logfile](https://logs.px4.io/plot_app?log=2f967654-4766-4732-be75-53e8e705e732) is from a quad running v1.7.2, u3 ultra SD card and SDLOG_MODE = 2 (logging from boot until shut down)

I run the replay using
```
make posix none
```

However, for some reason I get 6 replay files instead of one
```
INFO  [uorb] Using orb rules from ./rootfs/orb_publisher.rules
Sleeping for 0.2 s; (0 us).
INFO  [logger] logger started (mode=all)
INFO  [replay] using replay log file: /home/carl/Documents/logs_quad_home/2018-01-03/11_28_36.ulg
INFO  [logger] log root dir created: rootfs/fs/microsd/log
pxh> INFO  [replay] Ekf2 replay mode
INFO  [replay] Applying params from ULog file...
INFO  [logger] Start file log
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-01-03/19_26_39_replayed.ulg
INFO  [replay] Replay in progress...
INFO  [lib__ecl] EKF aligned, (pressure height, IMU buf: 22, OBS buf: 14)
INFO  [lib__ecl] EKF GPS checks passed (WGS-84 origin set)
INFO  [lib__ecl] EKF commencing GPS fusion
INFO  [logger] Start file log
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-01-03/11_30_25_replayed.ulg
INFO  [logger] Start file log
INFO  [logger] closed logfile, bytes written: 3812493
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-01-03/11_30_44_replayed.ulg
INFO  [logger] Start file log
INFO  [logger] closed logfile, bytes written: 3481662
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-01-03/11_31_02_replayed.ulg
INFO  [logger] Start file log
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-01-03/11_31_41_replayed.ulg
INFO  [logger] Start file log
INFO  [logger] closed logfile, bytes written: 2353681
INFO  [logger] Opened log file: rootfs/fs/microsd/log/2018-01-03/11_31_52_replayed.ulg
INFO  [replay] Replay done (published 53376 msgs, 2.832 s)
INFO  [replay] 
INFO  [replay] Topic, Num Published, Num Error (no timestamp match found):
INFO  [replay] sensor_combined: 52417, 0
INFO  [replay] vehicle_gps_position: 1059, 0
```

```
✔ ~/src/standard_PX4/Firmware/build/posix_sitl_default_replay/tmp/rootfs/fs/microsd/log/2018-01-03 [v1.7.2|✔] 
20:27 $ ls
11_30_25_replayed.ulg  11_31_02_replayed.ulg  11_31_52_replayed.ulg
11_30_44_replayed.ulg  11_31_41_replayed.ulg  19_26_39_replayed.ulg
```

Is this intended behavior?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Offboard control CI test unstable</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8556</td>
																		<td>Fail example:
https://logs.px4.io/plot_app?log=3a1bf335-a6d7-41c8-a2b8-0b8dd4658ee0

Observations:

  * System never took off
  * Setpoints were there, but the actuators didn't respond
  * No actuator outputs plot present at all

Pass example (same commit):
https://logs.px4.io/plot_app?log=5331c5d9-ea98-489c-86ae-06a0344f92af

Script:
https://github.com/PX4/Firmware/blob/master/integrationtests/python_src/px4_it/mavros/mavros_offboard_posctl_test.py</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Convergence crashes</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8540</td>
																		<td>The first two flights of our Convergence after installation of Pixfalcon were failures. It flew ok in multirotor mode, but it didn't do well in airplane mode.

Control surfaces deflected correctly on the ground prior to flight in stabilize mode in multirotor and both stabilize and manual modes in airplane mode.

If anyone can do an autopsy of the logs, here they are.
Log of first flight:
https://logs.px4.io/plot_app?log=4acb5cae-f192-422d-8228-75ebec5f0c7b
Following transition into airplane mode, throttle cut out, then returned to full throttle, then began to roll rapidly.

Log of second flight:
https://logs.px4.io/plot_app?log=d772eac7-7bde-4b42-bb95-589207898224
Following transition into airplane mode, it pitched down and rolled right. Unable to counter with rc inputs. Crashed hard and GPS was found 30 feet from crash site.

@tumbili Do you have an idea what is going wrong here?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Go to DESCEND mode while GPS always connected</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8515</td>
																		<td>**Bug Report** 

I got a crash during a vtol flight, the flight mode changed to "NAVIGATION_STATE_DESCEND" at the end of front transition. Then it's goes lower and lower, when I found it is wrong, I tried to save it by turn on RTL, but it's too late.

I checked source code, it seems the only way to go into that mode is GPS timeout, but I checked my GPS, at least the altitude data looks good.
here's my log link:
https://logs.px4.io/plot_app?log=d5bbeb04-40dc-464b-bcd8-408cad3983f5

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Throttle stop after front transition</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8508</td>
																		<td>**Bug Report** 

Hello,  here's the log link. 
https://logs.px4.io/plot_app?log=f10ed9d8-4eab-4b31-962f-bd5c69178878

After transition to fw is done, the pusher throttle drops to 0 and goes back to normal, then altitude drops as throttle is zero. Check this:
![image](https://user-images.githubusercontent.com/18409502/34259115-ecfc37d2-e69b-11e7-9069-bb0a4c332018.png)

I reproduced this EVERYTIME I make a front transition. Tried to modify trasition parameters but seems no use.

And I found in source code this, which might be related to the bug:
![image](https://user-images.githubusercontent.com/18409502/34259150-15d904be-e69c-11e7-830b-13ef4642f3ba.png)
I can't fully understand what this set_idle_fw() for, could you add a few more lines of comments here?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>It is possible to arm to mission with stale baro</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8465</td>
																		<td>**Bug Report**
I flashed master cbdb08bb6109c1ea3ef4e23761233df447523a52 on to a pixracer quad, with the only difference that the baro altitude was overwritten to -15 km in the [sensor driver](https://github.com/PX4/Firmware/blob/cbdb08bb6109c1ea3ef4e23761233df447523a52/src/drivers/ms5611/ms5611.cpp#L868-L868).
```
report.altitude = (((pow((p / p1), (-(a * R) / g))) * T1) - T1) / a;
report.altitude = -15000.0f;
```
When connecting to telemetry I get the warning that the baro data is stale
```
0:00:05 ERROR: [sensors] Baro #0 fail:  STALE!
```
Then I upload a mission in qgc and try to start it, I get as expected the messages about failing preflight checks
```
0:00:21 WARNING: [commander] REJECT AUTO MISSION
0:00:45 WARNING: [commander_tests] PREFLIGHT FAIL: EKF INTERNAL CHECKS
0:00:45 WARNING: [commander] Arming not possible in this state
```
However, after that the quad is **armed and tries to fly away**
At 49 s the quad is armed in mission mode and all motors start, at 52.3 s I switch to assisted so I can unplug the battery more safely.  
![image](https://user-images.githubusercontent.com/7795133/33988228-14da4678-e0c4-11e7-82cf-c4a1604d6347.png)

Log is [here](https://logs.px4.io/plot_app?log=fcdc27bc-705d-4ef6-80d0-efeadd82c219)</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Not getting MAV_LANDED_STATE_ON_GROUND</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8464</td>
																		<td>See [flight log](https://review.px4.io/plot_app?log=4d7df5bf-d8b5-43a5-bd9a-842f8702a131).  I expect to get extended sys state showing MAV_LANDED_STATE_ON_GROUND after doing simple take off and landing.

**Repro**
1) Run [AirSim](https://github.com/Microsoft/AirSim), with PX4 connected, either SITL or HITL mode.
2) Run this python script 

```python
from AirSimClient import *
import sys
import time
import argparse

client = MultirotorClient()
client.confirmConnection()
client.enableApiControl(True)

client.armDisarm(True)

landed = client.getLandedState()
if landed == LandedState.Landed:
    print("taking off...")
    client.takeoff()
        
time.sleep(2)

print("landing...")
client.land()

print("disarming.")
client.armDisarm(False)
```

Notice client.land() times out because the extended sys state is stuck in MAV_LANDED_STATE_LANDING, and never reaches MAV_LANDED_STATE_ON_GROUND.  This seems to be a regression in v1.7.0, older versions of the firmware worked fine.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Bokeh application is not working</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8458</td>
																		<td>Bokeh application is not working, log viewer is not working.

[Log example](https://logs.px4.io/plot_app?log=1431e7f7-82a4-4a13-a0ba-162e6f492671)

@LorenzMeier </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MC: LowBat RTL Performed at 5m Alt instead of 50m!</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8408</td>
																		<td>**Bug Report** 

I was doing some testing, when I ran into a LowBattery RTL. But instead of climbing to the Preset Alt of 50m in such a case, the Copter just turned face to me an returned at roughly 5m Altitude! 

Log here: https://logs.px4.io/plot_app?log=d55046af-324a-4e6e-91ee-205b1f34bfc3

Landing was smooth an luckily the Street lantern was about 5m away. 

Just to note I'm still running on 1.7 RC1 (about 20 days old) - a quick search through the Commit list revealed nothing that would deal with such a problem. 

Addition: Just seen RTL_MIN_DIST is set to 5m but according LocalPos X/Y both have been > 10m.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MR: uncontrollable altitude gain when engaging auto or rtl</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8400</td>
																		<td>Sequence of events

armed in position mode
engaged auto, mission rejected
took off in position mode
second attempt at engaging auto
copter took off with uncontrollable gain in altitude

rtl presented the same behavior
https://logs.px4.io/plot_app?log=01fbca4e-353b-4874-831a-03f091098584

@dagar </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>F450 with Pixhawk 1 - f63c821 crash</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8398</td>
																		<td>The pilot reported it was flying in Auto and was seing the vehicle following the mission in QGC, then the RC signal was lost and the vehicle crashed on the ceiling of a building.

This a screen capture of the messages in QGC
![qgc_messages](https://user-images.githubusercontent.com/5013954/33461994-da3699f2-d5e9-11e7-9eef-3e34d4edd1ce.jpg)

[Log](https://review.px4.io/plot_app?log=c087212c-24ec-4076-b83c-0c690b5c26ba)

Previous successful fligths the same day
https://review.px4.io/plot_app?log=a768ef29-6be8-4245-b191-183ffa20ddb6
https://review.px4.io/plot_app?log=56d2c68b-cff0-4198-bb33-4197e44a4815
https://review.px4.io/plot_app?log=95e5f4c8-b294-4182-b630-256600424117
https://review.px4.io/plot_app?log=a75645fa-3af5-494a-b3cf-748f5d9a6d89
https://review.px4.io/plot_app?log=c7a0d5c4-f79a-47d2-83f6-0a8d94fd216c
https://review.px4.io/plot_app?log=83b00da7-f696-4af4-b3b7-f768fead3c7f

@dagar </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>F450 with Pixhawk 3 Pro v1.7.0-rc3 crash</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8392</td>
																		<td>Flight of DJI F450 with Pixhawk 3 Pro autopilot using v1.7.0-rc3 (66d4a1b3)

The pilot reported the vehicle took off, switched to Auto, reached the first waypoint and it started to climb above 300 meters, the pilot commanded RTL through QGC, the vehicle started to move towards home position but kept gaining altitude. The pilot sent land command through QGC but the vehicle didn't respond, it only responded to RC roll so the pilot engaged the kill switch.

[Log](https://review.px4.io/plot_app?log=0cdfec08-8848-4892-bcff-d4a720e99803)

@dagar</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>RTL issues with multiCopter</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8389</td>
																		<td>If engaging RTL multiple times in the same flight, the second+ instance of RTL goes towards a previously set path by the first RTL engagement.
Couple examples:
https://review.px4.io/plot_app?log=ed176590-4352-4516-b5ed-3892436d6477
https://review.px4.io/plot_app?log=d9c63fd1-1224-4be7-8985-932a2f670c78

@dagar </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FW crash v1.7.0-rc2</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8380</td>
																		<td>Phantom flying wing with Pixhawk mini autopilot running v1.7.0-rc2 (V3).

After 6 successful flights, during the 7th flight, the pilot took off in manual mode, switched to Auto and the plane accelerated to maximum thrust uncontrollably; once switched back into manual the pilot reported only partial control, attempted to land manually but crashed due to the vast acceleration and only partial control over the craft.

[Log](https://review.px4.io/plot_app?log=6fb19372-e027-4b23-b0e8-5425d409f5f3)

[Video](https://youtu.be/3qIzzh4hfUs)

@dagar </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>PX4 1.6.5 Stbl: Loiter switching BUG.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8376</td>
																		<td>Hi guys,

We've had a total crash with a Skywalker, Plain Airplane profile. PX4 ver 1.6.5 stable.

https://logs.px4.io/plot_app?log=6daee88d-90d7-4cbe-abb7-440591fef87d

I think I found the reason but it is very strange and I need conformation. This is due to a BUG if I'm correct so please can you take a look and confirm the reason.

The pilot is not novice, it is pretty experienced one in terms of piloting a plane, but somehow sometimes the PX4 is overwhelming for him especially in certain situation and he is doing irrational switching (as many PX4 users might do).

This is the case:

He flew in Position and went in to Loiter (Pause). Then at some point he wanted to gain altitude while in Pause mode. In the graph it is obvious he started pitching up. But nothing happened as it should be, the plain continued to control the speed and throttle in the Loiter, despite the throttle lever was at 60%.  In the latest implementation the Pause button will get the plane in Loiter from any mode. So initially he was in Position mode with activated Position switch. Absolutely normal operation as it is meant to be. Then strangely enough he switched to Manual in the attempt to gain altitude, without turning off the Pause button. The plane continued to circle, but strangely enough transferred the full control of the Throttle to the lever of the RC instead of controlling the throttle in the loiter itself automatically. At the same time the pilot continued to pitch up and gained altitude and I see it clearly in the graphics.. Because he had the lever at 60% throttle it was not enough to sustain the loiter, so the plane started stalling, but still trying to continue to sustain the loiter radius and gain altitude in the condition of under throttle. Because of the stalls the plane was rather going in spirals toward the pilot, and he explained that he thought it is drifting still not realizing what is going on. He did not realize that the Throttle is in his control. Then at the last stall the plane just plunged in nose dive. Because we have a hard limit of 45deg for the pitch, the plane did not have any altitude and time to recover. 

I did not see any mechanical failure, neither to the servos neither to the GPS nor the airspeed sensor nor anything else.

Please can you confirm this and if it is a BUG it should be corrected. 

Pause should be totally Auto mode, probably allowed to have some small amount of pitch control in order to gain or loose altitude, but in no case we have to give the throttle a manual control at this moment.
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Fixed Wing reject auto mission</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8361</td>
																		<td>fixed wing cannot entry into auto mission

here is the flight log
https://logs.px4.io/plot_app?log=90d6dcd2-7b87-4963-9390-987c1d062b4a
https://logs.px4.io/plot_app?log=27b7223c-7d7b-4dba-b82a-da3229e546e0

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>F450 frame with Pixhawk mini crash - v1.7.0-rc1</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8299</td>
																		<td>Using F450 frame with Pixhawk mini autopilot, loaded v1.7.0-rc1

The vehicle was flying in mission mode and when going to the second waypoint it stopped to follow the mission, it didn't respond to RTL command (by RC) and it crashed.

https://logs.px4.io/plot_app?log=57cd3193-b22d-478a-8c10-c0ff0f9a5178

@dagar @LorenzMeier </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>MC: Crash due to Motor Stop (Kill Switch) but I doubt this</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8263</td>
																		<td>**Bug Report**

I file this as a bug report since I'm concerned that my crash today may have other reasons than accidentally flipping the Kill Switch. 

I was performing some tests to eliminate a strong Oszillation when braking in PosCTL. This was improving, when I wanted to do another Test, shortly after Taking of the Rotors stopped in Mid-Air and the Vehicle crashed on the road where Motors where spinning again. While hitting the Ground the Battery got disconnected (as can be seen in the Telemetry log). 

Sadly the ULG stops shortly after start so about 2meters of flight are missing from the Vehicles Log (this is kind of strange). Also the OSD did not record anything since it claimed that there was no Communication (this may also be a bug of the OSD FW but it said that there was no data for more than 400 secs, which usually does not happen). 

So I'm stuck with the Telemetry Log. This is the last I got over Telemetry (from the Log):

![killswitch](https://user-images.githubusercontent.com/6877067/32623752-760951f8-c587-11e7-8ec7-9ea27c5a3fcf.jpg)

Here comes the 2nd strange Part. The Kill-Switch was engaged and disengaged under **0.5 sec and this twice in sequence**. I checked with my Remote and it is almost impossible to really push the switch to the position in-between where it may flip back in this quick manner. I'm not aware that I flipped the Switch and the Telemetry RC Input (Channel 6) does not reflect any change in Signal. I performed many flights, and never flipped the switch unintentionally.

Telemetry Log (Check last 15 secs) : [2017-11-09 18-05-27.tlog.zip](https://github.com/PX4/Firmware/files/1458838/2017-11-09.18-05-27.tlog.zip)

ULog Upload : https://review.px4.io/plot_app?log=1452c840-3003-4913-b528-1fff3f17d447</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>RTL issues with multiCopter</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8257</td>
																		<td>Quadcopter running pixracer (v4)
two possibly related issues
- upon engaging RTL, copter does not climb to set RTL altitude
- if engaging RTL twice in the same flight, the second instance of RTL veers in the wrong direction; heading is corrected half way through the return path

both issues present:
https://logs.px4.io/plot_app?log=a229d06a-b4f6-4333-ae1c-246c3f90f8b1
https://logs.px4.io/plot_app?log=c6d5b63b-c467-491b-83b3-cfb39064abeb

altitude issue present:
https://logs.px4.io/plot_app?log=f999958f-6a2f-419a-8a1c-e812045e8be7


using the same version of master on fixed wing, RTL looks to be working fine:
RTL set to 60m:
engaging rtl below set altitude:
https://logs.px4.io/plot_app?log=ac6e62a9-6c02-4e3d-a9c3-132c2adfd0c8

engaging rtl above set altitude:
https://logs.px4.io/plot_app?log=2ead01d6-a13d-4df6-b261-54c1ec2137ab

@dagar @sanderux @priseborough </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>EKF2 Altitude estimation problem on Release 1.6.5 Stable</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8256</td>
																		<td>Hi,

I'm experiencing a strange behaviour regarding the altitude estimation. 

The flight log is from a mission with 4 waypoints at 20 m height.

During the flight, I noticed some oscillations on the drone altitude, which I was able to confirm using an RTK GPS as ground truth ([https://imgur.com/DR6G0jY](Z)) .

On the flight log it's possible to see that both the GPS and barometer notice the altitude variation, but the estimated altitude only has a small change.

https://logs.px4.io/plot_app?log=1d070bb2-b001-48f1-b33c-73e347a17001#Nav-Altitude-Estimate

Did anyone experience this problem?

Thank you.


</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>F450 with Pixracer didn't follow the mission, started climbing.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8246</td>
																		<td>Took off manually, good hover in position mode launched the mission and the unit started getting altitude but did not follow the mission.

https://logs.px4.io/plot_app?log=907d2032-92a3-43c8-9a71-1c18b0792194
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Battery remaining inversed when compensating for load</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8198</td>
																		<td>The battery remaining function is broken on today's master.
It increases drastically when under load (if anything it should decrease). Tested with and without setting internal resistance, both behave the same. The voltage reading does read as expected.

![image](https://user-images.githubusercontent.com/14801663/32076325-dbcfdca2-ba9f-11e7-9cff-0fab8f5b43d2.png)

Log from other flight same behavior:
https://logs.px4.io/plot_app?log=7f323da0-8f75-46f1-aba9-f0a68150b691

ping @LorenzMeier @dagar 
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>VTOL crash on V4Pro</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8186</td>
																		<td>vtol crash 24/October

crash log:
https://review.px4.io/plot_app?log=da864870-aa30-4133-be64-c766e2e0e9e7

previous successful flights on same platform:
https://review.px4.io/plot_app?log=1fa2997a-b9d8-4039-af2e-dad379be803c
https://review.px4.io/plot_app?log=deacbcaa-61ed-41c2-80d2-9b636b66a983


Flight conditions:
aprox 27°C degrees
moderate winds, 4~5 m/s

Sequence of events:
auto take-off in MC
failed auto-transition to FW
retook manual control in stabilized and successfully engaged manual transition to FW
engaged mission; vtol headed in correct direction to first waypoint

after a few waypoints, vtol started to veer off coarse and switched back to MC
switched MC to stabilized at which point it was hard to control and started to dip in pitch and roll violently while losing altitude

@dagar </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Sudden Jerk after takeoff causes crash (Kneejerk) - PX4 1.6.5px</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8105</td>
																		<td>I have been fighting and issue with 1.6.5 that has given me a huge headache. In a nutshell, after takeoff and before starting a mission, the autopilot performs a very intense jerk which the drone tries to catch itself but frequently does not.

I can generate the bug by loading a mission on the drone and using the start button slider. It also shows up intermittently under takeoff and using the continue mission slider. I suspect the issue is either the roll axis is flipped in software and corrected mid-flight or the x/y position PID loop is running and accruing error before starting the mission. What are your thoughts?

video:
https://drive.google.com/open?id=0ByR2uOoTK3khMDgwckQyOE03eUU

log:
https://logs.px4.io/plot_app?log=49f577af-c6f9-46cb-83a7-b84590ecabf8

Thank you for any help that you can provide
Marshall</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>BUG on EKF2 when the PX4Flow goes invalid</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8102</td>
																		<td>### **Bug Report**

**LOG:** https://logs.px4.io/plot_app?log=962b0f4e-3553-4ec2-b398-40258c9286e5

**Explanation:**
The PX4Flow is only valid at 35cm of the floor. 

To reproduce, handheld the UAV for some seconds over 50cm so we get a position then let the UAV on the ground.  After some minutes, take it over the ground again and you'll see that the position is completely off.

Note: In the log, you can see the handheld parts with the accelerometer.

**Anomalies in the log:**

* The two first handheld parts where with some rotation yet the third one (at 10') was without clear rotation.
* High yawrate while one the ground (4' - 10') 
* Peak in LPOS.x and LPOS.y (We don't see much because of that peak)
* We don't have the same peak with the distance sensor!
* Velocities are high while on the ground
* At 10', while handheld (almost not moving) the velocities tend to go up.


**Versions:**
* PX4 Firmware: 1.6.5
* Flow Firmware: QGC provided firmware (PX4/Flow/master)
* EKF_AID_MASK set to PX4Flow

**Workaround:** Using the PR https://github.com/PX4/Flow/issues/96 so the PX4Flow report is always marked as valid.

Original issue: https://github.com/PX4/Flow/issues/97</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Mission randomly rejected</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8066</td>
																		<td>Log: https://review.px4.io/plot_app?log=6f9fa451-d3a6-42dd-b1c7-87261310b139
Situation:
Vehicle sat outside with good gps and telemetry lock
Armed via RC
Switched from Manual to Mission (jumping over ALTCTL)
Warning issued: REJECT AUTO MISSION

Then disarm and arm again and it works.
This happens very often but not consistently.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>RC Blips when adding a 2nd mavlink stream</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/8053</td>
																		<td>While hovering 4 feet off the ground the drone rolled 30 degrees left and would not recover with RC controls. After analysing the logs and live mavlink data the drone was acting to what it thought was an RC command. As we debugged we observed jumps in raw rc controls. We tried a separate RC receiver as well as a separate transmitter with the same issues. Analysing the raw inputs via QGroundControl we walked through our config file and removed line by line params. We determined the that multiple mavlink streams were the cause of the issue. 

QGroundControl Raw RC Blips: https://i.imgur.com/BaFnAE6.png

Hardware:  EAGLE
Software Version:  f160743d
OS Version: Linux, v3.4.0
Log from flight: https://logs.px4.io/plot_app?log=f38f504d-2888-422a-a86a-52c60f00b449
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>data link loss failsafe do not work in take off state</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7910</td>
																		<td>
Data link failsafe action is set to RTL but its not executed in takeoff state.
that might potentially cause a dangerous situation of completely uncontrolled drone when using no RC at all.

can be produce in Gazebo using master. QGC 3.2.4 ,without joystic.

1. command Take Off
2. Drone climb to MIS_TAKEOFF_ALT
3. shut down QGC
4. after COM_DL_LOSS_T  "all data links lost"  message  is sent
5. bug here-  the drone keep loitering infinitely without any control

https://logs.px4.io/plot_app?log=80935714-f8a4-45b9-8881-bfef1a3225f6


regardless, i think drones flight mode should be changed automatically to Hold after it's reached takeoff alt, as well as when finishing mission for example</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Land detector issues</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7768</td>
																		<td>Log: https://logs.px4.io/plot_app?log=e31c9ecf-b862-43df-a419-23efa0aa2ed8
Video: https://drive.google.com/open?id=0B3otHVwcj_LdQ0RSbjFPOU5XaDg

Land detector on VTOL in MC mode does not seem to function properly
The mag timeout and gps loss are indicative of a similar issue to https://github.com/PX4/Firmware/issues/7746

The flight was done by doing a TAKEOFF and then a LAND command. The final disarm was commanded manually. The same behavior was in mission mode.

Flight was yesterdays master merged with https://github.com/PX4/Firmware/pull/7666

</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Dealing with SDCARD failure</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7750</td>
																		<td>Some flights on a vehicle with a failing SDcard from a client:

Mission read failure (presumably) resulted in unexpected back transition: https://logs.px4.io/plot_app?log=ffa0687e-c817-4163-b52e-4f9fa1a66994 (the user then activated the takeoff waypoint to re-transition)

Complete weirdness at takeoff: https://logs.px4.io/plot_app?log=bc6215da-fd24-425c-a4e8-ecfaa9b12571
Also not all params seem to have been logged

Total failure halfway: https://logs.px4.io/plot_app?log=2258f3eb-fa11-4571-a409-b1d7417f19e3
Also not all params seem to have been logged

At minimum,  when mission read fails it must RTL, not loiter around the last known WP
The other strange behavior i am pretty sure is sd card related too, maybe some io buffer issue. 

@LorenzMeier @dagar @bkueng thoughts?

Update:
Action: check sd-card performance at boot, warn when performance is below threshold. (see: https://github.com/PX4/Firmware/pull/4460)
Action: crc checking on read missions
Action: raise awareness in community
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Mission takeoff almost no thrust and does not take off</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7737</td>
																		<td>On today's master (a merge of https://github.com/PX4/Firmware/pull/7666 and https://github.com/PX4/Firmware/pull/7690)

a VTOL takeoff and a regular takeoff from mission mode was attempted. Both failed.
RC control from posctl did function from a landed state.
Switching to mission while airborne did complete the takeoff and vtol takeoff command.

Log: https://review.px4.io/plot_app?log=a5ab7c8f-101f-443f-a612-6e46fadc9d7f

FYI @dagar @LorenzMeier </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Change Altitude causes yaw setpoint change</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7638</td>
																		<td>when loitering after reposition, changing the altitude will cause 180 deg change in yaw sp (facing the previous position)
 (FW v1.6.5 QG 3.2.0)

1. Take-off
2. re-position 100m north
3. when loitering after reaching the point- change altitude to 50m
4. bug- the drone changes the yaw setpoint (facing south)

http://review.px4.io/plot_app?log=a6cbe484-4ef9-46b4-91f2-f98e3708d407</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>FW Land mode = crash</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7609</td>
																		<td>I recently had a flight that put up a "[commander] failsafe: no global position warning", then switched to Land mode and proceeded to fly straight into the earth. My main concern is why the global position was lost in the first place (did the estimated position and gps position begin to differ too much? why?), but it would be nice to know that there is a reliable FW solution for this sort of condition to return to the ground hopefully in one piece.

Log here: http://logs.px4.io/plot_app?log=b7fcb8a9-a66f-4b49-94e3-f896d3a65cb7</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>`EKF GPS fusion timeout` errors with good GPS data available lead to big position estimate jumps</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7599</td>
																		<td>
While flying an octo with ublox M8T GPS we see rapid extreme position estimate jumps, as logged here:

http://logs.px4.io/plot_app?log=d6944989-20ef-4007-bf1e-ca0b3732347f

- Multiple warnings are logged similar to: `2:24:865 | WARNING | [lib__ecl] EKF GPS fusion timeout - reset to GPS`
- Have tried two different GPS units (ublox M8N, M8T) on several different airframes with the same results.
- Looking at the code it appears this warning shows up when ECL decides GPS data is now valid after having been invalid for some time. From what I can tell from the logs, a good GPS position was continuously available during operation. 
- This problem has not yet appeared using the UAVCAN Zubax GNSS2 (which does not use the ubx gps driver.)

Possibly related to:
- https://github.com/PX4/Firmware/issues/6443
- http://discuss.px4.io/t/position-estimate-problem-in-flight/3162/4
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>PX4 1.6.3: Strange problem with Airspeed-less transition.</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7545</td>
																		<td>We were flying 1.6.3 for some time. But recently decided to reset all the parameters with the new defaults. For this we use change of air-frame procedure. So we carefully introduced our PIDs on top of the new defaults. We removed the circuit breaker for the airspeed and thus it did not ask us to calibrate the airspeed so the diff press cal params were empty 0.00. 

In this setup we were not able to complete the transition. It never stopped the quad despite the speed got exceeding 20 m/s and the transition continued forever up to the crash.

http://review.px4.io/plot_app?log=b6653ab1-ada7-4711-abaf-00a6a51249dc

Because we flew the 1.6.3 airspeed-less without a problem we just started thinking. We enabled the airspeed. Calibrated the airpseed. Then again we disconnected it from the breaker.

On the Bench test perfect transitions.

http://review.px4.io/plot_app?log=619b0b6b-ae84-4220-aa52-73ddce2b7fcc

http://review.px4.io/plot_app?log=3647be91-b6f2-4be1-a5a3-f66ca93c8b94

Also we flew without airspeed without any problem. So the only thing we had to do was to calibrate the airspeed in order to make the transition in aispeed-less config.

During this tests we discovered another thing. In airspeed-less mode the only way we could manage the transition is timing. 

There is a parameter VT_F_TR_OL_TM which is supposed to guarantee fixed transition time without airspeed. But in reality in airspeed-less mode the transition is done now by the VT_TRANS_MIN_TM which is the minimum front transition time. The VT_F_TR_OL_TM did not have any effect over the transition timing.</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Unexpected back transition</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7544</td>
																		<td>From flight test team, FYI @dagar http://logs.px4.io/plot_app?log=78d033a5-d3e8-4e18-a73f-3602f21e78ab

@bresch Can you please have a look as well?</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[PixHawk3] Accel1 startup bias huge changes</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7541</td>
																		<td>On my Drotek PixHawk Pro v1.3 I'm facing a strange behavior.
First I saw sometimes the warning "Accels inconsistent, check cal". After further investigations, I saw that usually, the Z-axis value is usually around 9.8m/s2, but sometimes, the value of the Acc1 is completely wrong (e.g.; 2 or 15). The value of the accelerometer 0 is always correct.

```TOPIC: sensor_accel instance 0 #1

timestamp: 11548976

integral_dt: 4000

error_count: 0

x: -0.0971

y:  0.0563

z:  9.8932

x_integral: -0.0003

y_integral:  0.0002

z_integral:  0.0391

temperature: 42.7938

range_m_s2: 78.4532

scaling:  0.0024

x_raw: 7

y_raw: 40

z_raw: 4074

temperature_raw: 5815

device_id: 3608074

```

```TOPIC: sensor_accel instance 1 #1

timestamp: 163650940

integral_dt: 4006

error_count: 0

x:  0.0778

y:  0.4095

z:  2.6501

x_integral:  0.0003

y_integral:  0.0014

z_integral:  0.0081

temperature: 59.1025

range_m_s2: 156.9064

scaling:  0.0048

x_raw: 53

y_raw: 29

z_raw: 480

temperature_raw: 8701

device_id: 1442826

```
After a few consecutive reboots on the pixhawk, I obtained the following sequence:
The behavior was the following: `first calibration` -> `-9.8` -> `reboot` -> `-15` -> `2nd calibration` -> `-9.8` -> `reboot` -> `-3` -> `3rd calibration` -> `-9.8` -> `reboot` -> `-15` -> `reboot` -> `*-9.8*` -> `reboot` -> `-15` -> `reboot` -> `-15` - `reboot 3x` -> `-9.8` -> `reboot` -> `-15` .........

I tried with two other new PixHawks Pro v3.1 and I can reproduce the error. However, strange thing, I tried on a v1.2 and I wasn't able to obtain the same result after more than 10 consecutive reboots.

Here is a log where the value is correct:
http://review.px4.io/plot_app?log=170ce58a-794e-414d-8607-168ce8c734ef
And here, one with the incorrect bias:
http://review.px4.io/plot_app?log=e0bba09b-1129-4438-8ded-baede72f24cc

The logs come from a device uncalibrated, but I had the same issue with an autopilot fully calibrated (thermal + scale&offset).</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Flyaway after loss of datalink (v1.6.2)</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7535</td>
																		<td>Hello,
Few days ago I flown my multicopter for about 1.5 km. and almost got flyaway, only using RC saved it for safe landing. 
I got 'ALL DAT LINK LOSS' and it seems that RTL has been engaged (I still had downlink). but, instead of flying toward home position for landing the multicopter started to fly very fast backward.
from the log I see that just after losing the datalink (at 10:28) it did got new heading, X and Y setpoints of home. but just after that (when the link was regained?) the position setpoint sets back to its current position, no change of heading setpoint. and the multicopter gets higher and higher pitch, that leads it to fly very fast backward, not closing the X and Y position setpoints. I have tried to send new commands reposition, pause the multicopter seems to be affected by them but still contiues to fly at very high speed.
At this point (2km away) we toke RC control, and fly it to home for landing.

log: 
http://review.px4.io/plot_app?log=2da94d7c-a374-4bb3-b7f9-efd8fecaf445
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>[Navigator] Fly away because of NaNs</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7510</td>
																		<td>Last day I had a fly away with my VTOL doing a mission. Fortunately, I was able to take it over the RC and came back in manual. 
Inspection of the log revealed that the L1 controller was outputting NaNs for roll and yaw setpoints.

Here is the log: http://logs.px4.io/plot_app?log=d72b30cd-d713-4c43-9f32-30510657f2e6

And here is a dump of the setpoints getting into a NaN state:
![l1_nan](https://user-images.githubusercontent.com/14822839/27689006-e4642fa6-5cdc-11e7-9d8e-48b69f02c5cf.png)</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Pixhawk Pro (V4Pro) Quad near flyaway</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7495</td>
																		<td>Took off in position mode
Almost immediately after taking off, copter started to fly away and would not respond to user input
eventually regained control in altitude mode after several minutes and several hundred meters away
http://review.px4.io/plot_app?log=2b1d4ff4-e15e-48ac-870d-2ebbe8748afc
![bokeh_plot](https://user-images.githubusercontent.com/13203106/27606012-50a5876a-5b33-11e7-9c58-b839a71e1910.png)

Two succesful flights using same setup, same code, same flightplan loaded:
http://review.px4.io/plot_app?log=776e6bbf-2971-4195-8e22-6b9d0ffe167e
http://review.px4.io/plot_app?log=2b3f59bb-42d5-43b6-aaea-2e335318e275

Had another near flyaway on this same copter a few days ago:
http://review.px4.io/plot_app?log=00b0b048-39bd-45cd-910b-c3d54b0f39ad

Copter consists of
Pixhawk Pro
3DR ublox M8N with HMC5983 magnetometer
DJI F450 quad frame
DJI E300 propulsion system
3S 5200mAh battery
FrSky D4R-ii receiver

@priseborough @bkueng @dagar </td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>Setting mode to PosCtl after RTL causes large velocity setpoint</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7467</td>
																		<td>If you command an RTL then set mode to Manual PosCtl, the vehicle will take off very fast towards the home location with no stick input while in PosCtl.

SITL Log: http://logs.px4.io/plot_app?log=dd5b9854-3c7a-46ce-b97d-457dd3185a88
Replication steps: 
- Take off in PosCtl
- Command RTL
- Set mode to PosCtl
The vehicle will quickly ramp up to 9 m/s with no stick input then slow down after a few seconds
It's a lot clearer to see if you set all the VEL_MAX parameters to 3 m/s
So I set 
MPC_VEL_MAN_MAX = 3 m/s
MPC_XY_CRUISE = 3 m/s
MPC_XY_VEL_MAX = 3 m/s
You'll see the vehicle go very slowly at 3 m/s then when you set mode to POSCTL, it'll quickly shoot up to 8-9 m/s ground speed with no stick input.

A plot of the local_position vel_y and setpoint vel_y:
![rtl_posctl](https://user-images.githubusercontent.com/1168541/27511724-b062b2ec-58e8-11e7-97f6-0df27c27b3e2.png)
The crazy velocity setpoint gets generated right after setting the vehicle to Manual PosCtl.
</td>
																		<td>closed</td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>pixhawk pro quadcopter flyaway</td>
																		<td>https://github.com/PX4/PX4-Autopilot/issues/7463</td>
																		<td>http://logs.px4.io/plot_app?log=00b0b048-39bd-45cd-910b-c3d54b0f39ad

![image](https://user-images.githubusercontent.com/84712/27490566-c541ba8c-580c-11e7-9737-46f6a609d4b8.png)

EKF plots

[00b0b048-39bd-45cd-910b-c3d54b0f39ad.ulg.pdf](https://github.com/PX4/Firmware/files/1098398/00b0b048-39bd-45cd-910b-c3d54b0f39ad.ulg.pdf)


``` bash
 % ./process_logdata_ekf.py ~/Downloads/00b0b048-39bd-45cd-910b-c3d54b0f39ad.ulg 
found estimator_status data
found ekf2_innovation data
found sensor_preflight data
log finishes while in-air at 827.3 sec
Using test criteria loaded from check_level_dict.csv
Traceback (most recent call last):
  File "./process_logdata_ekf.py", line 1407, in 
																			<module>
    test_results['filter_fault_status'][0] = 'Fail'
KeyError: 'filter_fault_status'
```

@santiago @priseborough @bkueng 





																			</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>RTL switch configuration</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7439</td>
																			<td>I've have a two flights (one after one)
First flight was ok (mission and RTL): http://logs.px4.io/plot_app?log=f0d1fdb4-3c11-4f2a-8dc2-c0ba21947fd2
But in the second flight px4 ignore my RTL command: 
http://logs.px4.io/plot_app?log=c85d052b-70e7-4a59-98ba-6100d0934abf</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>MC Autoland tries to go back home while descending</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7426</td>
																			<td>Log: http://logs.px4.io/plot_app?log=53d0a6de-838a-4c26-b53f-87b6f19b23e5
I'm on master at bc406a1

Seems that autoland tries to control to an XY local position setpoint of (0,0). </td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>PX4 1.6.1: Land detector did not disarm after land in mission VTOL</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7402</td>
																			<td>Hello,

We made a mission without RC control only with the QGC. We used version 3.1.3. Everithing went ok except the land detector did not disarm after the mission was complete and the VTOL was landed. The only way we could disarm with 3.1.3 was emergency stop.

VTOL left on the ground with spinning motors for some time.

Here is the log:
http://review.px4.io/plot_app?log=971f681b-2e49-4e67-816f-5b3b9c52a817

Also in Position or Altitude modes we have the same problem. The land detector probably is working, because when we touch down in one of Alt and Pos Modes the QGC says we have to be either in manual mode or landed in order to disarm.

I saw it is very easy in QGC 3.2 to disarm. But it is still very nice if in the case of mission and Guided modes after touch down the land detector could at least disarm in 10-20 seconds.</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>Stuck during mission, if altitude higher than max height</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7309</td>
																			<td>For a survey I did, the default altitude was higher than the max height and the quad got stuck because it never reached the waypoint.
Here's the [log](http://logs.px4.io/plot_app?log=c828d9ab-c6de-4034-a4ce-9ea5222faf74)</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>Yaw/thrust saturation and loss of control during flight</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7288</td>
																			<td>Hi everyone,

During a position control flight with my VTOL (in MC mode only), I encountered a really strange behavior. After flying perfectly well, the yaw control was suddenly lost and the drone was loosing altitude.

![esc_response2](https://cloud.githubusercontent.com/assets/14822839/26549616/2bc1ae62-447a-11e7-81eb-4d79c5c93205.png)

As you can see, around t=59s, the drone did not respond to the yaw command even if the ESC reported acceleration and deceleration of the motors. After that between t=63s and t=69s, the drone is spinning around it's yaw axis and since it was loosing altitude, the thrust did reach saturation, without any RPM response.

I'm suspecting a mixer saturation or an ESC issue. 

Link to the complete [log](http://logs.px4.io/plot_app?log=55960095-7efd-4e28-8acc-1854828e75bc).

Finally, my setup is a PixHawk Pro with Orel 20 ESCs and a mRo GPS.</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>Inspect v1.6 flight log</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7234</td>
																			<td>http://logs.px4.io/plot_app?log=727281fb-388a-4b9f-ae96-65bf88ddd1ce</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>MC 1.6RC YAW Fault when switch to Loiter during Mission</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7194</td>
																			<td>Today I wanted to test https://github.com/mavlink/qgroundcontrol/issues/4902 which basically works now. But when switching to Loiter during Mission the Vehicle turned around by about 160degress. Continuing the mission, the YAW Angle stayed like this. I assume this to be a bug in PX4.

Check the Log showing YAW Turnaround: http://logs.px4.io/plot_app?log=c0cf8e2d-b2c5-4594-9a09-764ee2210ded#Nav-Yaw-Angle
</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>tailsitter drop down</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/7066</td>
																			<td>http://logs.px4.io/plot_app?log=3afcc56c-5b9d-415c-ab46-43c8fe700b6e
my tailsitter fell from the air,I adjusted this parameter FW_P_TC to 0.4 and then drop down.I have some questions.
1.What is the relationship between the magnetic field and the thrust?
I understand that thrust should not affect the magnetic field.is it?
2.What is the reason my tailsitter is falling off?
3.How should I adjust the parameters?
</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>yaw estimation lost</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/6867</td>
																			<td>tested in sitl: 
rotating in yaw breaks the estimation
http://logs.px4.io/plot_app?log=132fcf5f-ab37-4d31-bbd6-d30cd9674b2b

</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>UAVCAN ESC don't seem to respond the way they should</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/6796</td>
																			<td>http://logs.px4.io/plot_app?log=155832f2-b37e-44ae-a81e-fb9c8dd5de02

![screen shot 2017-03-12 at 21 11 54](https://cloud.githubusercontent.com/assets/5750020/23835588/55e519ec-076a-11e7-8c20-6f393051fda3.png)

Using: https://github.com/PX4/Firmware/pull/6795

This log shows a VTOL flight where the vehicle lost attitude and height control after the back transition. Observations:
- power consumption of the whole system is very low after the back transition even though the thrust setpoint goes to full
- the feedback from the ESCs suggest they are doing something but also that for example one motor is still turned off
- attitude tracking and performance in general is fine at takeoff and before the front transition
- the UAVCAN ESC status is shifted in time and logged ~2 seconds too early (or the rest too late)</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>Takeoff not detected after 2nd time in altitude mode</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/6651</td>
																			<td>Hello
With release v1.6.0rc1 or the current master the takeoff seems not to be detected after the second time arming in altitude mode:
http://review.px4.io/plot_app?log=b29f4633-e7c9-49a9-ab92-18106d9f01f9

```
2017_02_23_09_31_15: [logger] file: /fs/microsd/log/2017-02-23/09_31_1
2017_02_23_09_34_09: ARMED by RC
2017_02_23_09_34_11: Takeoff detected
2017_02_23_09_34_29: Landing detected
2017_02_23_09_34_31: DISARMED by auto disarm on land
2017_02_23_09_34_36: ARMED by RC
2017_02_23_09_34_46: DISARMED by auto disarm on land
```
The first time arming in altitude, the takeoff and landing is detected fine.
After the 2nd time arming, the motors are only spinning with idle thrust for some seconds and the attitude/position controller is not responding to any rc commands or nick/roll movement.
In case I switch to e.g. stabilized mode and then back to altitude mode again (when the motors are spinning with idle thrust) the takeoff is detected, the motors are spinning up and the attitude/position controller seems to be working again.





</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>EKF2 performance poor in gazebo SITL with GPS</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/6388</td>
																			<td>Here is a 3-way comparison on master of EKF2, IEKF, and LPE for a SITL box mission with varying altitude. EKF2 fails on the first turn even before the climb. I think we might want to add an EKF2 multirotor test mission. I know the original thinking was that it was some server cpu limitation, but I can't get it to work locally either.

Maybe EKF2 could benefit from some noise tuning for SITL. For IEKF, I used [Allan variance plots](https://github.com/jgoppert/iekf_analysis/blob/master/SITL%20Noise%20Identification.ipynb)  for SITL and a [pixhawk](https://github.com/jgoppert/iekf_analysis/blob/master/Pixhawk%20Noise%20Identification.ipynb) for real life and really got great results. LPE is just using the same gains found manually from  flight testing.

EKF2: http://logs.px4.io/plot_app?log=bd702929-6e9c-452f-b2b3-398e53c9cfb3

![image](https://cloud.githubusercontent.com/assets/473772/22097165/a2080984-dded-11e6-9515-ff3ea03303aa.png)

IEKF: http://logs.px4.io/plot_app?log=6c99fd56-0863-4e24-bf72-6b67adb27392

![image](https://cloud.githubusercontent.com/assets/473772/22097178/b363f47c-dded-11e6-8531-b1775b9b9f44.png)

LPE: http://logs.px4.io/plot_app?log=3fbb051c-aeb8-44af-bff3-459c4e771fb1

![image](https://cloud.githubusercontent.com/assets/473772/22097187/bfcb04bc-dded-11e6-8ab6-16fbadb88216.png)
</td>
																			<td>closed</td>
																			<td></td>
																		</tr>
																		<tr>
																			<td>Intel Aero CPU load & timings</td>
																			<td>https://github.com/PX4/PX4-Autopilot/issues/6037</td>
																			<td>@lucasdemarchi @lfelipe The normal timing for PX4 is looking like this:


																				<img width="844" alt="screen shot 2016-12-12 at 17 49 11" src="https://cloud.githubusercontent.com/assets/1208119/21107912/a0c49442-c093-11e6-8f9a-eecb1bbe3ea5.png">


From this log:
http://review.px4.io/plot_app?log=1253eec0-17f1-4051-b858-dce51b268928

Aero looks quite different:
http://logs.px4.io/plot_app?log=a24d89aa-d930-4894-9c6e-65ae449476ba


																					<img width="844" alt="screen shot 2016-12-12 at 17 54 00" src="https://cloud.githubusercontent.com/assets/1208119/21108056/045efbb4-c094-11e6-8095-217c18f02cc3.png">

We need to work out what is inducing the load and churn on Aero. Its not the logging subsystem but must be something else.
																					</td>
																					<td>closed</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Offboard acuator setpoints interfere with lockstep in SITL</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/20052</td>
																					<td>## Describe the bug
When enabling actuator setpoints for offboard mode, the simulation progresses in a much slower speed than normal simulations. This seems to be caused by actuator controls published in offboard module interfering with lockstep.

This bug was discovered by @MarvinHarms 

## To Reproduce
- Publish `offboard_control_mode` message with actuator controls enabled (internally from PX4)
- Publish `actuator_controls_o` message when in offboard mode
- switch vehicle to offboard mode

## Expected behavior
Lockstep should continue whether or not the vehicle is in offboard mode

## Log Files and Screenshots
![ezgif com-gif-maker (7)](https://user-images.githubusercontent.com/5248102/184627710-599d08b6-7dd7-4575-87b4-3a20d15122c4.gif)

- Video: https://youtu.be/Mpve5DSk0qk
- Flight log: https://review.px4.io/plot_app?log=e2dcc255-3b39-40df-ae5b-3576c6185698

## Additional context
- We are currently implementing an iNDI controller using the offboard interface internally
- Offboard actuator setpoints were added in https://github.com/PX4/PX4-Autopilot/pull/18581 , where lockstep has been disabled for testing until now</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>RC override not responding </td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/19292</td>
																					<td>Moving the RC sticks did not switch immediately from Mission mode or RTL mode to position as intended.

https://logs.px4.io/plot_app?log=b9851ab5-ed9a-4186-8100-0d412f0fa78b

![mission2position](https://user-images.githubusercontent.com/14898374/157092736-832fb5bb-9a29-49fe-8084-6242ec1226ee.png)
![mission2position_2](https://user-images.githubusercontent.com/14898374/157092813-c7884dad-7c24-4c4b-83c3-125a695b58f5.png)

</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Sending MAV_CMD_NAV_TAKEOFF while flying in other flight modes pushes the drone towards vec = (1, 1, 0)</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/19268</td>
																					<td>**Describe the bug**
When the drone is flying in MANUAL / ALTCTL / POSCTL / ACRO (and probably more?) mode and receives a MAV_CMD_NAV_TAKEOFF message (to set mode to TAKEOFF), it flies towards (x, y, z) = (1, 1, 0) direction.

**To Reproduce**
Steps to reproduce the behavior:
[terminal 1] make px4_sitl_rtps gazebo -j4
[terminal 2] Download and run the [PoC](https://gist.github.com/squizz617/f1cb009d7e4ff730492a6b9243bedf6a)

**Expected behavior**
As described in the [documentation](https://docs.px4.io/master/en/flight_modes/takeoff.html), the drone should get to the target altitude and hold. No movement in the X and Y direction is expected.

**Log Files and Screenshots**
- Flight review: https://logs.px4.io/plot_app?log=a0ec7e87-0bb5-44bd-8397-5af27a1d9882

**Drone (please complete the following information):**
- Build: `px4_sitl_rtps`
- tested commit: `a2645418`
</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Catapult launch: Motor delay not working </td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/18416</td>
																					<td>Hi I need to open this ticket again. Initial ticket was: 18354 (it was closed. I can^t change it back via the Web GUI)

PX4 (SW 1.12.3 / HW holibro pixhawk 4) The Motor starts immedialtely after launch is detected. This causes damage to the propeller, because it hits the catapult. Actual behaviour: If Accelerometer threshold > LAUN_CAT_A then Motor starts immediately Expected behaviour: If Accelerometer threshold > LAUN_CAT_A then Motorstart is delayed by value of LAUN_CATMDEL waits then motors starts.
Parameters: LAUN_CAT_MDEL and LAUN_CAT_T have no effect. Motor startup is not delayed as expected.

The log is made with Master
https://review.px4.io/plot_app?log=06b779a9-95b5-4413-a82f-d4f5734ed81d
 It was working in 1.9.1
</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Takeoff close to Geofence causes drone to fly away uncontrollably</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/18297</td>
																					<td>**Describe the bug**
Drone flies perpendicular to geofence on takeoff close to geofence. The drone places a setpoint ~7 m away from launch point and tries to reach it aggressively.  This is very dangerous behavior which can and has caused crashes in the past.

Today we went out with another drone (different flight controller and hardware) to try to trigger the same behavior and managed to do so immediately. We did two flights to ensure repeatability.


**To Reproduce**
Steps to reproduce the behavior:
1. Place drone close to but not outside of geofence border.
2. Enter takeoff mode. 


**Expected behavior**
Takeoff to set altitude.

**Log Files and Screenshots**
[First flight](https://review.px4.io/plot_app?log=3d188929-9d67-4ff6-8a6f-eff40df8d200)
[Second flight](https://review.px4.io/plot_app?log=5f430551-e48f-4486-ae38-35db4489b12d)


**Drone (please complete the following information):**
- FW Version 1.12.0
- Holybro S500
- Pixhawk 4 FC
- CUAV H16 radio module

</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Strange behavior of FW pitch rate PID after transition 1.11.3 -> 1.12.1</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/18192</td>
																					<td>After upgrading from 1.11.3 to 1.12.1 our drone (VTOL, tailsitter) became unstable. As we understand now that the main problem was in gyro filters. Somehow during to transition IMU_DGYRO_CUTOFF became equal to 0. (it is perhaps some minor bug in the transition between versions). However, it seems that it is not the only problem. 
During the experiments we found that FW pitch_rate controller with PR_FW_FF = 0 and PR_FF_I = 0 is not equal to its proportional gain. See, for example, the LOG https://logs.px4.io/plot_app?log=d0fd29dc-a149-4233-90a7-5663924d443a

The difference between controller results and proportional gain is similar (but not equal) to -0.2*(pitch rate setpoint). On the plot attached red curve is the difference between actual result of controller and calculated proportional gain. Black is pitch rate setpoint (times -0.2). 

Is it a bug? Or if it is something intentional than what is added to FW control besides usual FF, P and I components? How can we control (and understand) this addition? It seems that even with filters corrected (and the PID parameters re-tuned due to the difference in airspeed scaler between 1.11.3 and 1.12.1) our VTOL is still less stable than it was in 1.11.3.
(The situation is the same in 1.12.1 and 1.12.2)
</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Airspeed spikes cause FW to lose altitude</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/18039</td>
																					<td>@sfuhrer @RomanBapst porting the [slack conversation](https://px4.slack.com/archives/C0W2KUFFT/p1626796170295800) here.

**Describe the bug**
Sometimes, out of nowhere the `tecs_status.airspeed_filtered` message shows a huge spike that is enough to mess up the whole TECS algorithm. The drone loses a lot of altitude really fast. So far this has only been observed in SITL, and only rare occasions during relatively long flights.

**To Reproduce**
I was unable to reproduce it reliably. On the occurrences where it happened, it was with SITL gazebo_standard_vtol on long distance missions (>30km). Restarting the simulator and running the exact same mission works most of the time (until you hit the bug again). It would be a good idea to increase the logging speed of all airspeed related topics.

**Expected behavior**
This should not happen.

**Log Files and Screenshots**
First occurrence: https://logs.px4.io/plot_app?log=4b21aeea-5784-46b6-8e42-964fecc7c20a
![image(2)](https://user-images.githubusercontent.com/48206725/128736463-2eddc542-4eb0-4538-a7b6-83964c68ae26.png)

Second occurrence: https://logs.px4.io/plot_app?log=5acff421-3ff4-4bf2-bd5d-bb4a7222f241
![image(3)](https://user-images.githubusercontent.com/48206725/128736474-71a00d4f-4cf5-4002-844e-02479e4aba58.png)

On the first occurrence, only the TECS TAS topic showed the spike, making it difficult to tell where it originated. On the second occurrence, it is also logged on the airspeed validator, but still not on the initial airspeed topic. So the source of the issue is either inside the airspeed validator module or with the (simulated) airspeed sensor.

**Drone (please complete the following information):**
- SITL, Gazebo Standard VTOL
- v1.11 based

**Potential Solutions**
- find the source of the airspeed spike and eliminate it. Either in the airspeed validator (@sfuhrer) or in the simulated airspeed sensor (@Jaeyoung-Lim, maybe you would have an idea?)
- As @RomanBapst proposed in the slack conversation, change the filter that is applied to the airspeed in TECS so that a single spike doesn't have that much influence. Could also help in further reducing noise coming from the airspeed sensor. Examples could be a median filter or similar types (LULU)

I think changing the filter is something that would be worth doing anyway, to protect against an erroneous signal on a real airspeed sensor


**Additional context**
Copy of the slack thread so that it doesn't get lost in the future: Thomas Stauber  20 days ago
We've just observed a very weird behaviour in a simulation which I'm not sure if it's SITL related or if it could happen on a real flight - if it could it'd be pretty bad with a fixed-wing hitting the ground like a missile. (SITL running an v1.11-based branch)
Basically the simulated VTOL was flying nicely in FW for a good amount of time when suddenly the tecs_status.airspeed_filtered message diverged to 2e8 m/s, causing the drone to cut throttle. Then tecs_status.airspeed_filtered became a constant 3 (no decimals), triggering first TECS_MODE_BAD_DESCENT  and then a few seconds later TECS_MODE_UNDERSPEED . The drone pitched down with almost full thrust and triggered an adaptive quadchute for loss of altitude.
I really don't understand where the 2e8 m/s spike and the constant 3 m/s of airspeed_filtered comes from.
Also, the RTL that followed the quadchute was not working correctly for the first ca 30s where the drone kept losing altitude instead of climbing at desired RTL altitude.
Log: https://logs.px4.io/plot_app?log=4b21aeea-5784-46b6-8e42-964fecc7c20a (flight review seems down, I hope I copied the correct link)
This file can’t be shown because your workspace has passed the free plan’s 5 GB storage limit. See paid plans

Lorenz Meier  20 days ago
Silvan Fuhrer Could you comment on that?

Roman Bapst  19 days ago
Silvan Fuhrer Let's check that one. Actually I'm thinking we should probably add a median filter to airspeed data somewhere. A spike with that magnitude can easily cause the complementary filter in TECS to fill up to an insane value within only one iteration.
:+1:
1


Silvan Fuhrer  17 days ago
Well the airspeed data isn't the issue here. Must be something numerical related to the accel data? local_position/az jumps at the same time as tecs_status/airspeed_filtered.
I'd say we somehow limit the effect that accel data can have on airspeed_filtered, and trust more the airspeed data (whose validity we check with the airspeed validator)
This file can’t be shown because your workspace has passed the free plan’s 5 GB storage limit. See paid plans

Thomas Stauber  17 days ago
Are you sure the accel is at fault? I don't see anything of similar magnitude there. And I'd be surprised if such a small change in acceleration completely messed up the airspeed_filtered topic. (tbh I'm already a bit surprised it's used at all - I had always assumed it was some sort of averaging or lowpass filter. I never actually checked though) I rather think the -1.7m/s² on local_position.ax are caused by cutting the throttle from 31% (cruise) to 0%.

Silvan Fuhrer  17 days ago
Okay well no, I can't be sure if it's not on the airspeed front.
BTW, the 3m/s after the spike are due to 3 being the min airspeed defined in TECS. That means it dropped below that. https://github.com/PX4/PX4-Autopilot/blob/af50e25647aa5c2051bb09378bc9b2aaaaeb2a07/src/lib/tecs/TECS.cpp#L150

Thomas Stauber  17 days ago
Ok, already good to know where the 3 comes from. (Still not good that it's there haha). I guess it was below that because of how the filter works (https://github.com/PX4/PX4-Autopilot/blob/af50e25647aa5c2051bb09378bc9b2aaaaeb2a07/src/lib/tecs/TECS.cpp#L146). As _tas_state exploded, subsequently _tas_innov was heavily negative, and therefore also tas_state_input .
Apart from initialisation the only place there _tas_state gets updated is L147, so if we can track down all occurrences of the terms of that equation (respectively of the line above), we should be able to get an idea where it could have come from. I assume if the dt was the problem we'd have other problems too, so remaining are _tas_rate_state , _tas_rate_raw , _tas_innov and _tas_estimate_freq . _tas_estimate_freq  is pretty safe to exclude, leaving us with _tas_rate_state , _tas_rate_raw and _tas_innov .
_tas_rate_state : can only be fucked up if _tas_innov (or _tas_estimate_freq or dt)is fucked up.
_tas_rate_raw : that would indeed be the body_acceleration. Nothing logged, but maybe it was too short a spike ?
_tas_innov : either _EAS or EAS2TAS is wrong. EAS2TAS is constrained between 0.9 and 2.0, so not possible. _EAS is the airspeed_validated.calibrated_airspeed_m_s  topic. Same as for _tas_rate_raw there is no logged spike.
I hope I didn't miss any occurrences in my analysis. So it looks like it's either the body_acceleration or the airspeed measurement that went wild for a short spike (or something else broke completely during execution and caused some memory spill / overflow or other very unlikely erroneous behaviour, which I think we can almost certainly exclude as the rest was still working properly)

Thomas Stauber  17 days ago
Maybe moving to another filter that wouldn't be so affected by any spike would really make sense as Roman Bapst mentioned above.
</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Navigation Errors during FW Flight</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/17635</td>
																					<td>Pixhawk 4
1.11.3 - Fixed Wing

After some debate on this I decided to open an issue.

Navigation between waypoints is not consistent and does not follow the expected direction (more detail below). The direction is circuitous.



In the first log, it was clear there was some mag interference (this was seen on the ground prior to takeoff - approximately 10 degrees could not be corrected even after multiple calibrations) but the issue was that the trajectory from one waypoint to the next does not make sense (in parts of the flight). Instead of going from one point to the next, there are large turns between them.

I questioned if this was due to an insufficient SD card speed for reading the mission. Testing the SD card speed in QGC gave an average speed of 63kb/s (much too slow but this was only changed after these flights) and there are logging dropouts at some of the points in the log. Right around 22 min where the location looks to be sideways, it was not. In the telemetry replay it does a coordinated turn. This turn at least makes sense, that is the direction is was supposed to go. That changes though later in the same flight.

At 22:46 it looks like the aircraft starts to circle down. Maybe to hit the altitude set-point but that does not make too much sense seems it looks like it doesnt actually miss it. After it does circle down though it then just decides to go left (no errors still) and then circle around again. Mag issue? There is no reason for a turn to be in that direction though. The question becomes is if this is mag related and or SD card read access speed and mission related.

Log 1 - 
https://review.px4.io/plot_app?log=72ac3453-0872-447d-8716-3fcca37c1e9e






The below log had a new mag installed and there weren't any offsets observed or mag ratios, etc but at 13:17 instead of turning left, the aircraft made a roll to the right before banking to the left to turn. Additionally, it went directly through the waypoint before turning instead of starting at the L1 distance and making the typical rounded turn. From 13:18-13:25 the log looks like the aircraft is going to the wrong direction but there is also a log dropout there, in the telemetry log the orientation and direction looks correct in terms of how the aircraft flew but not why it still turned so late and went right then left. 


Log 2-
https://review.px4.io/plot_app?log=1e2b37e4-b557-45d3-9f73-6fb099bf0fa4</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Warnings during VTOL transitions</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/17474</td>
																					<td>**Current behavior**
In offboard, calling a VTOL transition ends up with PX4 [[FlightModeManager]](https://github.com/PX4/PX4-Autopilot/blob/d62204856cf0711af9ca82a399aac529783c412b/src/modules/flight_mode_manager/FlightModeManager.cpp#L179) running the fligh task `[FlightTaskTransition]`. This flight task [sets the position setpoints](https://github.com/PX4/PX4-Autopilot/blob/d62204856cf0711af9ca82a399aac529783c412b/src/modules/flight_mode_manager/tasks/Transition/FlightTaskTransition.cpp#L57) to `NAN`.
 
As the control mode remains in offboard (`_control_mode.flag_control_offboard_enabled` is true),
`[fw_pos_control_l1]` [expects a finite position setpoint](https://github.com/PX4/PX4-Autopilot/blob/d62204856cf0711af9ca82a399aac529783c412b/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L1704), which is not the case during transitions due to the previous flight task overwriting the setpoint.

Because the setpoint is not finite, the following warning is sent:
`[fw_pos_control_l1] Invalid offboard setpoint. `

However everything works fine as roll and pitch setpoints are override (standard vtol) during transitions.

**Expected behavior**
No warning during transitions.

**Possible solution?**
A quick and dirty solution could be to mute the warning during a transition, either by looking at the current flight task or by checking the vehicle status. We may overlook important warnings in some corner cases though...
A cleaner alternative may require an important change in the logic during transitions. 

**Log review**
[Log review](https://logs.px4.io/plot_app?log=1f88d1db-87e1-41db-9e8b-e90b4237c385) of an offboard VTOL flight with multiple transition. </td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>MC idle PWM automatically changes to 1000ms</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/17423</td>
																					<td>It normally arms in MC mode properly and sets pwm to 1100 while idle as set in VT_IDLE_PWM_MC.  But sometimes arms and pwm motor signals stay at 1000ms, thus motors remain stopped. If throttle is increased It responds but ESCs turn off if the signal returns to 1000ms and you get erratic behaviour from motors.

To Reproduce, not easily reproducible...
-Arm MC everithing OK
-Disarm
-Let the drone disarmed for a while (10min aprox)
-Arm, it arms but motors do not spin at iddle.

Expected behavior
This should not happen.

Log Files and Screenshots
[FlightLog](https://logs.px4.io/plot_app?log=eef8b1e5-baa1-4bd3-84fc-0ba256c10845)
[FlightLog2](https://logs.px4.io/plot_app?log=be927c5d-c264-47b2-b3c1-094bad17fabc)

Drone:
Firmware: 1.11.0 Master
Airframe: Tailsitter
Autopilot: Cube black


</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Tailsitter transitions in manual mode bug</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/17422</td>
																					<td>
There is a problem with the FW mode after a transition from MC in manual mode.
Motor outputs do not match each other (they should in FW) elevons also do not behave properly, they have an offset. If the transition to FW  is done in any other mode (stabiliize included) and then switching to manual everithing is ok.


**To Reproduce**
-Arm MC in manual
-Switch to FW flight

**Expected behavior**
Motor outputs should match each other once the transition is completed.

**Log Files and Screenshots**
[FlightLog](https://logs.px4.io/plot_app?log=7cb28ce8-e7c6-477c-9a7b-591ba2418a25)

**Drone:**
Firmware: 1.11.0 Master
Airframe: Tailsitter
Autopilot: Cube black

</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>RTL_FLT_TIME unclear and potential division by zero</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/17007</td>
																					<td>Log: https://logs.px4.io/plot_app?log=2c9c93ec-1b0a-49f7-beeb-ce98f10700d9

Battery alert was issued at 37% capacity remaining, BAT_LOW_THR was set to 20%

Other tests show that battery failsafe RTL actually kicks in around 32% while 15% was set

battery_status.warning was never above 0 indicating the battery failsafe was not issued by the battery sensor code.

@dagar @julianoes @RomanBapst </td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>SITL integration test arming failure</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/16817</td>
																					<td>I've seen the case where arming is temporarily rejected and tone_alarm negative is printed but there is no information why it failed.

This happened in https://github.com/PX4/PX4-Autopilot/runs/1871257740 and the log file is https://logs.px4.io/plot_app?log=fb423508-e871-491f-a54d-9c12ca5cf55b.

I have not found a path yet through the preflight checks and arming logic that would give this result but not print a reason...</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>pitch setpoint drops just after the back-transition </td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/16483</td>
																					<td>**Describe the bug**

there's a sudden drop in the pitch setpoint just after the back transition of the standard vtol in the master. i think the initial setpoint after the back transition is set to zero  just after the back-transition, i just looked at the value of _v_att_sp.pitch_body in the vtol_att_control_main.cpp file in case mode:ROTARY_WING

**To Reproduce**
Steps to reproduce the behavior:
you can load this plan and reproduce the same with standard_vtol
[plan.zip](https://github.com/PX4/PX4-Autopilot/files/5765173/plan.zip)

**Expected behavior**
pitch setpoint should not drop immediately just after the transition, it should come down gradually.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=19538338-d46f-4c67-a3ca-11e7d1566eb9

Add screenshots to help explain your problem.
![image](https://user-images.githubusercontent.com/25317204/103545932-4734cb00-4ec8-11eb-930a-e547bc36c476.png)

**Additional context**
I think when changing from the flight_mode it zeros the pitch setpoint on full rotary_wing mode.
</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>undesirable back-transition behavior.</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/16474</td>
																					<td>when using just the vtol-transition mission item in qgc, or flipping the switch from fw to mc mode stabilized mode, the curved path gets executed with a rolling behavior in the back transition

this is solved in the pr-vtol-rtl-fixes when using vtol transition and land mode, but however it still persists on the above mentioned conditions as the l1 controller is present in those two conditions in the back-transition.

**Alternate Solution**
https://github.com/PX4/PX4-Autopilot/blob/d502292d0731a38c513dc1224c135b6f1965586e/src/modules/vtol_att_control/standard.cpp#L283
in the current master, _fw_virtual_att_sp->roll_body diverges from zero after some time in the back-transition, can we make it a hard zero as we don't want the aircraft to roll in the back-transition anyway?

**To Reproduce**
to reproduce, in a mission set a vtol-transition mission item at the end of the mission. the behavior can be observed.


**Expected behavior**
The vtol should transition to mc_mode in a straight line without going in a curved path with a roll.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=1e1bb5d2-5260-40da-bd7e-46fadf55fc6c

**Additional context**
i think this addresses the same issue
https://github.com/PX4/PX4-Autopilot/issues/14933

https://github.com/PX4/PX4-Autopilot/pull/14405/files
this introduced l1 controller to be present in the back transition which is good, but i think it needs to be further analyzed, cause this causes the aircraft roll in the back transition, which is not desirable. 
 </td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>VTOL standard flight to review</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/16427</td>
																					<td>
![Screenshot from 2020-12-18 13-34-46](https://user-images.githubusercontent.com/84712/102648630-d5255d80-4135-11eb-91be-57a1276bbcb2.png)



https://review.px4.io/plot_app?log=4240e1a9-5f40-4e5b-be73-812f59a072e3

https://px4.slack.com/archives/C39C4E709/p1608315970050900</td>
																					<td>open</td>
																					<td></td>
																				</tr>
																				<tr>
																					<td>Fail to shutdown PX4 in SITL mode with Airsim</td>
																					<td>https://github.com/PX4/PX4-Autopilot/issues/16253</td>
																					<td>**Describe the bug**
PX4 in SITL mode with Aisim and QGC on Windows 10 will stay running after sending command "shutdown" by pxh>, except the console print out "Exiting NOW." and hang(never return to console prompt itself). 

The px4 process will keep running until you explicitly terminate it(you can not do it with ctrl+c, had to kill it through Windows Task Manager). And I let it running at least half an hour before i kill it, and it showing no stopping sign. 

**To Reproduce**
Steps to reproduce the behavior:
1. Build PX4(commit: 615333badb289aa77285bcfad071cc6a70b13632)
2. Build Airsim(commit: 659a7dbb93269fba8af31debf6f09f15c3fbc15c)
3. Build and run QGC(commit: 13dd7a50d15808750fa35a1a52900d2c5a7f40f3)
4. Run Airsim with Block environment.
5. Run PX4 with command "make px4_sitl none_iris"
6. Use QGC to takeoff the drone, and let keep orbiting a circle.
7. IGNORE any warning appeared, like "WARN  [ekf2] primary EKF changed 5 (unhealthy) -> 1" 
8. IMPORTANT: Let it run for at least an hour.
9. Then type "shutdown" command in pxh console, it will print "Exiting NOW."
10. And you will observing that the px4 are stilling running, and console got stuck on. 

**Expected behavior**
After typing "shutdown" in pxh console, px4 will exit with console return to its normal prompt.

**Log Files**
I don't think [PX4 Flight Log File](https://logs.px4.io/plot_app?log=ba482670-d38f-4962-ab2b-5a9bf919baae)  related to this shutdown issue, but provided as well. 

**Screenshots**
Console hang and px4 still running:

																						<img width="1149" alt="Screen Shot 2020-11-22 at 10 14 27" src="https://user-images.githubusercontent.com/5885946/99897641-16ad1f00-2cd6-11eb-81f6-4456716a73f7.png">

Threads:

																							<img width="737" alt="Screen Shot 2020-11-22 at 11 05 52" src="https://user-images.githubusercontent.com/5885946/99897673-7b687980-2cd6-11eb-9700-30340b04aebf.png">

Stack trace to 6480(a thread still running with 12%+ CPU)

																								<img width="435" alt="Screen Shot 2020-11-22 at 10 16 13" src="https://user-images.githubusercontent.com/5885946/99897652-4cea9e80-2cd6-11eb-839f-6f01d36e82ea.png">

And i even take of dump of the PX4 process:(it take up to 2GB so not uploaded)

																									<img width="1174" alt="Screen Shot 2020-11-22 at 12 19 37" src="https://user-images.githubusercontent.com/5885946/99897692-b1a5f900-2cd6-11eb-9e26-0b47a34a9361.png">

**Additional context**
- Windows 10 x64, 1607, 14393.4046
- PX4.Windows.Cygwin.Toolchain 0.9

																									</td>
																									<td>open</td>
																									<td></td>
																								</tr>
																								<tr>
																									<td>PX4 v1.11.2 alt-hold flight problem with full pitch</td>
																									<td>https://github.com/PX4/PX4-Autopilot/issues/16246</td>
																									<td>**Describe the bug**
Full pitch forwards on a flight in alt-hold mode creates weird flapping motion.

**To Reproduce**
Steps to reproduce the behavior:
1. Connect Pixhawk 4 hardware to your PC over serial port.
2. Ensure it has firmware version 1.11.2 installed.
3. Run [this Windows Binary of latest AirSim](http://lovettsoftware.com/downloads/Airsim/AirsimNHTest.zip) bits (or build latest bits yourself).
4. Now fly with ALT-HOLD mode turned on with full pitch forwards

**Expected behavior**
Should fly smoothly.

**Log Files and Screenshots**
*Always* provide a link to the flight log file:
- https://logs.px4.io/plot_app?log=96127077-1bb0-4a6c-ae72-84d92efb1a31
- See [demo video](http://lovettsoftware.com/bugs/px4_alt_hold_bug.mp4)

Add screenshots to help explain your problem.

**Drone (please complete the following information):**
- HITL quadrocopter X
- [Pixhawk 4 from Holybro](https://shop.holybro.com/pixhawk-4beta-launch_p1089.html)

**Additional context**
This did not happen with v1.9.2 of the firmware on the same hardware.
</td>
																									<td>open</td>
																									<td></td>
																								</tr>
																								<tr>
																									<td>v1.11 possible mag issues (Here2)</td>
																									<td>https://github.com/PX4/PX4-Autopilot/issues/16035</td>
																									<td>
![Screenshot from 2020-10-22 11-18-04](https://user-images.githubusercontent.com/84712/96893046-4a3b2600-1458-11eb-8433-25eb73b037e9.png)



 - https://logs.px4.io/plot_app?log=e8f16d70-23a8-448d-8f2a-a9fa06a40892

</td>
																									<td>open</td>
																									<td></td>
																								</tr>
																								<tr>
																									<td>[VTOL] Broken Weathervane & broken MPC_YAW_MODE</td>
																									<td>https://github.com/PX4/PX4-Autopilot/issues/15673</td><td>**Describe the bug**
The weather vane does not work anymore in Mission (MC mode). Neither does MPC_YAW_MODE have an effect on the heading. So the drone ends up flying in all directions with the same heading, which is ugly to watch and can be dangerous in high winds. 

**To Reproduce**

Tested in SITL on v1.11.0:
1. Launch Gazebo with `make px4_sitl gazebo_standard_vtol__windy` (by default 4m/s wind from South to North)
2. Execute some mission which contains navigation in MC mode (e.g. [Dummy_MC_loop.zip](https://github.com/PX4/Firmware/files/5162328/Dummy_MC_loop.zip))
3. Observe the heading.



**Expected behavior**
As stated in the docs (https://docs.px4.io/master/en/config_vtol/vtol_weathervane.html#mission-mode-behaviour). The drone should head into the wind. Also, MPC_YAW_MODE should behave as for a normal MC. I'm open to discussion whether the weather vane should have precedence over the heading calculations of MPC_YAW_MODE or not or if both should be active at the same time and you end up with a compromise. But certainly not changing the heading at all is not good.

**Log Files and Screenshots**
 https://logs.px4.io/plot_app?log=41546a93-eaeb-45c8-af75-fcfd2af6b967 : always heading east, neither weathervaning nor heading towards waypoint.

https://review.px4.io/plot_app?log=5cd8b35e-390b-476c-85fb-30ac2fd3ff42 : high winds on a custom branch with minor modifications from v1.11-beta. The drone gets carried away because it can't fight the wind in its bad orientation. --> dangerous situation.


**Drone (please complete the following information):**
gazebo_standard_vtol
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Pixhawk 4 + Drotek Sirius RTK GNSS compasses inconsistent</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/15312</td>
																								<td>**Drone**
S500 with Pixhawk 4 and Drotek Sirius RTK GNSS (with RM3100 magnetometer).
Pixhawk 4 with rotation_roll 180
GPS no rotation

Installed master firmware to Pixhawk 4, the vehicle couldn't arm due to compasses inconsistent pre-arm check error, this error is not cleared even after compass calibration. Pixhawk 4 and GPS (with external compass) are facing forward, but the error says they are inconsistent. Installed previous commits until I found the issue was introduced by commit e819f99, before this commit I'm not getting this error.

Compass calibration can be performed without issue, but this will not clear the pre-arm error.

Compass calibration was performed outdoors and indoors with the same result.

Checked with the GPS (with compass) included with Pixhawk 4 and is working, so this is issue is with the Drotek Sirius RTK GNSS device. 

**To Reproduce**
1. Use Pixhawk 4 + Drotek Sirius RTK GNNS
2. Install commit  e819f99 or a newer commit.
3. Try to arm
4. See compasses inconsistent error
5. Calibrate compass
6. Try to arm
7. See error

**Expected behavior**
Vehicle should be able to arm since compasses are facing same orientation.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=8e97f377-2aff-4c9a-8306-a9f13b43df1c

![aec1b92_ng](https://user-images.githubusercontent.com/37613459/87255296-646b6e00-c43e-11ea-90b7-b8b367243d07.PNG)
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>V1.11.0 (Beta&Master) MC control doesn´t switch off in FW (tiltrotor-vtol)</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/15155</td>
																								<td>all mc mot control remains active (VT_FW_MOT_OFFID doesn´t apply) even the nacelles are full swivelled to FW (differental thrust is only added in FW)

It can be testet on the ground with Convergence Vtol: 
arm -> apply a bit throttle -> switch to FW -> nacelles swivel in 2 steps fully forward to FW -> Mot 3 continues running -> all 3 Mot are still under MC control if you apply roll/pitch commands

fully to FW ->In this case Mot 3 should turn off and Mot 1,2 now should only be controlled by differential thrust 

https://review.px4.io/plot_app?log=dcd387e6-8402-4b7b-b53c-14096527066f

Convergence with Pixracer R14 
Made a real flight and thought, I could remove the problem with my external mixers ... but unfortunately this ended in a crash. 
https://review.px4.io/plot_app?log=379ea7f6-38e4-40ed-829b-6e333d91b053</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Altitude Losses and Gains: Possible Barometer Issues</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/15096</td>
																								<td>**Description:**
PX4 struggles to hold altitude using the barometer in both the AltHold and PosHold flight modes. Cross-breezes result in altitude gains/losses. Maneuvers result in altitude loss. Typically, the more rapid the maneuver the larger the altitude loss.

**To Reproduce:**

_Method 1_
1. Drone switched into position hold and armed after a 3D-lock is obtained.
2. Take off to an altitude far beyond the ground-effect zone.
3. Pick an axis to evaluate (eg. positive x-axis)
4. Perform a full-stick maneuver along that axis until max horizontal speed is achieved.
5. Release the sticks
6. Altitude is lost near the end of the position change and during the braking maneuver. For these maneuvers the altitude returns to the set-point after 2-5sec (far too long).
[Maneuver Altitude Loss]( https://review.px4.io/plot_app?log=4972dc44-0636-4abc-a065-dbc4c23d32f5)

_Method 2_
1. Drone switched into position hold and armed after a 3D-lock is obtained.
2. Take off to an altitude far beyond the ground-effect zone.
3. Release sticks (no RC input). 
4. Wait for a cross-breeze
5. Altitude raises or lowers (multiple meters). During these tests the drone very slowly (10-25sec), if ever, returns to the setpoint. 
[Wind Altitude Gain/Loss](https://review.px4.io/plot_app?log=511f8756-384c-4a3d-b214-4f9a8f401b58)

**Expected Behavior:**
In AltHold and in PosHold, if the z-setpoint is not changed, the craft will not change altitude.   

**Screenshots:**
_Method 1_
![Forward Dip](https://user-images.githubusercontent.com/66424788/84535991-eb4fee00-acba-11ea-9d09-45d2a5344f4c.png)
Caption: Note the bulge in the barometer altitude coupled with the decrease in thrust both of which result in a dip during and after maneuvers.

_Method 2_
![Wind Altitude Gain](https://user-images.githubusercontent.com/66424788/84535994-ebe88480-acba-11ea-8888-dcaf1bbf9951.png)
Caption: Note the three bulges in velocity and the area between the actual and desired curves. NO RC commands or values were given between 2:40 and the 3:25 time-stamps. After 3:25, the drone started to gain many meters of altitude at which point a downward RC command is given. Even though almost full-stick down is commanded, the copter continued to rise until the breeze (2-5mph) settled. 

**Craft Specifications:**
The craft itself runs 18x5.5in props on a 900mm frame and uses a Holybro Pixhawk 4 running PX4. The craft is rather heavy but well within the motors and batteries specifications for thrust and power available/required respectively.
Firmware version v1.10.1 was used for all initial testing. Firmware version v1.11.0-beta2was used to connect external barometers through the I2C port (ex. for BMP388) because this is not provisioned for in v1.10.1.
These same performance issues are also present and reproducible on a much lighter craft (15x5.5 props, 750mm frame, Pixhawk 4, v1.10.1).

**Attempted Solutions:**
1)	The first tests were performed using the stock on-board MS5611 barometer with no shielding. The flight performance was fine but produced noticeable dips upon maneuvering in any direction. 
2)	The issue  https://github.com/PX4/Firmware/issues/10058 suggested shielding the barometer, and adjusting the EKF2_BARO_NSE, EKF2_PCOEF_%%%, EKF2_BCOEF_%%%, and EKF2_DRAG NOISE parameters. Shielding the barometer in an indirectly ported enclosure did not produce noticeable differences. (in either data or performance). Adding open-cell foam around the PX4 inside the enclosure also did not produce noticeable differences. Moving the barometer very far away from the propellers did not produce noticeable differences.
3)	After shielding and isolation were tested and had no effect on the problem, the suggested parameters began to be changed but shielding with enclosure and foam was kept for the remaining test. Setting the XN, XP, YN, and YP EKF2_PCOEFs to their minimum value of -.5 very slightly reduced the dip (10-30cm out of 1-3m). 
4)	After PCOEFs were ineffectual, the BCOEFs were next to be altered. A theoretical ballistic coefficient was calculated for this aircraft using the drag coefficient of a flat-plate, the mass of the aircraft, and the area of the central plate. The calculated value was 23.96kg/m^2 (1kg/m^2 lower than default). The ballistic coefficient parameter was altered from minimum to maximum values. The EFK2_drag.innovations[0:1] were examined after each flight but did not change in RMS value. EKF2 Replay was attempted using JMavSim on a Windows 10 machine but errors were thrown upon completion of the documentation steps and replay never worked. Changing BCOEFs had little to no effect on the EKF2 innovations for both drag and wind estimation.
5)	The last of the suggested parameters was EKF2_BARO_NSE. Raising EKF2_BARO_NSE to a value of 5m improved flight performance and reduced dips while maneuvering. This is NOT a solution to the problem as all it does is transition estimation authority from to the barometer to the GPS. The entire intent of this testing is to have consistent altitude performance even without GPS assistance (to fly in buildings and structures) therefore this is not the most desirable solution.
6)	After the above parameters failed to solve the problem, the EKF2_HGT_MODE was changed from barometer to GPS. This stopped the dip from occurring but once again is not a solution. After GPS was used, a downward-facing LIDAR was used with range-aid enabled without it being the primary height sensor and with range-aid and as the primary height sensor. Both of these removed the dip while maneuvering and followed terrain well. These too are undesired solutions due to limited LIDAR range and the possibility of ground-based objects messing up the LIDAR altitude estimation.
7)	The next series of testing began with an external barometer/GPS from Zubax enabled via UAVCAN. This also featured the MS5611 chip and yielded the same results as the on-board MS5611 for all of the above tests. This GPS was also enclosed in the Zubax designed enclosure with open cell foam in the barometer enclosure (inside the overall enclosure). With UAVCAN enabled, both the external barometer and the external GPS were used as the primary GPS and barometer but did not produce noticeable differences in flight performance.
8)	No other types of barometers were supported in v1.10.1 so v1.11.0-beta2 was used for the rest of the testing. The v1.11.0-beta2 code was altered to enable the driver for the BMP388 acquired from Adafruit. The MS5611 driver was also disabled to ensure that the BMP388 would be used for pressure-height data and not the on-board sensor. The PIDs for the rate, attitude, and XY- position controllers were able to be tuned to achieve the desired performance. The Z-position/velocity controller gains were left at default. Hover flight could be achieved as expected however, when a breeze blew the craft would gain altitude and not settle back to the set-point. The second log of the 3-4min flight is the best example of this. No control input would be given and the craft would gain altitude at the maximum allowed vertical speed (2m/s, default = 3m/s). The P and I values of the controller were reduced to close-to or just above the minimum allowed values (to create a sluggish and under-tuned controller) and still the craft would ascend at maximum vertical speed in a slight cross-breeze (2-5mph). For the end of the flight, the rise in altitude was partially counteracted by a downward RC command but almost full-stick down was commanded before the aircraft consistently began to descend.

**Notes:**  
I hypothesize that both flight abnormalities are caused by the pressure changes across the barometer. That being said, all tested barometers were a fully enclosed as they could have been without rendering them inoperable. My second hypothesis is that the altitude fusion in the EKF2 does not handle these barometer fluctuations well. The same craft flown with a DJI A3 controller does not have these problems when flown under the same conditions (wind, maneuvers, poor GPS environment, etc.). These logs and descriptions hopefully show problems with dynamic pressure handling (either craft moving in static air or air moving over static craft) that Pixhawk 4 has. This problem effects AltHold, PosHold, and Loiter flight modes and mission performance in many different scenarios and its significant diminishment or removal would make PX4 based systems more useful and versatile. 
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>SITL standard_vtol without airspeed flies too slow</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/15067</td>
																								<td>**Describe the bug**
When airspeed is blocked (not published) for standard_vtol in SITL, it starts to fly slower and slower (below stall speed and starts oscillating in speed and height. I assume this is just because the cruise throttle is not set up correctly but I'm not sure.

**To Reproduce**
Steps to reproduce the behavior:
1. Use: https://github.com/PX4/Firmware/pull/15063
2. `make px4_sitl gazebo_standard_vtol`
3. Plan VTOL mission in QGC and start it.
4. Enable failure injection: `param set SYS_FAILURE_EN 1`
5. Trigger GPS lost: `failure airspeed off`

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=687fe868-4005-4494-a5a3-dc63aefaa127

FYI @sfuhrer @RomanBapst </td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>GPS lost during VTOL fixedwing mission immediately triggers loiter descent</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/15066</td>
																								<td>**Describe the bug**
When GPS is lost during the fixedwing part of a VTOL mission, the plane says it is going to `fixed bank loiter`. It does so without thrust, so starts diving to keep above stall speed. This results in a "hard landing" at 13 m/s horizontal and 3 m/s vertical speed.

I would assume that by default a VTOL would either actually loiter for a while to try to regain GPS or otherwise transition back to multicopter mode and slowly descend.

It certainly should not dive like that, especially when datalink and manual control is still available.

**To Reproduce**
Steps to reproduce the behavior:
1. Use: https://github.com/PX4/Firmware/pull/15063
2. `make px4_sitl gazebo_standard_vtol`
3. Plan VTOL mission in QGC and start it.
4. Enable failure injection: `param set SYS_FAILURE_EN 1`
5. Trigger GPS lost: `failure gps off`

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=d4571b45-9472-4265-bc6c-87555e95c784

```
INFO  [simulator] Waiting for simulator to accept connection on TCP port 4560
INFO  [simulator] Simulator connected on TCP port 4560.
INFO  [commander] LED: open /dev/led0 failed (22)
  MAV_TYPE: curr: 2 -> new: 22
INFO  [init] Mixer: etc/mixers-sitl/standard_vtol_sitl.main.mix on /dev/pwm_output0
INFO  [mavlink] mode: Normal, data rate: 4000000 B/s on udp port 18570 remote port 14550
INFO  [mavlink] mode: Onboard, data rate: 4000000 B/s on udp port 14580 remote port 14540
INFO  [mavlink] mode: Onboard, data rate: 4000 B/s on udp port 14280 remote port 14030
INFO  [logger] logger started (mode=all)
INFO  [logger] Start file log (type: full)
INFO  [logger] [logger] ./log/2020-06-09/15_20_07.ulg
INFO  [logger] Opened full log file: ./log/2020-06-09/15_20_07.ulg
INFO  [mavlink] MAVLink only on localhost (set param MAV_BROADCAST = 1 to enable network)
INFO  [px4] Startup script returned successfully
pxh> INFO  [mavlink] partner IP: 127.0.0.1
[Wrn] [Event.cc:61] Warning: Deleting a connection right after creation. Make sure to save the ConnectionPtr from a Connect call
INFO  [ecl/EKF] 568000: GPS checks passed
INFO  [ekf2] Mag sensor ID changed to 197388
INFO  [ecl/EKF] 1792000: EKF aligned, (baro hgt, IMU buf: 18, OBS buf: 14)
INFO  [ecl/EKF] 1792000: reset position to last known position
INFO  [ecl/EKF] 1792000: reset velocity to zero
INFO  [ecl/EKF] 5151999: reset position to GPS
INFO  [ecl/EKF] 5151999: reset velocity to GPS
INFO  [ecl/EKF] 5151999: starting GPS fusion
INFO  [commander] ARMED by Arm/Disarm component command
INFO  [navigator] Takeoff to 50.0 meters above home.
INFO  [commander] Takeoff detected

pxh> 
pxh> 
pxh> 
pxh> failure gps off
ERROR [failure] Failure injection disabled by SYS_FAILURE_EN param.
Command 'failure' failed, returned 1.
pxh> param set SYS_FAILURE_EN 1
  SYS_FAILURE_EN: curr: 0 -> new: 1
pxh> failure gps off
pxh> 
pxh> 
pxh> WARN  [commander] Failsafe enabled: no global position
INFO  [commander] Failsafe mode activated
WARN  [navigator] Global position failure: fixed bank loiter
WARN  [ecl/EKF] 156320000: GPS data stopped
INFO  [ecl/EKF] 156320000: reset position to last known position
INFO  [ecl/EKF] 156320000: reset velocity to zero
WARN  [ecl/EKF] 156320000: stopping navigation

pxh> commander disarm
pxh> WARN  [commander] Disarming denied! Not landed

pxh> 
pxh> commander disarm -f
pxh> WARN  [commander] Disarming denied! Not landed
```

FYI @sfuhrer @RomanBapst </td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Flips/crashes in SITL</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14997</td>
																								<td>I stumbled upon weird failures in SITL with lockstep at 20x where the vehicle flips during RTL.

I've seen this at least twice now, and it's potentially related to #14835.

1: https://logs.px4.io/plot_app?log=4d4c672d-2330-4ab6-9c1d-215c09f4bbd7

2: https://logs.px4.io/plot_app?log=09114cbf-10fb-4fc9-8e2a-6f07cfa8297a

3: https://logs.px4.io/plot_app?log=f838236c-e6d6-41d6-ab82-a218ef39e900

4: https://logs.px4.io/3d?log=6b8d6b58-808a-43ed-b1a8-a07b38acca1b

5: https://logs.px4.io/plot_app?log=a6130dd5-6178-4578-ad54-45225f9b4ed7

6: https://logs.px4.io/plot_app?log=1bff7bd0-7b1a-4e17-8073-ee30625cc36f

**To reproduce:**

I get these by running the MAVSDK SITL tests at 20x in Ubuntu 18.04 in VirtualBox (on a Linux host):

```
DONT_RUN=1 make px4_sitl gazebo mavsdk_tests && test/mavsdk_tests/mavsdk_test_runner.py test/mavsdk_tests/configs/sitl.json --abort-early --model iris --speed-factor 20 --iterations 20 --verbose
```</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Drone flies towards old mission waypoint on arm, when no current=1 is set on new mission</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14981</td>
																								<td>**Describe the bug**
When a mission is stopped midway, and the drone then lands, receives a new mission with all items having ``current=0`` parameters and is armed again, the drone immediately flies towards the waypoint from the old mission, instead of executing the first item on the new mission. This crashed our drone as it tilts and tries to fly forward before properly "takeoff" to a safe altitude, thus catching the ground with the landing struts.  

The resetting of ``mission_current`` seems to happen upon arming, but there seems to be some sort of race-condition, as the drone reports ``mission_current`` to reset to 0 upon arming, but the log shows the drone still gets a setpoint for the old waypoint and tries to fly that, before the ``mission_current`` index reset is realised.

Thomas Stauber spotted that our velocity controller asked for a 3m/s horizontal velocity immediately upon arming, which indicated that the drone was flying towards an old mission item.
![image](https://user-images.githubusercontent.com/7889925/82942796-d4aa5700-9f98-11ea-85f8-13f5744f75a6.png) 

**To Reproduce**
Steps we did to reproduce the behaviour:
1. Fly normal mission
2. Before normal mission finishes, switch mode to "land now" or "RTL" and land the drone
3. Start new flight with identical mission. (It uploads the same mission again, but doesn't clear the old one first)
4. Arm and send "start_mission" command
5. Drone attempts to fly to the waypoint it was at in the last mission and thus flip in the direction of that waypoint.

**Expected behavior**
Upon uploading a new mission with no ``current=1`` parameters set, we would expect the drone to reset the current-index of mission items to 0. Intuitively I would expect the index to get reset when the PX4 accepts the new mission and sends ``MAV_MISSION_ACCEPTED`` and not first on arming the drone. 

**Log Files and Screenshots**
flight log: https://review.px4.io/plot_app?log=116b78e1-7732-4e6e-acf8-88e640d8cdfc 
video of the takeoff and flip: https://nextcloud.sdu.dk/index.php/s/46H7m9TXgXkQqQF

log from our GCS rosbag, showing the ``mission_current`` is not reset until arming, but keeps the old missions current index. The new mission had been uploaded and accepted by the PX4 before this snippet from the log:
```
---
data: 0
---
data: 0
---            <----------- a second before it changes to 15, the flightmode of the FC is set to "Auto - Mission". It appears the current_waypoint change is due to the flightmode being changed
data: 15
---
data: 15
---
data: 15
---
data: 15
---
data: 15
---            <----------- Right at the same time it goes from 15 to 0, is when the drone report it is "armed". So it seems like the index isn't reset until the drone is armed
data: 0
---
data: 0
---
data: 0
---
```


**Drone (please complete the following information):**
- Hexacopter using Pixhawk 2.1 Cube
- (The long legs shown on the video are due to testing, we know they are long, ugly and doesn't help make it stable)
- SD-card for PX4: Scandisk Edge 16GB - Class 4

**Additional context**

As soon as we added ``current=1`` on the first item of the new mission we can no longer reproduce this error and we are using that fix for the time being. 
																								</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Mixer corner case with too low collective thrust and no airmode?</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14945</td>
																								<td>I had airmode disabled (`MC_AIRMODE` set to 0) and minimum thrust in stabilized on zero (`MPC_MANTHR_MIN` set to 0).

**Expected behavior**
The vehicle should fly normally as long as the collective thrust is high enough and have loose rate and attitude tracking temporarily when the thrust is too low to have full torque authority because two motors cannot ramp any lower.

**Describe the bug**
Instead it lost attitude tracking completely not even compensating with the two motors that were still in actuation range and never regained any authority even though I increased throttle to more than hover thrust. It even commanded the motors to stop completely.

**To Reproduce**
Steps to reproduce the behavior:
1. Flash master
2. Set `MC_AIRMODE` to 0 (default)
3. Set `MPC_MANTHR_MIN` to 0
4. Hover in stabilized mode
5. Start pushing roll back and forth
6. Lower thrust all the way to zero just very quickly and pull it up immediately again
7. See drone flipping multiple times and crashing

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=60177bc8-95ce-481f-9454-79ef03267a7c

![image](https://user-images.githubusercontent.com/4668506/82447708-f1322500-9aa8-11ea-8f82-e967faa229c7.png)

**Drone (please complete the following information):**
- Holybro QAV250
- I was testing https://github.com/PX4/Firmware/pull/14896, https://github.com/PX4/Firmware/pull/14823, https://github.com/PX4/Firmware/pull/14738, https://github.com/PX4/Firmware/pull/14551 based on 793eb821531191409aba3034606d6fad12d3be3a and am very convinced the problem is unrelated to the tested prs.

**Initial investigation**
My initial investigation brought me to the mixer since the rate and attitude setpoints and reactions looked very plausible but the `actuator_control` goes to -3.75 which I'm not completely sure if it's in the expected range and the actuator outputs first all go to idle and then completely to zero commanding the motors to stop without disarm, kill, land detection or ~failure detection~.

JFYI @bresch @bkueng </td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>[VTOL] Dangerous Back Transition </td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14933</td>
																								<td>@RomanBapst 

**Describe the bug**
If the drone overshoots on a back transition, it initiates a FW style U turn, which already scares me in SITL. 
![image](https://user-images.githubusercontent.com/48206725/82304684-ebf7ac00-99bc-11ea-87fd-41e822a4196f.png)
During this manoeuver the drone isn't capable of keeping the desired pitch, leading to a large drop in altitude, which makes the drone gain speed, which makes that the back transition doesn't finish.

Additionally, there is no support of the MC motors during the back transition. I would have expected them to [ramp up](https://docs.px4.io/master/en/advanced_config/parameter_reference.html#VT_B_TRANS_RAMP).

**To Reproduce**
It's not completely trivial to reproduce and it's not always entirely equal. Here is my setup with which I found the problem:
[bad_BT.zip](https://github.com/PX4/Firmware/files/4649422/bad_BT.zip)

Firmware  v1.11.0-beta2
-Gazebo: standard_vtol (modified sdf file to have stronger motors)
-Mission: simple mission using normal Takeoff waypoint to take off in FW mode (which is why I needed a stronger motor). Interestingly enough the back transition isn't the same when replacing the Takeoff waypoint with a VTOL takeoff waypoint.
-Parameters: mostly default, need to set CBRK_VTOLARMING = 159753 to allow arming in FW mode.

**Expected behavior**
1. The MC motors should ramp up during the back transition, independent of the take off method used.
2. (Even though it's a logical consequence of using FW L1 position control) IMO the drone shouldn't do this crazy U turn during transition. I'd be in favour of force-ending the transition when you are at the desired position even if the speed is too high.

**Log Files and Screenshots**
The first two logs are both with a FW takeoff, identical setup but the direction of the U turn is different. The third log shows the mission where FW takeoff has been replaced with VTOL Takeoff. It's interesting to see that the MC motors ramp up in this case.

https://logs.px4.io/plot_app?log=241b24bb-248a-4451-a7e0-4638565f9d34
https://logs.px4.io/plot_app?log=abe58451-984d-43e9-a8ac-31308bf0d66e

https://logs.px4.io/plot_app?log=99aa4c67-3e82-47d8-95a3-105c49280e6f

**Drone (please complete the following information):**
SITL Gazebo Standard VTOL with stronger motors

**Additional context**
Position controlled transitions have been introduced here: https://github.com/PX4/Firmware/pull/14405
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>CI SITL MC_offboard_rpyrt test intermittant failure</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14847</td>
																								<td>
![Screenshot from 2020-05-06 10-11-55](https://user-images.githubusercontent.com/84712/81187436-0b84e280-8f82-11ea-8f03-3bf941297a56.png)


http://ci.px4.io:8080/blue/organizations/jenkins/PX4_misc%2FFirmware-SITL_tests_ASan/detail/master/1747/pipeline/57
https://logs.px4.io/plot_app?log=423ec840-cc41-45de-8efb-71053cb26936
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>EKF2 yaw estimate diverges on VIO stop/restart - v1.11-beta</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14840</td>
																								<td>**Describe the bug**
The EKF yaw estimate diverges if external vision data is stopped and restarted. This is easily reproducible in hand/bench tests.

**To Reproduce**
Steps to reproduce the behavior:
1. Start sending EV yaw data.
2. Check QGC, EKF yaw estimate looks fine and matches EV.
3. Stop sending EV data.
4. Check QGC, EKF yaw estimate is spinning out of control.
5. Start sending EV data again
6. Check QGC, EKF yaw resets to correct EV value, but then continues spinning out of control.

**Expected behavior**
1. The yaw estimate falls back to compass after EV stop (?)
2. The yaw estimate follows the external vision data after EV restart. 

**Log Files and Screenshots**

![image](https://user-images.githubusercontent.com/5557676/81130915-60d7da00-8f17-11ea-80ba-511c14d4fa75.png)

Log from boot: https://logs.px4.io/plot_app?log=c0a43438-fb28-45fd-9a5b-92329748fb93</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Takeoff denied in HITL Simulation with Gazebo</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14721</td>
																								<td>**Describe the bug**
When running a HITL setup with Gazebo, I can arm (the rotors in Gazebo start spinning) but I cannot takeoff. QGC's error message is only "Takeoff command temporarily rejected". In the log it says "Critical: Takeoff denied! Please disarm and retry". Doing so leads to the same result.
A SITL setup with Gazebo works fine. Using JMavSim in a HITL setup works perfectly, too.
One difference I have noticed when comparing my error scenario to the two that work: QGC says the value of Alt (Rel) is NaN (or --.-- on the HUD).

**To Reproduce**
Steps to reproduce the behavior:
1. Install the development toolchain according to the [Toolchain Installation](https://dev.px4.io/v1.9.0/en/setup/dev_env.html).
2. Follow the [instructions for setting up a HITL simulation](https://dev.px4.io/v1.9.0/en/simulation/hitl.html) with Gazebo.
    a) In step 4 of the Simulation Setup for Gazebo I use `/dev/tty.usbmodem01` on my MacBook Pro. On an iMac I've had to use `/dev/tty.usbmodem1`.
    b) In a recent commit the iris world was removed, so instead of running Gazebo as in step 5 of the Gazebo Setup section, I've had to run `make px4_sitl gazebo` again to achieve the same result. I have already had the described problem before this change was made.
3. After starting QGC in step 6 of the instructions for the Gazebo Setup, arm the drone and select Takeoff in QGC.

**Expected behavior**
The drone should takeoff without errors and I should be able to see that it does so in the Gazebo client.

**Log Files and Screenshots**
Flight log file: [Log file link](https://review.px4.io/plot_app?log=629eabe0-cfbb-4cd8-ad61-29d150175b0f)

**Drone:**
I am using an FMUK66 board by NXP.

**Additional context**
I am running macOS 10.15.4.
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Some AUX pwm outputs go lower on arm</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14675</td>
																								<td>**Describe the bug**
When the UAV is armed (via RC), some AUX pwm outputs (actuator_outputs_1) shortly go to a lower value, although this is not commanded via an actuator_control message. It seems that this only happens with AUX outputs who's PWM_AUX_DIS is set.

**To Reproduce**
Steps to reproduce the behavior:
1. change PWM_AUX_DIS2 (or another) from -1 to 100
2. (set SDLOG_MODE 0 -> 1)
3. pre-arm UAV via onboard arm-switch
4. arm via RC
5. see in log: during 2nd arming the actuator_outputs_1[1] goes down for a short while

**Expected behavior**
The output should be following the commanded value via the mixer file, thus stay constant.

**Log Files and Screenshots**
*Always* provide a link to the flight log file:
- 1st log: modified firmware [PX4 Flight Review](https://logs.px4.io/plot_app?log=45d2537b-d485-4103-9a95-22cfb1819fef), [AUX output chart](https://logs.px4.io/plot_app?log=45d2537b-d485-4103-9a95-22cfb1819fef#Nav-Actuator-Outputs-AUX).
PWM_AUX_DIS2 and PWM_AUX_DIS3 set to 100 (AUX output 1 & 2).
Note that the lower value is 1050 and ramps up to commanded value.
Used mixer: 
actuator_outputs_1[0] = actuator_control_0[7] (landing gear)
actuator_outputs_1[1] = actuator_control_2[1] (mount pitch)
actuator_outputs_1[2] = actuator_control_2[4] (mount custom)

- 2nd log: PX4 v1.10.0, vmount enabled [PX4 Flight Review](https://logs.px4.io/plot_app?log=d626193a-b86e-4510-a230-463f0c6caed6), [AUX output chart](https://logs.px4.io/plot_app?log=d626193a-b86e-4510-a230-463f0c6caed6#Nav-Actuator-Outputs-AUX).
PWM_AUX_DIS2 set to 100 (AUX output 1).
Note that the lower value goes to 100, then 1050 and ramps up to commanded value.
Used mixer: mount activated

- 3rd log: PX4 v1.10.0, default mixer [PX4 Flight Review](https://logs.px4.io/plot_app?log=20112ab9-12fe-4f15-96a0-fb3691030048), [AUX output chart](https://logs.px4.io/plot_app?log=20112ab9-12fe-4f15-96a0-fb3691030048#Nav-Actuator-Outputs-AUX).
PWM_AUX_DIS2 set to 100 (AUX output 1).
Note that the lower value goes to 100, then 1050 and ramps up to commanded value.
Used mixer: default (pass trough?)

Add screenshots to help explain your problem.
1st log:
![Screenshot from 2020-04-15 14-58-24](https://user-images.githubusercontent.com/6920950/79339729-92b5dc00-7f29-11ea-8c76-4ff6cbde7cbb.png)
*Note that the arming_state is scaled
2nd and 3rd log:
![Screenshot from 2020-04-15 14-49-29](https://user-images.githubusercontent.com/6920950/79339402-1f13cf00-7f29-11ea-940e-988a3dafd4d9.png)
*Note that the arming_state is scaled


**Drone (please complete the following information):**
- octo/quadcopter
- PX4 1.10.0

**Additional context**
Add any other context about the problem here.
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>[fixed wing]nose down after mission mode</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14313</td>
																								<td>**Describe the bug**
When I switch the flight mode from stablize to mission, the plane have a strange nose down and power max immidately, I haven't see that before, and the speed is enough to level flight, but I think maybe some problem about airspeed because I haven't airspeed sensor, the speed is depend on the groundspeed from GPS.
the flight log is below:
https://logs.px4.io/plot_app?log=1a3116dd-d687-470f-8cb3-31740f9e0ac6
speed:
![image](https://user-images.githubusercontent.com/5361334/76086296-c9293e80-5fee-11ea-8d6c-6f25fe57bebd.png)

nose down immidately
![image](https://user-images.githubusercontent.com/5361334/76086550-3f2da580-5fef-11ea-9f3b-dc2734474338.png)
</td>
																								<td>open</td>
																								<td></td>
																							</tr>
																							<tr>
																								<td>Altitude hold not working with GPS as primary height source and GPS blending enabled</td>
																								<td>https://github.com/PX4/PX4-Autopilot/issues/14267</td><td>Autopilot= Pixhawk 4
Firmware= Branch based on v1.10

**Describe the bug**
Altitude hold not working when GPS is the primary height source and we are blending two different GPS modules (one is ublox and one ashtech).


**To Reproduce**
Steps to reproduce the behavior:
1) Set the primary height mode to GPS (EKF2_HGT_MODE=1)
2) Enabled GPS blending (EKF2_GPS_MASK=3)
3) Takeoff to about 1 meter. --> the drone started going down. I started counteracting with the sticks but it was still going down. 


**Log Files and Screenshots**
Blending enabled but baro as primary height source (this works fine): https://review.px4.io/plot_app?log=1da0b48b-deed-4963-8efa-e3a646b20018

Blending enabled and gps as primary height source (issue) - log1: https://review.px4.io/plot_app?log=2c5ab2b2-38a4-4d37-ad4c-e2bb3e564966

Blending enabled and gps as primary height source (issue) -log2: https://review.px4.io/plot_app?log=c65eae25-6f75-4583-849f-11567e01d231
</td>
																							<td>open</td>
																							<td></td>
																						</tr>
																						<tr>
																							<td>Runway takeoff not tracking</td>
																							<td>https://github.com/PX4/PX4-Autopilot/issues/14262</td>
																							<td>Runway takeoff (on fixed wing with the nose gear on its own channel) is not tracking. It immediately veers off to the right substantially taking it off the runway. 

3 logs of this with one log having large gains and unlimited travel for good measure on the wheel controller.

To further test this we took another aircraft in a different location and recreated. That log is not attached but it obeyed in the identical way.

There is more than enough wheel authority, no errors, mag issues, etc so understanding the lack of tracking and any mission start yields to veering off to the right would be important to understand.

https://review.px4.io/plot_app?log=d7858c28-bb1f-49df-9df5-c8fd04755a80
(vibration only because it was taken at high speed off the runway)

https://review.px4.io/plot_app?log=0d6e9b1f-1d37-43fb-a673-c19de0298fac
(Immediate right upon initiating the mission - only look at the mission portion of the log)

https://review.px4.io/plot_app?log=65c49e9f-61a4-4a75-8813-4ce66160a4c4
(Immediate right upon initiating the mission - only look at the mission portion of the log but with larger wheel rate gains for good measure.)


It would seem like something is wrong for it to always want to go hard right first. Is this a bug or something that simply now needs to be re-tuned so there is a much more subdued effect on the WR controller's abilities? I just find it strange since this did occur occasionally over the years but not every time which is happening now. 


Firmware: 1.9.2
Pixhawk with 2mb of flash</td>
																							<td>open</td>
																							<td></td>
																						</tr>
																						<tr>
																							<td>Failsafe for position loss in Offboard mode</td>
																							<td>https://github.com/PX4/PX4-Autopilot/issues/14076</td>
																							<td>**Describe the bug**
When a position loss event occurs while in Offboard mode (which requires a valid position estimate), the vehicle performs a blind land failsafe, despite the fact that COM_POSCTL_NAVL is configured to "Assume R/C, switch to altitude mode..." and there is a remote control.

**To Reproduce**
Stream VISION_POSITION_ESTIMATE mavlink messages to simulated Iris copter (in Gazebo), switch to offboard and fly to a waypoint (via SET_POSITION_TARGET_LOCAL_NED message). While the drone is flying to the waypoint, stop sending VISION_POSITION_ESTIMATE messages.

**Expected behavior**
I would have expected that the failsafe obeys the COM_POSCTL_NAVL parameter and switches to Altitude mode (hight estimation was valid due to barometer). I also tried the same thing in Position mode and there it actually does switch to Altitude mode as expected.

**Log Files and Screenshots**
https://review.px4.io/plot_app?log=62c8308a-bd4d-4185-8db9-1e45d6e9efa0
INFO  [ecl/EKF] 36996000: EKF commencing external vision position fusion
INFO  [ecl/EKF] 36996000: EKF commencing external vision yaw fusion
WARN  [ecl/EKF] 75820000: EKF ev hgt timeout - reset to baro
WARN  [mc_pos_control] Position-Control Setpoint-Update failed
WARN  [mc_pos_control] Failsafe: blind land
INFO  [ecl/EKF] 77532000: EKF External Vision Data Stopped
WARN  [ecl/EKF] 77540000: EKF stopping navigation

For comparison, this is the output when flying in Position-mode:
INFO  [ecl/EKF] 533328000: EKF commencing external vision position fusion
INFO  [ecl/EKF] 533328000: EKF commencing external vision yaw fusion
WARN  [commander] Failsafe enabled: no local position
WARN  [ecl/EKF] 560472000: EKF ev hgt timeout - reset to baro
INFO  [ecl/EKF] 562184000: EKF External Vision Data Stopped
WARN  [ecl/EKF] 562192000: EKF stopping navigation

**Drone (please complete the following information):**
Iris in Sitl Gazebo, with PX4 1.10.0
</td>
																							<td>open</td>
																							<td></td>
																						</tr>
																						<tr>
																							<td>SITL takeoff intermittent failures</td>
																							<td>https://github.com/PX4/PX4-Autopilot/issues/13684</td>
																							<td>**Describe the bug**
Sometimes, when starting a mission using QGC, I get the warning "manual control lost" right on arming/takeoff. Sometimes afterwards the vehicle won't takeoff.
Sometimes, I don't see the "manual control lost" warning but it does not take off anyway.
This happened with `standard_vtol`.

**To Reproduce**
1. Start SITL
2. Upload mission from QGC
3. Wait for GPS lock and press "Start Mission" 

**Expected behavior**
It should not lose RC if RC is sent from QGC. And it should takeoff when QGC tells it to do so.

```
pxh> INFO  [ecl/EKF] 5900000: EKF commencing GPS fusion
pxh> WARN  [commander] Manual control lost
ERROR [navigator] mission update failed
ERROR [navigator] mission check failed
WARN  [mc_pos_control] Failsafe: stop and wait
INFO  [logger] closed logfile, bytes written: 3506011
```

**Logs**

Manual control lost, and not taking off:
https://logs.px4.io/plot_app?log=cc4c6fd3-38d6-430d-9f11-047c2ea7251a

Not taking off:
https://logs.px4.io/plot_app?log=5adecad5-c0af-4166-8e69-5eaa1a48e98c
</td>
																							<td>open</td>
																							<td></td>
																						</tr>
																						<tr>
																							<td>Flight Speed control doesn't always work</td>
																							<td>https://github.com/PX4/PX4-Autopilot/issues/13671</td>
																							<td>**Describe the bug**
When a "Flight Speed" is attached to a waypoint in QGC, the speed is not always used. This behavior is intermittent but happens more often than not.

![image](https://user-images.githubusercontent.com/4399188/70094566-9fb7db80-15d7-11ea-97dc-10a36c110c6e.png)

**To Reproduce**
This behavior is intermittent.

Steps to reproduce the behavior:
- Create mission with a "Flight speed" attached to a waypoint
- Upload to flight controller
- Take off and fly in mission mode.

**Expected behavior**
New speed is used.

**Log Files and Screenshots**
- Log: https://logs.px4.io/plot_app?log=36040896-dbc3-48d4-baab-ec18c0ed29bd
- Plan: [no-speed-control.plan.txt](https://github.com/PX4/Firmware/files/3918981/no-speed-control.plan.txt)

**Drone (please complete the following information):**
- Tarot X6 (with Tarot retracts)
- Pixhawk Cube 2.1
- Here2 GNSS
- PX4 1.10.0 rc2
- QGC daily 12/2/2019 Win10
- Gremsy S1 Gimbal connected to Telem2 (Mavlink)

**Additional context**
This feels **very** similar to this bug https://github.com/PX4/Firmware/issues/13474 In fact, I had an ROI waypoint in the plan and speed control and both were sometimes ignored. If one worked, the other seemed to usually work. If the ROI failed, the speed control would typically fail also. It seems like the messages from the piece of the firmware that processes the mission items are often ignored.
</td>
																							<td>open</td>
																							<td></td>
																						</tr>
																						<tr>
																							<td>Navigator running erratic or very slow</td>
																							<td>https://github.com/PX4/PX4-Autopilot/issues/13536</td><td>**Describe the bug**
We had a flight where the `vehicle_status.nav_state` was set to `NAVIGATION_STATE_AUTO_RTL` for about 0.6 seconds and no message or triplet from navigator was published, as if it was not running.

In the logfile below there are times where RTL should have been engaged by navigator because the nav state was set:
- 279 s / 7.02 --> **No reaction from navigator**
- 280.5 s --> RTL actions were taken again
- 284.5 s --> RTL actions were taken again

**To Reproduce**
Not sure.

**Expected behavior**
RTL should have been initiated.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=7c4e2956-6ab5-409f-a2ac-0b908652a1de

![rtl times](https://user-images.githubusercontent.com/1419688/69232983-58b7f800-0b8c-11ea-8354-fec0e9814cfb.png)

**Additional context**
Navigator is polling on local_position and there are regular updates of this topic.

We need to investigate the effects of accessing the SD card in some of the navigator modes when not inactive. E.g. Mission and Rtl modes check mission items respective rally points even if not active! Also, we check for geofences set in every iteration.

FYI @MaEtUgR </td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Drone rotates towards setpoints in Precision Land flight mode in 1.9.x and 1.10.0</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/13498</td>
																						<td>Drone rotates towards setpoints and subsequently fails to land on the target if precision landing starts outside of the mission (by command `commander mode auto:precland`) . The drone yaw was always **0** in **1.8.x**. The worst part is that I can't reproduce this behavior in **SITL** or **HITL**.

**Steps to reproduce the behavior:**

1. Takeoff above **IR-Lock** beacon.
2. Call `commander mode auto:precland`.
3. Watch the precision landing process.

**Expected behavior**
The drone yaw must always be constant to perform a successful precise landing.

**Log Files and Screenshots**
[Log](https://logs.px4.io/plot_app?log=85b20945-deca-4b19-b7d5-7cc8e6bdc2c7)

![Yaw Angle](https://user-images.githubusercontent.com/36663802/69052720-c80cdb00-0a18-11ea-930b-90ee223e75bb.png)

**Drone:**
F450-based Quadrotor x


																							<img src="https://user-images.githubusercontent.com/36663802/69053177-e1625700-0a19-11ea-87fc-fe5b8a49d399.jpg" alt="photo_2019-11-18_15-39-53" height=800px />
																						</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>ROI waypoints don't always work</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/13474</td>
																						<td>**Describe the bug**
Occasionally (maybe 50% of the time) an ROI waypoint will not be processed. This bug has been present since at least 1.8.2 (when I started using PX4). When I was using 1.8.2, I was using a PWM driven gimbal hooked to the AUX port. Now, I am using 1.10.0-rc1 and experiencing the same bug with a Mavlink connected gimbal. Completely different hardware,

**To Reproduce**
This behavior is intermittent and hard to regularly reproduce.

Steps to reproduce the behavior:
1) Create mission with a "ROI" waypoint and possibly a "Cancel ROI"
2) Upload to flight controller
3) Take off and fly in mission mode.

**Expected behavior**
The gimbal will point at the ROI waypoint. If a "Cancel ROI" waypoint is issued, the gimbal will return to a neutral position.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=566767d5-5d67-4d58-add6-fad66e1579d9

Flight plan:
[ROI.txt](https://github.com/PX4/Firmware/files/3848510/ROI.txt)

In the flight above an ROI waypoint is added. Sometimes the gimbal will point at the ROI waypoint as it should. On some flights it wont. Attached to the last waypoint is a "Cancel ROI" waypoint which doesn't always cancel the ROI. Several flights were performed as well as several reboots of the AP. The results were an inconsistent mix of everything working to nothing.

**Drone (please complete the following information):**
- Tarot X6 (with Tarot retracts)
- Pixhawk Cube 2.1
- Here2 GNSS
- PX4 1.10.1rc1
- QGC 3.5.5
- Gremsy S1 Gimbal connected to Telem2 (Mavlink)

**Additional context**
I have verified the gimbal is working correctly. My MNT_MODE_IN is set to "AUTO" and I can always control the gimbal pointing angle via RC. The problem only occurs when a ROI waypoint is used to control the gimbal. I have verified that this behavior also exists when the MNT_MODE_IN is set to "MAVLINK_ROI".

I am eager to do as many test flights as necessary to get this resolved. If additional logging is required, please provide instructions to enable logs. I am also willing and able to build new firmware.
</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Rover: GPS loss leads to "fixed bank loiter" instead of just stopping</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/13467</td>
																						<td>When the GPS position is lost during a mission, the rover switches to a "fixed bank loiter", which is nice for a fixed wing aircraft, but not necessary for a ground vehicle.
(I just tested in SITL and not with a real rover.)

**To Reproduce**
Steps to reproduce the behavior:
1. Start rover and QCG
2. create and upload a mission and start the mission
3. turn off GPS in nxh with `gpssim stop` at any point in the mission
4. obverse two warning messages in QGC
```
WARN  [commander] Failsafe enabled: no global position
WARN  [navigator] Global position failure: fixed bank loiter
```

**Current behavior**
The vehicle outputs cruising? throttle (PWM 1665) and a zero degree steering angle (PWM 1492). The roll set point is set to 15 degrees, which has no effect on a rover.

**Expected behavior**
Just stop driving

**Log Files and Screenshots**
- Flight log: https://logs.px4.io/plot_app?log=b8a6959a-7e85-4ebb-8473-d9d930775e3e
</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Aircraft not automatically disarming while in Land flight mode</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/13408</td>
																						<td>**Describe the bug**
I'm having an issue where my hexacopter will not disarm once the aircraft has landed. The aircraft was flown in Position flight mode (or Stabilize flight mode) and then changed to Land flight mode. The aircraft is able to successfully descend and touch the ground successfully. However, instead of disarming, the motors speed up, which results in the aircraft wanting to tip over and crash.

I have looked on the internet and I have found that it is important to get the hover throttle percentage correct as well as  the manual minimum throttle percentage. I have adjusted these values but still no success. I also changed the parameter (COM_DISARM_LAND) to 0.1 seconds, but still no success.

I know that there isn’t an issue with the actual aircraft as I have managed to successfully perform a mission using APM firmware, where it was able to land and disarm safely.

Is this possibly an issue with the firmware or does someone perhaps know a solution to this problem?

P.S. I have disabled the arming switch (changed parameter CBRK_IO_SAFETY from 0 to 22027)
 
**To Reproduce**
Steps to reproduce the behavior:
1. Disable arming switch
2. Change flight mode to Position or Stabilize
3. Arm & takeoff to an altitude between (5 - 10 metres)
4. Switch flight mode to Land

**Expected behavior**
The aircraft should land and disarm successfully and not want to tip over and crash.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=bc0410c1-4285-4781-bf1b-b6ddee3b120d

**Drone**
DJI F550 Flame Wheel (hexacopter)

</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>[HIL VTOL Offboard] set_attitude() not working</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/13209</td>
																						<td>**Describe the bug**
Setting offboard attitude setpoints doesn't work for VTOLs in HIL simulation. The last attitude setpoint from before sending atttitude setpoints is kept instead.

This problem persists even with @irsdkv's fix #13141, even though now a few of the setpoints are registered : 
![bokeh!UNITO-UNDERSCORE!plot(7)](https://user-images.githubusercontent.com/48206725/66927391-0422d980-f030-11e9-8f88-6df6be4b9e81.png)

**To Reproduce**
Steps to reproduce the behavior:

1. Switch to branch of PR #13141 (optional, but recommended)
1. Start HIL simulation with the standard VTOL model (Gazebo)
1. Launch MAVSDK offboard example.
1. Observe the problem

**Expected behavior**
The vehicle should follow the offboard setpoints, like in this log where the MAVSDK offboard example works with Iris quadcopter in HIL: 
https://logs.px4.io/plot_app?log=f032c92d-ffa3-4831-a730-977bbb8e229e

**Log Files and Screenshots**
Standard VTOL, HIL:
https://logs.px4.io/plot_app?log=1fae08b3-82f3-4a45-b5d9-ff997bb9e7a3

**Drone (please complete the following information):**

* HIL Standard VTOL QuadPlane, sys_autostart = 1002
* Pixhawk 4 is the used hardware

**Additional context**
#13141 fixes the problem for SITL, but interestingly enough not for HIL. Without #13141, it makes sense that it's not working, whereas with it I really don't know why the old setpoint persists.

</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>[MC / VTOL] Take off ramp overshoots MPC_TKO_SPEED constraint</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12689</td>
																						<td>**Describe the bug**
During the take off ramp, the vehicle doesn't respect the MPC_TKO_SPEED constraint. Instead, the vehicle accelerates to MPC_Z_VEL_MAX_UP even when below MPC_LAND_ALT1 (and after finishing the ramp it slows down again if still below MPC_LAND_ALT1).

**To Reproduce**
Steps to reproduce the behavior:

1. Start SITL (tested with Gazebo's standard VTOL plane, but I imagine it's the same for any MC)
1. Set up parameters (tested with MPC_TKO_SPEED =1m/s, MPC_Z_VEL_MAX_UP = 2.5m/s, MPC_TKO_RAMP_T = 5s, MPC_LAND_ALT1 = 10m in SITL, and with MPC_TKO_SPEED =1.5m/s, MPC_Z_VEL_MAX_UP = 2.5m/s, MPC_TKO_RAMP_T = 5s, MPC_LAND_ALT1 = 12m in the real world)
1. Take off

I experienced this behaviour with the take off command in QGC as well as launching missions. It's reproducible in SITL and on our real VTOL drone.

**Expected behavior**
Have the vehicle respect the MPC_TKO_SPEED during the take off ramp

**Log Files and Screenshots**
_Always_ provide a link to the flight log file:
https://logs.px4.io/plot_app?log=a9e878be-395a-45ee-8f72-40db4b265931

Add screenshots to help explain your problem.
![Screenshot from 2019-08-13 10-45-52](https://user-images.githubusercontent.com/48206725/62927814-9a7c1a00-bdb7-11e9-9d7d-ab972713cbd2.png)

**Drone (please complete the following information):**

* Tested on standard VTOL in Gazebo and a v-tail quadplane in the real world
* SITL was tested on both on v1.9.0 and current (13.08.19) master, real drone runs v1.9.0 on a Cube

On a side note: why does QGC complain about MPC_TKO_RAMP_T having to be between 0 and 1 and in the parameter reference it says between 0 and 5?

</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Incorrect log publisher topic by commander modules</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12670</td>
																						<td>**Describe the bug**
I have a problem where my global position is invalid and failsafe is triggered. I checked the source code and the failsafe should be triggered by `commander` module.
However, logged message indicated that it was published by `commander_tests`. Which wasn't running at that time.

I've check other people log and it seems that they all have the same problem in both SITL and actual hardware such as
In SITL: https://github.com/PX4/Firmware/issues/9178
In hardware: https://logs.px4.io/plot_app?log=e226431c-9515-456c-8d45-d2fd22d0d68b
In my case, hardware (See **Logged Messages** at the time of 00:11:04
`[commander_tests] Failsafe enabled: no global position`): https://logs.px4.io/plot_app?log=1e614d6c-d948-43c2-ba40-b0312aceaa83

All log indicated `[commander_tests] Failsafe enabled: no global position` (or local) which should be `[commander]` instead.

After some digging and searching through the code. I found that `state_machine_helper.cpp` and `PreflightCheck.cpp` is being included in SRCS of `CMakeLists.txt` of both `commander_test` and `commander`. Moreover, `commander_test` is being compiled and linked before `commander`. Which might be the possible cause of this bug.

I am using a derived v1.8.2, but this part is untouched. Also, v1.9.2 still exhibit the same code.

commander_test cmake: https://github.com/PX4/Firmware/blob/v1.9.2/src/modules/commander/commander_tests/CMakeLists.txt
commander cmake: https://github.com/PX4/Firmware/blob/v1.9.2/src/modules/commander/CMakeLists.txt

I think mavlink log pub handler might incorrectly assume the source of the message based on the first module name that it is being compiled.

**To Reproduce**
Make anything that triggers a logged message that output from `state_machine_helper.cpp` or `PreflightCheck.cpp` inside src/modules/commander. It will be logged as `[commander_tests]`

**Expected behavior**
Log should indicate that publisher is `[commander]`

**Additional context**
I know that my vibration is severe, but that's not the case for this bug.
</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Fixedwing throttle 0 in mission mode</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12530</td>
																						<td>hello 
I use pixhawk 2.1 as the hardware and px4 version is 1.9.2.
My fixed-wing plane took off in manual mode. But when I change flight mode into mission, autopilot will shut down throttle. 
What should I do to slove this problem?
This is flight review: https://logs.px4.io/plot_app?log=f6fe68da-652e-46c7-8d1c-758b804a8939
Thanks.</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Low takeoff is not getting executed</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12471</td>
																						<td>**Describe the bug**
When the takeoff altitude is set too low (< than around 0.7 meters) using the param `MIS_TAKEOFF_ALT` a quadcopter won't takeoff but just auto-disarm again.

**To Reproduce**
Steps to reproduce the behavior:
1. Start SITL jMAVSim or Gazebo
2. `param set MIS_TAKEOFF_ALT 0.5`
3. `commander takeoff`

**Expected behavior**
It should still take off even if the altitude is quite low.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=b5802f74-4a52-42f2-8f31-0bbf01fa84e9

**Additional context**
This currently makes the MAVSDK integration test `ActionTakeoffAndKill` fail.

																						</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Takeoff vs init race in SITL</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12264</td>
																						<td>Sometimes when I'm to eager to do `commander takeoff` and not everything is initialized as it should I can get into the state where the takeoff is not executed properly.

```
INFO  [ecl/EKF] EKF aligned, (pressure height, IMU buf: 22, OBS buf: 14)

pxh> 
pxh> commander takeoff
ERROR [commander] rejecting takeoff, no position lock yet. Please retry..
Command 'commander' failed, returned 1.
pxh> INFO  [ecl/EKF] EKF GPS checks passed (WGS-84 origin set)
pxh> commander takeoff
ERROR [commander] rejecting takeoff, no position lock yet. Please retry..
Command 'commander' failed, returned 1.
pxh> INFO  [ecl/EKF] EKF commencing GPS fusion
pxh> commander takeoff
ERROR [commander] rejecting takeoff, no position lock yet. Please retry..
Command 'commander' failed, returned 1.
pxh> commander takeoff
pxh> WARN  [navigator] Already higher than takeoff altitude
INFO  [logger] closed logfile, bytes written: 1644561
```

https://logs.px4.io/plot_app?log=86eed90e-0e5c-41a7-bd3a-47daf256458c</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>altitude mode not failing, when all height sources are missing</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12074</td>
																						<td>When flying in Altitude mode and all height sources failed (GPS and Baro), PX4 does not switch to stabilized mode but stays in altitude mode, which is obviously not possible to achieve any more. (Only tested in jmavsim STIL)

**To Reproduce**
Steps to reproduce the behavior:

1. Start jmavsim SITL simulation with QGroundControl (with on screen RC inputs enabled or using a RC via USB/ Serial)
1. type `commander takeoff` in the PX4 shell
1. the vehicle takes off and holds position
1. change to position mode in QGC
1. type `gpssim stop` in the PX4 shell
1. PX4 switches from position mode to altitude
1. stop/ disable the barometer (`barosim stop` in the PX4 shell)
1. PX4 stays in altitude mode
1. (I switched to manual to be able to land the vehicle and then disarmed/ emergency stopped in QGC)

The issue is the same, if the barometer fails first (then PX4 will do a failover to GPS height) and GPS is turned off second.

**Expected behavior**
PX4 should switch from altitude to stabilized or at least print a warning in QGC.

**Log Files and Screenshots**
https://logs.px4.io/plot_app?log=0d53ff6b-2cb8-4955-8940-05f1bb611fff
(I still had a patch running, that disables the magnetometer, so there is no mag data. But this does not affect the issue.)

**Additional context**
Here is my patch which adds a `stop` command to the `barosim`:

```patch
diff --git a/src/modules/simulator/barosim/baro.cpp b/src/modules/simulator/barosim/baro.cpp
index 86a370fbac..6d263a39b9 100644
--- a/src/modules/simulator/barosim/baro.cpp
+++ b/src/modules/simulator/barosim/baro.cpp
@@ -308,7 +308,7 @@ info()
static void
usage()
{
- PX4_WARN("missing command: try 'start', 'info'");
+ PX4_WARN("missing command: try 'start', 'stop', 'info'");
}

}; // namespace barosim
@@ -332,6 +332,16 @@ barosim_main(int argc, char *argv[])
ret = barosim::start();
}

+ else if (!strcmp(verb, "stop")) {
+ if (g_barosim != nullptr) {
+ delete g_barosim;
+ g_barosim = nullptr;
+ } else {
+ PX4_WARN("already stopped.");
+ }
+ ret = 0;
+ }
+
/*
* Print driver information.
*/
```

</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>FW review RTL loiter behaviour</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/12035</td>
																						<td>From https://discuss.px4.io/t/plane-flyaway-recovery-rtl-loiter-then-flew-away/10991.

https://logs.px4.io/plot_app?log=a204d10b-a40d-4c05-9bb6-6f2c23bf574c

> I found that putting a FIXED WING LANDING PATTERN in the mission FROM the preset “pattern” icon/button, then setting the RTL mode to head for the landing 1st (NOT head directly to home), causes the plane to go to that loiter-to-land pattern and subsequently line up to the runway and land correctly. That preset FW landing pattern is very nice - much nicer than basic waypoint and land. thx to the coder!
> .
> However, even with this fw landing pattern in place and working as such, if i tried to use the RTL mode that just flies directly to home, with the RTL conditions set to loiter for (time) 45sec then land, the plane would loiter for 45secs, then proceed to fly away in the direction of its choice. BUG!
> .

</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Problem with MAVLINK_MSG_ID_HIL_ACTUATOR_CONTROLS</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/11697</td>
																						<td>**Repro**: run [AirSim](https://github.com/Microsoft/AirSim) with latest v1.8.2 firmware on Pixhawk v2 in HIL_QUADROCOPTER_X mode.  Try and take off, nothing happens, rotors do not spin.

The PX4 status shows MAV_MODE_FLAG_HIL_ENABLED and AirSim is getting MAVLINK_MSG_ID_HIL_ACTUATOR_CONTROLS , but the actuator control values in the message are all zeros all the time even when my RC radio throttle is set to full.

See my [px4 log file](https://logs.px4.io/plot_app?log=b69e4688-8dd7-43d9-b965-6c2d1bea2aab).  You can see my manual Throttle input in "Manual Control Inputs" graph - but these throttle values are not making it out to the HIL_ACTUATOR_CONTROLS message.

If I move my Pixhawk back to version 1.7.0 of the PX4 Firmware then everything works fine.  Has something changed recently in the mavlink protocol with PX4 in this area?  

Note that if I also connect to nuttx shell the commander seems happy enough, but still sending no actuator controls to AirSim:
```
nsh> commander status
commander status
WARN  [commander] type: symmetric motion
WARN  [commander] safety: USB enabled: [OK], power state valid:  [OK]
WARN  [commander] home: lat = 47.6728307, lon = -122.1229818, alt = NaN, yaw: 0.08
WARN  [commander] home: x = 0.0055329, y = 0.0004450, z = NaN
WARN  [commander] datalink: OK
WARN  [commander] main state: 11
WARN  [commander] nav state: 18
WARN  [commander] arming: STANDBY
nsh> commander arm
commander arm
nsh> STATUS: sev=6, 'ARMED by command line'
STATUS: sev=6, '[logger] file: /fs/microsd/log/2019-03-21/21_00_2'
commander takeoff
commander takeoff
nsh> STATUS: sev=6, 'Using minimum takeoff altitude: 2.50 m'
    PX4_CUSTOM_MAIN_MODE_AUTO
    PX4_CUSTOM_SUB_MODE_AUTO_TAKEOFF
commander land
commander land
nsh> STATUS: sev=6, 'Landing at current position'
com    PX4_CUSTOM_MAIN_MODE_AUTO
    PX4_CUSTOM_SUB_MODE_AUTO_LAND
commander disarm
nsh> STATUS: sev=6, 'DISARMED by command line'
```

px4 parameters: [params.zip](https://github.com/PX4/Firmware/files/2993971/params.zip)

Note: the same scenario works fine with v1.8.2 SITL build of PX4.  So something different with HITL...</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>vtol front transition height drop</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/11467</td>
																						<td>I use 1.8.1 code. When the VTOL conversion is completed, the throttle drops and the plane drops. The given pitch is positive, but the actual pitch is negative. It takes a while for the pitch to rise again. Does anyone know how to debug it?The log is on
[https://logs.px4.io/plot_app?log=d1482f4d-880f-48fa-aca3-023fddb0eed5](http://url)
Thanks!

</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Tailsitter throttle drops to 0 after forward transition.</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/11220</td>
																						<td>**Describe the bug**
Throttle output thrust drop to 0 (zero) after forward FW transition is completed in any mode that has auto throttle control. This happens randomly, some flight does, some flight don't. Same configuration, same aircraft, same location.

Right after forward transition, the aircraft dropped throttle output from forward transition throttle value to zero as shown on the log below. 
https://logs.px4.io/plot_app?log=5f2f02c7-d2bd-4ff3-9d10-c48c87272d2f

![throttle drop1](https://user-images.githubusercontent.com/2929677/51170909-268d9800-18e2-11e9-84b2-8bf6c784387e.png)

This behavior also occurred in any other mode that has auto throttle control (Altitude, Position) but does not always occur on every flight. The log below is the flight without this behavior.
https://logs.px4.io/plot_app?log=4eed6594-9aaf-4026-a571-202857b4c387

![throttle not drop](https://user-images.githubusercontent.com/2929677/51170920-30170000-18e2-11e9-8a4d-04d18d5eb008.png)

Besides the above log which is from an actual flight test, we also conducted bench test in position mode to reproduce this behavior. The throttle drop also occurred in the same way as the actual flight test. The logs from bench test are presented below.

**To Reproduce**
Steps to reproduce the behavior (on bench-test):
1. Put the aircraft in position mode (multi-rotor).
2. Arm the aircraft.
3. Raise throttle input to be above 50%.
4. Raise the aircraft itself by hand.
5. Flip the transition switch from MC to FW.
6. Flip the aircraft from vertical to horizontal orientation (this is a tailsitter) 
7. Accelerate the airflow in the front of the aircraft from 0 m/s to transition airspeed gradually.
8. Aircraft should switch from MC to FW and throttle should drops to zero.

**Expected behavior**
Throttle should not drop to zero and causing it to be uncontrollable.

**Log Files and Screenshots**
First figure (throttle drop): https://logs.px4.io/plot_app?log=5f2f02c7-d2bd-4ff3-9d10-c48c87272d2f
2nd figure (throttle not drop): https://logs.px4.io/plot_app?log=4eed6594-9aaf-4026-a571-202857b4c387
Bench-test attempt
Attempt1: https://logs.px4.io/plot_app?log=cade9885-e8c0-48e0-a730-1658fb1c69c4
Attempt2: https://logs.px4.io/plot_app?log=e38fdf1f-58cd-4fd9-8ce1-a964cee2b72e
Attempt3: https://logs.px4.io/plot_app?log=2ac76818-9c41-4b5e-b865-1a74b5623578
Attempt4: https://logs.px4.io/plot_app?log=fe89ef0b-9b6d-4473-8810-911d028d638d
Attempt5 (w/o drop) : https://logs.px4.io/plot_app?log=ebd3c67a-2ebf-4028-ac8d-216dc5e25822

**Drone:**
Airframe config: Duo Tailsitter

![bat-electronicsdiagram](https://user-images.githubusercontent.com/2929677/51171068-78362280-18e2-11e9-9a99-d8721863ed69.png)

![img_6755 resized](https://user-images.githubusercontent.com/2929677/51171775-550c7280-18e4-11e9-8ae3-417ab1ce65e6.JPG)</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Magnetometer Calibration seems not possible for external MAG on CAN Bus</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/10621</td>
																						<td>**Describe the bug**
I always have inconsistent magnetometers, despite many calibration dances

Looking at the parameter settings there are no calibration settings for the external mag
![image](https://user-images.githubusercontent.com/30323691/46333687-902eb280-c621-11e8-8883-1d0eba29b60e.png)


**To Reproduce**
Steps to reproduce the behavior:
1. Drone switched on '...'
2. Uploaded mission '....' (attach QGC mission file)
3. Took off '....'
4. See error

**Expected behavior**
A clear and concise description of what you expected to happen.

**Log Files and Screenshots**
*Always* provide a link to the flight log file:
- Download the flight log file from the vehicle ([tutorial](https://docs.px4.io/en/getting_started/flight_reporting.html)).
- Share the link to a log showing the problem on [PX4 Flight Review](http://logs.px4.io/).

Add screenshots to help explain your problem.

**Drone (please complete the following information):**
- Describe the type of drone.
- Photo of the IMU / autopilot setup if possible.

**Additional context**
Add any other context about the problem here.</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td>Large negative Pitch Setpoint at takeoff, hand launched Fixed Wing</td>
																						<td>https://github.com/PX4/PX4-Autopilot/issues/10076</td>
																						<td>Most of our fixed wing flight logs show a large negative step input to the pitch command right at Takeoff.  I think the "minimum pitch" param in the Takeoff Waypoint overrides this, but behind the scenes something is wrong.

I've seen users attempt to auto-takeoff to a non-Takeoff Waypoint and the vehicle immediately noses into the ground.

I suspect some bad interactions between LandDetector and typical ground handling of hand launched fixed wings, but I'm not sure what exactly...  (fyi @dagar we discussed previously).

![image](https://user-images.githubusercontent.com/12117027/43370412-3c14b920-9344-11e8-8599-5b2aa06673f4.png)

Here are a number of logs that show this issue right at Takeoff:
https://review.px4.io/plot_app?log=80301c1d-fac9-4a8a-a5e1-870927233e64
https://review.px4.io/plot_app?log=6f7119a2-c6c3-4d0c-88e5-8debcf59e88f
https://review.px4.io/plot_app?log=a8b193bc-f3d7-4cab-ae3e-ba0302c1834b
https://review.px4.io/plot_app?log=13dcbb27-7d97-49d4-94d3-0f092d283c7c

Related PR that attempts to improve Fixed Wing takeoff, might need to look into the root cause of this issue here:
https://github.com/PX4/Firmware/pull/9243</td>
																						<td>open</td>
																						<td></td>
																					</tr>
																					<tr>
																						<td></td>
																						<td>&nbsp</td>
																						<td>&nbsp</td>
																						<td>&nbsp</td>
																						<td>&nbsp</td>
																					</tr>
																				</tbody>
																			</table>
																		</body>
																	</html>