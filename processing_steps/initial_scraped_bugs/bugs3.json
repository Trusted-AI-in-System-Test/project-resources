{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19573","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19573/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19573/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19573/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19573","id":1223959205,"node_id":"PR_kwDOAFDaZs43OHF7","number":19573,"title":"Increase Battery level emergency shutdown time delay","user":{"login":"junwoo091400","id":23277211,"node_id":"MDQ6VXNlcjIzMjc3MjEx","avatar_url":"https://avatars.githubusercontent.com/u/23277211?v=4","gravatar_id":"","url":"https://api.github.com/users/junwoo091400","html_url":"https://github.com/junwoo091400","followers_url":"https://api.github.com/users/junwoo091400/followers","following_url":"https://api.github.com/users/junwoo091400/following{/other_user}","gists_url":"https://api.github.com/users/junwoo091400/gists{/gist_id}","starred_url":"https://api.github.com/users/junwoo091400/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junwoo091400/subscriptions","organizations_url":"https://api.github.com/users/junwoo091400/orgs","repos_url":"https://api.github.com/users/junwoo091400/repos","events_url":"https://api.github.com/users/junwoo091400/events{/privacy}","received_events_url":"https://api.github.com/users/junwoo091400/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-05-03T11:13:27Z","updated_at":"2022-07-07T13:09:42Z","closed_at":"2022-07-07T13:09:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19573","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19573","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19573.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19573.patch","merged_at":"2022-07-07T13:09:42Z"},"body":"**Describe problem solved by this pull request**\r\nThe Battery cell count parameter of the Mantis has been changed from 3 to 4 (which triggers the Battery emergency warning), and was rebooted. **The vehicle would power up (start-up tune plays for 300 ms), and then shut down immediately.**\r\n\r\nThis leaves the user puzzled as to what's happening (I thought it was bricked), and doesn't give enough time to assess the situation and modify the necessary changes (e.g. changing the battery cell count parameter for my example).\r\n\r\n**Describe your solution**\r\nI**ncrease Battery level emergency shutdown time delay from 300 ms to 60 seconds**, to give enough time for the user to configure the vehicle in the mean time. 60 second window is intended to be a reasonable time that will allow the user to figure out what's going on (via checking the battery level on QGC, etc) but also not deep discharge the battery to a dangerous level.\r\n\r\n**Describe possible alternatives**\r\n\r\n\r\n**Test data / coverage**\r\nTested on ATL Mantis Edu (after flashing this version, the bricked behavior was gone and was able to change the parameter).\r\n\r\n**Additional context**\r\n* It seems like the Battery warning beeper is not working for now (which would be very helpful for the user to recognize that the battery is the problem!), any reason why this could be happening?\r\n* Currently it sends the event & mavlink message describing that it's shutting down due to battery level being low, but is there a way to send this during the 60 second period? Would that be necessary?","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19573/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19571","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19571/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19571/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19571/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19571","id":1223064642,"node_id":"PR_kwDOAFDaZs43LTmK","number":19571,"title":"drivers/rc_input: ensure RC inversion is disabled initially","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-05-02T16:06:52Z","updated_at":"2022-05-11T18:30:43Z","closed_at":"2022-05-11T18:30:42Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19571","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19571","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19571.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19571.patch","merged_at":"2022-05-11T18:30:42Z"},"body":" - this allows jumping straight to a non-SBUS RC protocol\r\n - minimal v1.13 bug fix for non-SBUS RC on a pixracer (https://github.com/PX4/PX4-Autopilot/pull/19564)\r\n - increased the scan time per protocol 300->500 ms, which the newer DSM parser seems to need in some cases.\r\n - only set RC_INPUT_PROTO if we've had a successful RC lock for > 3 seconds","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19571/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19560","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19560/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19560/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19560/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19560","id":1220670587,"node_id":"PR_kwDOAFDaZs43Dbrx","number":19560,"title":"offboard land detection","user":{"login":"NicolasM0","id":59083163,"node_id":"MDQ6VXNlcjU5MDgzMTYz","avatar_url":"https://avatars.githubusercontent.com/u/59083163?v=4","gravatar_id":"","url":"https://api.github.com/users/NicolasM0","html_url":"https://github.com/NicolasM0","followers_url":"https://api.github.com/users/NicolasM0/followers","following_url":"https://api.github.com/users/NicolasM0/following{/other_user}","gists_url":"https://api.github.com/users/NicolasM0/gists{/gist_id}","starred_url":"https://api.github.com/users/NicolasM0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicolasM0/subscriptions","organizations_url":"https://api.github.com/users/NicolasM0/orgs","repos_url":"https://api.github.com/users/NicolasM0/repos","events_url":"https://api.github.com/users/NicolasM0/events{/privacy}","received_events_url":"https://api.github.com/users/NicolasM0/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-29T12:12:30Z","updated_at":"2022-06-27T14:40:35Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19560","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19560","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19560.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19560.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nWe use offboard mode to control our quadrotor.\r\nWe generate a trajectory in z position with consistent derivatives.\r\nWhen we land, our z position increase downward, z speed converge to our target (1m/s downward) and our z acceleration converges to 0 when the speed stabilizes.\r\n\r\nThe issue is that when we hit the ground, land detector detect it but the position control detect that we want to takeoff so thrust increase and it never disarm.\r\n\r\nThe takeoff detection is due to our z acceleration been about 0 but with a very small oscillation that makes point upward  by moments.\r\n\r\nHere is a log with one false detection : https://review.px4.io/plot_app?log=ced2541e-fd20-4fd3-88c6-2f284262bc95\r\n\r\n**Describe your solution**\r\nin offboard mode, if we have a valid z position setpoint superior (so more downward) than estimated, do not consider we want to take off. Same thing on z speed.\r\n\r\nThis solution will change the behavior: in offboard mode, if we have a valid z position setpoint more downward than estimated and a speed setpoint pointing upward, we will no longer consider we want to take off.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19560/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19539","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19539/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19539/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19539/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19539","id":1215375084,"node_id":"PR_kwDOAFDaZs42xYtd","number":19539,"title":"drivers/rc_input: RC_INPUT_PROTO parameter minimal implementation","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-04-26T04:31:25Z","updated_at":"2022-04-28T17:27:51Z","closed_at":"2022-04-28T03:06:43Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19539","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19539","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19539.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19539.patch","merged_at":"2022-04-28T03:06:43Z"},"body":"This is a minimal version of https://github.com/PX4/PX4-Autopilot/pull/19285 that fixes the `drivers/rc_input` problem where CRSF and GHST protocols can be falsely detected due to a nearly identical wire format. Following the next release the common `drivers/rc_input` module will be split into dedicated drivers per protocol.\r\n\r\nBy default the existing `drivers/rc_input` behavior is maintained, but with a new parameter`RC_INPUT_PROTO` that always manually specifying the protocol. Additionally the parameter is set to the RC protocol on the first successful decode, so future sessions will skip the scanning entirely.\r\n\r\nCo-authored-by: chris1seto <chris12892@gmail.com>\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19539/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19534","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19534/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19534/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19534/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19534","id":1214671810,"node_id":"PR_kwDOAFDaZs42vCg6","number":19534,"title":"mavlink: delete Mavlink instance if early startup fails","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-25T15:19:07Z","updated_at":"2022-04-25T16:38:29Z","closed_at":"2022-04-25T16:38:28Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19534","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19534","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19534.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19534.patch","merged_at":"2022-04-25T16:38:28Z"},"body":"Small bug discovered during https://github.com/PX4/PX4-Autopilot/pull/19529. If there's an error in `Mavlink::task_main()` and it exits early the mavlink instance isn't deleted.\r\n\r\nThe entire mavlink module lifecycle management could use a bit of an overhaul, but this should be an acceptable short term fix for v1.13.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19534/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19532","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19532/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19532/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19532/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19532","id":1214161413,"node_id":"PR_kwDOAFDaZs42tXXQ","number":19532,"title":"ekf: robustify bad_acc_vertical check","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-04-25T08:32:58Z","updated_at":"2022-04-25T16:58:19Z","closed_at":"2022-04-25T16:58:19Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19532","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19532","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19532.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19532.patch","merged_at":"2022-04-25T16:58:19Z"},"body":"**Describe problem solved by this pull request**\r\nThe `bad_acc_vertical` flag is too sensitive to velocity innovation spikes. In the log below, a spike in the vertical velocity innovation ratio (`innov / sqrt(Var(innov))`) triggers the acceleration failure flag because the baro innovation ratio is positive too. However, the baro innovation ratio is really close to zero and being positive should not be a reason to trigger that flag.\r\n![DeepinScreenshot_select-area_20220425102327](https://user-images.githubusercontent.com/14822839/165050554-d1933d10-35d4-4895-901c-8b3c4f99d829.png)\r\n\r\n**Describe your solution**\r\nWhen the vertical pos or vel innov ratio is above the threshold (>3 sigma), the other one needs to be significant too (>1 sigma) and not just positive to trigger the failure.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19532/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19524","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19524/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19524/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19524/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19524","id":1212715310,"node_id":"PR_kwDOAFDaZs42pJMv","number":19524,"title":"px4flow allow delayed background startup","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-22T19:44:36Z","updated_at":"2022-04-23T01:11:03Z","closed_at":"2022-04-23T01:11:02Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19524","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19524","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19524.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19524.patch","merged_at":"2022-04-23T01:11:02Z"},"body":"On px4_fmu-v5x the peripheral power is cycled at init and things like the px4flow need more time to be available and successfully probe.\r\n\r\nThis is a bit ugly, but works for now. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19524/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19520","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19520/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19520/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19520/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19520","id":1212102543,"node_id":"PR_kwDOAFDaZs42nKt7","number":19520,"title":"Mission: don't do anything in set_current_mission_index() when index=current already","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-22T09:41:34Z","updated_at":"2022-04-23T02:32:07Z","closed_at":"2022-04-23T02:32:07Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19520","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19520","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19520.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19520.patch","merged_at":"2022-04-23T02:32:06Z"},"body":"\r\n**Describe problem solved by this pull request**\r\nWhen using MAV_CMD_MISSION_START to start a Mission on the ground, one gets the following sequence (including printfs here for context):\r\n```\r\n\r\nINFO  [commander] Armed by mission start\t\r\n_navigator->get_mission_result()->valid: 1\r\nindex: 0, _current_mission_index: 0, _mission.count: 11\r\nWARN  [navigator] CMD_MISSION_START failed\r\nINFO  [navigator] Takeoff to 20.0 meters above home\r\n```\r\nSo it complains about that the mission start failed, but then it takes off still and flies perfectly fine.\r\n\r\n**Describe your solution**\r\nDon't do anything in set_current_mission_index() when index=current already, and return true.\r\n\r\n\r\n**Test data / coverage**\r\nSITL - with a groundstation that sends CMD_MISSION_START when starting the Mission while still disarmed.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19520/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19514","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19514/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19514/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19514/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19514","id":1210161073,"node_id":"PR_kwDOAFDaZs42g-54","number":19514,"title":"drivers/device/nuttx/I2C: only issue I2C_RESET() if retrying, and only before the next retry","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-20T20:07:40Z","updated_at":"2022-09-15T22:42:31Z","closed_at":"2022-09-15T22:42:30Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19514","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19514","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19514.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19514.patch","merged_at":"2022-09-15T22:42:30Z"},"body":"With drivers like the INA226 running in the background in case of late connect we were issuing I2C_RESET constantly.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19514/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19510","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19510/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19510/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19510/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19510","id":1209744687,"node_id":"PR_kwDOAFDaZs42fp-j","number":19510,"title":"FlightTaskAuto: remove _land_heading and instead directly set _yaw_setpoint (fixes weather vane landings)","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-20T14:07:27Z","updated_at":"2022-04-23T16:14:43Z","closed_at":"2022-04-23T16:14:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19510","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19510","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19510.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19510.patch","merged_at":"2022-04-23T16:14:42Z"},"body":"**Describe problem solved by this pull request**\r\nWhen weather vane is enabled, we don't want to set any heading setpoint during Land, only yawspeed. Unless land help (nudging) is enabled and the yaw stick deflected, then both the yawspeed and yaw setpoint are set by that.\r\nThis functionality was already working correctly and acting on the `_yawspeed_setpoint`, but not yet on the `_yaw_setpoint`, as that one got overwritten by the `_land_heading`, that in turn was set during the init and only overwritten by the nudging (but not WV). \r\n\r\n**Describe your solution**\r\n~Remove `_land_heading` and instead set `_yaw_setpoint` directly.~\r\nEDIT:  Weather vane should only set a yawrate setpoint, but no yaw setpoint. Setting it to NAN when WV is active makes sure that whatever _yaw_setpoint is set previously (e.g. through Waypoint) is not used.\r\n\r\n**Test data / coverage**\r\nSITL tested with a standard VTOL.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19510/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19510/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19506","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19506/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19506/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19506/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19506","id":1209361406,"node_id":"I_kwDOAFDaZs5IFWP-","number":19506,"title":"MPU9250 not found after v1.12.0 on BeagleBone blue","user":{"login":"navunlimited","id":66091353,"node_id":"MDQ6VXNlcjY2MDkxMzUz","avatar_url":"https://avatars.githubusercontent.com/u/66091353?v=4","gravatar_id":"","url":"https://api.github.com/users/navunlimited","html_url":"https://github.com/navunlimited","followers_url":"https://api.github.com/users/navunlimited/followers","following_url":"https://api.github.com/users/navunlimited/following{/other_user}","gists_url":"https://api.github.com/users/navunlimited/gists{/gist_id}","starred_url":"https://api.github.com/users/navunlimited/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navunlimited/subscriptions","organizations_url":"https://api.github.com/users/navunlimited/orgs","repos_url":"https://api.github.com/users/navunlimited/repos","events_url":"https://api.github.com/users/navunlimited/events{/privacy}","received_events_url":"https://api.github.com/users/navunlimited/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":4147343828,"node_id":"LA_kwDOAFDaZs73M3HU","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug-report","name":"bug-report","color":"376B2E","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2022-04-20T08:36:40Z","updated_at":"2022-08-07T01:28:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nI was able to make MPU9250 work ok on v1.11.3. But here are other issues about pwm test and esc calibration since bblue pwm mapping is different from PX4 default. So I tried to update to newer version v1.12.3 since there are new board_pwm_out files there. After recompile and upload the v1.12.3, MPU9250 cannot be found at all. So, I tried v1.12.0. The issue is the same. It seems that PX4-Autopilot/src/drivers/imu/mpu9250 directory is removed or combined into invensense/mpu9250 after v1.12.0. But something goes wrong.\r\nPS. pwm functions seem not working as well since escs keep beeping after lunch px4.....   \r\n\r\n**To Reproduce**\r\ncompiling v1.12.0 or v1.12.3 and uploading.\r\nrun ./bin/px4 -s px4.config\r\n \r\n\r\n**Expected behavior**\r\nbmp280 #0 on I2C bus 2\r\nmpu9250 #0 on I2C bus 2\r\n\r\n\r\n**Log Files and Screenshots**\r\ndebian@beaglebone:~/px4$ sudo ./bin/px4 -s px4.config\r\nINFO  [px4] mlockall() enabled. PX4's virtual address space is locked into RAM.\r\nINFO  [px4] assuming working directory is rootfs, no symlinks needed.\r\n\r\n______  __   __    ___\r\n| ___ \\ \\ \\ / /   /   |\r\n| |_/ /  \\ V /   / /| |\r\n|  __/   /   \\  / /_| |\r\n| |     / /^\\ \\ \\___  |\r\n\\_|     \\/   \\/     |_/\r\n\r\npx4 starting.\r\n\r\nINFO  [px4] Calling startup script: /bin/sh px4.config 0\r\nINFO  [parameters] BSON document size 127 bytes, decoded 127 bytes\r\n  BAT1_V_CHANNEL: curr: -1 -> new: 5\r\nINFO  [dataman] Unknown restart, data manager file './dataman' size is 11798680 bytes\r\nbmp280 #0 on I2C bus 2 address 0x76\r\nWARN  [SPI_I2C] UnknownApp: no instance started (no device on bus?)\r\nINFO  [commander] LED: open /dev/led0 failed (22)\r\nINFO  [mavlink] mode: Normal, data rate: 1000000 B/s on udp port 14556 remote port 14550\r\nINFO  [drivers_board] Initializing librobotcontrol ...\r\nINFO  [logger] logger started (mode=all)\r\nINFO  [mavlink] using network interface SoftAp0, IP: 192.168.8.1\r\nINFO  [mavlink] with netmask: 255.255.255.0\r\nINFO  [mavlink] and broadcast IP: 192.168.8.255\r\nINFO  [px4] Startup script returned successfully\r\n\r\n\r\n**Drone (please complete the following information):**\r\n- Beaglebone Blue\r\n\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19506/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19505","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19505/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19505/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19505/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19505","id":1208679189,"node_id":"PR_kwDOAFDaZs42cUQ-","number":19505,"title":"mc_pos_control: filter velocity before derivative and switch to AlphaFilter","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-04-19T17:59:29Z","updated_at":"2022-10-20T00:54:35Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19505","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19505","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19505.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19505.patch","merged_at":null},"body":"Investigating the root cause of small oscillations in multicopter position control modes. One possibility is the noisy velocity derivative.\r\n\r\nhttps://logs.px4.io/plot_app?log=e807f10a-f1d4-4527-b59f-9a4da6ff770e\r\n\r\n![Screenshot from 2022-04-19 12-31-30](https://user-images.githubusercontent.com/84712/164066526-c6b79e50-c60f-49aa-8564-5c310c3cc067.png)\r\n\r\n\r\nI believe this is coming from the acceleration (velocity derivative) used by the multicopter position controller when `MPC_XY_VEL_D_ACC` is non-zero.\r\n![Screenshot from 2022-04-19 14-04-14](https://user-images.githubusercontent.com/84712/164067478-5e618b57-542e-4311-88b2-a50da9474f00.png)\r\n![Screenshot from 2022-04-19 14-09-30](https://user-images.githubusercontent.com/84712/164068328-c18ccf45-3fd0-4d30-a27b-d277d64420b5.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19505/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19491","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19491/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19491/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19491/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19491","id":1205772386,"node_id":"I_kwDOAFDaZs5H3qBi","number":19491,"title":"RP2040 suport. problem with start on Pi Pico","user":{"login":"svs072477","id":34767128,"node_id":"MDQ6VXNlcjM0NzY3MTI4","avatar_url":"https://avatars.githubusercontent.com/u/34767128?v=4","gravatar_id":"","url":"https://api.github.com/users/svs072477","html_url":"https://github.com/svs072477","followers_url":"https://api.github.com/users/svs072477/followers","following_url":"https://api.github.com/users/svs072477/following{/other_user}","gists_url":"https://api.github.com/users/svs072477/gists{/gist_id}","starred_url":"https://api.github.com/users/svs072477/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/svs072477/subscriptions","organizations_url":"https://api.github.com/users/svs072477/orgs","repos_url":"https://api.github.com/users/svs072477/repos","events_url":"https://api.github.com/users/svs072477/events{/privacy}","received_events_url":"https://api.github.com/users/svs072477/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":5237363302,"node_id":"LA_kwDOAFDaZs8AAAABOCvSZg","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Boards%20(flight%20controller)%20%F0%9F%8D%AB","name":"Boards (flight controller) 🍫","color":"A88CD7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":36,"created_at":"2022-04-15T18:10:49Z","updated_at":"2023-12-07T14:34:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, I build  firmware for rp2040 with make raspberrypi_pico_default - it's OK. I convert .elf file to .uf2 with elf2uf2 tool.\r\nThen, I take pi pico board, connect to this board module G-91 with MPU9250 and BMP280, and upload firmware. \r\nAfter that, the LED on the board lit up. But the board has ceased to be defined as a usb device. And not connect to QGC.\r\nWhat could be the problem? What am I doing wrong?\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19491/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19491/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19490","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19490/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19490/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19490/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19490","id":1205108947,"node_id":"PR_kwDOAFDaZs42RHTx","number":19490,"title":"output modules simplify locking for mixer reset and load","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"assignees":[{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-04-14T23:41:49Z","updated_at":"2022-04-19T06:52:18Z","closed_at":"2022-04-19T06:52:17Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19490","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19490","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19490.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19490.patch","merged_at":"2022-04-19T06:52:17Z"},"body":" - fixes the deadlock in px4io ioctl mixer reset \r\n     - px4io Run() locks (CDev semaphore)\r\n     - mixer load goes through px4io ioctl MIXERIOCRESET which calls MixingOutput::resetMixerThreadSafe()\r\n     - MixingOutput::resetMixerThreadSafe() stores a Command::Type::resetMixer command in an atomic variable, schedules a work queue cycle, then sleep spins until the command is cleared\r\n     - the execution of the cycle eventually calls back into PX4IO::updateOutputs(), which tries to lock (and waits forever)\r\n\r\n\r\n\r\nThe fix is to make the output module locking simpler, always locking the full Run() and ioctl() call. This can be removed once the old mixers are purged post v1.13.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19490/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19487","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19487/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19487/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19487/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19487","id":1204723393,"node_id":"PR_kwDOAFDaZs42P1Sk","number":19487,"title":"mission block: fix incorrectly calculated ccw loiter exit","user":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"assignees":[{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-04-14T16:08:09Z","updated_at":"2022-04-19T11:30:13Z","closed_at":"2022-04-19T11:30:12Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19487","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19487","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19487.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19487.patch","merged_at":"2022-04-19T11:30:12Z"},"body":"**Describe problem solved by this pull request**\r\nAddresses #18595\r\nLoiter exit for fixed-wing landing was incorrectly calculated on counter clockwise loiters causing the aircraft to fly an offset approach vector.\r\n\r\n**Describe your solution**\r\nLoiter radius was signed in mission item, which means we need to take it's absolute value before doing trig operations (as they were currently implemented).\r\n\r\n**Test data / coverage**\r\nSITL with CCW landing. Aborted and let it go around one more time just for good measure.\r\n![screen_land_ccw](https://user-images.githubusercontent.com/8026163/163429011-4b8238d2-f3a9-4138-8e3f-29e2c12df2f9.png)\r\nAnd in CW direction just to make sure nothing else changed.\r\n![scrren_land_cw](https://user-images.githubusercontent.com/8026163/163429041-5e5a8798-a7cc-4287-9a99-99719ffdf68b.png)\r\n\r\n@ryanjAA @thomasteisberg\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19487/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19479","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19479/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19479/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19479/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19479","id":1202195422,"node_id":"PR_kwDOAFDaZs42Hs9X","number":19479,"title":"Tools/ecl_ekf: fix vibe_metrics usage (moved to vehicle_imu_status instances)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-12T17:44:27Z","updated_at":"2022-04-13T14:36:46Z","closed_at":"2022-04-13T14:36:45Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19479","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19479","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19479.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19479.patch","merged_at":"2022-04-13T14:36:45Z"},"body":"This broke when vibe metrics were removed from estimator_status. It's now handled per IMU instance in vehicle_imu_status.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19479/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19467","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19467/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19467/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19467/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19467","id":1199069416,"node_id":"PR_kwDOAFDaZs419PjR","number":19467,"title":"ekf2: properly reset IMU biases on calibration change (non-multi-EKF)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-10T15:13:40Z","updated_at":"2022-04-11T16:23:56Z","closed_at":"2022-04-11T16:23:55Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19467","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19467","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19467.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19467.patch","merged_at":"2022-04-11T16:23:55Z"},"body":" - this was working in the multi-EKF case using vehicle_imu, but missing in sensor_combined\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19467/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19466","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19466/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19466/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19466/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19466","id":1199060569,"node_id":"PR_kwDOAFDaZs419OEA","number":19466,"title":"ekf2: fix IMU missed perf count when not using multi-EKF","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-10T14:48:08Z","updated_at":"2022-04-10T15:07:33Z","closed_at":"2022-04-10T15:07:33Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19466","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19466","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19466.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19466.patch","merged_at":"2022-04-10T15:07:33Z"},"body":"![Screenshot from 2022-04-10 10-47-40](https://user-images.githubusercontent.com/84712/162625141-e61fc414-4357-40aa-a181-cdd7aabf55df.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19466/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19449","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19449/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19449/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19449/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19449","id":1195907574,"node_id":"PR_kwDOAFDaZs41zPVm","number":19449,"title":"Preflight checks: allow arming in land mode for MAVSDK compatibility","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-04-07T11:26:45Z","updated_at":"2022-04-08T07:56:48Z","closed_at":"2022-04-08T07:56:48Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19449","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19449","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19449.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19449.patch","merged_at":"2022-04-08T07:56:48Z"},"body":"**Describe problem solved by this pull request**\r\nAs stated by @julianoes in https://github.com/PX4/PX4-Autopilot/pull/19291#issuecomment-1076694121 the linked pr breaks compatibility to some MAVSDK tests and examples.\r\n\r\n**Describe your solution**\r\nTo fix that I'm allowing arming in land mode even though it was the purpose of #19291 .\r\n\r\n**Describe possible alternatives**\r\nThe suggested solution was to automatically change to a suitable mode to take off again after disarming. Until that's hashed out and implemented I suggest this in-between fix to make sure MAVSDK is unblocked.\r\n\r\n**Test data / coverage**\r\nI did not test this separately, please review.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19449/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19443","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19443/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19443/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19443/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19443","id":1194354439,"node_id":"I_kwDOAFDaZs5HMGcH","number":19443,"title":"Matek H743 mini doesn't autoconnect to QGC","user":{"login":"giacomo892","id":20860004,"node_id":"MDQ6VXNlcjIwODYwMDA0","avatar_url":"https://avatars.githubusercontent.com/u/20860004?v=4","gravatar_id":"","url":"https://api.github.com/users/giacomo892","html_url":"https://github.com/giacomo892","followers_url":"https://api.github.com/users/giacomo892/followers","following_url":"https://api.github.com/users/giacomo892/following{/other_user}","gists_url":"https://api.github.com/users/giacomo892/gists{/gist_id}","starred_url":"https://api.github.com/users/giacomo892/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giacomo892/subscriptions","organizations_url":"https://api.github.com/users/giacomo892/orgs","repos_url":"https://api.github.com/users/giacomo892/repos","events_url":"https://api.github.com/users/giacomo892/events{/privacy}","received_events_url":"https://api.github.com/users/giacomo892/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":5237363302,"node_id":"LA_kwDOAFDaZs8AAAABOCvSZg","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Boards%20(flight%20controller)%20%F0%9F%8D%AB","name":"Boards (flight controller) 🍫","color":"A88CD7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-04-06T09:44:29Z","updated_at":"2023-08-10T20:18:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nMatek H743 running master doesn't autoconnect to QGC when plugged via USB. Only way is to force a new comm link on the USB and then it connects.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Flash master on H743-Mini board\r\n2. Open QGC and wait, nothing happens\r\n\r\n**Expected behavior**\r\nBoard to connect\r\n\r\nThe board is completely silent con ttyACM0 while checking with screen so I guess that's why QGC doesn't autodetect a board being connected.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19443/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19426","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19426/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19426/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19426/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19426","id":1186781862,"node_id":"PR_kwDOAFDaZs41VGUh","number":19426,"title":"px4io: add RC update monotonic count","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-30T17:38:39Z","updated_at":"2022-04-13T04:16:03Z","closed_at":"2022-04-09T18:28:16Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19426","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19426","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19426.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19426.patch","merged_at":"2022-04-09T18:28:16Z"},"body":"This px4io change is to ensure we only publish a new valid RC update, rather than continuing to publish stale data until it's invalidated px4io side (200 ms).\r\n\r\nCurrently a bogus SBUS decode px4io side will continue to be published identically at 50 Hz until the timeout (200 ms), which then makes it much easier to slip through downstream protection mechanisms.\r\n\r\n![Screenshot from 2022-03-30 13-37-34](https://user-images.githubusercontent.com/84712/160897113-57c4ce1a-5155-4638-b907-cd88b4a52b5f.png)\r\n\r\n@NicolasM0 ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19426/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19410","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19410/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19410/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19410/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19410","id":1183573833,"node_id":"PR_kwDOAFDaZs41KbHU","number":19410,"title":"Fix reaction to rejected orbit command","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-28T15:01:36Z","updated_at":"2022-03-29T16:46:39Z","closed_at":"2022-03-29T16:46:38Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19410","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19410","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19410.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19410.patch","merged_at":"2022-03-29T16:46:38Z"},"body":"**Describe problem solved by this pull request**\r\nThis is a follow-up to https://github.com/PX4/PX4-Autopilot/pull/19362 fixing an already previoulsly existing bug. Thanks to @mrivi for finding it!\r\n\r\nWhen commanding a too large Orbit she got invalid setpoints. I figured out that’s because since the introduction the command handling for flight tasks (which is only used for orbit yet) switches to the most basic position mode flight task upon command parameter rejection.\r\n\r\n**Describe your solution**\r\n- Switch to the failsafe flight task when command parameters were not accepted.\r\n  - This makes the drone just stop and wait for further actions.\r\n  - This solves getting invalid setpoint messages when no RC is connected.\r\n  - This also solves ending up in an \"aggressive\" position mode unexpectedly.\r\n- Report \"denied\" instead of \"failed\" as the command result in the acknowledgment for invalid parameters because that matches the MAVLink definition see: https://mavlink.io/en/messages/common.html#MAV_RESULT \r\n- Inform the user directly from the Orbit command processing when the radius exceeds the limit. This needs to be backward compatible with `mavlink_log` since AMC doesn't support events yet.\r\n- Minor refactoring.\r\n\r\n**Test data / coverage**\r\nThis was tested in simulation to solve the issue and result in an improved user experience because of the error message and the correct command result.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19410/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19385","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19385/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19385/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19385/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19385","id":1178596529,"node_id":"PR_kwDOAFDaZs406DI5","number":19385,"title":"rc input robustness improvements","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-03-23T19:56:58Z","updated_at":"2022-03-30T17:58:40Z","closed_at":"2022-03-25T14:56:25Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19385","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19385","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19385.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19385.patch","merged_at":"2022-03-25T14:56:25Z"},"body":" - possible fixes for https://github.com/PX4/PX4-Autopilot/issues/19382\r\n\r\n@NicolasM0 can you give this a try?\r\n\r\nI'm also curious what's physically connected to your vehicle? If it's just decoding random garbage periodically I'm surprised it would get a consistent channel count.\r\n![Screenshot from 2022-03-23 15-55-13](https://user-images.githubusercontent.com/84712/159784727-1bf54f6d-ba1b-4e43-b555-062ed77631f6.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19385/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19383","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19383/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19383/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19383/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19383","id":1178539280,"node_id":"PR_kwDOAFDaZs40523q","number":19383,"title":"px_update_git_header:Extract NuttX latest release tag","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-23T18:59:58Z","updated_at":"2022-03-30T15:19:04Z","closed_at":"2022-03-30T15:19:03Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19383","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19383","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19383.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19383.patch","merged_at":"2022-03-30T15:19:03Z"},"body":"Fix the Nuttx version info","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19383/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19382","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19382/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19382/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19382/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19382","id":1178346635,"node_id":"I_kwDOAFDaZs5GPCSL","number":19382,"title":"random RC value causing kill switch without rc receptor attached","user":{"login":"NicolasM0","id":59083163,"node_id":"MDQ6VXNlcjU5MDgzMTYz","avatar_url":"https://avatars.githubusercontent.com/u/59083163?v=4","gravatar_id":"","url":"https://api.github.com/users/NicolasM0","html_url":"https://github.com/NicolasM0","followers_url":"https://api.github.com/users/NicolasM0/followers","following_url":"https://api.github.com/users/NicolasM0/following{/other_user}","gists_url":"https://api.github.com/users/NicolasM0/gists{/gist_id}","starred_url":"https://api.github.com/users/NicolasM0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicolasM0/subscriptions","organizations_url":"https://api.github.com/users/NicolasM0/orgs","repos_url":"https://api.github.com/users/NicolasM0/repos","events_url":"https://api.github.com/users/NicolasM0/events{/privacy}","received_events_url":"https://api.github.com/users/NicolasM0/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-03-23T16:13:54Z","updated_at":"2022-04-20T13:07:22Z","closed_at":"2022-04-20T13:07:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nDuring a flight in offboard mode without RC connected (no RC receptor connected to the autopilot), our drone crashed with \"[commander] Kill-switch engaged\" message.\r\n\r\nLooking at the log, I can see that after 10min of flight some messages are published on input_rc topics and at a moment, that triggers a kill switch.\r\n![rc_input](https://user-images.githubusercontent.com/59083163/159739457-e5ac2c62-44f0-405d-8d1a-ce19e6d2cfc8.png)\r\n\r\nThe `input_source` is 4: `RC_INPUT_SOURCE_PX4IO_SBUS`. messages are in the table below (removing RC lost messages)\r\n\r\n|timestamp|f_timestamp_last_signal|f_rssi|f_rc_lost_frame_count|f_rc_total_frame_count|f_rc_ppm_frame_length|f_values_0_|f_values_1_|f_values_2_|f_values_3_|f_values_4_|f_values_5_|f_values_6_|f_values_7_|f_values_8_|f_values_9_|f_values_10_|f_values_11_|f_values_12_|f_values_13_|f_values_14_|f_values_15_|f_values_16_|f_values_17_|f_channel_count|f_rc_failsafe|f_rc_lost|f_input_source|\r\n|---------|-----------------------|------|---------------------|----------------------|---------------------|-----------|-----------|-----------|-----------|-----------|-----------|-----------|-----------|-----------|-----------|------------|------------|------------|------------|------------|------------|------------|------------|---------------|-------------|---------|--------------|\r\n|726876831|726876831              |38    |0                    |0                     |0                    |1033       |874        |874        |953        |874        |874        |874        |874        |874        |2134       |1356        |874         |1514        |875         |874         |874         |998         |998         |18             |0            |0        |4             |\r\n|726898330|726898330              |38    |0                    |0                     |0                    |1033       |874        |874        |953        |874        |874        |874        |874        |874        |2134       |1356        |874         |1514        |875         |874         |874         |998         |998         |18             |0            |0        |4             |\r\n|737678520|737678520              |38    |0                    |0                     |0                    |874        |2114       |876        |874        |874        |1514       |913        |2114       |874        |890        |874         |952         |2014        |875         |874         |874         |998         |998         |18             |0            |0        |4             |\r\n|760675275|737678520              |38    |0                    |0                     |0                    |1654       |1713       |1513       |874        |874        |874        |874        |874        |1033       |874        |874         |953         |874         |874         |1794        |1558        |998         |1998        |18             |1            |0        |4             |\r\n|768666922|737678520              |38    |0                    |0                     |0                    |1832       |893        |1194       |953        |874        |874        |874        |874        |874        |874        |874         |874         |883         |874         |874         |2153        |998         |998         |18             |1            |0        |4             |\r\n|774278867|774278867              |38    |0                    |0                     |0                    |874        |874        |876        |874        |874        |874        |1994       |2153       |2074       |893        |874         |1913        |883         |874         |1994        |878         |998         |998         |18             |0            |0        |4             |\r\n|787076723|787076723              |38    |0                    |0                     |0                    |1032       |874        |1512       |1514       |1523       |875        |2014       |878        |874        |874        |1354        |949         |874         |874         |912         |2074        |998         |998         |18             |0            |0        |4             |\r\n|787469746|787469746              |38    |0                    |0                     |0                    |994        |874        |1494       |874        |879        |874        |874        |874        |874        |874        |874         |874         |2114        |875         |1994        |1513        |998         |998         |18             |0            |0        |4             |\r\n\r\n\r\nWhen the first input rc message is published we have a pwm_out message: `[pwm_out] instance: 0, max rate: 100, default: 50, alt: 50`\r\n\r\n\r\n**Log Files and Screenshots**\r\nI am not able to upload the log flight review (error: `500 Internal Server Error`). The log is here : https://drive.google.com/file/d/1fnVp8m0kPGOqecR0gfb8Nm3PBm5HBsQN/view?usp=sharing\r\n\r\n**Additional context**\r\nPX4 version: 1.12.3 + very few changes\r\nhardware: CUAV V5+\r\n\r\nThis crash happened yesterday and we reproduced the same issue on the ground today on the same board.\r\n\r\nWe really need to understand what happened because we have some systems flying with the same configuration.\r\nAny help would be very appreciated. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19382/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19369","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19369/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19369/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19369/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19369","id":1175933463,"node_id":"PR_kwDOAFDaZs40xLpx","number":19369,"title":"[WIP] ekf2: mag reset and heading cleanup","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-03-21T20:58:56Z","updated_at":"2023-08-31T14:37:23Z","closed_at":"2023-08-31T14:37:09Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19369","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19369","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19369.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19369.patch","merged_at":null},"body":"Requires https://github.com/PX4/PX4-Autopilot/pull/19384 first.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19369/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19368","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19368/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19368/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19368/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19368","id":1175932602,"node_id":"PR_kwDOAFDaZs40xLez","number":19368,"title":"[WIP] ekf2: mag reset and heading cleanup","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-21T20:57:55Z","updated_at":"2022-03-21T20:58:19Z","closed_at":"2022-03-21T20:58:09Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19368","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19368","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19368.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19368.patch","merged_at":"2022-03-21T20:58:09Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19368/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19365","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19365/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19365/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19365/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19365","id":1175365852,"node_id":"PR_kwDOAFDaZs40vTS5","number":19365,"title":"For linux: add a checker before inserting a schedule node into the queue.","user":{"login":"Ncerzzk","id":9284611,"node_id":"MDQ6VXNlcjkyODQ2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9284611?v=4","gravatar_id":"","url":"https://api.github.com/users/Ncerzzk","html_url":"https://github.com/Ncerzzk","followers_url":"https://api.github.com/users/Ncerzzk/followers","following_url":"https://api.github.com/users/Ncerzzk/following{/other_user}","gists_url":"https://api.github.com/users/Ncerzzk/gists{/gist_id}","starred_url":"https://api.github.com/users/Ncerzzk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ncerzzk/subscriptions","organizations_url":"https://api.github.com/users/Ncerzzk/orgs","repos_url":"https://api.github.com/users/Ncerzzk/repos","events_url":"https://api.github.com/users/Ncerzzk/events{/privacy}","received_events_url":"https://api.github.com/users/Ncerzzk/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-03-21T13:10:50Z","updated_at":"2022-06-27T14:40:33Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19365","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19365","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19365.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19365.patch","merged_at":null},"body":"Signed-off-by: ncer <huangzzk@bupt.edu.cn>\r\n\r\n**Describe problem solved by this pull request**\r\nTo issue:  #19358 \r\nhttps://github.com/PX4/PX4-Autopilot/issues/19358\r\n\r\nThere are chances to produce a cycle in schedule queue (`node-> flink == node`)on  linux. In such case, if we traverse the queue, we will trap in the loop.\r\n\r\n\r\n**Describe your solution**\r\nAdd a checker before insert the node into queue, to make sure the cycle would not be produced.\r\n\r\n**Test data / coverage**\r\ntry to restart px4 for sometimes(for weak cpu, just restarting PX4 can reproduce the issue. For stronger cpu, need to execute some commands like ` sudo i2cdetect -y -a 0` to cause schedule jitter )\r\n\r\n![20220321210455](https://user-images.githubusercontent.com/9284611/159266824-7d342be3-70e4-4121-a257-475a073b5331.jpg)\r\n（The Debug Info: \"Warning: cycle apear!\"  has been removed in the commit,  just to clearly show the issue reproduced)\r\n\r\nand because we have add the checker, we don't insert the node to produce a cycle. so the threads work normally:\r\n![20220321210512](https://user-images.githubusercontent.com/9284611/159266815-c2cda311-fcd1-484f-8066-82c5bf5dff06.jpg)\r\n\r\n\r\n**Additional context**\r\nPlease let me know if you have a batter ways to resolve this issue or advices.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19365/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19362","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19362/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19362/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19362/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19362","id":1175156623,"node_id":"PR_kwDOAFDaZs40umKM","number":19362,"title":"Increase orbit radius limit & reject out of range radius commands","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2022-03-21T10:09:50Z","updated_at":"2022-03-28T15:57:58Z","closed_at":"2022-03-28T15:57:57Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19362","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19362","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19362.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19362.patch","merged_at":"2022-03-28T15:57:56Z"},"body":"**Describe problem solved by this pull request**\r\nFor certain use cases the limit is just too low and if the limit is exceeded currently there a bug where the radius is just pruned instead of not executing the out of range orbit command.\r\n\r\nNote: Not rejecting out of range radiuses is a regression:\r\nhttps://github.com/PX4/PX4-Autopilot/commit/9bd46be1242535d5ec3da04c11d274aa22a2f805#diff-89127f427c1fc4e2fb02b97822ec75dc1bc7a4690ae4cd3aba8bc4f811250717L61\r\n\r\n**Describe your solution**\r\n- > the orbit radius is limited to 100m. If flying in open areas this limit is too strict.\r\n\r\n  Makes it configurable by parameter. I'm open to suggestions for the default.\r\n  \r\n- > When commanding a larger radius in AMC, it gets resized to 100m.\r\n\r\n  Fixes the bug by not acknowledging the command and stopping instead of executing the Orbit.\r\nThis is already better than just changing the radius and then starting to execute but it should be further improved with e.g. an error message and possibly by switching mode.\r\n\r\n**Test data / coverage**\r\nSITL testing with out-of-range radiuses and hitting the limit by stick input.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19362/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19361","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19361/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19361/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19361/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19361","id":1174962859,"node_id":"I_kwDOAFDaZs5GCIKr","number":19361,"title":"Unclear intention of sign function","user":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},{"login":"ThomasDebrunner","id":8969570,"node_id":"MDQ6VXNlcjg5Njk1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/8969570?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasDebrunner","html_url":"https://github.com/ThomasDebrunner","followers_url":"https://api.github.com/users/ThomasDebrunner/followers","following_url":"https://api.github.com/users/ThomasDebrunner/following{/other_user}","gists_url":"https://api.github.com/users/ThomasDebrunner/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasDebrunner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasDebrunner/subscriptions","organizations_url":"https://api.github.com/users/ThomasDebrunner/orgs","repos_url":"https://api.github.com/users/ThomasDebrunner/repos","events_url":"https://api.github.com/users/ThomasDebrunner/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasDebrunner/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2022-03-21T07:05:31Z","updated_at":"2022-03-23T07:47:52Z","closed_at":"2022-03-23T07:47:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nhttps://github.com/PX4/PX4-Autopilot/blob/c86d5769eaa719d5a3898060bf81b074d36228be/src/lib/matrix/matrix/helper_functions.hpp#L155-L159\r\n\r\nNot sure if bug - but no documentation on intention so wanted to clarify. If one runs the following on the matrix lib sign function:\r\n```\r\n#include <iostream>\r\n#include <cfloat>\r\n\r\nfloat signOf(float val) {\r\n    return float((FLT_EPSILON < val) - (val < FLT_EPSILON));\r\n}\r\n\r\nint main() {\r\n\r\n    std::cout << signOf(-1.0f) << std::endl;\r\n    std::cout << signOf(-FLT_EPSILON) << std::endl;\r\n    std::cout << signOf(0.0f) << std::endl;\r\n    std::cout << signOf(FLT_EPSILON) << std::endl;\r\n    std::cout << signOf(1.0f) << std::endl;\r\n\r\n    return 0;\r\n}\r\n```\r\nthe output is:\r\n```\r\n-1\r\n-1\r\n-1\r\n0\r\n1\r\n```\r\n**Expected behavior**\r\n`sign` functions either have a positive or negative definition for a value input equal to zero (so that means the only two outputs possible are -1 or 1), **or** they have a 0 criteria, either exactly =0, or a deadzone.\r\n1. is it intended that the sign function should return zero if within a \"deadzone\"?\r\n2. if so, shouldn't 0 also return 0? e.g. `(T(FLT_EPSILON) < val) - (val < -T(FLT_EPSILON))`\r\n\r\nRegardless of the intention, after this discussion we should update the method documentation.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19361/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19354","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19354/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19354/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19354/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19354","id":1173434058,"node_id":"PR_kwDOAFDaZs40piqO","number":19354,"title":"MatrixHelperTest: correct wrap compare values","user":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"assignees":[{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-18T10:31:08Z","updated_at":"2022-03-18T12:35:19Z","closed_at":"2022-03-18T12:35:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19354","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19354","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19354.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19354.patch","merged_at":"2022-03-18T12:35:19Z"},"body":"**Describe problem solved by this pull request**\r\nA couple tests are failing after #19250. @dagar I'm wondering how this got past CI?\r\n\r\n**Describe your solution**\r\nFixed two float compares -- just had wrong compare value for the wrapping functions, methods were calculating correctly.\r\n\r\nTODO:\r\n- [ ] the `+/-FLT_EPSILON` comparisons however are still failing - but maybe this is expected for a diff of `FLT_EPSILON` when using `EXPECT_FLOAT_EQ`? Could use `EXPECT_NEAR` instead?\r\nhttps://github.com/PX4/PX4-Autopilot/blob/92b93811e3e67abff277491760887e155ff9935e/src/lib/matrix/test/MatrixHelperTest.cpp#L51-L52\r\n```\r\n[ RUN      ] MatrixHelperTest.Helper\r\n../../src/lib/matrix/test/MatrixHelperTest.cpp:52: Failure\r\nExpected equality of these values:\r\n  wrap(0. + 1.19209289550781250000000000000000000e-7F, 0., 360.)\r\n    Which is: 1.1920929e-07\r\n  0.\r\n    Which is: 0\r\n../../src/lib/matrix/test/MatrixHelperTest.cpp:55: Failure\r\nExpected equality of these values:\r\n  wrap(360. + 1.19209289550781250000000000000000000e-7F, 0., 360.)\r\n    Which is: 1.1920929e-07\r\n  0.\r\n    Which is: 0\r\n[  FAILED  ] MatrixHelperTest.Helper (0 ms)\r\n```\r\n\r\n**Test data / coverage**\r\n`make tests`\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19354/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19349","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19349/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19349/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19349/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19349","id":1173063094,"node_id":"I_kwDOAFDaZs5F64W2","number":19349,"title":"MAVSDK offboard examples not working without manual control present","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442618266,"node_id":"MDU6TGFiZWwxNDQyNjE4MjY2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Offboard","name":"Offboard","color":"d8954e","default":false,"description":"Offboard mode control"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-03-18T00:43:17Z","updated_at":"2022-11-24T16:29:19Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nThe MAVSDK offboard examples stopped working. It fails to takeoff in offboard mode even with `NAV_RCL_ACT` set to `0` claiming:\r\n> `WARN  [commander] Failsafe enabled: No manual control stick input`\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start SITL\r\n2. Set `NAV_RCL_ACT` to `0`\r\n3. Run MAVSDK example: e.g. https://github.com/mavlink/MAVSDK-Python/blob/main/examples/offboard_position_ned.py\r\n\r\nI get:\r\n```\r\npxh> \r\npxh> \r\npxh> INFO  [mavlink] partner IP: 127.0.0.1\r\nINFO  [tone_alarm] home set\r\nINFO  [tone_alarm] notify negative\r\nINFO  [commander] Armed by external command\t\r\nWARN  [commander] Failsafe enabled: No manual control stick input\t\r\nINFO  [commander] Failsafe mode activated\t\r\nINFO  [tone_alarm] battery warning (fast)\r\nINFO  [commander] Disarmed by auto preflight disarming\t\r\nINFO  [logger] closed logfile, bytes written: 3283058\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19349/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19348","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19348/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19348/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19348/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19348","id":1173034652,"node_id":"I_kwDOAFDaZs5F6xac","number":19348,"title":"[PreFlightCheck] Mode not suitable for takeoff","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2022-03-17T23:52:24Z","updated_at":"2022-04-13T21:33:22Z","closed_at":"2022-04-13T21:33:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nThe simple MAVSDK takeoff and land example does not work properly anymore, that is, it only works once, then it refuses to arm saying \"Mode not suitable for takeoff\" as it is in Land mode.\r\nThis used to work and is very confusing.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start SITL\r\n2. Try https://github.com/mavlink/MAVSDK-Python/blob/main/examples/takeoff_and_land.py with latest mavsdk from pip installed.\r\n3. Run it once.\r\n4. Run it again.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19348/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19334","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19334/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19334/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19334/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19334","id":1169609108,"node_id":"PR_kwDOAFDaZs40daTp","number":19334,"title":"No battery time based RTL when already landed","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-15T12:28:37Z","updated_at":"2022-03-23T09:49:40Z","closed_at":"2022-03-23T09:49:39Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19334","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19334","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19334.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19334.patch","merged_at":"2022-03-23T09:49:39Z"},"body":"**Describe problem solved by this pull request**\r\nThe remaining battery time based RTL is triggered also when already landed (in another mode then RTL or Land).\r\n\r\n**Describe your solution**\r\nInstead of just checking for being armed I also check if the vehicle is already in any landed stage\r\n`!_vehicle_land_detected.ground_contact // not in any landing stage`\r\n\r\nOn the way I:\r\n- refactored the naming of the land detection subscription in commander\r\n- updated a comment about land detection triggering time \r\n- removed an unused publication of landed state in the MAVLink module\r\n\r\n**Test data / coverage**\r\nI tested this in SITL by making the battery simulator publish a current and configuring a battery capacity.\r\nI think we should enable optional testing of battery current and capacity in SITL in general in another pr.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19334/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19332","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19332/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19332/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19332/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19332","id":1169345054,"node_id":"PR_kwDOAFDaZs40ciFC","number":19332,"title":"Bug Fix: non-atomic publish leads to early reset of VehicleIMU integrator.","user":{"login":"wangwwno1","id":30792394,"node_id":"MDQ6VXNlcjMwNzkyMzk0","avatar_url":"https://avatars.githubusercontent.com/u/30792394?v=4","gravatar_id":"","url":"https://api.github.com/users/wangwwno1","html_url":"https://github.com/wangwwno1","followers_url":"https://api.github.com/users/wangwwno1/followers","following_url":"https://api.github.com/users/wangwwno1/following{/other_user}","gists_url":"https://api.github.com/users/wangwwno1/gists{/gist_id}","starred_url":"https://api.github.com/users/wangwwno1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangwwno1/subscriptions","organizations_url":"https://api.github.com/users/wangwwno1/orgs","repos_url":"https://api.github.com/users/wangwwno1/repos","events_url":"https://api.github.com/users/wangwwno1/events{/privacy}","received_events_url":"https://api.github.com/users/wangwwno1/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-03-15T08:30:52Z","updated_at":"2022-08-17T08:43:11Z","closed_at":"2022-08-17T08:43:10Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19332","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19332","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19332.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19332.patch","merged_at":null},"body":"Replacing `reset` with `integral_ready` as the latter call don't have any side effect.\r\n\r\n**Describe problem solved by this pull request**\r\nIn the version between `1.12.0` and `1.13.0-alpha` (current version), the `VehicleIMU` module use the publish condition as below.\r\nhttps://github.com/PX4/PX4-Autopilot/blob/0d31aadcc3438f082a90eaa13ebf4d183ecbdb15/src/modules/sensors/vehicle_imu/VehicleIMU.cpp#L542-L552\r\n \r\nThe `reset` API return true if the integrator is ready, just like `integral_ready` do.\r\nThe problem is, the function `reset` has additional side-effect: it will also reset the integrator.\r\n**In case of only one integrator is ready, this condition will also DROP out the integral value instead of keep it until next successful publishment.**\r\n\r\n**Describe your solution**\r\n**The publishment should either done thoroughly, or do nothing at all.** Thus, this PR rollback the condition to `integral_ready` and commence `reset` when and only when both integrators are ready.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19332/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19322","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19322/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19322/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19322/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19322","id":1167706281,"node_id":"I_kwDOAFDaZs5Fmcip","number":19322,"title":"QGroundControl loses connection to the GPS on the Cloudship simulation through Gazebo Software-in-the-Loop through PX4.","user":{"login":"JamesAnawati","id":99291339,"node_id":"U_kgDOBesQyw","avatar_url":"https://avatars.githubusercontent.com/u/99291339?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesAnawati","html_url":"https://github.com/JamesAnawati","followers_url":"https://api.github.com/users/JamesAnawati/followers","following_url":"https://api.github.com/users/JamesAnawati/following{/other_user}","gists_url":"https://api.github.com/users/JamesAnawati/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesAnawati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesAnawati/subscriptions","organizations_url":"https://api.github.com/users/JamesAnawati/orgs","repos_url":"https://api.github.com/users/JamesAnawati/repos","events_url":"https://api.github.com/users/JamesAnawati/events{/privacy}","received_events_url":"https://api.github.com/users/JamesAnawati/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":663879765,"node_id":"MDU6TGFiZWw2NjM4Nzk3NjU=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/gazebo%20classic","name":"gazebo classic","color":"EE7F04","default":false,"description":"Gazebo classic simulator"}],"state":"open","locked":false,"assignee":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"assignees":[{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2022-03-13T22:03:03Z","updated_at":"2022-03-14T14:44:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"QGroundControl loses connection to the GPS on the Cloudship simulation through Gazebo Software-in-the-Loop through PX4.\r\n\r\nTo Reproduce:\r\n1. Boot Ubuntu 20.04\r\n2. Boot QGroundControl (v4.1.6)\r\n3. Open terminal and change directory to PX4 repository\r\n         cd /path/to/PX4-Autopilot\r\n4. Boot Cloundship simulation\r\n         make px4_sitl gazebo_cloudship\r\n5. Click through error message\r\n6. Attempt a mission\r\n\r\nExpected behavior:\r\nGazebo will open okay without issue, showing the cloudship wobbling. QGroundControl will connect to the simulation but return an error message saying that the firmware has a bug as it is missing the parameter: FW ASRP MODE. QGroundControl will then act mostly normal until GPS connection to the ship is lost and the clouship no longer responds to commands.\r\n\r\nScreenshots\r\n![Screenshot from 2022-03-13 17-50-51](https://user-images.githubusercontent.com/99291339/158080879-5d9fe6c5-7951-4939-a0a3-9527d4519d8d.png)\r\n![Screenshot from 2022-03-13 17-59-29](https://user-images.githubusercontent.com/99291339/158081048-57550054-9c38-4b8b-8bb3-9a00ecf51f15.png)\r\n\r\nWhen I attempt the same procedure with any other vehicle type, there is no issue. Something is wrong with the cloudship simulation.\r\n\r\nThank you for your help.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19322/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19318","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19318/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19318/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19318/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19318","id":1167195275,"node_id":"PR_kwDOAFDaZs40Vr6L","number":19318,"title":"Bug Fix: IMU_INTEG_RATE can greater than IMU_GYRO_RATEMAX","user":{"login":"wangwwno1","id":30792394,"node_id":"MDQ6VXNlcjMwNzkyMzk0","avatar_url":"https://avatars.githubusercontent.com/u/30792394?v=4","gravatar_id":"","url":"https://api.github.com/users/wangwwno1","html_url":"https://github.com/wangwwno1","followers_url":"https://api.github.com/users/wangwwno1/followers","following_url":"https://api.github.com/users/wangwwno1/following{/other_user}","gists_url":"https://api.github.com/users/wangwwno1/gists{/gist_id}","starred_url":"https://api.github.com/users/wangwwno1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangwwno1/subscriptions","organizations_url":"https://api.github.com/users/wangwwno1/orgs","repos_url":"https://api.github.com/users/wangwwno1/repos","events_url":"https://api.github.com/users/wangwwno1/events{/privacy}","received_events_url":"https://api.github.com/users/wangwwno1/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-03-12T06:15:54Z","updated_at":"2022-03-14T03:46:27Z","closed_at":"2022-03-12T16:29:23Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19318","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19318","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19318.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19318.patch","merged_at":"2022-03-12T16:29:23Z"},"body":"**Describe problem solved by this pull request**\r\nA caveat in `VehicleIMU.cpp` that allows `IMU_INTEG_RATE > IMU_GYRO_RATEMAX`.\r\nhttps://github.com/PX4/PX4-Autopilot/blob/58a4c38519498888679e3d81c7e6c85ae860dfa8/src/modules/sensors/vehicle_imu/VehicleIMU.cpp#L148-L150\r\n\r\nEven we allow that happen, it's function still inconsistent with the comment if `IMU_GYRO_RATEMAX` is set to 2000 Hz.\r\n(Here is a [ref](https://github.com/PX4/PX4-Autopilot/blob/5ded1aedcb0d429cce55fa9138c6acabcaa37ed7/src/modules/sensors/vehicle_angular_velocity/imu_gyro_parameters.c#L85-L105) for 'IMU_GYRO_RATEMAX')\r\n\r\nAnd the line would become:\r\n```\r\n// constrain IMU integration time 1-20 milliseconds (50-1000 Hz)\r\nint32_t imu_integration_rate_hz = constrain(_param_imu_integ_rate.get(), (int32_t)50, (int32_t) 2000);\r\n```\r\n\r\n\r\nThis PR is intended to solve this problem.\r\n\r\n**Describe your solution**\r\nReplacing the `math::max` with `math::min`.\r\n\r\n**Describe possible alternatives**\r\nUse `constrain(_param_imu_integ_rate.get(), (int32_t)50, (int32_t) 1000)` instead.\r\nIf we allow `IMU_INTEG_RATE` greater than `IMU_GYRO_RATEMAX`, and want to keep it below 1000 Hz, \r\n\r\n**Test data / coverage**\r\nHavn't test it yet, but I expect this minor revise won't cause any problem.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19318/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19315","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19315/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19315/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19315/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19315","id":1166737256,"node_id":"PR_kwDOAFDaZs40UNu_","number":19315,"title":"ekf2: return saved mag bias variance when not in 3d magnetometer fusion","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-11T18:38:58Z","updated_at":"2022-03-15T01:03:42Z","closed_at":"2022-03-15T01:03:41Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19315","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19315","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19315.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19315.patch","merged_at":"2022-03-15T01:03:41Z"},"body":" - the estimated mag bias was requiring > 30 seconds of continuous 3d\r\nmag fusion to be reported stable (and saved back to mag cal), this\r\nrestores the original intent requiring 30 seconds of accumulated valid\r\n3d mag fusion\r\n![Screenshot from 2022-03-11 12-53-23](https://user-images.githubusercontent.com/84712/157931452-f5d2c1b1-a2f8-4ace-bb4f-bfad17306340.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19315/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19308","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19308/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19308/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19308/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19308","id":1165369283,"node_id":"PR_kwDOAFDaZs40PuLn","number":19308,"title":"mavlink: shell expand locking","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-10T15:25:24Z","updated_at":"2022-06-05T01:54:14Z","closed_at":"2022-04-25T15:53:22Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19308","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19308","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19308.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19308.patch","merged_at":"2022-04-25T15:53:22Z"},"body":"On some H7 boards (cuav x7pro tested)  there's an occasional hard fault when starting the mavlink shell. It stopped reproducing when I expanded the locking slightly, but I haven't identified the root cause. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19308/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19308/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19304","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19304/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19304/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19304/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19304","id":1164029646,"node_id":"PR_kwDOAFDaZs40LUuX","number":19304,"title":"adis16470: fix gyro scaling","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-09T14:43:05Z","updated_at":"2022-03-14T00:38:42Z","closed_at":"2022-03-10T04:00:54Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19304","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19304","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19304.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19304.patch","merged_at":"2022-03-10T04:00:54Z"},"body":"This slipped through on the CUAV X7 pro because it's only obvious with movement and multi-ekf automatically switches the primary IMU. \r\n\r\n![Screenshot from 2022-03-09 09-34-46](https://user-images.githubusercontent.com/84712/157463973-0095b76c-0cc4-4c9e-b7ed-de00fc2d495e.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19304/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19292","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19292/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19292/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19292/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19292","id":1161757482,"node_id":"I_kwDOAFDaZs5FPwMq","number":19292,"title":"RC override not responding ","user":{"login":"AhmedElsafy","id":14898374,"node_id":"MDQ6VXNlcjE0ODk4Mzc0","avatar_url":"https://avatars.githubusercontent.com/u/14898374?v=4","gravatar_id":"","url":"https://api.github.com/users/AhmedElsafy","html_url":"https://github.com/AhmedElsafy","followers_url":"https://api.github.com/users/AhmedElsafy/followers","following_url":"https://api.github.com/users/AhmedElsafy/following{/other_user}","gists_url":"https://api.github.com/users/AhmedElsafy/gists{/gist_id}","starred_url":"https://api.github.com/users/AhmedElsafy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AhmedElsafy/subscriptions","organizations_url":"https://api.github.com/users/AhmedElsafy/orgs","repos_url":"https://api.github.com/users/AhmedElsafy/repos","events_url":"https://api.github.com/users/AhmedElsafy/events{/privacy}","received_events_url":"https://api.github.com/users/AhmedElsafy/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-07T18:10:41Z","updated_at":"2022-03-07T18:14:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Moving the RC sticks did not switch immediately from Mission mode or RTL mode to position as intended.\r\n\r\nhttps://logs.px4.io/plot_app?log=b9851ab5-ed9a-4186-8100-0d412f0fa78b\r\n\r\n![mission2position](https://user-images.githubusercontent.com/14898374/157092736-832fb5bb-9a29-49fe-8084-6242ec1226ee.png)\r\n![mission2position_2](https://user-images.githubusercontent.com/14898374/157092813-c7884dad-7c24-4c4b-83c3-125a695b58f5.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19292/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19287","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19287/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19287/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19287/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19287","id":1161084038,"node_id":"PR_kwDOAFDaZs40Bq0h","number":19287,"title":"Pr skip vtol takeoff when in fw mode","user":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-03-07T08:50:45Z","updated_at":"2022-07-29T07:54:18Z","closed_at":"2022-07-29T07:54:18Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19287","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19287","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19287.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19287.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nWhen activating or uploading a new mission containing a VTOL takeoff while the vehicle is already in fixed wing mode, the current mission index is usually pointing to the VTOL Takeoff. This causes the vehicle to fly to the VTOL takeoff waypoint at the transition altitude which might be very low.\r\n\r\n**Describe your solution**\r\nWhen activating a VTOL mission while already in FW mode make sure that the mission index is >= the first position item after the vtol takeoff waypoint.\r\n\r\n**Test data / coverage**\r\nMainly tested in SITL. We are going to conduct outdoor flying this afternoon.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19287/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19285","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19285/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19285/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19285/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19285","id":1160522962,"node_id":"PR_kwDOAFDaZs4z_6Kr","number":19285,"title":"Rework RCInput auto selection ","user":{"login":"chris1seto","id":584080,"node_id":"MDQ6VXNlcjU4NDA4MA==","avatar_url":"https://avatars.githubusercontent.com/u/584080?v=4","gravatar_id":"","url":"https://api.github.com/users/chris1seto","html_url":"https://github.com/chris1seto","followers_url":"https://api.github.com/users/chris1seto/followers","following_url":"https://api.github.com/users/chris1seto/following{/other_user}","gists_url":"https://api.github.com/users/chris1seto/gists{/gist_id}","starred_url":"https://api.github.com/users/chris1seto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris1seto/subscriptions","organizations_url":"https://api.github.com/users/chris1seto/orgs","repos_url":"https://api.github.com/users/chris1seto/repos","events_url":"https://api.github.com/users/chris1seto/events{/privacy}","received_events_url":"https://api.github.com/users/chris1seto/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-06T05:28:42Z","updated_at":"2022-06-27T14:40:31Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19285","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19285","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19285.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19285.patch","merged_at":null},"body":"**The issue**\r\nCurrently, the RCInput driver auto detects the serial (or PPM!) RC protocol in use (ie DSM, CRSF, etc). This is problematic because it relies on the ability of each parser to discriminate positively to identify packet content for that individual parser, and this discrimination is not possible to be performed accurately every time. For example, at this commit hash, CRSF is periodically identified as GHST. This can be a severe safety issue if a parser generates channel data which arms the vehicle or causes some other unintended action.\r\n\r\n**Describe your solution**\r\nThis PR reworks the RCInput driver to clean up parser selection and, more importantly, allows for the manual forced selection of a parser through parameter `RC_INPUT_PROTO`.  This disallows any possibility of a botched protocol auto detection.\r\n\r\nIn addition to the rework and proto, the automatic guessing routine is also changed. When RC_INPUT_PROTO is set to -1 (Auto), the auto scanner will allow each parser to scan the incoming RX data. If a match is found, the auto-scanning routine will automatically change RC_INPUT_PROTO to the matched protocol to force this protocol from then on.\r\n\r\n**Possible alternatives**\r\nIn my opinion, this protocol auto-selection code can simply never be fully error-proof. Especially without firm specifications for nearly all of the supported protocols, all it takes is one new (and slightly different, but ultimately, \"valid\") implementation of an existing RC Input protocol (possibly from a new LRS system, for example) to potentially break a parser's ability to discriminate against false positives, and there is no guarantee that the existing discrimination performance is even error-proof as it stands now (as is demonstrated by CRSF incorrectly being identified as GHST). No matter what, with such a dynamic environment of each parser only getting a limited/fixed time slot to evaluate the incoming data and the uncertainty in the content an RC RX could be sending at any time depending on link status, final protocol implementation, etc. there is too much room for false positives. \r\n\r\nFurther, there is already precedent for manual protocol selection in other autopilot projects, so Px4 would not be exceptional for requiring this. Examples include Betaflight, INAV, \r\n\r\nFor the above reasons, I would highly suggest outright removing any automatic selection features and requiring RC input protocol be explicitly selected. This PR can support that with or without the auto-selection mechanism.\r\n\r\n**Test data / coverage**\r\nThis was tested with my ExpressLRS setup, and needs additional testing with other protocols/equipment.\r\n\r\nSpecial thanks to @dagar for his help and support in this PR :100: ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19285/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19285/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19268","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19268/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19268/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19268/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19268","id":1154560926,"node_id":"I_kwDOAFDaZs5E0TOe","number":19268,"title":"Sending MAV_CMD_NAV_TAKEOFF while flying in other flight modes pushes the drone towards vec = (1, 1, 0)","user":{"login":"squizz617","id":10861633,"node_id":"MDQ6VXNlcjEwODYxNjMz","avatar_url":"https://avatars.githubusercontent.com/u/10861633?v=4","gravatar_id":"","url":"https://api.github.com/users/squizz617","html_url":"https://github.com/squizz617","followers_url":"https://api.github.com/users/squizz617/followers","following_url":"https://api.github.com/users/squizz617/following{/other_user}","gists_url":"https://api.github.com/users/squizz617/gists{/gist_id}","starred_url":"https://api.github.com/users/squizz617/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/squizz617/subscriptions","organizations_url":"https://api.github.com/users/squizz617/orgs","repos_url":"https://api.github.com/users/squizz617/repos","events_url":"https://api.github.com/users/squizz617/events{/privacy}","received_events_url":"https://api.github.com/users/squizz617/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-02-28T21:18:46Z","updated_at":"2022-03-02T16:01:14Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen the drone is flying in MANUAL / ALTCTL / POSCTL / ACRO (and probably more?) mode and receives a MAV_CMD_NAV_TAKEOFF message (to set mode to TAKEOFF), it flies towards (x, y, z) = (1, 1, 0) direction.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n[terminal 1] make px4_sitl_rtps gazebo -j4\r\n[terminal 2] Download and run the [PoC](https://gist.github.com/squizz617/f1cb009d7e4ff730492a6b9243bedf6a)\r\n\r\n**Expected behavior**\r\nAs described in the [documentation](https://docs.px4.io/master/en/flight_modes/takeoff.html), the drone should get to the target altitude and hold. No movement in the X and Y direction is expected.\r\n\r\n**Log Files and Screenshots**\r\n- Flight review: https://logs.px4.io/plot_app?log=a0ec7e87-0bb5-44bd-8397-5af27a1d9882\r\n\r\n**Drone (please complete the following information):**\r\n- Build: `px4_sitl_rtps`\r\n- tested commit: `a2645418`\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19268/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19258","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19258/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19258/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19258/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19258","id":1150281032,"node_id":"PR_kwDOAFDaZs4zdOf1","number":19258,"title":"mission_block: handle SET_ROI_LOCATION with absolute altitude correctly","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-02-25T10:22:40Z","updated_at":"2022-03-03T12:25:01Z","closed_at":"2022-03-03T12:25:00Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19258","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19258","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19258.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19258.patch","merged_at":"2022-03-03T12:25:00Z"},"body":"**Describe problem solved by this pull request**\r\nThe mission item parameter handling and interpretation is a mess.\r\nOne of the nasty extra cases is the `CMD_DO_SET_ROI_LOCATION` which:\r\n- Comes from outside as either [MISSION_ITEM](https://mavlink.io/en/messages/common.html#MISSION_ITEM) or [MISSION_ITEM_INT](https://mavlink.io/en/messages/common.html#MISSION_ITEM_INT) with either double or single precision latitude, longitude (or even a different coordinate frame).\r\n- Is parsed into an internal mission item which only has single precision parameters 5,6. But contains double-precision lat, lon fields.\r\n- Needs to be sent out again to either vmount or and external gimbal/payload manager via vehicle command and possibly the correct MAVLink command.\r\n\r\nImproved handling for this case was added by @potaito  in https://github.com/PX4/PX4-Autopilot/pull/9781 but it does not work for coordinates with an absolute altitude in my eyes just because of how the existing conditions were reused.\r\n\r\n**Describe your solution**\r\nI'm separating the conditions handling the correct horizontal coordinates and the relative altitude.\r\n\r\n**Describe possible alternatives**\r\nI suggest we clearly define if the content of a mission item is completely interpreted or not e.g. has either params or lat, lon and then handle all commands in a consistent way calling the same respective conversions depending on:\r\n- command long/int\r\n- normal parameters\r\n- coordinates with 1e7\r\n- coordinates with 1e4\r\n\r\n**Test data / coverage**\r\nUntested. Tests by @leonardosimovic will follow.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19258/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19240","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19240/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19240/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19240/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19240","id":1146256346,"node_id":"PR_kwDOAFDaZs4zQJBa","number":19240,"title":"ekf2: preflight checker fix flow y innovation filter","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-02-21T21:56:10Z","updated_at":"2022-02-22T08:39:23Z","closed_at":"2022-02-22T08:39:22Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19240","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19240","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19240.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19240.patch","merged_at":"2022-02-22T08:39:22Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19240/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19239","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19239/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19239/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19239/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19239","id":1146202495,"node_id":"PR_kwDOAFDaZs4zP9k_","number":19239,"title":"ekf2: default to in air and not at rest","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-02-21T20:29:02Z","updated_at":"2022-02-22T21:59:11Z","closed_at":"2022-02-22T21:59:10Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19239","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19239","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19239.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19239.patch","merged_at":"2022-02-22T21:59:10Z"},"body":" - ekf2 defaulting to in air (and not at rest) is a more conservative starting point if the system isn't running with a valid land detector\r\n - handled horizontal preflight failures in commander when disarmed rather than overloading xy_valid and v_xy_valid flags\r\n - ekf2 no longer depend on vehicle arming or standby status\r\n - possible fix for https://github.com/PX4/PX4-Autopilot/issues/19231 (logging use case)\r\n - includes https://github.com/PX4/PX4-Autopilot/pull/18868 for ekf2 arming dependency cleanup","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19239/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19233","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19233/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19233/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19233/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19233","id":1145128134,"node_id":"I_kwDOAFDaZs5EQUTG","number":19233,"title":"Rover does not move in SITL Gazebo due to missing mixers","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":647657056,"node_id":"MDU6TGFiZWw2NDc2NTcwNTY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Rover%20%F0%9F%9A%99","name":"Rover 🚙","color":"e99695","default":false,"description":"Rovers and other UGV"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-02-20T20:39:49Z","updated_at":"2022-02-21T16:17:00Z","closed_at":"2022-02-21T16:17:00Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen running Rover SITL, the model is not able to move. This is the reason recently CI testing for rovers have been reliably failing. \r\n\r\n```\r\nGazebo multi-robot simulator, version 9.19.0\r\nCopyright (C) 2012 Open Source Robotics Foundation.\r\nReleased under the Apache 2 License.\r\nhttp://gazebosim.org\r\n\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 129.132.39.158\r\nfile not found\r\nERROR [mixer_module] mixer reset unavailable, not using static mixers\r\nERROR [mixer] can't load mixer file: skip\r\nERROR [mixer] failed to load mixer\r\nERROR  [init] Failed loading mixer: skip\r\nINFO  [init] setting PWM_AUX_OUT none\r\n\r\n```\r\n\r\nIt seems like rover was configured to use control allocation in https://github.com/PX4/PX4-Autopilot/pull/18776, but now the vehicle is unable to move in SITl Gazebo\r\n\r\n@sfuhrer @bkueng Any ideas how to fix this?\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run `make px4_sitl gazebo_rover`\r\n4. See error\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19233/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19215","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19215/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19215/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19215/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19215","id":1143014312,"node_id":"I_kwDOAFDaZs5EIQOo","number":19215,"title":"Any parameter update leads to UDP client source reinitialization","user":{"login":"lukegluke","id":3624285,"node_id":"MDQ6VXNlcjM2MjQyODU=","avatar_url":"https://avatars.githubusercontent.com/u/3624285?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegluke","html_url":"https://github.com/lukegluke","followers_url":"https://api.github.com/users/lukegluke/followers","following_url":"https://api.github.com/users/lukegluke/following{/other_user}","gists_url":"https://api.github.com/users/lukegluke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegluke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegluke/subscriptions","organizations_url":"https://api.github.com/users/lukegluke/orgs","repos_url":"https://api.github.com/users/lukegluke/repos","events_url":"https://api.github.com/users/lukegluke/events{/privacy}","received_events_url":"https://api.github.com/users/lukegluke/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-02-18T12:56:03Z","updated_at":"2022-03-01T16:47:43Z","closed_at":"2022-03-01T01:21:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"UDP mavlink is started on the board: `mavlink start -u 14556`\r\nGCS connects to board, data communication is ok, but when board (by GCS or internally) changes a parameter (even not related to mavlink) there is noticeable ~1s freezes in mavlink communication (for example in GPS data received from board).\r\n\r\nI've noticed several messages `INFO  [mavlink] partner IP: 192.168.1.221` in console and discovered that the reason of freezes is reinitialization of partner IP on any parameter updating.\r\n\r\nHere when any parameter is updated:\r\nhttps://github.com/PX4/PX4-Autopilot/blob/8489cec08fcb895a64ce9999034c88098f97f283/src/modules/mavlink/mavlink_main.cpp#L2254-L2255\r\nsource initialization state is cleared if multicast is not enabled\r\nhttps://github.com/PX4/PX4-Autopilot/blob/8489cec08fcb895a64ce9999034c88098f97f283/src/modules/mavlink/mavlink_main.cpp#L2265-L2267\r\nand after this only on first message received from GCS partner IP is initialized again with info message:\r\nhttps://github.com/PX4/PX4-Autopilot/blob/dab7b007de17b3449b875735d337149716af80c4/src/modules/mavlink/mavlink_receiver.cpp#L3172-L3174\r\nin my case this message is heartbeat from GCS every 1s. If I make it 5 s, the communication will freeze for this 5 seconds.\r\n\r\nEnabling multicast `param set MAV_BROADCAST 2` fixes reinitializations and freezes, because it will not clear partner initialization.\r\n\r\nI'm using custom f7 based board in custom project (it is somewhere near 1.12+ of px4), but it can be reproduced with QGC too. Start UDP mavlink on board with no broadcast. In QGC enable emitting heartbeat and disable virtual joystick if any (otherwise freezes will not be noticeable due to high rate messages sent from QGC), connect to board and change any parameter in QGC or in nsh. In board console you will notice `INFO  [mavlink] partner IP: x.x.x.x` messages with delay up to 1s after parameter change.\r\nIf you disable emitting heartbeat in QGC and change a parameter a connection to board will be lost at all.\r\nAnyway QGC will never connect by UDP if heartbeat from QGC is not enabled in first place. Is this normal and docs warn about this somewhere?","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19215/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19209","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19209/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19209/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19209/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19209","id":1142241777,"node_id":"PR_kwDOAFDaZs4zCd8L","number":19209,"title":"gyro_calibration: add additional validity check before finalizing calibrations","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-02-18T02:56:09Z","updated_at":"2022-02-18T14:12:31Z","closed_at":"2022-02-18T14:12:31Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19209","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19209","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19209.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19209.patch","merged_at":"2022-02-18T14:12:31Z"},"body":" - this is an edge case that can slip through if sensors are running normally but then stop publishing valid data\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19209/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19163","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19163/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19163/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19163/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19163","id":1129278537,"node_id":"PR_kwDOAFDaZs4yVubm","number":19163,"title":"[WIP] boards: matek h743-slim clock tree adjust","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-02-10T01:05:19Z","updated_at":"2022-02-18T14:16:33Z","closed_at":"2022-02-18T14:16:33Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19163","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19163","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19163.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19163.patch","merged_at":null},"body":"Attempting to lower the board temperature and address possible SDMMC issues (https://github.com/PX4/PX4-Autopilot/issues/19155).","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19163/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19163/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19162","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19162/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19162/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19162/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19162","id":1129188076,"node_id":"PR_kwDOAFDaZs4yVaRS","number":19162,"title":"mc_pos_control: require current trajectory setpoint to run controller","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-02-09T23:27:44Z","updated_at":"2022-05-04T09:22:19Z","closed_at":"2022-05-04T09:22:18Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19162","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19162","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19162.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19162.patch","merged_at":"2022-05-04T09:22:18Z"},"body":" - fixes the initial \"invalid setpoints\" error.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19162/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19155","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19155/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19155/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19155/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19155","id":1128100398,"node_id":"I_kwDOAFDaZs5DPXIu","number":19155,"title":"SD Card issues on Matek H743 Slim board ","user":{"login":"spiderkeys","id":859469,"node_id":"MDQ6VXNlcjg1OTQ2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/859469?v=4","gravatar_id":"","url":"https://api.github.com/users/spiderkeys","html_url":"https://github.com/spiderkeys","followers_url":"https://api.github.com/users/spiderkeys/followers","following_url":"https://api.github.com/users/spiderkeys/following{/other_user}","gists_url":"https://api.github.com/users/spiderkeys/gists{/gist_id}","starred_url":"https://api.github.com/users/spiderkeys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spiderkeys/subscriptions","organizations_url":"https://api.github.com/users/spiderkeys/orgs","repos_url":"https://api.github.com/users/spiderkeys/repos","events_url":"https://api.github.com/users/spiderkeys/events{/privacy}","received_events_url":"https://api.github.com/users/spiderkeys/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":5237363302,"node_id":"LA_kwDOAFDaZs8AAAABOCvSZg","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Boards%20(flight%20controller)%20%F0%9F%8D%AB","name":"Boards (flight controller) 🍫","color":"A88CD7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-02-09T06:17:30Z","updated_at":"2023-07-29T17:50:21Z","closed_at":"2022-03-23T23:54:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nSD card operations only seem to partially work on the Matek H743 Slim board. The firmware seems to be able to write files to the card, but seems to have issues reading files. Operations in `nsh` like `ls` seem to work in the /fs/microsd/ directory, but `cat` always fails with read errors for files on the SD card. `cat` works as expected on other ROMFS files. There are also various errors relating to parameters upon startup. \r\n\r\nBuilding from master, commit: 33ce1b9b642ca78f44315394ddd1fa2f8ca69922\r\nHost OS: Ubuntu 20.04, x86_64\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nNOTE: Start with no SD card inserted\r\n1. Build the bootloader target for the Slim `make matek_h743-slim_bootloader`\r\n2. Put the chip in DFU mode and connect to host machine over USB\r\n3. Use STM32CubeProgrammer to completely erase all flash sectors of the chip\r\n4. Use STM32CubeProgrammer (or dfu-util) to flash the Matek h743 Slim Bootloader to 0x08000000\r\n5. Disconnect the USB cable\r\n6. Build the firmware target for the Slim `make matek_h743-slim_default`\r\n7. Connect the FMU directly to the host machine via USB and wait for it to come up (/dev/ttyACM0 in my case)\r\n8. Use `Tools/px_uploader.py --port /dev/ttyACM0 build/matek_h743-slim_default/matek_h743-slim_default.px4` to flash the firmware\r\n9. Disconnect the USB cable from the FMU\r\n10. Format a fresh (4/16/32GB sandisk) SD card using `mkdosfs /dev/sdb -s 32 -F 32 -I` (the results are the same after manually writing a .format file to the SD card and allowing the firmware to do the format)\r\n11. Insert the SD card into the FMU\r\n12. Connect the USART1 interface on the FMU to the host machine via USB FTDI adapter\r\n13. Start a terminal emulator session on the system console interface (for me: `picocom -b 57600 /dev/ttyUSB0`)\r\n14. Reconnect the USB cable from the host to the FMU to power on\r\n15. System console starts sending messages - pasted below\r\n16. Once `nsh` is available, confirm that I can `ls` files in `/fs/microsd` and that there are files there\r\n17. Try to cat the `param_import_fail.txt` file, which fails with a `read failed: I/O error`\r\n18. Try to create a file using `echo \"hello\" > /fs/microsd/test`, which seems to succeed\r\n19. Confirm the file exists with `ls /fs/microsd/`\r\n20. Try to cat the contents of that file as well, which raises another read failure, but this time the reason is `invalid argument`\r\n21. Try to cat the contents of a ROMFS file (/etc/mixers/vectored6dof.main.mix as an example), which succeeds and prints the contents\r\n\r\nI tested a very similar process with the mRO Pixhawk1 board, and everything worked as expected (and there were no errors during the boot process).\r\n\r\n**Expected behavior**\r\nOperations like `cat` should work in nsh on SD card files. There should not be so many errors during boot up relating to reading from and writing to the SD card.\r\n\r\n**Log Files and Screenshots**\r\nSystem Console Output\r\n```\r\npicocom v3.1\r\n\r\nport is        : /dev/ttyUSB0\r\nflowcontrol    : none\r\nbaudrate is    : 57600\r\nparity is      : none\r\ndatabits are   : 8\r\nstopbits are   : 1\r\nescape is      : C-a\r\nlocal echo is  : no\r\nnoinit is      : no\r\nnoreset is     : no\r\nhangup is      : no\r\nnolock is      : no\r\nsend_cmd is    : sz -vv\r\nreceive_cmd is : rz -vv -E\r\nimap is        : \r\nomap is        : \r\nemap is        : crcrlf,delbs,\r\nlogfile is     : none\r\ninitstring     : none\r\nexit_after is  : not set\r\nexit is        : no\r\n\r\nType [C-a] [C-h] to see available commands\r\nTerminal ready\r\n[boot] Fault Log info File No 4 Length 3177 flags:0x01 state:1\r\n[boot] Fault Log is Armed\r\nsercon: Registering CDC/ACM serial driver\r\nsercon: Successfully registered the CDC/ACM serial driver\r\nHW arch: MATEK_H743_SLIM\r\nFW git-hash: 33ce1b9b642[hardfault_log] Fault Log is Armed\r\nca78f44315394ddd1fa2f8ca69922\r\nFW version: 1.13.0 0 (17629184)\r\nFW git-branch: master\r\nOS: NuttX\r\nOS version: Release 8.2.0 (134349055)\r\nOS git-hash: 017aa15746bcf6b57bb185e14dce7fa0876fc751\r\nBuild datetime: Feb  8 2022 21:41:50\r\nBuild uri: localhost\r\nBuild variant: default\r\nToolchain: GNU GCC, 9.3.1 20200408 (release)\r\nPX4GUID: 000600000000343834323139510b00410030\r\nMCU: STM32H7[4|5]xxx, rev. V\r\nINFO  [param] selected parameter default file /fs/microsd/params\r\nERROR [param] open '/fs/microsd/params' failed (2)\r\nERROR [init] param import failed\r\nERROR [param] open '/fs/microsd/params' failed (2)\r\ndmesg [23:100]\r\ncp [29:100]\r\nnsh: cp: open failed: No such file or directory\r\nINFO  [param] selected parameter backup file /fs/microsd/parameters_backup.bson\r\nBoard architecture defaults: /etc/init.d/rc.board_arch_defaults\r\nBoard defaults: /etc/init.d/rc.board_defaults\r\nINFO  [dataman] data manager file '/fs/microsd/dataman' size is 62560 bytes\r\nINFO  [uavcan] Node ID 1, bitrate 1000000\r\nBoard sensors: /etc/init.d/rc.board_sensors\r\nicm20602 #0 on SPI bus 4 rotation 12\r\nmpu6000 #0 on SPI bus 1 rotation 12\r\ndps310 #0 on I2C bus 2 address 0x76\r\nERROR [SPI_I2C] qmc5883l: no instance started (no device on bus?)\r\nnsh: icm20948_i2c_passthrough: command not found\r\nStarting Main GPS on /dev/ttyS1\r\nStarting MAVLink on /dev/ttyS2\r\nINFO  [mavlink] mode: Normal, data rate: 1200 B/s on /dev/ttyS2 @ 57600B\r\nNo autostart ID found\r\nekf2 [562:100]\r\nBoard extras: /etc/init.d/rc.board_extras\r\natxxxx #0 on SPI bus 2\r\nINFO  [logger] logger started (mode=all)\r\n\r\nNuttShell (NSH) NuttX-10.2.0\r\nnsh> INFO  [logger] log root dir created: /fs/microsd/log\r\n[boot] Fault Log info File No 4 Length 3177 flags:0x01 state:1\r\n[boot] Fault Log is Armed\r\nsercon: Registering CDC/ACM serial driver\r\nsercon: Successfully registered the CDC/ACM serial driver\r\nHW arch: MATEK_H743_SLIM\r\nFW git-hash: 33ce1b9[hardfault_log] Fault Log is Armed\r\nb642ca78f44315394ddd1fa2f8ca69922\r\nFW version: 1.13.0 0 (17629184)\r\nFW git-branch: master\r\nOS: NuttX\r\nOS version: Release 8.2.0 (134349055)\r\nOS git-hash: 017aa15746bcf6b57bb185e14dce7fa0876fc751\r\nBuild datetime: Feb  8 2022 21:41:50\r\nBuild uri: localhost\r\nBuild variant: default\r\nToolchain: GNU GCC, 9.3.1 20200408 (release)\r\nPX4GUID: 000600000000343834323139510b00410030\r\nMCU: STM32H7[4|5]xxx, rev. V\r\nINFO  [param] selected parameter default file /fs/microsd/params\r\nERROR [param] open '/fs/microsd/params' failed (2)\r\nERROR [init] param import failed\r\nERROR [param] open '/fs/microsd/params' failed (2)\r\ndmesg [23:100]\r\ncp [29:100]\r\nnsh: cp: open failed: No such file or directory\r\nINFO  [param] selected parameter backup file /fs/microsd/parameters_backup.bson\r\nBoard architecture defaults: /etc/init.d/rc.board_arch_defaults\r\nBoard defaults: /etc/init.d/rc.board_defaults\r\nINFO  [dataman] data manager file '/fs/microsd/dataman' size is 62560 bytes\r\nINFO  [uavcan] Node ID 1, bitrate 1000000\r\nBoard sensors: /etc/init.d/rc.board_sensors\r\nicm20602 #0 on SPI bus 4 rotation 12\r\nmpu6000 #0 on SPI bus 1 rotation 12\r\ndps310 #0 on I2C bus 2 address 0x76\r\nERROR [SPI_I2C] qmc5883l: no instance started (no device on bus?)\r\nnsh: icm20948_i2c_passthrough: command not found\r\nStarting Main GPS on /dev/ttyS1\r\nStarting MAVLink on /dev/ttyS2\r\nINFO  [mavlink] mode: Normal, data rate: 1200 B/s on /dev/ttyS2 @ 57600B\r\nNo autostart ID found\r\nekf2 [562:100]\r\nBoard extras: /etc/init.d/rc.board_extras\r\natxxxx #0 on SPI bus 2\r\nINFO  [logger] logger started (mode=all)\r\n\r\nNuttShell (NSH) NuttX-10.2.0\r\nnsh> ls fs/microsd\r\n/fs/microsd:\r\n param_import_fail.txt\r\n dataman\r\n ufw/\r\n uavcan.db/\r\n log/\r\nnsh> cat fs/microsd/param_import_fail.txt\r\nnsh: cat: read failed: I/O error\r\nnsh> INFO  [gyro_calibration] gyro 0 (3670050) updating offsets [0.000, 0.000, 0.000]->[-0.010, -0.006, -0.002] 38.1 degC\r\nINFO  [gyro_calibration] gyro 1 (2162698) updating offsets [0.000, 0.000, 0.000]->[0.010, -0.016, 0.015] 34.6 degC\r\nERROR [tinybson] file write error -1, errno:22 (Invalid argument)\r\nERROR [tinybson] killed: file write error\r\nERROR [tinybson] killed: write error on BSON_DOUBLE\r\nERROR [parameters] BSON append failed for 'CAL_GYRO1_ZOFF'\r\nERROR [parameters] parameter export to /fs/microsd/params failed (-1) attempt 1\r\nERROR [tinybson] file write error -1, errno:22 (Invalid argument)\r\nERROR [tinybson] killed: file write error\r\nERROR [tinybson] killed: write error on BSON_DOUBLE\r\nERROR [parameters] BSON append failed for 'CAL_GYRO1_ZOFF'\r\nERROR [parameters] parameter export to /fs/microsd/params failed (-1) attempt 2\r\nERROR [tinybson] file write error -1, errno:22 (Invalid argument)\r\nERROR [tinybson] killed: file write error\r\nERROR [tinybson] killed: write error on BSON_DOUBLE\r\nERROR [parameters] BSON append failed for 'CAL_GYRO1_ZOFF'\r\nERROR [parameters] parameter export to /fs/microsd/params failed (-1) attempt 3\r\nERROR [parameters] param export failed (-1)\r\nERROR [parameters] param auto save failed (-1)\r\n\r\nnsh> echo \"hello\" > fs/microsd/test\r\nnsh> ls /fs/microsd/test\r\n /fs/microsd/test\r\nnsh> cat /fs/microsd/test\r\nnsh: cat: read failed: Invalid argument\r\nnsh> ls /fs/microsd/\r\n/fs/microsd:\r\n param_import_fail.txt\r\n dataman\r\n ufw/\r\n uavcan.db/\r\n log/\r\n params\r\n test\r\nnsh> cat /etc/mixers/vectored6dof.main.mix\r\nM: 3\r\nS: 0 2 -4000 -4000 0 -4000 +4000\r\nS: 0 3 +4000 +4000 0 -4000 +4000\r\nS: 0 4 +4000 +4000 0 -4000 +4000\r\nM: 3\r\nS: 0 2 +4000 +4000 0 -4000 +4000\r\nS: 0 3 +4000 +4000 0 -4000 +4000\r\nS: 0 4 -4000 -4000 0 -4000 +4000\r\nM: 3\r\nS: 0 2 -4000 -4000 0 -4000 +4000\r\nS: 0 3 +4000 +4000 0 -4000 +4000\r\nS: 0 4 -4000 -4000 0 -4000 +4000\r\nM: 3\r\nS: 0 2 +4000 +4000 0 -4000 +4000\r\nS: 0 3 +4000 +4000 0 -4000 +4000\r\nS: 0 4 +4000 +4000 0 -4000 +4000\r\nM: 3\r\nS: 0 0 -4000 -4000 0 -4000 +4000\r\nS: 0 1 +4000 +4000 0 -4000 +4000\r\nS: 0 5 +4000 +4000 0 -4000 +4000\r\nM: 3\r\nS: 0 0 -4000 -4000 0 -4000 +4000\r\nS: 0 1 -4000 -4000 0 -4000 +4000\r\nS: 0 5 -4000 -4000 0 -4000 +4000\r\nM: 3\r\nS: 0 0 +4000 +4000 0 -4000 +4000\r\nS: 0 1 +4000 +4000 0 -4000 +4000\r\nS: 0 5 -4000 -4000 0 -4000 +4000\r\nM: 3\r\nS: 0 0 +4000 +4000 0 -4000 +4000\r\nS: 0 1 -4000 -4000 0 -4000 +4000\r\nS: 0 5 +4000 +4000 0 -4000 +4000\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19155/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19150","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19150/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19150/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19150/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19150","id":1127669390,"node_id":"I_kwDOAFDaZs5DNt6O","number":19150,"title":"Airspeed driver not started on boot w/ 1.13 master","user":{"login":"ryanjAA","id":31726584,"node_id":"MDQ6VXNlcjMxNzI2NTg0","avatar_url":"https://avatars.githubusercontent.com/u/31726584?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanjAA","html_url":"https://github.com/ryanjAA","followers_url":"https://api.github.com/users/ryanjAA/followers","following_url":"https://api.github.com/users/ryanjAA/following{/other_user}","gists_url":"https://api.github.com/users/ryanjAA/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanjAA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanjAA/subscriptions","organizations_url":"https://api.github.com/users/ryanjAA/orgs","repos_url":"https://api.github.com/users/ryanjAA/repos","events_url":"https://api.github.com/users/ryanjAA/events{/privacy}","received_events_url":"https://api.github.com/users/ryanjAA/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-02-08T19:27:41Z","updated_at":"2022-02-09T00:29:47Z","closed_at":"2022-02-09T00:18:06Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Using master from today (86f8168) on pixhawk 4 airspeed driver is not started automatically. \r\n\r\nI get no airspeed found when trying to do an airspeed cal. If I start the driver manually I can calibrate it, etc.\r\n\r\nTried with an ms4525","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19150/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19147","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19147/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19147/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19147/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19147","id":1127427022,"node_id":"PR_kwDOAFDaZs4yPopy","number":19147,"title":"local_position_estimator: move to INS0 work queue (for significantly more stack)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-02-08T15:43:27Z","updated_at":"2022-02-08T16:16:51Z","closed_at":"2022-02-08T16:16:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19147","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19147","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19147.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19147.patch","merged_at":"2022-02-08T16:16:50Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/17380","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19147/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19134","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19134/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19134/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19134/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19134","id":1124862465,"node_id":"I_kwDOAFDaZs5DDAoB","number":19134,"title":"icm20649 glitches at low IMU_GYRO_RATEMAX on fmu-v5x on v1.12.3","user":{"login":"simopanzer89","id":24300565,"node_id":"MDQ6VXNlcjI0MzAwNTY1","avatar_url":"https://avatars.githubusercontent.com/u/24300565?v=4","gravatar_id":"","url":"https://api.github.com/users/simopanzer89","html_url":"https://github.com/simopanzer89","followers_url":"https://api.github.com/users/simopanzer89/followers","following_url":"https://api.github.com/users/simopanzer89/following{/other_user}","gists_url":"https://api.github.com/users/simopanzer89/gists{/gist_id}","starred_url":"https://api.github.com/users/simopanzer89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simopanzer89/subscriptions","organizations_url":"https://api.github.com/users/simopanzer89/orgs","repos_url":"https://api.github.com/users/simopanzer89/repos","events_url":"https://api.github.com/users/simopanzer89/events{/privacy}","received_events_url":"https://api.github.com/users/simopanzer89/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-02-05T07:42:23Z","updated_at":"2022-02-09T00:14:04Z","closed_at":"2022-02-09T00:14:04Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nICM-20649 IMU measurements (both accel and gyro) contain several glitches when `IMU_GYRO_RATEMAX` is set to 250 Hz on v1.12.3 (fmu-v5x).\r\nThe issue does not show up when `IMU_GYRO_RATEMAX` is set to larger values (e.g. with 400 Hz there is no issue).\r\n\r\n**To Reproduce**\r\n* Flash v1.12.3 stable\r\n* From QGC reset parameters to default\r\n* Set `IMU_GYRO_RATEMAX` to 250 Hz\r\n* Reboot\r\n* From the nsh console run `icm20649 status`. Several errors show up.\r\n* Log `sensor_gyro_0` and `sensor_accel_0` for a minute. Check that glitches appear on both gyro and accel (with the autopilot fixed on ground).\r\n\r\n```\r\nnsh> icm20649 status\r\nINFO  [SPI_I2C] Running on SPI Bus 3\r\nINFO  [icm20649] FIFO empty interval: 3555 us (281.3 Hz)\r\nicm20649: bad register: 0 events\r\nicm20649: bad transfer: 62 events\r\nicm20649: FIFO empty: 0 events\r\nicm20649: FIFO overflow: 5871 events\r\nicm20649: FIFO reset: 5872 events\r\nicm20649: DRDY missed: 0 events\r\n```\r\n\r\n**Expected behavior**\r\nThe IMU measurements are expected to contain no glitches/discontinuities. It is expected that running `icm20649 status` shows no errors. The gyros should read (0,0,0) and accels should read constant (0,0,-g) when fixed on ground.\r\n\r\n**Log Files and Screenshots**\r\n\r\nlog at `IMU_GYRO_RATEMAX` 250: glitches show up on gyros and accels\r\nhttps://logs.px4.io/plot_app?log=64ffb368-d808-4687-b811-7b74288e1183\r\n\r\nlog at `IMU_GYRO_RATEMAX` 400: no glitches show up\r\nhttps://logs.px4.io/plot_app?log=ae0a092a-7756-4e00-b394-129a18e8679c\r\n\r\nScreenshots in the case of `IMU_GYRO_RATEMAX` 250: the glitches are evident even in the logfile:\r\n\r\n![gyro_IMU_GYRO_RATEMAX_250](https://user-images.githubusercontent.com/24300565/152633248-856abf12-dab9-4f69-8294-90e09cffefd6.png)\r\n\r\n![accel_IMU_GYRO_RATEMAX_250](https://user-images.githubusercontent.com/24300565/152633252-204574bf-a8f0-41b8-89a0-e79acea73755.png)\r\n\r\n**Autopilot hardware:** Holybro Pixhawk 5X (fmu-v5x)\r\nhttps://docs.px4.io/master/en/flight_controller/pixhawk5x.html\r\n\r\nIMUs:\r\n* Accel/Gyro: ICM-20649\r\n* Accel/Gyro: ICM-42688P\r\n* Accel/Gyro: ICM-20602\r\n\r\n**Additional context**\r\nOther IMUs mounted on Pixhawk 5X (ICM-42688P and ICM-20602) are not subject to the issue.\r\n\r\n```\r\nnsh> icm42688p status\r\nINFO  [SPI_I2C] Running on SPI Bus 2\r\nINFO  [icm42688p] FIFO empty interval: 4000 us (250.0 Hz)\r\nicm42688p: bad register: 0 events\r\nicm42688p: bad transfer: 0 events\r\nicm42688p: FIFO empty: 0 events\r\nicm42688p: FIFO overflow: 0 events\r\nicm42688p: FIFO reset: 1 events\r\nicm42688p: DRDY missed: 0 events\r\n\r\nnsh> icm20602 status\r\nINFO  [SPI_I2C] Running on SPI Bus 1\r\nINFO  [icm20602] FIFO empty interval: 4000 us (250.0 Hz)\r\nicm20602: bad register: 0 events\r\nicm20602: bad transfer: 0 events\r\nicm20602: FIFO empty: 0 events\r\nicm20602: FIFO overflow: 0 events\r\nicm20602: FIFO reset: 1 events\r\nicm20602: DRDY missed: 0 events\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19134/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19120","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19120/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19120/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19120/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19120","id":1122303653,"node_id":"PR_kwDOAFDaZs4x_Hll","number":19120,"title":"mavlink: send_mission_current fix seq check","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-02-02T19:27:21Z","updated_at":"2022-02-04T14:40:26Z","closed_at":"2022-02-04T14:40:26Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19120","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19120","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19120.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19120.patch","merged_at":"2022-02-04T14:40:26Z"},"body":"![Screenshot from 2022-02-02 14-27-02](https://user-images.githubusercontent.com/84712/152222889-3d3c1e70-be19-4182-85d2-ef48af994177.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19120/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19088","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19088/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19088/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19088/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19088","id":1116826801,"node_id":"I_kwDOAFDaZs5CkWyx","number":19088,"title":"Airspeed Calibration not working on Pixhawk 5X VTOL Firmware ","user":{"login":"poyatabrizi","id":19472947,"node_id":"MDQ6VXNlcjE5NDcyOTQ3","avatar_url":"https://avatars.githubusercontent.com/u/19472947?v=4","gravatar_id":"","url":"https://api.github.com/users/poyatabrizi","html_url":"https://github.com/poyatabrizi","followers_url":"https://api.github.com/users/poyatabrizi/followers","following_url":"https://api.github.com/users/poyatabrizi/following{/other_user}","gists_url":"https://api.github.com/users/poyatabrizi/gists{/gist_id}","starred_url":"https://api.github.com/users/poyatabrizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poyatabrizi/subscriptions","organizations_url":"https://api.github.com/users/poyatabrizi/orgs","repos_url":"https://api.github.com/users/poyatabrizi/repos","events_url":"https://api.github.com/users/poyatabrizi/events{/privacy}","received_events_url":"https://api.github.com/users/poyatabrizi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":5679108887,"node_id":"LA_kwDOAFDaZs8AAAABUoBTFw","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/v1.12","name":"v1.12","color":"FCC60F","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":15,"created_at":"2022-01-27T23:04:40Z","updated_at":"2023-08-15T12:19:49Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Issue Details**\r\nWhen performing a calibration, the process just goes through without me having to blow into the pitot\r\nAfter above-mentioned calibration, the speed with no wind reads at ~9m/s or ~30km/h\r\nI have tested Ardupilot firmware and my standby airspeed reads around ~2m/s.\r\n\r\n**To Reproduce**\r\n-Connect the 45250 airspeed sensor via I2C\r\n-Navigate to sensors and airspeed\r\n-After sensor calibration, reboot\r\n-Check airspeed value on the main screen\r\n\r\n\r\n**Expected behaviour**\r\nI expect the calibration will take into account the offset of the sensor and result in close to 0 airspeeds when there are no wind (i.e. indoor)\r\n\r\n**Log Files and Screenshots**\r\nRefer to forum chat where multiple people are experiencing this and there are screenshots provided.\r\nhttps://discuss.px4.io/t/airspeed-sensor-is-off-by-9m-s-or-30km-h/25901\r\n\r\n**Drone (please complete the following information):**\r\nPixhawk 5X flight controller\r\nVTOL - Generic Quadplane VTOL\r\n45250 5A1 airspeed sensor\r\nQground Stable Version 4.0\r\nPX4 Firmware: Standard VTOL (Generic Quadplane) Firmware 1.12.3\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19088/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19072","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19072/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19072/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19072/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19072","id":1114277301,"node_id":"PR_kwDOAFDaZs4xlC25","number":19072,"title":"ekf2: mag field strength check respect requirements","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-25T19:26:16Z","updated_at":"2022-01-27T14:05:15Z","closed_at":"2022-01-27T14:05:14Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19072","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19072","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19072.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19072.patch","merged_at":"2022-01-27T14:05:14Z"},"body":"The mag field disturbed preflight check was triggering even with EKF2_MAG_TYPE to set none.\r\n\r\n - requires valid mag data (_mag_data_ready)\r\n - respect mag_fusion_type (including MAG_FUSE_TYPE_INDOOR)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19072/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19047","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19047/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19047/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19047/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19047","id":1108576168,"node_id":"PR_kwDOAFDaZs4xSb_C","number":19047,"title":"platforms/nuttx: px4io_serial always cleanup DMA before next bus exchange","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-01-19T21:25:14Z","updated_at":"2022-01-20T00:56:46Z","closed_at":"2022-01-19T23:00:18Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19047","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19047","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19047.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19047.patch","merged_at":"2022-01-19T23:00:18Z"},"body":" - this really shouldn't be necessary, but worst case it's harmless and much better than potentially falling out of the sky\r\n\r\n\r\nhttps://github.com/PX4/PX4-Autopilot/pull/18893\r\n\r\n@JohnSnowball ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19047/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19046","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19046/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19046/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19046/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19046","id":1108449661,"node_id":"I_kwDOAFDaZs5CEZl9","number":19046,"title":"X500V2 kit Jumps when switching to AltHold","user":{"login":"farhangnaderi","id":46557204,"node_id":"MDQ6VXNlcjQ2NTU3MjA0","avatar_url":"https://avatars.githubusercontent.com/u/46557204?v=4","gravatar_id":"","url":"https://api.github.com/users/farhangnaderi","html_url":"https://github.com/farhangnaderi","followers_url":"https://api.github.com/users/farhangnaderi/followers","following_url":"https://api.github.com/users/farhangnaderi/following{/other_user}","gists_url":"https://api.github.com/users/farhangnaderi/gists{/gist_id}","starred_url":"https://api.github.com/users/farhangnaderi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farhangnaderi/subscriptions","organizations_url":"https://api.github.com/users/farhangnaderi/orgs","repos_url":"https://api.github.com/users/farhangnaderi/repos","events_url":"https://api.github.com/users/farhangnaderi/events{/privacy}","received_events_url":"https://api.github.com/users/farhangnaderi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-01-19T18:57:44Z","updated_at":"2022-02-16T17:03:30Z","closed_at":"2022-02-16T17:03:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"After trying to fly with the Holybro X500 V2 kit which flies well with Stabilized mode, I noticed that the drone jumps up and down when switching to Altitude mode. The kit is equipped with Pixhawk 5X. A log is also as below:\r\n\r\nhttps://review.px4.io/plot_app?log=21beb351-f2bb-4767-b71f-725946098ec0\r\n\r\nI found something which might be relevant [here](https://github.com/PX4/PX4-Autopilot/issues/11717) but not sure if it is the case!!! \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19046/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19045","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19045/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19045/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19045/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19045","id":1108320138,"node_id":"I_kwDOAFDaZs5CD5-K","number":19045,"title":"(Asking for Ideas) Exception for Non-aerial vehicle's takeoff altitude check for missions","user":{"login":"junwoo091400","id":23277211,"node_id":"MDQ6VXNlcjIzMjc3MjEx","avatar_url":"https://avatars.githubusercontent.com/u/23277211?v=4","gravatar_id":"","url":"https://api.github.com/users/junwoo091400","html_url":"https://github.com/junwoo091400","followers_url":"https://api.github.com/users/junwoo091400/followers","following_url":"https://api.github.com/users/junwoo091400/following{/other_user}","gists_url":"https://api.github.com/users/junwoo091400/gists{/gist_id}","starred_url":"https://api.github.com/users/junwoo091400/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junwoo091400/subscriptions","organizations_url":"https://api.github.com/users/junwoo091400/orgs","repos_url":"https://api.github.com/users/junwoo091400/repos","events_url":"https://api.github.com/users/junwoo091400/events{/privacy}","received_events_url":"https://api.github.com/users/junwoo091400/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":4448141081,"node_id":"LA_kwDOAFDaZs8AAAABCSE_GQ","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Boat%20%F0%9F%9A%A4","name":"Boat 🚤","color":"267EE2","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-01-19T16:39:12Z","updated_at":"2022-10-31T08:13:15Z","closed_at":"2022-10-31T08:13:15Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Situation**\r\nWith a simulated boat (`make px4_sitl gazebo_boat`), uploading the mission with take-off altitude of less than 1.5 meters will result in a QGC message : \"Mission rejected: takeoff altitude too low! Minimum: 1.5m'. Preventing it from loading the mission.\r\n\r\n**Explanation**\r\nMission Feasibility Checker inside the Navigator doesn't consider rover / boat cases as an **exception** (since they don't take-off).\r\n> https://github.com/PX4/PX4-Autopilot/blob/1f73294ad768414f39ccc2d047e321cc5d8547a4/src/modules/navigator/mission_feasibility_checker.cpp#L359\r\n\r\nI thought having `!(_navigator->get_vstatus()->vehicle_type == vehicle_status_s::VEHICLE_TYPE_ROVER)` condition would be enough to solve the case, but turns out Boat simulation considers it's vehicle type as VEHICLE_TYPE_UNKNOWN.\r\n\r\n**Ideas**\r\n1. Giving an exception to all the UNKNOWN vehicle type & ROVER : This can mistakenly include aerial vehicles with UNKNOWN type into account\r\n2. Creating the Boat vehicle type\r\n3. Consider Boats as Rovers\r\n\r\nI would like to hear some ideas on what's the best way to handle this!","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19045/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19045/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19043","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19043/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19043/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19043/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19043","id":1108136255,"node_id":"PR_kwDOAFDaZs4xQ_q9","number":19043,"title":"npfg: fix typo in Vector2f indexing","user":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"assignees":[{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-01-19T14:00:56Z","updated_at":"2022-01-19T16:17:46Z","closed_at":"2022-01-19T16:17:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19043","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19043","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19043.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19043.patch","merged_at":"2022-01-19T16:17:45Z"},"body":"Spotted an accidental instance of indexing a `Vector2f` with floats.. fixed that.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19043/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19041","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19041/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19041/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19041/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19041","id":1107911809,"node_id":"PR_kwDOAFDaZs4xQP4P","number":19041,"title":"Multicopter position control: Invalid setpoint can windup integrator","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-01-19T10:17:10Z","updated_at":"2022-01-19T13:31:21Z","closed_at":"2022-01-19T13:31:20Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19041","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19041","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19041.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19041.patch","merged_at":"2022-01-19T13:31:20Z"},"body":"**Describe problem solved by this pull request**\r\nSettings a specific combination of invalid `trajectory_setpoint` can lead to a flyaway.\r\n![image](https://user-images.githubusercontent.com/4668506/150109782-b53df2ad-689a-47d3-8b85-bacd199a2402.png)\r\nThis was found during simulation debugging for #18988 \r\n\r\nI found that depending on the setpoint combination the velocity integrator can wind up because the calculations are ran with the invalid setpoint. Even though the results of the \"invalid calculation\" are not use the integrator state inside the controller is updated and leads to the problem.\r\n\r\n**Describe your solution**\r\n1. I added a minimal unit test to reproduce the error case.\r\n2.  I made the checks for valid inputs and combinations very explicit at the beginning and don't run any calculations if they do not pass the check.\r\n3. The existing tests and the new one pass.\r\n\r\n**Test data / coverage**\r\nAdded unit test and manual test case in SITL with which I originally found the issue work as expected with this pr.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19041/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19034","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19034/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19034/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19034/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19034","id":1107054362,"node_id":"PR_kwDOAFDaZs4xNd4k","number":19034,"title":"sensors/vehicle_gps_position: don't work with 64 bit time with 32 bit floats","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-18T15:37:37Z","updated_at":"2022-01-21T14:18:51Z","closed_at":"2022-01-21T14:18:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19034","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19034","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19034.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19034.patch","merged_at":"2022-01-21T14:18:50Z"},"body":"As we learned in https://github.com/PX4/PX4-Autopilot/pull/18358 and https://github.com/PX4/PX4-Autopilot/pull/18359 we shouldn't use floats when working with 64 bit timestamps because it starts to introduce errors after a few hours.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19034/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19014","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19014/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19014/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19014/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19014","id":1103986324,"node_id":"I_kwDOAFDaZs5BzX6U","number":19014,"title":"Ainstein US-D1 not working","user":{"login":"msnesbit","id":73359482,"node_id":"MDQ6VXNlcjczMzU5NDgy","avatar_url":"https://avatars.githubusercontent.com/u/73359482?v=4","gravatar_id":"","url":"https://api.github.com/users/msnesbit","html_url":"https://github.com/msnesbit","followers_url":"https://api.github.com/users/msnesbit/followers","following_url":"https://api.github.com/users/msnesbit/following{/other_user}","gists_url":"https://api.github.com/users/msnesbit/gists{/gist_id}","starred_url":"https://api.github.com/users/msnesbit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msnesbit/subscriptions","organizations_url":"https://api.github.com/users/msnesbit/orgs","repos_url":"https://api.github.com/users/msnesbit/repos","events_url":"https://api.github.com/users/msnesbit/events{/privacy}","received_events_url":"https://api.github.com/users/msnesbit/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-01-14T18:24:22Z","updated_at":"2023-05-09T11:39:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Current build 1.12.3 on a Pixhawk 4\r\nThe sens_uland_cfg exists in the parameter list which, as I understand, means that the driver exists on this firmware build.\r\nI have tried every port option I can think of, as well as supplying power to the radar via a BEC and not from the Pixhawk power rail,  but I have yet to read any data from it. The radar is getting power and pulling a very small amount of current which indicates to me that the unit is likely functioning. Any help would be much appreciated!\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19014/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19013","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19013/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19013/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19013/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19013","id":1103936899,"node_id":"PR_kwDOAFDaZs4xDQx4","number":19013,"title":"Wind Estimator: use vehicle heading instead of course for initialisation","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-14T17:25:47Z","updated_at":"2022-01-14T22:42:02Z","closed_at":"2022-01-14T22:42:01Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/19013","html_url":"https://github.com/PX4/PX4-Autopilot/pull/19013","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/19013.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/19013.patch","merged_at":"2022-01-14T22:42:01Z"},"body":"Replaces https://github.com/PX4/PX4-Autopilot/pull/19011\r\n\r\n**Describe problem solved by this pull request**\r\nCurrently the ground course is used to map the airspeed measurement to a airspeed vector during the wind speed initialization (wind = ground - airspeed), as the airspeed sensor always points into the direction of the vehicle.\r\n\r\n**Describe your solution**\r\nUse vehicle heading. \r\n\r\n**Test data / coverage**\r\nSITL\r\nNew:\r\n![image](https://user-images.githubusercontent.com/26798987/149557712-75f75d6b-5610-4fde-b611-594d092df35c.png)\r\nOld:\r\n![image](https://user-images.githubusercontent.com/26798987/149557787-9ab06421-7513-48ad-a2d8-2bbb0d970e54.png)\r\n\r\n\r\n**Additional context**\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19013/reactions","total_count":4,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":4},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19013/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19009","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19009/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19009/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19009/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/19009","id":1103417653,"node_id":"I_kwDOAFDaZs5BxNE1","number":19009,"title":"Bug of \"make px4_sitl gazebo\"","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":663879765,"node_id":"MDU6TGFiZWw2NjM4Nzk3NjU=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/gazebo%20classic","name":"gazebo classic","color":"EE7F04","default":false,"description":"Gazebo classic simulator"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-01-14T10:20:08Z","updated_at":"2023-05-17T07:54:43Z","closed_at":"2023-03-23T22:01:34Z","author_association":"NONE","active_lock_reason":null,"body":"```\r\n(base)user:~/PX4/PX4-Autopilot$ sudo make px4_sitl gazebo\r\n[0/5] Performing configure step for 'sitl_gazebo'\r\n-- install-prefix: /usr/local\r\n-- cmake build type: RelWithDebInfo\r\n-- Using C++17 standard\r\n-- ccache enabled (export CCACHE_DISABLE=1 to disable)\r\nCMake Error at /usr/lib/x86_64-linux-gnu/cmake/Boost-1.71.0/BoostConfig.cmake:117 (find_package):\r\n  Could not find a package configuration file provided by \"boost_filesystem\"\r\n  (requested version 1.71.0) with any of the following names:\r\n\r\n    boost_filesystemConfig.cmake\r\n    boost_filesystem-config.cmake\r\n\r\n  Add the installation prefix of \"boost_filesystem\" to CMAKE_PREFIX_PATH or\r\n  set \"boost_filesystem_DIR\" to a directory containing one of the above\r\n  files.  If \"boost_filesystem\" provides a separate development package or\r\n  SDK, be sure it has been installed.\r\nCall Stack (most recent call first):\r\n  /usr/lib/x86_64-linux-gnu/cmake/Boost-1.71.0/BoostConfig.cmake:182 (boost_find_component)\r\n  /usr/share/cmake-3.16/Modules/FindBoost.cmake:443 (find_package)\r\n  CMakeLists.txt:47 (find_package)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/volatile/home/user/PX4/PX4-Autopilot/build/px4_sitl_default/build_gazebo/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/volatile/home/user/PX4/PX4-Autopilot/build/px4_sitl_default/build_gazebo/CMakeFiles/CMakeError.log\".\r\nFAILED: external/Stamp/sitl_gazebo/sitl_gazebo-configure \r\ncd /volatile/home/user/PX4/PX4-Autopilot/build/px4_sitl_default/build_gazebo && /usr/bin/cmake -DCMAKE_INSTALL_PREFIX=/usr/local -DSEND_ODOMETRY_DATA=ON -DGENERATE_ROS_MODELS=ON -GNinja /volatile/home/user/PX4/PX4-Autopilot/Tools/sitl_gazebo && /usr/bin/cmake -E touch /volatile/home/user/PX4/PX4-Autopilot/build/px4_sitl_default/external/Stamp/sitl_gazebo/sitl_gazebo-configure\r\nninja: build stopped: subcommand failed.\r\nmake: *** [Makefile:235 : px4_sitl] Erreur 1\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/19009/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18995","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18995/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18995/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18995/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18995","id":1099549866,"node_id":"PR_kwDOAFDaZs4w0YEb","number":18995,"title":"fix UAVCAN esc_status publish conflict","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-11T19:38:50Z","updated_at":"2022-01-14T17:17:50Z","closed_at":"2022-01-14T17:17:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18995","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18995","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18995.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18995.patch","merged_at":"2022-01-14T17:17:49Z"},"body":"UAVCAN esc_status was publishing even with no ESCs attached. Additionally dshot was only publishing to the first esc_status instance.\r\n\r\n![image](https://user-images.githubusercontent.com/84712/149009828-653dd0aa-3aa4-4a32-aa62-0830a6c4a406.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18995/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18991","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18991/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18991/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18991/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18991","id":1099285607,"node_id":"PR_kwDOAFDaZs4wzhMJ","number":18991,"title":"sensors/vehicle_imu: fix SENS_IMU_AUTOCAL saving logic","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-11T15:17:13Z","updated_at":"2022-01-11T16:47:04Z","closed_at":"2022-01-11T16:47:03Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18991","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18991","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18991.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18991.patch","merged_at":"2022-01-11T16:47:03Z"},"body":" - on cycles that don't check for updated calibration (estimated bias) we check if there's anything valid to save (when disarmed)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18991/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18986","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18986/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18986/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18986/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18986","id":1098074649,"node_id":"PR_kwDOAFDaZs4wviz7","number":18986,"title":"lib/sensor_calibration: handle calibration slot change on parameter update","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-10T16:05:52Z","updated_at":"2022-01-10T22:16:51Z","closed_at":"2022-01-10T22:16:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18986","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18986","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18986.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18986.patch","merged_at":"2022-01-10T22:16:50Z"},"body":"This is a small bug that slipped in at some point and only matters if your sensors move around (instance numbering) between full manual recalibrations.\r\n\r\nWhen performing a full (re-)calibration the accel/gyro/mag calibration parameters are written out in the current sensor topic order. Downstream consumers (eg sensors/vehicle_imu) need to handle the case where the calibration slot (eg CAL_ACCx) has changed.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18986/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18981","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18981/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18981/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18981/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18981","id":1097352961,"node_id":"PR_kwDOAFDaZs4wtL8n","number":18981,"title":"commander: fix COM_HOME_EN missing case","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-10T00:52:58Z","updated_at":"2022-01-10T01:52:08Z","closed_at":"2022-01-10T01:52:07Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18981","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18981","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18981.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18981.patch","merged_at":"2022-01-10T01:52:07Z"},"body":" - VEHICLE_CMD_COMPONENT_ARM_DISARM is yet another path that calls set_home_position()\r\n\r\nThere are quite a few paths through commander that set and update home_position.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18981/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18971","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18971/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18971/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18971/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18971","id":1096433147,"node_id":"PR_kwDOAFDaZs4wqlWM","number":18971,"title":"Fix thrust step after takeoff","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-01-07T15:45:15Z","updated_at":"2022-01-08T14:42:11Z","closed_at":"2022-01-08T14:42:10Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18971","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18971","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18971.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18971.patch","merged_at":"2022-01-08T14:42:10Z"},"body":"**Describe problem solved by this pull request**\r\nSeveral users reported having a thrust glitch during takeoff, caused by the hover thrust estimator getting valid.\r\n\r\n**Describe your solution**\r\nFix the equation that pre-loads the integrator when the new hover thrust parameter is applied:\r\n\r\nGiven that the equation for thrust is\r\n```T = a_sp * Th / g - Th```\r\nwith:\r\n```\r\na_sp = desired acceleration\r\nTh = hover thrust and\r\ng = gravity constant,\r\n```\r\nwe want to find the acceleration that needs to be added to the integrator in order obtain the same thrust after replacing the current hover thrust by the new one:\r\n```\r\nT' = T\r\na_sp' * Th' / g - Th' = a_sp * Th / g - Th\r\n```\r\nso \r\n```a_sp' = (a_sp - g) * Th / Th' + g```\r\nwe can then add a_sp' - a_sp to the current integrator to absorb the effect of changing Th by Th':\r\n```integrator = (a_sp - g) * Th / Th' + g - a_sp```\r\n\r\n**Test data / coverage**\r\nSITL tested. hover thrust changing from 0.8 to 0.5\r\nBefore:\r\n![DeepinScreenshot_select-area_20220107161058](https://user-images.githubusercontent.com/14822839/148568199-a72f63b3-83b3-465c-84c6-8a79f6febac9.png)\r\n\r\nWith this PR:\r\n![DeepinScreenshot_select-area_20220107161136](https://user-images.githubusercontent.com/14822839/148568221-4412890f-681b-4a47-983c-103da18874bc.png)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18971/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18968","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18968/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18968/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18968/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18968","id":1095631022,"node_id":"I_kwDOAFDaZs5BTgCu","number":18968,"title":"mRo OEM H7 GPS doesn’t work","user":{"login":"mrpollo","id":317648,"node_id":"MDQ6VXNlcjMxNzY0OA==","avatar_url":"https://avatars.githubusercontent.com/u/317648?v=4","gravatar_id":"","url":"https://api.github.com/users/mrpollo","html_url":"https://github.com/mrpollo","followers_url":"https://api.github.com/users/mrpollo/followers","following_url":"https://api.github.com/users/mrpollo/following{/other_user}","gists_url":"https://api.github.com/users/mrpollo/gists{/gist_id}","starred_url":"https://api.github.com/users/mrpollo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrpollo/subscriptions","organizations_url":"https://api.github.com/users/mrpollo/orgs","repos_url":"https://api.github.com/users/mrpollo/repos","events_url":"https://api.github.com/users/mrpollo/events{/privacy}","received_events_url":"https://api.github.com/users/mrpollo/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":26,"created_at":"2022-01-06T19:36:04Z","updated_at":"2022-03-26T19:36:09Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Using an OEM H7 you can't get a GPS to work, using the GPS port or CAN, neither show up with `gps status`\n\n\n```\nNuttShell (NSH) NuttX-10.1.0\nnsh> gps status\nINFO [gps] Main GPS\nINFO [gps] protocol: UBX\nINFO [gps] status: NOT OK, port: /dev/ttys2, baudrate: 0\nINFO [gps] sat info: disabled\nINFO [gps] rate reading: 0 B/s\nnsh>\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18968/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18953","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18953/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18953/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18953/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18953","id":1094214902,"node_id":"PR_kwDOAFDaZs4wjafx","number":18953,"title":"FlightTaskAuto: Respect altitude with offtrack state","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-01-05T10:43:10Z","updated_at":"2022-01-10T15:56:50Z","closed_at":"2022-01-07T15:30:39Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18953","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18953","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18953.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18953.patch","merged_at":"2022-01-07T15:30:39Z"},"body":"**Describe problem solved by this pull request**\r\nWhen sending consecutive reposition commands to a multicopter that contain different altitudes and not waiting until the previous target position was reached there's very strange behavior.\r\n\r\n**Describe your solution**\r\nThis solves one of the issues when switching goto target mid-flight where the altitude overshoots. Only the horizontal path between waypoints was considered in the \"off-track\" calculations. I'm using the exact same calculations just in 3D to also consider the altitude.\r\n\r\n**Describe possible alternatives**\r\nFurther improvements with unexpected waypoint changes require architecture changes to solve properly and are work in progress with the new mode architecture.\r\n\r\n**Test data / coverage**\r\nI tested this in SITL and SIH and the switching has fewer issues. It still does an overshoot but converges to the right path fairly quickly while before if the altitude didn't match it could get stuck for quite some time and start wobbling back and forth.\r\n\r\n**Additional context**\r\nSIH Example before:\r\n![image](https://user-images.githubusercontent.com/4668506/148204467-47da7ed2-5a07-460c-b27e-68f0f540a0c5.png)\r\n\r\n\r\nSIH Example after:\r\n![image](https://user-images.githubusercontent.com/4668506/148204352-d0718056-e342-465b-a8ae-ad93cc013deb.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18953/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18948","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18948/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18948/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18948/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18948","id":1093229221,"node_id":"PR_kwDOAFDaZs4wgN9G","number":18948,"title":"Fix delta angle coning metric","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-01-04T10:47:29Z","updated_at":"2022-01-04T16:03:52Z","closed_at":"2022-01-04T14:28:49Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18948","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18948","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18948.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18948.patch","merged_at":"2022-01-04T14:28:49Z"},"body":"**Describe problem solved by this pull request**\r\nIn https://github.com/PX4/PX4-Autopilot/pull/18001 we replaced the internal computation of the vibration metric that was done by the EKF to the metric computed in the IMU module directly. However, there is a scale issue due to the conversion between delta angles and angular velocity for the coning metric:\r\n\r\nIn the past, we were computing the vibration metric in the EKF:\r\n```coning = lpf(d_theta[k] x d_theta[k-1])``` << note the cross product\r\nnow, it is computed on the integrated IMU data from angular velocities\r\n```coning_vel = lpf(w[k] x w[k-1])```\r\nand then sent to the EKF as `coning = coning_vel * dt`\r\nhowever, since `d_theta = w * dt`,\r\n```coning = lpf(w[k]*dt x w[k-1]*dt)```\r\nor\r\n```coning = coning_vel * dt^2```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18948/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18939","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18939/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18939/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18939/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18939","id":1092043085,"node_id":"I_kwDOAFDaZs5BF0FN","number":18939,"title":"NuttX possible heap corruption (px4_fmu-v5_debug)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-01-02T15:31:08Z","updated_at":"2022-07-08T14:55:15Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"During `sd_bench -u -v` on px4_fmu-v5_debug. Note CONFIG_ARMV7M_STACKCHECK is no longer enabled in px4_fmu-v5_debug (redundant with px4_fmu-v5_stackcheck).\r\n\r\nhttp://px4-jenkins.dagar.ca:8080/blue/organizations/jenkins/PX4-Autopilot/detail/master/649/pipeline/362\r\n![Screenshot from 2022-01-02 10-30-07](https://user-images.githubusercontent.com/84712/147880660-fb3fb0ed-dd97-4f97-b2fb-52236f403fc9.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18939/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18931","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18931/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18931/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18931/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18931","id":1091620708,"node_id":"PR_kwDOAFDaZs4wbGwF","number":18931,"title":"NuttX with bch flush backport","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-31T16:30:50Z","updated_at":"2021-12-31T18:59:57Z","closed_at":"2021-12-31T18:59:57Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18931","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18931","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18931.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18931.patch","merged_at":"2021-12-31T18:59:57Z"},"body":"Opening to test https://github.com/PX4/NuttX/pull/176.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18931/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18927","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18927/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18927/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18927/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18927","id":1091315379,"node_id":"PR_kwDOAFDaZs4waIRn","number":18927,"title":"parameters: fix export shutdown locking","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-12-30T21:40:23Z","updated_at":"2022-01-02T15:46:35Z","closed_at":"2022-01-02T15:46:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18927","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18927","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18927.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18927.patch","merged_at":"2022-01-02T15:46:34Z"},"body":"In NuttX bchlib keeps a sector sized buffer that might not be written out to ramtron until the file is closed (depending on usage). This was also interfering with the recently add parameter verification functionality that was reading back after an export. Depending on the size of the parameters the verify read was only coming from the buffer rather than the underlying ramtron storage as intended.\r\n\r\nAs a result there can be final ramtron writes that happens outside of our px4 shutdown lock.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18927/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18914","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18914/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18914/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18914/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18914","id":1089318413,"node_id":"PR_kwDOAFDaZs4wTsku","number":18914,"title":"cmake: NuttX use cygwin friendly path for linker script","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-27T15:36:11Z","updated_at":"2021-12-27T17:19:13Z","closed_at":"2021-12-27T17:19:12Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18914","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18914","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18914.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18914.patch","merged_at":"2021-12-27T17:19:12Z"},"body":" - possible fix for https://github.com/PX4/PX4-Autopilot/issues/18894","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18914/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18904","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18904/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18904/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18904/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18904","id":1088001003,"node_id":"I_kwDOAFDaZs5A2ZPr","number":18904,"title":"Issue compiling 1.11.3 with Kconfig","user":{"login":"ZacharyLowell","id":22266886,"node_id":"MDQ6VXNlcjIyMjY2ODg2","avatar_url":"https://avatars.githubusercontent.com/u/22266886?v=4","gravatar_id":"","url":"https://api.github.com/users/ZacharyLowell","html_url":"https://github.com/ZacharyLowell","followers_url":"https://api.github.com/users/ZacharyLowell/followers","following_url":"https://api.github.com/users/ZacharyLowell/following{/other_user}","gists_url":"https://api.github.com/users/ZacharyLowell/gists{/gist_id}","starred_url":"https://api.github.com/users/ZacharyLowell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZacharyLowell/subscriptions","organizations_url":"https://api.github.com/users/ZacharyLowell/orgs","repos_url":"https://api.github.com/users/ZacharyLowell/repos","events_url":"https://api.github.com/users/ZacharyLowell/events{/privacy}","received_events_url":"https://api.github.com/users/ZacharyLowell/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2021-12-23T21:29:38Z","updated_at":"2022-02-17T17:12:56Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hello - I am currently trying to compile an iteration of 1.11.3 PX4 on my macbook pro with an M1 chip and I get the following error: \r\n\r\n![image](https://user-images.githubusercontent.com/22266886/147292873-3c752daf-ffe9-45b8-9430-ef5e85681e35.png)\r\n\r\nWhat is strange is I am able to compile 1.12.3 just fine - I am assuming it is an issue with nuttx and the kconfig-frontends install via brew? \r\n\r\nAny advice would be great - currently need the 1.11.3 iteration to compile - tried uninstalling brew then reinstalling and running ./Tools/setup/macos.sh, but am still provided with the same error whenever I compile.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18904/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18903","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18903/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18903/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18903/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18903","id":1087979210,"node_id":"PR_kwDOAFDaZs4wPlcE","number":18903,"title":"boards: mro ctrl-zero-h7 pin fixes","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-12-23T20:35:58Z","updated_at":"2022-01-20T19:14:44Z","closed_at":"2021-12-27T14:25:21Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18903","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18903","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18903.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18903.patch","merged_at":"2021-12-27T14:25:21Z"},"body":"The larger diff is from syncing this up with the pixracer pro.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18903/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18897","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18897/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18897/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18897/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18897","id":1087906939,"node_id":"PR_kwDOAFDaZs4wPWOi","number":18897,"title":"NuttX with fat32 and stm32f7/stm32_sdmmc.c fixes","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-12-23T18:04:10Z","updated_at":"2021-12-28T16:08:46Z","closed_at":"2021-12-23T18:09:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18897","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18897","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18897.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18897.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18897/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18896","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18896/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18896/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18896/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18896","id":1087860668,"node_id":"PR_kwDOAFDaZs4wPMdT","number":18896,"title":"boards: emlid_navio_default fix missing drivers/modules","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":326832167,"node_id":"MDU6TGFiZWwzMjY4MzIxNjc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hardware:%20raspberry%20pi%20%F0%9F%8D%93","name":"hardware: raspberry pi 🍓","color":"867624","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-23T16:43:41Z","updated_at":"2021-12-23T20:57:12Z","closed_at":"2021-12-23T20:57:11Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18896","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18896","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18896.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18896.patch","merged_at":"2021-12-23T20:57:11Z"},"body":"On the emlid navio2 (raspberry pi shield) we have a few regressions from the kconfig transition.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18896/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18894","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18894/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18894/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18894/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18894","id":1087516947,"node_id":"I_kwDOAFDaZs5A0jET","number":18894,"title":"Build fail .elf file","user":{"login":"ttropcic","id":66463893,"node_id":"MDQ6VXNlcjY2NDYzODkz","avatar_url":"https://avatars.githubusercontent.com/u/66463893?v=4","gravatar_id":"","url":"https://api.github.com/users/ttropcic","html_url":"https://github.com/ttropcic","followers_url":"https://api.github.com/users/ttropcic/followers","following_url":"https://api.github.com/users/ttropcic/following{/other_user}","gists_url":"https://api.github.com/users/ttropcic/gists{/gist_id}","starred_url":"https://api.github.com/users/ttropcic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ttropcic/subscriptions","organizations_url":"https://api.github.com/users/ttropcic/orgs","repos_url":"https://api.github.com/users/ttropcic/repos","events_url":"https://api.github.com/users/ttropcic/events{/privacy}","received_events_url":"https://api.github.com/users/ttropcic/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-12-23T09:07:12Z","updated_at":"2021-12-27T15:36:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nHaving problem with building the code.\r\n\r\nCommand:\r\n$ make px4_fmu-v3_default\r\n\r\n\r\nGenerating C implementation in directory /cygdrive/c/PX4/home/PX4-Autopilot/build/px4_fmu-v3_default/mavlink/common\r\nGenerating C implementation in directory /cygdrive/c/PX4/home/PX4-Autopilot/build/px4_fmu-v3_default/mavlink/minimal\r\nCopying fixed headers for protocol 2.0 to /cygdrive/c/PX4/home/PX4-Autopilot/build/px4_fmu-v3_default/mavlink\r\n[1088/1090] Linking CXX executable px4_fmu-v3_default.elf\r\nFAILED: px4_fmu-v3_default.elf\r\n: && /cygdrive/c/PX4/toolchain/gcc-arm/bin/arm-none-eabi-g++.exe  -mcpu=cortex-m4 -mthumb -mfpu=fpv4-sp-d16 -mfloat-abi=hard -Os -DNDEBUG  --specs=nosys.specs @CMakeFiles/px4.rsp  -o px4_fmu-v3_default.elf  && :\r\nc:/px4/toolchain/gcc-arm/bin/../lib/gcc/arm-none-eabi/7.3.1/../../../../arm-none-eabi/bin/ld.exe: cannot open linker script file /cygdrive/c/PX4/home/PX4-Autopilot/boards/px4/fmu-v3/nuttx-config/scripts/script.ld: No such file or directory\r\ncollect2.exe: error: ld returned 1 exit status\r\nninja: build stopped: subcommand failed.\r\nmake: *** [Makefile:225: px4_fmu-v3_default] Error 1\r\n\r\nI don't understand the issue. That script that it says isn't there, is there. So if somebody could maybe suggest a solution, I would be very grateful.\r\nThanks!\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18894/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18893","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18893/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18893/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18893/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18893","id":1087224010,"node_id":"PR_kwDOAFDaZs4wNHOk","number":18893,"title":"px4io_serial: always perform full abort DMA on error","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2021-12-22T22:13:09Z","updated_at":"2022-01-19T17:24:34Z","closed_at":"2021-12-23T17:48:43Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18893","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18893","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18893.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18893.patch","merged_at":"2021-12-23T17:48:43Z"},"body":" - px4io_serial: always perform full abort DMA on error \r\n - enable DMA error perf count\r\n - possible fix (or overreaction) to https://github.com/PX4/PX4-Autopilot/issues/18375 https://github.com/PX4/PX4-Autopilot/issues/18856\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18893/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18892","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18892/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18892/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18892/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18892","id":1087007670,"node_id":"PR_kwDOAFDaZs4wMZ1C","number":18892,"title":"FW Position controller: make loiter switching logic robust against pos_sp with loiter_rad=0","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-22T16:50:02Z","updated_at":"2021-12-25T01:17:16Z","closed_at":"2021-12-25T01:17:15Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18892","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18892","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18892.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18892.patch","merged_at":"2021-12-25T01:17:15Z"},"body":"\r\n**Describe problem solved by this pull request**\r\nWhen flying in the windy SITL world the loiter circle of a GoTo looks like this:\r\n![image](https://user-images.githubusercontent.com/26798987/147126565-4fd396ad-c50a-4b45-a264-92091e04d16f.png)\r\nIt's because the position setpoint of a GoTo has the loiter_radius field at 0, and in handle_setpoint_type(), where we decide if the TYPE should be LOITER or POSITION, we used it without checking. \r\n\r\n**Describe your solution**\r\nCheck if pos_curr.loiter_radius is non-zero, otherwise use default loiter radius (the same logic is already used in control_auto_loiter().\r\n\r\n**Describe possible alternatives**\r\nSet the loiter_radius of GoTos to the default loiter radius - we could do this on top, but i think checking and adapting in FW Pos C is safer.\r\n\r\n**Test data / coverage**\r\nSITL tested.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18892/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18890","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18890/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18890/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18890/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18890","id":1086793815,"node_id":"PR_kwDOAFDaZs4wLsXY","number":18890,"title":"Commander: avoid RC actions during calibration","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-12-22T12:52:56Z","updated_at":"2021-12-22T14:08:24Z","closed_at":"2021-12-22T14:08:23Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18890","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18890","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18890.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18890.patch","merged_at":"2021-12-22T14:08:23Z"},"body":"**Describe problem solved by this pull request**\r\nBefore https://github.com/PX4/PX4-Autopilot/pull/17404 special handling of RC actions namely arming, modes switching and override during RC calibration was done through the `ManualControl::setRCAllowed()` in the class within commander. Listening to the `vehicle_status_flags.rc_input_blocked` flag was kept intact for the override but not for arming and mode switching.\r\n\r\n**Describe your solution**\r\nI rename the flag `vehicle_status_flags.rc_input_blocked` to `rc_calibration_in_progress` to avoid any ambiguity and guard the execution of RC-initiated actions during RC calibration.\r\n\r\n**Test data / coverage**\r\nI bench tested this on a pixracer with TBS Crossfire SBUS concentrating on holding the already calibrated arm gesture for a long time and also moving the already configured mode switch during calibration because that's what triggered the actions before.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18890/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18860","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18860/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18860/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18860/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18860","id":1081490887,"node_id":"PR_kwDOAFDaZs4v6aJU","number":18860,"title":"fix PARAM_PREFIX for boards with px4io (CONFIG_BOARD_IO)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-15T20:35:46Z","updated_at":"2021-12-16T06:20:13Z","closed_at":"2021-12-16T06:20:12Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18860","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18860","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18860.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18860.patch","merged_at":"2021-12-16T06:20:12Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18860/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18853","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18853/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18853/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18853/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18853","id":1080089283,"node_id":"PR_kwDOAFDaZs4v1ygO","number":18853,"title":"px4_mtd: update eeprom at24c driver to initialize multiple instances","user":{"login":"Igor-Misic","id":10188706,"node_id":"MDQ6VXNlcjEwMTg4NzA2","avatar_url":"https://avatars.githubusercontent.com/u/10188706?v=4","gravatar_id":"","url":"https://api.github.com/users/Igor-Misic","html_url":"https://github.com/Igor-Misic","followers_url":"https://api.github.com/users/Igor-Misic/followers","following_url":"https://api.github.com/users/Igor-Misic/following{/other_user}","gists_url":"https://api.github.com/users/Igor-Misic/gists{/gist_id}","starred_url":"https://api.github.com/users/Igor-Misic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Igor-Misic/subscriptions","organizations_url":"https://api.github.com/users/Igor-Misic/orgs","repos_url":"https://api.github.com/users/Igor-Misic/repos","events_url":"https://api.github.com/users/Igor-Misic/events{/privacy}","received_events_url":"https://api.github.com/users/Igor-Misic/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-14T18:35:42Z","updated_at":"2022-05-30T12:51:14Z","closed_at":"2021-12-20T12:27:08Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18853","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18853","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18853.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18853.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nWhen manifest has more than one defined EEPROM the only last one will be used for all definitions. \r\nFor example here:\r\nhttps://github.com/PX4/PX4-Autopilot/blob/master/boards/px4/fmu-v5x/src/mtd.cpp#L108-L109\r\nWhen writing to `base_eeprom` all data will go to `imu_eeprom`\r\n\r\n**Describe your solution**\r\nIn `driver px4_24xxxx_mtd.c` is allocated static memory for only one EEPROM. This solution is adding default  `#define BOARD_MTD_NUM_EEPROM 1`. In case the board will use more than one EEPROM `BOARD_MTD_NUM_EEPROM` should be set in `board_config.h`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18853/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18845","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18845/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18845/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18845/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18845","id":1078650847,"node_id":"PR_kwDOAFDaZs4vxAGs","number":18845,"title":"ekf2: selector use hysteresis for healthy flag","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-13T15:13:52Z","updated_at":"2021-12-14T14:52:37Z","closed_at":"2021-12-14T14:52:36Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18845","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18845","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18845.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18845.patch","merged_at":"2021-12-14T14:52:36Z"},"body":" - require that an instance is healthy continuously for >= 1s before allowing it to be used\r\n\r\nAccelerometer clipping is included as one of the estimator fault status flags. During periods of intermittent clipping across all IMUs (eg boards that only have 16G accels) this can result in rapid switching between estimators.\r\n\r\n![Screenshot from 2021-12-13 10-09-04](https://user-images.githubusercontent.com/84712/145837098-90275550-f6bb-4763-8ee2-93c429b48c9a.png)\r\n\r\nBy adding a small hysteresis to the per instance healthy flag we can minimize this.\r\n\r\n\r\n![Screenshot from 2021-12-13 10-12-00](https://user-images.githubusercontent.com/84712/145837551-b152b837-14c5-49da-8264-daa393e1ecb0.png)\r\n\r\nThis has been tested, but not in the original failure case on a board with 2 IMUs that both have the same accel dynamic range and a frame with very bad vibration.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18845/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18835","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18835/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18835/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18835/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18835","id":1077262695,"node_id":"PR_kwDOAFDaZs4vsy6v","number":18835,"title":"ekf2: delete obsolete _bad_vert_accel_detected","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-10T21:55:24Z","updated_at":"2021-12-13T14:13:41Z","closed_at":"2021-12-13T14:13:40Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18835","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18835","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18835.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18835.patch","merged_at":"2021-12-13T14:13:40Z"},"body":"Delete unused `_bad_vert_accel_detected` and update fusion helper methods.\r\n\r\n - `_bad_vert_accel_detected` was replaced with `_fault_status.flags.bad_acc_vertical` here https://github.com/PX4/PX4-ECL/pull/917 (https://github.com/PX4/PX4-ECL/commit/6e99ebd9286c5b52585d1809ae3ae2a3f00e6bd5)\r\n - an older PR (https://github.com/PX4/PX4-ECL/pull/836) that started months before my change wasn't actually merged until several months after and it restored `_bad_vert_accel_detected`, but in an incomplete state\r\n\r\nWe really need to be more careful when dealing with old PRs that are dragged along and rebased many times. I've personally found it can be easy to lose sight of real incremental history when rebasing multiple commits. In a lot of cases I think we're safer to merge master into these long lived branches, then finally squash & merge once done.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18835/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18835/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18819","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18819/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18819/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18819/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18819","id":1075101794,"node_id":"PR_kwDOAFDaZs4vlt-c","number":18819,"title":"Fix uavcan distance sensor not being logged","user":{"login":"AlexKlimaj","id":2019539,"node_id":"MDQ6VXNlcjIwMTk1Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/2019539?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexKlimaj","html_url":"https://github.com/AlexKlimaj","followers_url":"https://api.github.com/users/AlexKlimaj/followers","following_url":"https://api.github.com/users/AlexKlimaj/following{/other_user}","gists_url":"https://api.github.com/users/AlexKlimaj/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexKlimaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexKlimaj/subscriptions","organizations_url":"https://api.github.com/users/AlexKlimaj/orgs","repos_url":"https://api.github.com/users/AlexKlimaj/repos","events_url":"https://api.github.com/users/AlexKlimaj/events{/privacy}","received_events_url":"https://api.github.com/users/AlexKlimaj/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-12-09T03:26:51Z","updated_at":"2022-09-20T23:13:14Z","closed_at":"2021-12-10T06:19:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18819","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18819","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18819.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18819.patch","merged_at":"2021-12-10T06:19:34Z"},"body":"With the distance sensor logger set to optional, the ARK Flow distance sensor on uavcan doesn't get logged.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18819/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18818","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18818/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18818/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18818/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18818","id":1074826030,"node_id":"PR_kwDOAFDaZs4vk1Ax","number":18818,"title":"mavlink: stop_command fix potential dead lock","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-08T21:01:32Z","updated_at":"2021-12-10T01:40:56Z","closed_at":"2021-12-10T01:40:56Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18818","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18818","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18818.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18818.patch","merged_at":"2021-12-10T01:40:55Z"},"body":"Followup to https://github.com/PX4/PX4-Autopilot/pull/18809.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18818/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18811","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18811/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18811/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18811/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18811","id":1073830144,"node_id":"PR_kwDOAFDaZs4vhlNe","number":18811,"title":"fix incorrect L1 period param documentation","user":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"assignees":[{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2021-12-07T23:13:09Z","updated_at":"2021-12-09T18:19:55Z","closed_at":"2021-12-08T15:42:51Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18811","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18811","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18811.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18811.patch","merged_at":"2021-12-08T15:42:51Z"},"body":"Minor bug - small PR.\r\n\r\nI noticed while working on #18810 that the L1 period param has been incorrectly documented for some time now (wrong units -- should be seconds):\r\nhttps://github.com/PX4/PX4-Autopilot/blob/08b0ac9654d0041a78c61025a4114a59b0045f4d/src/modules/fw_pos_control_l1/fw_pos_control_l1_params.c#L46-L61\r\n\r\nIt is correct in the L1 library:\r\nhttps://github.com/PX4/PX4-Autopilot/blob/08b0ac9654d0041a78c61025a4114a59b0045f4d/src/lib/l1/ECL_L1_Pos_Controller.hpp#L220\r\n\r\nI guess this is just left over documentation from when the L1 distance was still not dynamic with ground speed (some time ago) and this param was literally the L1 distance.\r\n\r\nMy suggested changes:\r\n- documentation fix (correct units, etc)\r\n- lower the minimum period and period recommendations to what an L1 distance at ground speed 15 m/s would translate to\r\n\r\n^The latter point here open for debate if anyone has opinions (I didnt change the default).\r\n\r\nDerivation of \"5-10\" seconds comes from the following equation:\r\n```\r\nl1_distance = ground_speed * damping * period /  pi\r\n```\r\nSolve for period with the previously suggested 18-25 meters (L1 distance) and you get 5-7s.\r\n\r\nWill keep as draft until anyone else chimes in.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18811/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18790","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18790/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18790/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18790/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18790","id":1071560117,"node_id":"PR_kwDOAFDaZs4vaHMR","number":18790,"title":"ms5611: lower SPI clock 20 MHz -> 16 MHz","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-05T21:18:08Z","updated_at":"2021-12-06T17:51:53Z","closed_at":"2021-12-06T17:51:52Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18790","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18790","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18790.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18790.patch","merged_at":"2021-12-06T17:51:52Z"},"body":" - this was necessary to get the secondary ms5611 working reliably on a particular CubeOrange\r\n - the sensor is transferring very little data, so lowering the speed by default everywhere is harmless\r\n\r\nOn a particular CubeOrange the ms5611 PROM crc was invalid. After lowering the clock rate slightly the crc was valid, but upon closer inspection the only actual change was at the beginning in the manufacturer reserved portion.\r\n![Screenshot from 2021-12-05 16-16-53](https://user-images.githubusercontent.com/84712/144764259-6db01148-eb55-4b73-b86e-dfdd034b020e.png)\r\n\r\n\r\n#### before\r\n``` Console\r\nms5611 on SPI bus 4 at 61 (20000 KHz)\r\nDEBUG 1006413    prom[0]=0x8000\r\nDEBUG 1006460    prom[1]=0xb7bd\r\nDEBUG 1006505    prom[2]=0xba8c\r\nDEBUG 1006549    prom[3]=0x7685\r\nDEBUG 1006593    prom[4]=0x6c88\r\nDEBUG 1006639    prom[5]=0x8876\r\nDEBUG 1006683    prom[6]=0x7340\r\nDEBUG 1006727    prom[7]=0x8\r\nINFO  [ms5611] crc read: 8, crc: 0 (0)\r\n```\r\n\r\n#### after\r\n``` Console\r\nms5611 on SPI bus 4 at 61 (16000 KHz)\r\nDEBUG 905428     prom[0]=0x0           <--- ONLY DIFFERENCE\r\nDEBUG 905475     prom[1]=0xb7bd\r\nDEBUG 905521     prom[2]=0xba8c\r\nDEBUG 905567     prom[3]=0x7685\r\nDEBUG 905612     prom[4]=0x6c88\r\nDEBUG 905660     prom[5]=0x8876\r\nDEBUG 905706     prom[6]=0x7340\r\nDEBUG 905752     prom[7]=0x8\r\nINFO  [ms5611] crc read: 8, crc: 8 (8)\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18790/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18751","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18751/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18751/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18751/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18751","id":1067204836,"node_id":"PR_kwDOAFDaZs4vL9W2","number":18751,"title":"px4io: discover `PWM_MAIN_TRIMx` parameters right away","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-11-30T12:56:38Z","updated_at":"2021-12-07T10:08:09Z","closed_at":"2021-12-02T01:21:26Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18751","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18751","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18751.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18751.patch","merged_at":"2021-12-02T01:21:26Z"},"body":"**Describe problem solved by this pull request**\r\nPossibly closes #18750 \r\n\r\n**Describe your solution**\r\nRemove the condition that was added in https://github.com/PX4/PX4-Autopilot/commit/089c962d9208b3616ba505ab927fa399554035d4#diff-ff52cb1224c92cc672316dab2f93a98e7db09fb08ccdfbb9fb0015e8d86f1387R859 not knowing why it was added. @dagar please tell me about the side effects.\r\n\r\n**Test data / coverage**\r\n~I did not test this but based on the description in https://github.com/PX4/PX4-Autopilot/issues/18750 it should solve the issue.~ Tested the fixed version, see comment below.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18751/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18750","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18750/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18750/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18750/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18750","id":1067177276,"node_id":"I_kwDOAFDaZs4_m9U8","number":18750,"title":"`PWM_MAIN_TRIMx` parameters missing in normal use case","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-11-30T12:27:15Z","updated_at":"2021-12-02T01:21:26Z","closed_at":"2021-12-02T01:21:26Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\n@priseborough was setting up a flying wing on master and was asking me how to calibrate the servos specifically why there are no `PWM_MAIN_TRIMx` parameters while there are `PWM_AUX_TRIMx` parameters.\r\n\r\n**Additional context**\r\nI did a quick debug and am pretty sure it is a race condition were the mixers are not loaded yet when the first parameter update is done. So the condition that was added here prevents the parameters from being discovered:\r\nhttps://github.com/PX4/PX4-Autopilot/commit/089c962d9208b3616ba505ab927fa399554035d4#diff-ff52cb1224c92cc672316dab2f93a98e7db09fb08ccdfbb9fb0015e8d86f1387R859\r\nI tested and after changing a parameter and reloading the ground station while the autopilot is still running I can see the parameters.\r\n\r\nI'll create a pr to remove it but I'm not sure about side effects. @dagar would be nice if you could check.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Flash pixhawk 4 with latest master (2021-11-30 01db98fccf7944a98f5ee8b14693a58d1fca34be)\r\n2. Boot with an airframe e.g. quad_x 4001\r\n3. Look for parameters named `PWM_MAIN_TRIMx` in the editor\r\n4. See all the `PWM_MAIN_{DISx,FAILx,MAXx,MINx,REVx}` but no TRIMs\r\n\r\n**Expected behavior**\r\n`PWM_MAIN` and `PWM_AUX` should offer the same parameter set.\r\n\r\n**Log Files and Screenshots**\r\n![image](https://user-images.githubusercontent.com/4668506/144046478-b1353371-73d8-4e9d-aeb0-7b023ab2341f.png)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18750/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18739","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18739/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18739/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18739/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18739","id":1065374382,"node_id":"PR_kwDOAFDaZs4vGGnS","number":18739,"title":"[DO NOT MERGE] debug potential NuttX heap corruption","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-11-28T16:22:26Z","updated_at":"2021-12-08T05:24:49Z","closed_at":"2021-12-05T23:37:11Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18739","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18739","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18739.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18739.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18739/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18724","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18724/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18724/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18724/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18724","id":1063905683,"node_id":"PR_kwDOAFDaZs4vCLUA","number":18724,"title":"NuttX fixing mkfatfs continued","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-11-25T20:31:07Z","updated_at":"2021-11-30T02:49:37Z","closed_at":"2021-11-30T02:49:36Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18724","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18724","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18724.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18724.patch","merged_at":"2021-11-30T02:49:35Z"},"body":" - https://github.com/PX4/NuttX/pull/173\r\n - https://github.com/PX4/NuttX-apps/pull/13","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18724/timeline","performed_via_github_app":null,"state_reason":null},