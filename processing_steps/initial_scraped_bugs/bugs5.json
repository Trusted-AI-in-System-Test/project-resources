{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17997","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17997/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17997/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17997/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17997","id":956747988,"node_id":"MDExOlB1bGxSZXF1ZXN0NzAwMjk0OTUx","number":17997,"title":"adis16448: add additional delay after transfer in case of back to back transactions","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-30T13:29:06Z","updated_at":"2021-08-08T13:25:17Z","closed_at":"2021-08-08T13:25:16Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17997","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17997","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17997.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17997.patch","merged_at":"2021-08-08T13:25:16Z"},"body":" - add verified register read method\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17997/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17985","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17985/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17985/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17985/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17985","id":954667981,"node_id":"MDExOlB1bGxSZXF1ZXN0Njk4NTI1NDY2","number":17985,"title":"Fix invalid setpoint on takeoff","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-07-28T09:38:07Z","updated_at":"2021-07-31T01:39:19Z","closed_at":"2021-07-31T01:39:18Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17985","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17985","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17985.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17985.patch","merged_at":"2021-07-31T01:39:18Z"},"body":"**Describe problem solved by this pull request**\r\n- Before the rampup state and when `!flying`, `_setpoint.acceleration[2]` is set to NAN, `_setpoint` is overwritten by NAN and `_setpoint.acceleration` is set to (0,0,100) \r\n- When reaching rampup, `_setpoint.acceleration[2]` is still set to NAN, `_setpoint` isnâ€™t overwritten anymore and `_setpoint.acceleration[2]` isnâ€™t set (to 100) anymore\r\n- Since the loop is scheduled on local_pos estimate and not the setpoint, it can be that the `_setpoint` is still NAN (overwritten state) from the previous iteration\r\n- At that exact point in time, `_setpoint.vz(2)` and `_setpoint.acceleration[2]` are NAN, so the output is invalid: triggering `WARN [mc_pos_control] invalid setpoints`\r\n\r\n**Describe your solution**\r\nOnly apply the overriding logic when there is a new `trajectory_setpoint` message (i.e.: `_setpoint` update).\r\n\r\n**Describe possible alternatives**\r\nCopy the original `trajectory_setpoint` message and only apply the changes locally\r\n\r\n**Test data / coverage**\r\nSITL tests\r\n\r\n**Additional context**\r\nI also reverted https://github.com/PX4/PX4-Autopilot/pull/17725 because the warning is now fixed so we don't want to hide it anymore.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17985/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17985/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17982","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17982/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17982/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17982/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17982","id":953633647,"node_id":"MDExOlB1bGxSZXF1ZXN0Njk3NjQ1OTEy","number":17982,"title":"Fix in-air yaw alignment (mag-less mode)","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-07-27T08:25:49Z","updated_at":"2021-07-27T11:34:54Z","closed_at":"2021-07-27T11:34:53Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17982","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17982","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17982.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17982.patch","merged_at":"2021-07-27T11:34:53Z"},"body":"**Describe problem solved by this pull request**\r\nIn mag-less mode (`EKF2_MAG_TYPE` = none (5)), the GNSS fusion wasn't able to start because of the `_mag_yaw_reset_req` being `true` due to the `controlGpsFusion` constantly setting it when yaw isn't aligned. `controlGpsFusion` shouldn't set this flag in this case because other parts of the code are taking care of aligning yaw when possible.\r\n\r\n**Describe your solution**\r\nDon't start GNSS aiding when yaw is not align, but also don't ask for a mag reset, just wait for yaw to be aligned.\r\n\r\n**Test data / coverage**\r\nUnit test and SITL tests\r\n\r\nThe added unit test verifies that the yaw estimator converges to the correct heading and that the GNSS vel/pos fusion starts properly after yaw in-air alignment.\r\n\r\nNote: this is also probably broken in `v1.12` and should be backported","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17982/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17977","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17977/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17977/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17977/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17977","id":952316693,"node_id":"MDU6SXNzdWU5NTIzMTY2OTM=","number":17977,"title":"vehicle_local_position.z return 0 in HITL as global_local_alt0 is reinited","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-07-25T17:08:57Z","updated_at":"2021-08-02T13:59:09Z","closed_at":"2021-08-02T13:59:09Z","author_association":"NONE","active_lock_reason":null,"body":"z in vehicle_local_position return 0 in HITL mode global_local_alt0 is reinited everytime while decoding HIL_STATE_QUATERNION.\r\n\r\nPX4 Firmware: v1.12.0\r\n\r\nI was running HITL simulation after upgrading my firmware when I discovered that z is always return 0 in vehicle_local_position. I debugged this issue and found that in mavlink_receiver.cpp while parsing HIL_STATE_QUATERNION in handle_message_hil_state_quaternion, the reference altitude global_local_alt0 is reinited everytime. (line no 2571 in [mavlink_receiver.cpp ](https://github.com/PX4/PX4-Autopilot/blob/v1.12.0/src/modules/mavlink/mavlink_receiver.cpp#L2571))\r\n\r\nThis bug seems to have to have crept in [this ](https://github.com/PX4/PX4-Autopilot/commit/263b00b65fc89c7fd9383f0364760fceb15ea12a#diff-22f2d2347fbee4247ef71142274d558334f8991fb89dca50f7505ba05bf9873f)commit\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17977/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17969","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17969/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17969/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17969/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17969","id":951303311,"node_id":"MDU6SXNzdWU5NTEzMDMzMTE=","number":17969,"title":"EKF2_AID_MASK Unable to Set vision position fusion and vision yaw fusion","user":{"login":"WaffleWolfie","id":87848833,"node_id":"MDQ6VXNlcjg3ODQ4ODMz","avatar_url":"https://avatars.githubusercontent.com/u/87848833?v=4","gravatar_id":"","url":"https://api.github.com/users/WaffleWolfie","html_url":"https://github.com/WaffleWolfie","followers_url":"https://api.github.com/users/WaffleWolfie/followers","following_url":"https://api.github.com/users/WaffleWolfie/following{/other_user}","gists_url":"https://api.github.com/users/WaffleWolfie/gists{/gist_id}","starred_url":"https://api.github.com/users/WaffleWolfie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WaffleWolfie/subscriptions","organizations_url":"https://api.github.com/users/WaffleWolfie/orgs","repos_url":"https://api.github.com/users/WaffleWolfie/repos","events_url":"https://api.github.com/users/WaffleWolfie/events{/privacy}","received_events_url":"https://api.github.com/users/WaffleWolfie/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-07-23T06:53:49Z","updated_at":"2021-07-27T12:52:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi all,\r\n\r\nI have encountered an issue where I have tried to relay data from an Optitrack system to mavros. One of the procedures for the usage of EKF2 is to set the EKF2_AID_MASK to do vision position fusion and vision yaw fusion. \r\n\r\nThe procedure to set the EKF2_AID_MASK is available here: https://dev.px4.io/v1.9.0_noredirect/en/ros/external_position_estimation.html\r\n\r\nUpon checking the boxes and rebooting the PX4 as per the instructions, I am still unable to just check the 2 boxes. Instead upon opening the parameters, other parameters were also automatically checked. I am still not sure if this is what has been causing the problem where I have managed to relay the signal from the optitrack to the topic /mavros/vision_pose/pose. \r\nHowever, there is nothing published to the topic /mavros/local_position/pose even though mavros is also subscribed and publishing to the topic /mavros/local_position/pose.\r\nIf there is anyone that can help me it would be greatly appreciated! \r\n\r\nThe EKF2 Parameters that I set:\r\n![Wanted EKF2 Parameters](https://user-images.githubusercontent.com/87848833/126747010-82455d19-bc49-477d-9d87-0696d68382e8.JPG)\r\nThe EKF2 Parameters after rebooting Pixhawk 4 mini:\r\n![EKF2 after Reboot](https://user-images.githubusercontent.com/87848833/126747058-ee355eca-8570-4239-83fe-f9c5ce71130a.JPG)\r\n\r\n\r\nThanks a bunch!\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17969/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17911","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17911/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17911/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17911/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17911","id":944195231,"node_id":"MDU6SXNzdWU5NDQxOTUyMzE=","number":17911,"title":"1.12 Release everything great except Weather Vane","user":{"login":"taileron","id":16166920,"node_id":"MDQ6VXNlcjE2MTY2OTIw","avatar_url":"https://avatars.githubusercontent.com/u/16166920?v=4","gravatar_id":"","url":"https://api.github.com/users/taileron","html_url":"https://github.com/taileron","followers_url":"https://api.github.com/users/taileron/followers","following_url":"https://api.github.com/users/taileron/following{/other_user}","gists_url":"https://api.github.com/users/taileron/gists{/gist_id}","starred_url":"https://api.github.com/users/taileron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taileron/subscriptions","organizations_url":"https://api.github.com/users/taileron/orgs","repos_url":"https://api.github.com/users/taileron/repos","events_url":"https://api.github.com/users/taileron/events{/privacy}","received_events_url":"https://api.github.com/users/taileron/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"assignees":[{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2021-07-14T08:47:00Z","updated_at":"2021-08-12T13:58:30Z","closed_at":"2021-08-12T13:58:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nsince the beginning of 2021 Weather Vane no longer works and also in the 1.12.0 release. Is there a trick to activate WV, or is something important missing?\r\n\r\n**To Reproduce**\r\nConvergence Airframe\r\ngps+HereFlow\r\nUSB disabled to have enough ram left \r\n(without airspeed sensor)\r\nForward Thrust enabled\r\nEnough wind\r\nenable wv\r\nstart position, mission or rtl\r\n\r\n**Expected behavior**\r\nWV should work and turn the aircraft into the wind from a slight roll inclination.\r\nlike it was in 1.11 with the same setup\r\n\r\n**Log Files and Screenshots**\r\nhttps://review.px4.io/plot_app?log=a8f081af-ee68-42a0-81e4-71768cec0ed2","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17911/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17908","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17908/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17908/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17908/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17908","id":943896415,"node_id":"MDU6SXNzdWU5NDM4OTY0MTU=","number":17908,"title":"Several memory bugs","user":{"login":"KimHyungSub","id":21173273,"node_id":"MDQ6VXNlcjIxMTczMjcz","avatar_url":"https://avatars.githubusercontent.com/u/21173273?v=4","gravatar_id":"","url":"https://api.github.com/users/KimHyungSub","html_url":"https://github.com/KimHyungSub","followers_url":"https://api.github.com/users/KimHyungSub/followers","following_url":"https://api.github.com/users/KimHyungSub/following{/other_user}","gists_url":"https://api.github.com/users/KimHyungSub/gists{/gist_id}","starred_url":"https://api.github.com/users/KimHyungSub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KimHyungSub/subscriptions","organizations_url":"https://api.github.com/users/KimHyungSub/orgs","repos_url":"https://api.github.com/users/KimHyungSub/repos","events_url":"https://api.github.com/users/KimHyungSub/events{/privacy}","received_events_url":"https://api.github.com/users/KimHyungSub/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-07-13T23:15:40Z","updated_at":"2021-10-23T14:49:53Z","closed_at":"2021-10-23T14:49:53Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nI would like to report several memory bugs on PX4.\r\nIt will be great if these issues are fixed! Thanks!\r\n\r\n1) Potential memory leak\r\n- Location:  https://github.com/PX4/PX4-Autopilot/blob/master/src/modules/replay/Replay.cpp#L419\r\n- Description: there is not releasing allocated resource at line 419\r\n\r\n```\r\n\tSubscription *subscription = new Subscription();\r\n\tsubscription->orb_meta = orb_meta;\r\n\tsubscription->multi_id = multi_id;\r\n\tsubscription->compat = compat;\r\n\r\n\t//find the timestamp offset\r\n\tint field_size;\r\n\tbool timestamp_found = findFieldOffset(orb_meta->o_fields, \"timestamp\", subscription->timestamp_offset, field_size);\r\n\r\n\tif (!timestamp_found) {\r\n\t       // ERROR: delete subscription;\r\n               return true;      \r\n\t}\r\n```\r\n\r\n2) Null pointer dereference\r\n- Location: https://github.com/PX4/PX4-Autopilot/blob/master/src/systemcmds/bl_update/bl_update.c#L145\r\n- Description: null point check needs to be executed before allocating memory space at line 145\r\n\r\n```\r\n\tuint8_t *buf = malloc(image_size);\r\n\tmemset(buf, 0xff, image_size);    // ERROR: check \"buf == NULL\" before memset()\r\n\r\n\tif (buf == NULL)\r\n\t{\r\n         ...\r\n```\r\n\r\n3) Buffer overflow\r\n- Location: https://github.com/PX4/PX4-Autopilot/blob/master/src/modules/logger/logged_topics.cpp#L313\r\n- Description: if \"topic_name\" is long, it leads to a buffer overflow at line 313\r\n\r\n```\r\n\t\tchar topic_name[80];\r\n\t\tuint32_t interval_ms = 0;\r\n\t\tuint32_t instance = 0;\r\n\t\tint nfields = sscanf(line, \"%s %\" PRIu32 \" %\" PRIu32, topic_name, &interval_ms, &instance); // ERROR\r\n```\r\n\r\n4) Division by zero (NuttX)\r\n- Location: https://github.com/PX4/PX4-Autopilot/blob/f9d8c613b048f58eb3110e9af13cb3a89c4c866f/platforms/nuttx/src/canbootloader/arch/nxp/s32k14x/drivers/can/driver.c#L463\r\n- Description: division by zero can occur if out_timings->prescaler is zero\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17908/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17900","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17900/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17900/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17900/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17900","id":943576329,"node_id":"MDU6SXNzdWU5NDM1NzYzMjk=","number":17900,"title":"[nxp_fmuk66-e] Radio channel detect and GPS broken on v1.12.0 stable","user":{"login":"landonh12","id":2881506,"node_id":"MDQ6VXNlcjI4ODE1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/2881506?v=4","gravatar_id":"","url":"https://api.github.com/users/landonh12","html_url":"https://github.com/landonh12","followers_url":"https://api.github.com/users/landonh12/followers","following_url":"https://api.github.com/users/landonh12/following{/other_user}","gists_url":"https://api.github.com/users/landonh12/gists{/gist_id}","starred_url":"https://api.github.com/users/landonh12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/landonh12/subscriptions","organizations_url":"https://api.github.com/users/landonh12/orgs","repos_url":"https://api.github.com/users/landonh12/repos","events_url":"https://api.github.com/users/landonh12/events{/privacy}","received_events_url":"https://api.github.com/users/landonh12/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"assignees":[{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-07-13T15:54:44Z","updated_at":"2021-07-14T19:31:55Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"On v1.12.0 stable the NXP FMUK66-E has broken RC Channel detection and GPS. @jarivanewijk Tested these functions and found that they work on v1.12.0 Beta 6, which was built before the series of commits regarding DMA on the FMUK66-E (5ea4b7dc9e17a0122714807d3432f5db86de6594). \r\n\r\n\r\nScreenshots from v1.12.0 stable:\r\n![Detected 0 radio channels](https://user-images.githubusercontent.com/2881506/125484424-9bc70180-6f11-45c9-b2aa-12cd2cfa4d84.png)\r\n\r\n![GPS status command](https://user-images.githubusercontent.com/2881506/125484521-e6cecc5c-8a8f-4c0b-aa7c-6bd34e10db94.png)\r\n\r\n@davids5 @PetervdPerk-NXP @igalloway \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17900/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17886","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17886/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17886/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17886/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17886","id":941571976,"node_id":"MDExOlB1bGxSZXF1ZXN0Njg3NDI2Nzc1","number":17886,"title":"flight_mode_manager: StickAccelerationXY minimize setpoint oscillations around zero","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-07-12T00:49:45Z","updated_at":"2022-09-16T05:54:14Z","closed_at":"2022-09-16T05:54:13Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17886","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17886","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17886.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17886.patch","merged_at":"2022-09-16T05:54:13Z"},"body":"Attempted fix for small oscillations that occur with `FlightTaskManualAcceleration` when you start or stop moving the sticks and the velocity setpoint is nearly zero.\r\n\r\n<img width=\"1311\" alt=\"Screen Shot 2021-07-11 at 8 48 39 PM\" src=\"https://user-images.githubusercontent.com/84712/125215407-68b4ac00-e289-11eb-8962-e71147be3a91.png\">\r\n\r\n<img width=\"1307\" alt=\"Screen Shot 2021-07-11 at 8 52 47 PM\" src=\"https://user-images.githubusercontent.com/84712/125215629-07410d00-e28a-11eb-96db-ce5c3ce7a5b1.png\">\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17886/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17879","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17879/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17879/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17879/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17879","id":941014087,"node_id":"MDExOlB1bGxSZXF1ZXN0Njg2OTk2MDQ5","number":17879,"title":"platforms/common:SPI - fix hang on bords supporting BOARD_HAS_BUS_MANâ€¦","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-09T19:27:42Z","updated_at":"2021-07-10T09:37:30Z","closed_at":"2021-07-10T09:37:29Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17879","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17879","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17879.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17879.patch","merged_at":"2021-07-10T09:37:29Z"},"body":"\r\nI was testing V4 HW on upstream nuttx and it did not boot.\r\n\r\nWhen BOARD_HAS_BUS_MANIFEST is lit the `!board_has_bus(BOARD_SPI_BUS, bus_data.bus)` can take the continue.\r\n\r\nThe continue bypassed the index increment as of c5aef9d5127c006ffdc95789feae32f33b129de4 ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17879/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17873","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17873/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17873/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17873/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17873","id":940602056,"node_id":"MDExOlB1bGxSZXF1ZXN0Njg2NjQ4MjMz","number":17873,"title":"events interface: change uORB 'sequence' to 'event_sequence'","user":{"login":"TSC21","id":5048656,"node_id":"MDQ6VXNlcjUwNDg2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5048656?v=4","gravatar_id":"","url":"https://api.github.com/users/TSC21","html_url":"https://github.com/TSC21","followers_url":"https://api.github.com/users/TSC21/followers","following_url":"https://api.github.com/users/TSC21/following{/other_user}","gists_url":"https://api.github.com/users/TSC21/gists{/gist_id}","starred_url":"https://api.github.com/users/TSC21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TSC21/subscriptions","organizations_url":"https://api.github.com/users/TSC21/orgs","repos_url":"https://api.github.com/users/TSC21/repos","events_url":"https://api.github.com/users/TSC21/events{/privacy}","received_events_url":"https://api.github.com/users/TSC21/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":661334604,"node_id":"MDU6TGFiZWw2NjEzMzQ2MDQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/rtps%20(depreciated)","name":"rtps (depreciated)","color":"0087B3","default":false,"description":""},{"id":1386282089,"node_id":"MDU6TGFiZWwxMzg2MjgyMDg5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Uorb","name":"Uorb","color":"141672","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-09T09:44:52Z","updated_at":"2021-07-13T15:21:23Z","closed_at":"2021-07-09T11:24:14Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17873","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17873","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17873.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17873.patch","merged_at":"2021-07-09T11:24:14Z"},"body":"**Describe problem solved by this pull request**\r\n`sequence` is an IDL reserved keyword, which results on failure when parsing with FastRTPSGen.\r\n\r\n**Describe your solution**\r\nRenamed `sequence` to `event_sequence`, as aligned with @bkueng.\r\n\r\n**Describe possible alternatives**\r\nAs a follow-up, I will also add a list of reserved keywords check to our IDL generator so to avoid that these words are used in uORB. List can be found in page 29 of the following PDF: https://www.omg.org/spec/IDL/4.2/PDF.\r\n\r\n**Test data / coverage**\r\nChanged it as well in `px4_msgs`, and now the bridge builds correctly. Before, this happened: https://github.com/PX4/px4_ros_com/runs/3014970272.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17873/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17847","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17847/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17847/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17847/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17847","id":937027730,"node_id":"MDExOlB1bGxSZXF1ZXN0NjgzNjQ4MTQ2","number":17847,"title":"cdev: fixes hardfaults when device get disconnected (#17846)","user":{"login":"lukegluke","id":3624285,"node_id":"MDQ6VXNlcjM2MjQyODU=","avatar_url":"https://avatars.githubusercontent.com/u/3624285?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegluke","html_url":"https://github.com/lukegluke","followers_url":"https://api.github.com/users/lukegluke/followers","following_url":"https://api.github.com/users/lukegluke/following{/other_user}","gists_url":"https://api.github.com/users/lukegluke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegluke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegluke/subscriptions","organizations_url":"https://api.github.com/users/lukegluke/orgs","repos_url":"https://api.github.com/users/lukegluke/repos","events_url":"https://api.github.com/users/lukegluke/events{/privacy}","received_events_url":"https://api.github.com/users/lukegluke/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-07-05T12:09:37Z","updated_at":"2021-07-20T08:30:50Z","closed_at":"2021-07-06T16:35:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17847","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17847","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17847.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17847.patch","merged_at":"2021-07-06T16:35:47Z"},"body":"check if inode is not unlinked before use","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17847/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17831","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17831/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17831/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17831/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17831","id":934614492,"node_id":"MDU6SXNzdWU5MzQ2MTQ0OTI=","number":17831,"title":"Pixhawk Cube not booting (playing \"Error Tune\") after configuring Iridium Satlink","user":{"login":"bernhardpg","id":35483844,"node_id":"MDQ6VXNlcjM1NDgzODQ0","avatar_url":"https://avatars.githubusercontent.com/u/35483844?v=4","gravatar_id":"","url":"https://api.github.com/users/bernhardpg","html_url":"https://github.com/bernhardpg","followers_url":"https://api.github.com/users/bernhardpg/followers","following_url":"https://api.github.com/users/bernhardpg/following{/other_user}","gists_url":"https://api.github.com/users/bernhardpg/gists{/gist_id}","starred_url":"https://api.github.com/users/bernhardpg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bernhardpg/subscriptions","organizations_url":"https://api.github.com/users/bernhardpg/orgs","repos_url":"https://api.github.com/users/bernhardpg/repos","events_url":"https://api.github.com/users/bernhardpg/events{/privacy}","received_events_url":"https://api.github.com/users/bernhardpg/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"assignees":[{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2021-07-01T09:15:19Z","updated_at":"2023-02-14T04:32:53Z","closed_at":"2023-02-14T04:32:52Z","author_association":"NONE","active_lock_reason":null,"body":"**Issue**\r\n\r\nAfter configuring the Pixhawk to use the Iridium module, the Pixhawk refuses to boot if the Iridium module is disconnected. When connected to power over USB, the Cube plays and â€œError tuneâ€, indicating a hard fault in the system. See the [PX4 sounds](https://docs.px4.io/v1.9.0/en/getting_started/tunes.html).\r\n\r\n**Hardware**\r\n\r\nThe error was introduced on a Pixhawk Cube Orange, running PX4 v1.11.2, and an Iridium RockBLOCK 9603 module. I have checked, and the problem persists in PX4 v1.12.0-beta6 too, see below.\r\n\r\n**Steps to reproduce the error**\r\n\r\n1. Make sure the cube is running PX4 v1.11.2, and that a SD card is installed.\r\n2. Power on the Cube using USB\r\n3. Set â€œISBD_CONFIG = GPS 2â€ without connecting the Iridium Module.\r\n4. Reboot the pixhawk\r\n5. It should not refuse to connect to QGC, and will play the â€œError Tuneâ€œ.\r\n6. There should now be a .log file on the SD card which displays a message similar to:[hardfault_log] -- 2000-01-01-00:00:06 Begin Fault Log --System fault Occurred on: 2000-01-01-00:00:06Type:Hard Fault in file:armv7-m/up_hardfault.c at line: 148 running task: iridiumsbd\r\n\r\n**Removing the error after introducing it**\r\n\r\n1. Disconnect the USB\r\n2. Connect the Iridium module to serial port â€œGPS 2â€\r\n3. It now boots as normal, with the iridium connected.\r\n4. Change â€œISBD_CONFIG = disabledâ€, disconnect iridium, and reboot the vehicle.\r\n5. It now boots as normal, without the iridium connected.\r\n\r\n**PX4 Version**\r\nInitially, this error was found on v1.11.2. I tested with the most recent beta of v1.12, v1.12.0-beta6, and the problem still persists. However, the pixhawk does not play an error tune on boot, but reboots automatically continuously and refuses to connect to QGC, but this is the only thing that seems to be different from v1.11.2. Otherwise, the same steps for reproducing the error and removing the error works for v1.12.0-beta6.\r\n\r\n**Previous issues**\r\nI found [this](https://github.com/PX4/PX4-Autopilot/issues/10092) issue, which seemed like it could be relevant. However, it was closed and marked as fixed. Not sure if this is a new issue or connected to the previous issue, as I have not had time to debug this any further yet.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17831/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17809","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17809/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17809/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17809/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17809","id":930982537,"node_id":"MDExOlB1bGxSZXF1ZXN0Njc4NTU0Mjkw","number":17809,"title":"platforms/nuttx: px4_init initialize and reset all I2C buses","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-27T17:36:25Z","updated_at":"2021-08-17T13:54:51Z","closed_at":"2021-08-17T13:54:51Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17809","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17809","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17809.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17809.patch","merged_at":"2021-08-17T13:54:51Z"},"body":"This adds a full I2C bus reset in board init, both using the low level I2C driver reset (if enabled), followed by a general call software reset. With a centralized bus reset now handled by the board on all buses we can reduce the retries scattered across most drivers. The current external I2C device probing results in a huge number of I2C reset attempts.\r\n\r\n  - fixes init for stubborn I2C devices like the Sensirion sdp3x or the QMC588L magnetometer\r\n  - minimize the retry count for most I2C drivers as the board now does a reset on each bus","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17809/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17809/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17808","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17808/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17808/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17808/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17808","id":930671326,"node_id":"MDU6SXNzdWU5MzA2NzEzMjY=","number":17808,"title":"error in HIL Standard VTOL QuadPlane","user":{"login":"mengchaoheng","id":43166007,"node_id":"MDQ6VXNlcjQzMTY2MDA3","avatar_url":"https://avatars.githubusercontent.com/u/43166007?v=4","gravatar_id":"","url":"https://api.github.com/users/mengchaoheng","html_url":"https://github.com/mengchaoheng","followers_url":"https://api.github.com/users/mengchaoheng/followers","following_url":"https://api.github.com/users/mengchaoheng/following{/other_user}","gists_url":"https://api.github.com/users/mengchaoheng/gists{/gist_id}","starred_url":"https://api.github.com/users/mengchaoheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mengchaoheng/subscriptions","organizations_url":"https://api.github.com/users/mengchaoheng/orgs","repos_url":"https://api.github.com/users/mengchaoheng/repos","events_url":"https://api.github.com/users/mengchaoheng/events{/privacy}","received_events_url":"https://api.github.com/users/mengchaoheng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":552258139,"node_id":"MDU6TGFiZWw1NTIyNTgxMzk=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hitl","name":"hitl","color":"d4c5f9","default":false,"description":"hardware in the loop simulation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-06-26T10:55:50Z","updated_at":"2021-07-01T03:43:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\ndispaly \"BARO #0 faild : TIMEOUT!\" in QGC.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\njust like: https://docs.px4.io/master/en/simulation/hitl.html\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/43166007/123510806-12077980-d6b0-11eb-9762-29e0e58d4c9a.png)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/43166007/123510813-1df33b80-d6b0-11eb-8d79-c9649c87febf.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17808/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17805","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17805/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17805/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17805/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17805","id":930330829,"node_id":"MDExOlB1bGxSZXF1ZXN0Njc4MDQzNDI4","number":17805,"title":"drivers/imu/invensense: store offset registers on configure, trigger reset on any change","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2021-06-25T16:33:42Z","updated_at":"2021-07-01T11:58:39Z","closed_at":"2021-06-29T14:33:04Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17805","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17805","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17805.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17805.patch","merged_at":"2021-06-29T14:33:04Z"},"body":"- fix for https://github.com/PX4/PX4-Autopilot/issues/17804\r\n\r\n\r\n@NicolasM0 could you use this branch for your next attempted reproduce? ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17805/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17804","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17804/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17804/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17804/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17804","id":930168746,"node_id":"MDU6SXNzdWU5MzAxNjg3NDY=","number":17804,"title":"variations in sensor_combined/accelerometer_integral_dt","user":{"login":"NicolasM0","id":59083163,"node_id":"MDQ6VXNlcjU5MDgzMTYz","avatar_url":"https://avatars.githubusercontent.com/u/59083163?v=4","gravatar_id":"","url":"https://api.github.com/users/NicolasM0","html_url":"https://github.com/NicolasM0","followers_url":"https://api.github.com/users/NicolasM0/followers","following_url":"https://api.github.com/users/NicolasM0/following{/other_user}","gists_url":"https://api.github.com/users/NicolasM0/gists{/gist_id}","starred_url":"https://api.github.com/users/NicolasM0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicolasM0/subscriptions","organizations_url":"https://api.github.com/users/NicolasM0/orgs","repos_url":"https://api.github.com/users/NicolasM0/repos","events_url":"https://api.github.com/users/NicolasM0/events{/privacy}","received_events_url":"https://api.github.com/users/NicolasM0/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2021-06-25T13:19:36Z","updated_at":"2021-07-02T10:28:49Z","closed_at":"2021-07-02T10:28:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nDuring some of my tests, I have done very long logs (I work on a tether drone that is able to fly several days continuously).\r\n\r\nI noticed a strange patern in the accelrometer vibration metric while my autopilot did not move as it was on my desk during the weekend:\r\n![acc_vibe](https://user-images.githubusercontent.com/59083163/123425598-9c71af80-d5c2-11eb-85e4-515770d608db.png)\r\n\r\nDigging a big, I have found that it comes from a non-constant accelerometer integration duration causing difference between accumalated acceleration:\r\n![acc_int_dt](https://user-images.githubusercontent.com/59083163/123425987-1a35bb00-d5c3-11eb-9dc3-9610b19c7083.png)\r\n\r\nI have repeated 3 long logs on the same autopilot (CUAV V5+) with px4 v1.11.3 : the integration duration variation appear at exactly 8590sec after boot on the three logs.\r\nI have tested v1.12 in the same condition on another autopilot (still CUAV v5+) : the same variations appear at about 8590sec after boot but I also have some variation before that : \r\n![acc_int_dt_v1 12](https://user-images.githubusercontent.com/59083163/123429246-068c5380-d5c7-11eb-8ae2-a435c5c7de2f.png)\r\n\r\nIt seems that the average integration duration is constant. I suppose that in averge, the correct amount of accelerometers sample is used.\r\n\r\nI have nerver noticed that on v1.10 (not checked in a lot of logs).\r\n\r\n\r\nIs it safe to fly more than 8590sec in v1.11 and v1.12 ?\r\nI suppose yes as the integration is correct but what could happen if the variation continue to increase ?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17804/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17782","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17782/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17782/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17782/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17782","id":925614963,"node_id":"MDExOlB1bGxSZXF1ZXN0Njc0MDQ2ODU2","number":17782,"title":"microRTPS bridge improvements","user":{"login":"TSC21","id":5048656,"node_id":"MDQ6VXNlcjUwNDg2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5048656?v=4","gravatar_id":"","url":"https://api.github.com/users/TSC21","html_url":"https://github.com/TSC21","followers_url":"https://api.github.com/users/TSC21/followers","following_url":"https://api.github.com/users/TSC21/following{/other_user}","gists_url":"https://api.github.com/users/TSC21/gists{/gist_id}","starred_url":"https://api.github.com/users/TSC21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TSC21/subscriptions","organizations_url":"https://api.github.com/users/TSC21/orgs","repos_url":"https://api.github.com/users/TSC21/repos","events_url":"https://api.github.com/users/TSC21/events{/privacy}","received_events_url":"https://api.github.com/users/TSC21/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""},{"id":661334604,"node_id":"MDU6TGFiZWw2NjEzMzQ2MDQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/rtps%20(depreciated)","name":"rtps (depreciated)","color":"0087B3","default":false,"description":""},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) ðŸ§¹","color":"aefcbd","default":false,"description":""},{"id":1443195042,"node_id":"MDU6TGFiZWwxNDQzMTk1MDQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/%F0%9F%A4%96%20ROS","name":"ðŸ¤– ROS","color":"202E4A","default":false,"description":""},{"id":1598294845,"node_id":"MDU6TGFiZWwxNTk4Mjk0ODQ1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/CI%20%F0%9F%A4%96","name":"CI ðŸ¤–","color":"3b0dc4","default":false,"description":"Continuous Integration"}],"state":"closed","locked":false,"assignee":{"login":"TSC21","id":5048656,"node_id":"MDQ6VXNlcjUwNDg2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5048656?v=4","gravatar_id":"","url":"https://api.github.com/users/TSC21","html_url":"https://github.com/TSC21","followers_url":"https://api.github.com/users/TSC21/followers","following_url":"https://api.github.com/users/TSC21/following{/other_user}","gists_url":"https://api.github.com/users/TSC21/gists{/gist_id}","starred_url":"https://api.github.com/users/TSC21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TSC21/subscriptions","organizations_url":"https://api.github.com/users/TSC21/orgs","repos_url":"https://api.github.com/users/TSC21/repos","events_url":"https://api.github.com/users/TSC21/events{/privacy}","received_events_url":"https://api.github.com/users/TSC21/received_events","type":"User","site_admin":false},"assignees":[{"login":"TSC21","id":5048656,"node_id":"MDQ6VXNlcjUwNDg2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5048656?v=4","gravatar_id":"","url":"https://api.github.com/users/TSC21","html_url":"https://github.com/TSC21","followers_url":"https://api.github.com/users/TSC21/followers","following_url":"https://api.github.com/users/TSC21/following{/other_user}","gists_url":"https://api.github.com/users/TSC21/gists{/gist_id}","starred_url":"https://api.github.com/users/TSC21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TSC21/subscriptions","organizations_url":"https://api.github.com/users/TSC21/orgs","repos_url":"https://api.github.com/users/TSC21/repos","events_url":"https://api.github.com/users/TSC21/events{/privacy}","received_events_url":"https://api.github.com/users/TSC21/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-06-20T14:46:15Z","updated_at":"2021-06-21T14:36:46Z","closed_at":"2021-06-21T14:36:45Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17782","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17782","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17782.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17782.patch","merged_at":"2021-06-21T14:36:45Z"},"body":"**Describe problem solved by this pull request**\r\nBrings a major list of improvements. Listed bellow.\r\n\r\n**Describe your solution**\r\n\r\nMajor changes/features:\r\n* **Communications and data exchange in the localhost network only** are now possible with ROS2 Foxy when `ROS_LOCALHOST_ONLY` env variable is set to 1. This will also by default enable the **Shared Memory Transport** feature, which is also the default in ROS2. Known limitation: This will not work with ROS2 Galactic though when the middleware is set to CycloneDDS, so this was limited to when the `rmw` implementation is set to FastRTPS, or unset but defaulted to FastRTPS (which is the case of Foxy);\r\n* The microRTPS client (FMU side) now has **statistics** of the link TX/RX when using `micrortps_client status` and provides also a max bandwidth usage of the link using the `-m` argument;\r\n* Fixes the fact that the `micrortps_agent` would SEGFAULT with memory corruption. This was being caused because the program was attempting to delete the `Timesync` object instance twice. This is now solved and the agent exits correctly;\r\n* There's no need now to create specific `rtps` models (like `iris_rtps`), as now, by default, the `micrortps_client` will be started in `rcS` when one builds the PX4 SITL target using the `make px4_sitl_rtps`. This will require an update on the docs, as the `iris_rtps` was removed from the `make` target options.\r\n\r\nMinor changes:\r\n* Apply on the microRTPS agent Pubs and Subs the default QoS policies for memory management and publish mode found in ROS pubs/subs.\r\n* Increase the stack size on the microRTPS client to avoid warnings regarding low stack;\r\n* Add fix to `PRIu32` and `PRIu16` macros usage in the microRTPS agent when building the transport code;\r\n* Building now the microRTPS agent in CI to avoid changes that break it here and on the `px4_ros_com` side. This also adds the `BUILD_MICRORTPS_AGENT` option to `make` to allow building the microRTPS agent during the PX4 `_rtps` build (e.g. `make BUILD_MICRORTPS_AGENT=1 px4_sitl_rtps`);\r\n* Others.\r\n\r\n**Describe possible alternatives**\r\nNone that I can think of but open to suggestions.\r\n\r\n**Test data / coverage**\r\nIn PX4 SITL and with a Pixhawk 4. Currently already in usage in the Auterion Skynode.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17782/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17782/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17776","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17776/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17776/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17776/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17776","id":923935613,"node_id":"MDExOlB1bGxSZXF1ZXN0NjcyNjQyMjA4","number":17776,"title":"sensors: fix IMU init race condition","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-17T13:35:56Z","updated_at":"2021-06-17T14:38:34Z","closed_at":"2021-06-17T14:38:33Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17776","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17776","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17776.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17776.patch","merged_at":"2021-06-17T14:38:33Z"},"body":" - IMU init requires valid published data (device ids, etc)\r\n - orb_group_count will include advertised instances before data is published, so this can't be used to throttle IMU init attempts","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17776/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17769","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17769/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17769/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17769/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17769","id":922143466,"node_id":"MDU6SXNzdWU5MjIxNDM0NjY=","number":17769,"title":"Accel calibration gets stuck","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"mrpollo","id":317648,"node_id":"MDQ6VXNlcjMxNzY0OA==","avatar_url":"https://avatars.githubusercontent.com/u/317648?v=4","gravatar_id":"","url":"https://api.github.com/users/mrpollo","html_url":"https://github.com/mrpollo","followers_url":"https://api.github.com/users/mrpollo/followers","following_url":"https://api.github.com/users/mrpollo/following{/other_user}","gists_url":"https://api.github.com/users/mrpollo/gists{/gist_id}","starred_url":"https://api.github.com/users/mrpollo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrpollo/subscriptions","organizations_url":"https://api.github.com/users/mrpollo/orgs","repos_url":"https://api.github.com/users/mrpollo/repos","events_url":"https://api.github.com/users/mrpollo/events{/privacy}","received_events_url":"https://api.github.com/users/mrpollo/received_events","type":"User","site_admin":false},"assignees":[{"login":"mrpollo","id":317648,"node_id":"MDQ6VXNlcjMxNzY0OA==","avatar_url":"https://avatars.githubusercontent.com/u/317648?v=4","gravatar_id":"","url":"https://api.github.com/users/mrpollo","html_url":"https://github.com/mrpollo","followers_url":"https://api.github.com/users/mrpollo/followers","following_url":"https://api.github.com/users/mrpollo/following{/other_user}","gists_url":"https://api.github.com/users/mrpollo/gists{/gist_id}","starred_url":"https://api.github.com/users/mrpollo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrpollo/subscriptions","organizations_url":"https://api.github.com/users/mrpollo/orgs","repos_url":"https://api.github.com/users/mrpollo/repos","events_url":"https://api.github.com/users/mrpollo/events{/privacy}","received_events_url":"https://api.github.com/users/mrpollo/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-06-16T06:16:10Z","updated_at":"2021-06-17T14:38:50Z","closed_at":"2021-06-17T14:38:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nI tried to calibrate the accelerometer of my Pixracer and it seems to get stuck at the first step:\r\n\r\n```\r\nINFO  [commander] [cal] calibration started: 2 accel\r\nINFO  [commander] [cal] pending: back front left right up down\r\nINFO  [commander] [cal] hold vehicle still on a pending side\r\n```\r\n\r\nQGC says:\r\n```\r\nStart the individual calibration steps by clicking one of the buttons to the left.\r\n[cal] calibration started: 2 accel\r\n[cal] pending: back front left right up down\r\n[cal] hold vehicle still on a pending side\r\n[cal] calibration failed: reading sensor\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Connect Pixracer with USB\r\n2. Hit accel calibration in QGC\r\n\r\n**Expected behavior**\r\nIt should work :man_shrugging:.\r\n\r\nPixhawk 4 seems to work fine.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17769/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17767","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17767/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17767/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17767/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17767","id":921053232,"node_id":"MDU6SXNzdWU5MjEwNTMyMzI=","number":17767,"title":"QGC param download broken","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-06-15T06:45:42Z","updated_at":"2021-06-29T18:52:25Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nSomething is broken with the MAVLink connection. I'm no longer able to connect properly to QGC. I get warnings about param and mission download failed.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `make px4_fmu-v4_default upload`\r\n2. Open QGC 4.1.3, connected via USB\r\n\r\n**Expected behavior**\r\nThis used to just work.\r\n\r\n**Log Files and Screenshots**\r\n\r\n![Screenshot from 2021-06-15 08-42-46](https://user-images.githubusercontent.com/1419688/122005531-0c5b8b00-cdb6-11eb-9853-bffc54aab2fe.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17767/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17754","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17754/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17754/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17754/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17754","id":918638268,"node_id":"MDU6SXNzdWU5MTg2MzgyNjg=","number":17754,"title":"Airspeed selector: un-initialized airspeed validators","user":{"login":"pjdewitte","id":57276,"node_id":"MDQ6VXNlcjU3Mjc2","avatar_url":"https://avatars.githubusercontent.com/u/57276?v=4","gravatar_id":"","url":"https://api.github.com/users/pjdewitte","html_url":"https://github.com/pjdewitte","followers_url":"https://api.github.com/users/pjdewitte/followers","following_url":"https://api.github.com/users/pjdewitte/following{/other_user}","gists_url":"https://api.github.com/users/pjdewitte/gists{/gist_id}","starred_url":"https://api.github.com/users/pjdewitte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjdewitte/subscriptions","organizations_url":"https://api.github.com/users/pjdewitte/orgs","repos_url":"https://api.github.com/users/pjdewitte/repos","events_url":"https://api.github.com/users/pjdewitte/events{/privacy}","received_events_url":"https://api.github.com/users/pjdewitte/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"assignees":[{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-06-11T11:40:41Z","updated_at":"2021-06-15T19:41:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen an airspeed sensor becomes available more than 2 seconds after system boot, the corresponding airspeed validator does not get the correct parameters until a parameter update occurs. \r\n\r\nAs a result, ASPD_SCALE_EST is not honored, and the aircraft starts to estimate the airspeed scale while it shouldn't. In our case, the estimate was sometimes wrong, so that we had to abort flights to avoid stalling or worse.\r\n\r\nWe believe this is especially relevant for UAVCAN-based sensors. We also get 2 warnings shortly after each other directly after boot, showing the airspeed selector started before the sensor was available:\r\n\r\n    [airspeed_selector] Airspeed: switched from sensor (...) to -1\r\n    [airspeed_selector] Airspeed: switched from sensor -1 to 1\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Use the settings ASPD_SCALE_EST = 0 and ASPD_SCALE = 1\r\n2. Connect an airspeed sensor after boot, e.g. by plugging it in on the UAVCAN network\r\n3. Fly in forward flight\r\n4. Update any parameter\r\n4. Observe that in the logged messages wind_estimate.tas_scale (of the relevant airspeed selector wind estimator) is not 1 but is estimated in-flight, until any parameter was updated.\r\n\r\nNote: this behaviour was observed with v1.11.3, but I have no reason to think this behaviour has changed since then.\r\n\r\n**Expected behavior**\r\nwind_estimate.tas_scale should be equal to ASPD_SCALE  when ASPD_SCALE_EST is 0.\r\n\r\n**Log Files and Screenshots**\r\n\r\nThe screenshot below shows the TAS scale from the relevant wind estimator. In-flight, we switched back to hover and adjusted a parameter before continuing. After that, the scale was correct.\r\n\r\n![image](https://user-images.githubusercontent.com/57276/121671702-2f80f480-caaf-11eb-9ca2-1e93fa1235e5.png)\r\n\r\n\r\n**Drone:**\r\nAtmos Marlyn: tailsitter VTOL\r\n\r\n**Possible fix**\r\nWe're happy to make a pull request with the fix that works for us: In `AirspeedModule::update_params()`, loop over all validator instances (`MAX_NUM_AIRSPEED_SENSORS`), instead of only the ones for which there currently is an airspeed sensor (`_number_of_airspeed_sensors`).\r\n\r\nAlternatively, `AirspeedModule::update_params()` could be called when an airspeed sensor is added. Personally I think it is better to initialize all the airspeed validators as soon as they exist, as that is more robust.\r\n\r\nWe also increased the initial timeout before the airspeed validator starts working, to avoid the warning messages right after boot. For our airspeed sensor it takes 4.5s to become available. If anyone can think of a more generic solution, we're happy to contribute to that as well.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17754/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17750","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17750/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17750/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17750/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17750","id":918041381,"node_id":"MDExOlB1bGxSZXF1ZXN0NjY3NTE2OTI1","number":17750,"title":"[UAVCANv1] Collection of fixes","user":{"login":"JacobCrabill","id":5885545,"node_id":"MDQ6VXNlcjU4ODU1NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5885545?v=4","gravatar_id":"","url":"https://api.github.com/users/JacobCrabill","html_url":"https://github.com/JacobCrabill","followers_url":"https://api.github.com/users/JacobCrabill/followers","following_url":"https://api.github.com/users/JacobCrabill/following{/other_user}","gists_url":"https://api.github.com/users/JacobCrabill/gists{/gist_id}","starred_url":"https://api.github.com/users/JacobCrabill/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JacobCrabill/subscriptions","organizations_url":"https://api.github.com/users/JacobCrabill/orgs","repos_url":"https://api.github.com/users/JacobCrabill/repos","events_url":"https://api.github.com/users/JacobCrabill/events{/privacy}","received_events_url":"https://api.github.com/users/JacobCrabill/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-06-10T23:20:53Z","updated_at":"2021-07-07T02:00:08Z","closed_at":"2021-07-07T02:00:08Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17750","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17750","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17750.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17750.patch","merged_at":"2021-07-07T02:00:08Z"},"body":"Collection of fixes for the UAVCANv1 module:\r\n- Remove timed-out CAN frames from canard's Tx queue\r\n- Add support to SubscriptionManager for dynamic port ID updates (instantiate and/or update the port IDs of all DynamicSubscriber objects)\r\n- Fix the port ID update for Publishers\r\n\r\nWhat has been tested (Using a Pixhawk 4):\r\n- Updating the PX4 `UCAN1_*` parameters for all pubs/subs at run-time, with expected results\r\n- Use `yakut monitor` to verify the expected port ID's being published\r\n\r\nWhat has not yet been tested (and is being worked on separately):\r\n- Verify that high-rate messages can be sent (O(100Hz) and larger)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17750/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17746","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17746/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17746/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17746/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17746","id":917181196,"node_id":"MDU6SXNzdWU5MTcxODExOTY=","number":17746,"title":"Heading timeout in FW flight","user":{"login":"VTOLDavid","id":13052832,"node_id":"MDQ6VXNlcjEzMDUyODMy","avatar_url":"https://avatars.githubusercontent.com/u/13052832?v=4","gravatar_id":"","url":"https://api.github.com/users/VTOLDavid","html_url":"https://github.com/VTOLDavid","followers_url":"https://api.github.com/users/VTOLDavid/followers","following_url":"https://api.github.com/users/VTOLDavid/following{/other_user}","gists_url":"https://api.github.com/users/VTOLDavid/gists{/gist_id}","starred_url":"https://api.github.com/users/VTOLDavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VTOLDavid/subscriptions","organizations_url":"https://api.github.com/users/VTOLDavid/orgs","repos_url":"https://api.github.com/users/VTOLDavid/repos","events_url":"https://api.github.com/users/VTOLDavid/events{/privacy}","received_events_url":"https://api.github.com/users/VTOLDavid/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing ðŸ›©ï¸","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"assignees":[{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-06-10T10:26:56Z","updated_at":"2022-02-10T13:04:13Z","closed_at":"2022-02-10T12:55:00Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"@Silvan Fuhrer \r\n**Describe the bug**\r\nRTL is trigered in FW flight because timeout for heading in MC triggers, sending this messages:\r\n[navigator] unable to reach heading within timeout\r\n[commander] Mission cannot be completed\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nFirmware: Tailsitter v1.11.3.\r\n1. Set MIS_YAW_TMT to a value lower than the time to turn 180 degree in FW flight.\r\nIn mi case I had MIS_YAW_TMT set to 1.\r\n2. Fly a mision with several alt loiters\r\n\r\nYou wil get a RTL with this messages:\r\n[navigator] unable to reach heading within timeout\r\n[commander] Mission cannot be completed\r\n\r\nSeems that this error is triggered here:\r\n[https://github.com/PX4/PX4-Autopilot/blob/release/1.11/src/modules/navigator/mission_block.cpp#L398](https://github.com/PX4/PX4-Autopilot/blob/release/1.11/src/modules/navigator/mission_block.cpp#L398)\r\n\r\n**Expected behavior**\r\nIgnore the time out since is FW flight.\r\nWhould be nice also improve the description of MIS_YAW_TMT in the parameter reference, is not clear what a value of 0 does.\r\nWhould be also nice to be able to ignore the transition heading in a mision for VTOLs with a parameter.\r\n\r\n\r\n**Log Files and Screenshots**\r\n[https://logs.px4.io/plot_app?log=92979fd1-0fc9-44f9-9a14-2c80e6ed66d3](https://logs.px4.io/plot_app?log=92979fd1-0fc9-44f9-9a14-2c80e6ed66d3)\r\n\r\nRelated:\r\n[https://github.com/PX4/PX4-Autopilot/pull/3740](https://github.com/PX4/PX4-Autopilot/pull/3740)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17746/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17738","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17738/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17738/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17738/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17738","id":916291507,"node_id":"MDExOlB1bGxSZXF1ZXN0NjY1OTgyOTA3","number":17738,"title":"en-/disable mc position controller using explicit control mode flag","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-06-09T14:45:53Z","updated_at":"2021-06-09T16:10:23Z","closed_at":"2021-06-09T16:10:23Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17738","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17738","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17738.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17738.patch","merged_at":"2021-06-09T16:10:22Z"},"body":"**Describe problem solved by this pull request**\r\nNow that FlightTask is in the flight mode manager module and that the MC position controller runs on local_position updates, the multicopter position controller also runs when a VTOL plane is in fixedwing mode (using 0 velocity as a reference because trajectory_setpoint is all NAN).\r\n\r\n**Describe your solution**\r\nAdding a clear control mode flag to tell when the multicopter position controller should run or not.\r\n\r\n**Describe possible alternatives**\r\nUpdating based on the `trajectory_setpoint` update was an option but it would slow down the loop if the estimate comes faster than the setpoint. Also, since \"flight mode manager\" will soon be used for all kind of vehicles (fixedwings, rovers, ...) the `trajectory_setpoint` might also be filled with valid values when the multicopter position controller should not run.\r\n\r\n**Test data / coverage**\r\nSITL gazebo standard VTOL.\r\nBefore (`vehicle_local_position_setpoint` is also published from the MC pos controller in FW):\r\n![DeepinScreenshot_select-area_20210609145311](https://user-images.githubusercontent.com/14822839/121376437-d2b3fb80-c941-11eb-82ea-c990a1058f32.png)\r\n\r\nWith this PR (`vehicle_local_position_setpoint` publication stops in FW flight):\r\n![DeepinScreenshot_select-area_20210609160951](https://user-images.githubusercontent.com/14822839/121376466-d8a9dc80-c941-11eb-9867-e592a65b32d6.png)\r\n\r\n**Additional context**\r\nAdd any other related context or media.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17738/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17728","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17728/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17728/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17728/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17728","id":913646046,"node_id":"MDExOlB1bGxSZXF1ZXN0NjYzNjQ2NTQ3","number":17728,"title":"MC pos control: use vz<->z_deriv blending in pure vel mode only","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-06-07T14:57:15Z","updated_at":"2021-06-08T12:58:15Z","closed_at":"2021-06-08T12:58:14Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17728","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17728","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17728.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17728.patch","merged_at":"2021-06-08T12:58:14Z"},"body":"This logic was introduced to avoid large altitude drifts in velocity mode (altitude not controlled) due to potential velocity estimate bias in case of IMU problems (see PR #8445). After some refactoring, the logic started to be used in altitude-controlled modes as well, which is not needed.\r\n\r\nOriginal implementation in https://github.com/PX4/PX4-Autopilot/pull/8445/commits/02314f542ac899d1c6183de715134e946d6005b7 . That part of the code was only runing `if (!_run_alt_control)`.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17728/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17727","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17727/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17727/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17727/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17727","id":913529781,"node_id":"MDExOlB1bGxSZXF1ZXN0NjYzNTQ4MzM3","number":17727,"title":"mavlink: properly cleanup instance on exit","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-07T13:06:32Z","updated_at":"2021-06-09T14:58:35Z","closed_at":"2021-06-09T14:58:35Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17727","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17727","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17727.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17727.patch","merged_at":"2021-06-09T14:58:35Z"},"body":"We weren't cleaning up `mavlink_module_instances` when exiting, so future `mavlink stop-all` attempts would fail.\r\n\r\n@baumanta ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17727/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17727/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17707","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17707/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17707/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17707/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17707","id":911489822,"node_id":"MDExOlB1bGxSZXF1ZXN0NjYxNzU4NjIz","number":17707,"title":"mavlink: streams HEARTBEAT fix vehicle_control_mode copy","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-06-04T13:13:45Z","updated_at":"2021-06-04T13:19:36Z","closed_at":"2021-06-04T13:19:35Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17707","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17707","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17707.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17707.patch","merged_at":"2021-06-04T13:19:35Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17707/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17697","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17697/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17697/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17697/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17697","id":910442061,"node_id":"MDExOlB1bGxSZXF1ZXN0NjYwODYxOTIx","number":17697,"title":"pwm: specific fail/disarm parameters should default to global value","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-06-03T12:25:53Z","updated_at":"2021-06-04T01:26:14Z","closed_at":"2021-06-04T01:26:13Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17697","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17697","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17697.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17697.patch","merged_at":"2021-06-04T01:26:13Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17697/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17695","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17695/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17695/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17695/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17695","id":910307634,"node_id":"MDExOlB1bGxSZXF1ZXN0NjYwNzQ5NTMy","number":17695,"title":"Fix bug in external Quadchute trigger (from PR 16691)","user":{"login":"ThomasRigi","id":48206725,"node_id":"MDQ6VXNlcjQ4MjA2NzI1","avatar_url":"https://avatars.githubusercontent.com/u/48206725?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasRigi","html_url":"https://github.com/ThomasRigi","followers_url":"https://api.github.com/users/ThomasRigi/followers","following_url":"https://api.github.com/users/ThomasRigi/following{/other_user}","gists_url":"https://api.github.com/users/ThomasRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasRigi/subscriptions","organizations_url":"https://api.github.com/users/ThomasRigi/orgs","repos_url":"https://api.github.com/users/ThomasRigi/repos","events_url":"https://api.github.com/users/ThomasRigi/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-06-03T09:33:39Z","updated_at":"2021-06-21T20:39:55Z","closed_at":"2021-06-21T20:39:55Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17695","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17695","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17695.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17695.patch","merged_at":"2021-06-21T20:39:55Z"},"body":"Fixes a bug introduced with https://github.com/PX4/PX4-Autopilot/pull/16691. (@dagar @sfuhrer @RomanBapst )\r\n\r\n**Describe problem solved by this pull request**\r\nEli Vigdorchik ran into an undesired external quadchute during one of his test flights as reported on slack (https://px4.slack.com/archives/C39C4E709/p1622652580039900). Log here: https://review.px4.io/plot_app?log=26c65922-793b-4bad-88fa-86f58b97eb82 . For some reason Param2 of the command is set to 3, triggering the Quadchute instead of doing a normal back transition during RTL. I was able to reproduce in SITL on v1.12.0-beta and on master. I guess the issue is a badly initialized / old value of param2 floating around somewhere.\r\nhttps://logs.px4.io/plot_app?log=efaae0f0-a8a8-494c-b32d-6e041689836f\r\nhttps://logs.px4.io/plot_app?log=e177614d-a4c1-4ebf-97ca-6ed6fb8cf420\r\n\r\n**Describe your solution**\r\nExplicitly set Param2 to 0.0f in all occurrences where a normal BT is desired (I searched for all occurrences of *DO_VTOL_TRANSITION in the code).\r\n\r\nI also added a check on NANs. If param2 is a NAN, then _immediate_transition is false too.\r\n\r\n**Describe possible alternatives**\r\n- \r\n\r\n**Test data / coverage**\r\nSame procedure, i.e. Position mode flight with RTL triggered over QGC:\r\nhttps://logs.px4.io/plot_app?log=7cc61dad-7145-4e81-9ee3-f7c84dd04ef9\r\n\r\nI also tried manual transitions, transitions over QGC, missions with VTOL Land and normal Land items, `commander transition` and switching to Land mode via QGC. I couldn't provoke any external quadchutes. Did I miss another option to get into back transition?\r\n\r\n**Additional context**\r\nFollow up of https://github.com/PX4/PX4-Autopilot/pull/16691\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17695/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17685","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17685/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17685/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17685/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17685","id":908352073,"node_id":"MDU6SXNzdWU5MDgzNTIwNzM=","number":17685,"title":"Yaw setpoint spike, when landing triggered via Mavlink command MAV_CMD_NAV_LAND","user":{"login":"ecmnet","id":7580193,"node_id":"MDQ6VXNlcjc1ODAxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7580193?v=4","gravatar_id":"","url":"https://api.github.com/users/ecmnet","html_url":"https://github.com/ecmnet","followers_url":"https://api.github.com/users/ecmnet/followers","following_url":"https://api.github.com/users/ecmnet/following{/other_user}","gists_url":"https://api.github.com/users/ecmnet/gists{/gist_id}","starred_url":"https://api.github.com/users/ecmnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ecmnet/subscriptions","organizations_url":"https://api.github.com/users/ecmnet/orgs","repos_url":"https://api.github.com/users/ecmnet/repos","events_url":"https://api.github.com/users/ecmnet/events{/privacy}","received_events_url":"https://api.github.com/users/ecmnet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2021-06-01T14:26:11Z","updated_at":"2021-07-22T18:22:18Z","closed_at":"2021-07-22T18:19:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"In 1.12.beta, triggering landing via MAV_CMD_NAV_LAND leads to a spike in Yaw at the beginning of the landing phase, which should not occur. This issue is independent from parameter 4 of MAV_CMD_NAV_LAND (setting it to NaN or current yaw):\r\n\r\n<img width=\"793\" alt=\"Bildschirmfoto 2021-06-01 um 16 21 37\" src=\"https://user-images.githubusercontent.com/7580193/120339553-7fb0c780-c2f5-11eb-9306-82bfc93f0a56.png\">\r\n\r\n<img width=\"793\" alt=\"Bildschirmfoto 2021-06-01 um 16 25 22\" src=\"https://user-images.githubusercontent.com/7580193/120340119-036ab400-c2f6-11eb-90b9-c7826195471c.png\">\r\n\r\n\r\nULog: [https://logs.px4.io/plot_app?log=07daba2b-95db-4f4b-b5e9-423ebb3f5fa0](https://logs.px4.io/plot_app?log=07daba2b-95db-4f4b-b5e9-423ebb3f5fa0)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17685/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17683","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17683/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17683/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17683/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17683","id":907802569,"node_id":"MDExOlB1bGxSZXF1ZXN0NjU4NTg5MzA0","number":17683,"title":"px4io/pwm_out: only update PWM MAX/MIN/DIS/FAIL/REV once to prevent VTOL conflict","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-01T02:02:43Z","updated_at":"2021-06-03T04:52:07Z","closed_at":"2021-06-03T04:52:06Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17683","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17683","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17683.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17683.patch","merged_at":"2021-06-03T04:52:06Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/17485 (needs verification)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17683/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17642","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17642/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17642/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17642/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17642","id":899837224,"node_id":"MDU6SXNzdWU4OTk4MzcyMjQ=","number":17642,"title":"RealFlight/FlightAxis SITL/HITL","user":{"login":"podhrmic","id":2790461,"node_id":"MDQ6VXNlcjI3OTA0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2790461?v=4","gravatar_id":"","url":"https://api.github.com/users/podhrmic","html_url":"https://github.com/podhrmic","followers_url":"https://api.github.com/users/podhrmic/followers","following_url":"https://api.github.com/users/podhrmic/following{/other_user}","gists_url":"https://api.github.com/users/podhrmic/gists{/gist_id}","starred_url":"https://api.github.com/users/podhrmic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/podhrmic/subscriptions","organizations_url":"https://api.github.com/users/podhrmic/orgs","repos_url":"https://api.github.com/users/podhrmic/repos","events_url":"https://api.github.com/users/podhrmic/events{/privacy}","received_events_url":"https://api.github.com/users/podhrmic/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"},{"id":552258139,"node_id":"MDU6TGFiZWw1NTIyNTgxMzk=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/hitl","name":"hitl","color":"d4c5f9","default":false,"description":"hardware in the loop simulation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2021-05-24T16:55:11Z","updated_at":"2023-01-12T19:15:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe problem solved by the proposed feature**\r\nMy goal is to add [RealFlight](https://www.realflight.com/index.php) simulator support into PX4, and be able to use for SITL/HITL. That way the user can simulate lots of small RC planes (and some copters/multirotors). I know the simulator is not free, but neither was X-plane, and the physics simulation seems to be pretty realistic.\r\n\r\n**Describe your preferred solution**\r\nRealFligth uses Flight Axis protocol (details [here](https://www.knifeedge.com/forums/index.php?threads/flightaxis-link-network-access-to-realflight-for-developers.32809/#post-282152)) - which is essentially a SOAP XML wrapper around the simulation data (sample packet [here](http://uav.tridgell.net/RealFlight/data-exchange.txt)). \r\n\r\nI have a python script that gets data from Real Flight, passes the HIL messages to PX4, gets the actuator states from PX4 and sends them back to Real Flight. All working at ~150Hz in SITL mode with a standard plane. Not tested in HITL mode.\r\n\r\n**Issues I am running into**\r\nReal Flight does not provide simulation at the sensor level, so I had to copy some parts from the [flightgear bridge](https://github.com/PX4/PX4-FlightGear-Bridge/) to try to simulate the sensor data, but I probably have something wrong, because when I run the simulation, PX4 constantly resets the EKF, claiming inconsistent sensor readings.\r\n\r\n**Questions for the developers**\r\n1) is there an easy way to run PX4 with *external INS* - so I can provide the attitude data as is, without the need to inject/simulate the sensor noise etc?\r\n2) do you have any guidance about how to debug the EKF errors?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17642/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17642/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17640","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17640/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17640/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17640/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17640","id":899752813,"node_id":"MDExOlB1bGxSZXF1ZXN0NjUxNDA5NzU0","number":17640,"title":"sensors/vehicle_imu: use WelfordMean library to determine sensor sample rate average","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-05-24T15:13:30Z","updated_at":"2021-05-31T14:05:43Z","closed_at":"2021-05-31T14:05:11Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17640","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17640","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17640.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17640.patch","merged_at":"2021-05-31T14:05:11Z"},"body":"Determining the actual IMU (accel + gyro) sample rate is quite important for configuring integration and filtering throughout the system. This PR updates that measurement to use the relatively new WelfordMean class in mathlib, and updates the logic to continuously monitor the sample rate rather than stop after its first determined (or errors occur).\r\n\r\nIn general you'd expect the sensor sample rate to be a known statically based on configuration, but there are cases where we don't actually know (data coming in from Mavlink, UAVCAN, etc) or some sensors that can change at runtime based on actual usage (eg mpu9250 with or without mag).\r\n\r\nWith this update we now determine the sample rate initially much faster, but will continue to update it if things settle later.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17640/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17635","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17635/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17635/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17635/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17635","id":899165537,"node_id":"MDU6SXNzdWU4OTkxNjU1Mzc=","number":17635,"title":"Navigation Errors during FW Flight","user":{"login":"ryanjAA","id":31726584,"node_id":"MDQ6VXNlcjMxNzI2NTg0","avatar_url":"https://avatars.githubusercontent.com/u/31726584?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanjAA","html_url":"https://github.com/ryanjAA","followers_url":"https://api.github.com/users/ryanjAA/followers","following_url":"https://api.github.com/users/ryanjAA/following{/other_user}","gists_url":"https://api.github.com/users/ryanjAA/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanjAA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanjAA/subscriptions","organizations_url":"https://api.github.com/users/ryanjAA/orgs","repos_url":"https://api.github.com/users/ryanjAA/repos","events_url":"https://api.github.com/users/ryanjAA/events{/privacy}","received_events_url":"https://api.github.com/users/ryanjAA/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing ðŸ›©ï¸","color":"009800","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-05-24T01:25:13Z","updated_at":"2021-10-15T09:29:16Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Pixhawk 4\r\n1.11.3 - Fixed Wing\r\n\r\nAfter some debate on this I decided to open an issue.\r\n\r\nNavigation between waypoints is not consistent and does not follow the expected direction (more detail below). The direction is circuitous.\r\n\r\n\r\n\r\nIn the first log, it was clear there was some mag interference (this was seen on the ground prior to takeoff - approximately 10 degrees could not be corrected even after multiple calibrations) but the issue was that the trajectory from one waypoint to the next does not make sense (in parts of the flight). Instead of going from one point to the next, there are large turns between them.\r\n\r\nI questioned if this was due to an insufficient SD card speed for reading the mission. Testing the SD card speed in QGC gave an average speed of 63kb/s (much too slow but this was only changed after these flights) and there are logging dropouts at some of the points in the log. Right around 22 min where the location looks to be sideways, it was not. In the telemetry replay it does a coordinated turn. This turn at least makes sense, that is the direction is was supposed to go. That changes though later in the same flight.\r\n\r\nAt 22:46 it looks like the aircraft starts to circle down. Maybe to hit the altitude set-point but that does not make too much sense seems it looks like it doesnt actually miss it. After it does circle down though it then just decides to go left (no errors still) and then circle around again. Mag issue? There is no reason for a turn to be in that direction though. The question becomes is if this is mag related and or SD card read access speed and mission related.\r\n\r\nLog 1 - \r\nhttps://review.px4.io/plot_app?log=72ac3453-0872-447d-8716-3fcca37c1e9e\r\n\r\n\r\n\r\n\r\n\r\n\r\nThe below log had a new mag installed and there weren't any offsets observed or mag ratios, etc but at 13:17 instead of turning left, the aircraft made a roll to the right before banking to the left to turn. Additionally, it went directly through the waypoint before turning instead of starting at the L1 distance and making the typical rounded turn. From 13:18-13:25 the log looks like the aircraft is going to the wrong direction but there is also a log dropout there, in the telemetry log the orientation and direction looks correct in terms of how the aircraft flew but not why it still turned so late and went right then left. \r\n\r\n\r\nLog 2-\r\nhttps://review.px4.io/plot_app?log=1e2b37e4-b557-45d3-9f73-6fb099bf0fa4","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17635/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17633","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17633/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17633/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17633/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17633","id":899096182,"node_id":"MDExOlB1bGxSZXF1ZXN0NjUwODQ2NzUw","number":17633,"title":"mpu9250: tolerate missing/mismatching FIFO samples if I2C slave mag active","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-05-23T19:57:55Z","updated_at":"2021-05-24T15:22:15Z","closed_at":"2021-05-24T15:22:14Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17633","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17633","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17633.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17633.patch","merged_at":"2021-05-24T15:22:14Z"},"body":"When the mpu9250 mag is active it disrupts IMU sampling. This change modifies the simple mpu9250 FIFO integrity checks (comparing duplicate accel samples) to tolerate these samples that don't match if the mag is active. Alternatively we could \"fix\" this by skipping the check entirely, but I'd rather keep it to catch instances where the data is corrupt due to setting the SPI clock too high, etc.\r\n\r\n - fixes https://github.com/PX4/PX4-Autopilot/issues/17615","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17633/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17622","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17622/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17622/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17622/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17622","id":897796010,"node_id":"MDExOlB1bGxSZXF1ZXN0NjQ5NzU0OTg1","number":17622,"title":"VTOL: always set min PWM, not only once on entering a new VTOL phase","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-05-21T08:03:33Z","updated_at":"2021-06-02T08:21:48Z","closed_at":"2021-06-02T08:21:48Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17622","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17622","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17622.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17622.patch","merged_at":null},"body":"\r\n\r\n\r\n**Describe problem solved by this pull request**\r\nUpon a parameter change, pwm_out resets the minimum PWM, and with that can overwrite VT_IDLE_PWM_MC.\r\n\r\n**Describe your solution**\r\nIn the VTOL module always set the PWM min values corresponding to the VTOL mode.\r\n\r\nDownsides:\r\n- uses up resources for nothing most of the time (haven't checked how much)\r\n- if a param change occurs in hover, the PWM min may still get set to non-VT_IDLE_PWM_MC for a brief moment (haven't checked)\r\n\r\n**Describe possible alternatives**\r\n- in pwm_out, do not update the PWM settings upon a random param change\r\n- in VTOL, check the currently set PWM min and only reset if required\r\n- find a clean way to get rid of the current PWM settings inside the VTOL module\r\n\r\n**Test data / coverage**\r\nBench tested\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17622/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17615","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17615/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17615/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17615/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17615","id":895804143,"node_id":"MDU6SXNzdWU4OTU4MDQxNDM=","number":17615,"title":"mpu9250 spi driver error when magnetometer is active","user":{"login":"MartinAtCoventry","id":33614550,"node_id":"MDQ6VXNlcjMzNjE0NTUw","avatar_url":"https://avatars.githubusercontent.com/u/33614550?v=4","gravatar_id":"","url":"https://api.github.com/users/MartinAtCoventry","html_url":"https://github.com/MartinAtCoventry","followers_url":"https://api.github.com/users/MartinAtCoventry/followers","following_url":"https://api.github.com/users/MartinAtCoventry/following{/other_user}","gists_url":"https://api.github.com/users/MartinAtCoventry/gists{/gist_id}","starred_url":"https://api.github.com/users/MartinAtCoventry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MartinAtCoventry/subscriptions","organizations_url":"https://api.github.com/users/MartinAtCoventry/orgs","repos_url":"https://api.github.com/users/MartinAtCoventry/repos","events_url":"https://api.github.com/users/MartinAtCoventry/events{/privacy}","received_events_url":"https://api.github.com/users/MartinAtCoventry/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":22,"created_at":"2021-05-19T19:28:14Z","updated_at":"2021-05-24T14:36:05Z","closed_at":"2021-05-24T14:36:05Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nI'm testing px4(v1.11.3) on raspberry pi4. And I met a fatal problem about mpu9250 spi driver.\r\nThe imu driver I used is at src/driver/imu/invensense/mpu9250. It's just for spi interface. All of\r\ncompilation are sucessful, but there is an error info after the program running 3 or 4 minutes.\r\n`ERROR [sensors] Accel #0 fail:  ERR CNT!`, this error \r\n\r\nI don't know what meaning `ERR CNT` is ?  This fault leads to imu and mag-compass crash on\r\nQGC, but in px4 console still show all sensors info after inputting the command `sensors status`.\r\nWho could help me solve the mpu9250 problem, please?\r\n\r\n**Screenshots**\r\n```\r\nINFO  [px4] assuming working directory is rootfs, no symlinks needed.\r\n\r\n______  __   __    ___ \r\n| ___ \\ \\ \\ / /   /   |\r\n| |_/ /  \\ V /   / /| |\r\n|  __/   /   \\  / /_| |\r\n| |     / /^\\ \\ \\___  |\r\n\\_|     \\/   \\/     |_/\r\n\r\npx4 starting.\r\n\r\nINFO  [px4] Calling startup script: /bin/sh px4.config 0\r\n+ BAT1_V_CHANNEL: curr: -1 -> new: 0\r\nINFO  [dataman] Unknown restart, data manager file './dataman' size is 11798680 bytes\r\nbmp280 #0 on SPI bus 2 (devid=0x0)\r\nmpu9250 #0 on SPI bus 2 (devid=0x1)\r\nINFO  [mavlink] mode: Normal, data rate: 5760 B/s on /dev/ttyS2 @ 115200B\r\nINFO  [linux_pwm_out] Loaded mixer from file ROMFS/px4fmu_common/mixers/quad_x.main.mix\r\nINFO  [linux_pwm_out] Starting PWM output in PCA9685 mode\r\nINFO  [logger] logger started (mode=all)\r\nINFO  [px4] Startup script returned successfully\r\npxh> INFO  [ecl/EKF] 1211103446: reset position to last known position\r\nINFO  [ecl/EKF] 1211103446: reset velocity to zero\r\nINFO  [ecl/EKF] 1218138452: EKF aligned, (baro hgt, IMU buf: 18, OBS buf: 14)\r\nERROR [sensors] Accel #0 fail:  ERR CNT!\r\n```\r\n\r\n**Drone (please complete the following information):**\r\n- project version: v1.11.3\r\n- mpu9250 and bmp280 on the same spi bus, but different cs pin.\r\n- Linux debian 10.3","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17615/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17578","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17578/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17578/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17578/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17578","id":892572687,"node_id":"MDU6SXNzdWU4OTI1NzI2ODc=","number":17578,"title":"ekf2 replay does not work for SDLOG_PROFILE = 2","user":{"login":"priseborough","id":3596952,"node_id":"MDQ6VXNlcjM1OTY5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/3596952?v=4","gravatar_id":"","url":"https://api.github.com/users/priseborough","html_url":"https://github.com/priseborough","followers_url":"https://api.github.com/users/priseborough/followers","following_url":"https://api.github.com/users/priseborough/following{/other_user}","gists_url":"https://api.github.com/users/priseborough/gists{/gist_id}","starred_url":"https://api.github.com/users/priseborough/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priseborough/subscriptions","organizations_url":"https://api.github.com/users/priseborough/orgs","repos_url":"https://api.github.com/users/priseborough/repos","events_url":"https://api.github.com/users/priseborough/events{/privacy}","received_events_url":"https://api.github.com/users/priseborough/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-05-16T01:25:34Z","updated_at":"2022-08-23T23:37:07Z","closed_at":"2022-08-18T08:19:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"A log generated with upstream master using a single EKF instance with only ekf2 replay messages is unable to be replayed. Here is an example log.\r\n\r\nhttps://logs.px4.io/plot_app?log=31ebbb10-97a4-469e-8092-2d3ac1ecbfe4\r\n\r\ngenerated using:\r\n\r\nSDLOG_MODE, 2\r\nSDLOG_PROFILE, 2\r\n\r\nThere are two errors that occur when replaying this log:\r\n\r\n1) unrecogonised message definition, ig: ERROR [replay] unknown log definition type 81, size 28 (offset 55043). This can be resolved using https://github.com/priseborough/PX4-Autopilot/commit/13b36e1a5de6829c76762ecb553a976a58d8f844\r\n\r\n2) Repeated baro timeouts, eg: WARN  [ecl/EKF] baro hgt timeout - reset to baro\r\n\r\nThe ability to replay logs with SDLOG_PROFILE=2 is essential for the debug on F4 boards that do ot have adequate resources to log without  dropouts if other log data is included, eg SDLOG_PROFILE = 3","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17578/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17543","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17543/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17543/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17543/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17543","id":877709544,"node_id":"MDExOlB1bGxSZXF1ZXN0NjMxNjE3OTQ0","number":17543,"title":"TECS: in airspeed-less mode, set airspeed estimate to cruise airspeed","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing ðŸ›©ï¸","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-05-06T16:34:09Z","updated_at":"2021-05-28T12:25:54Z","closed_at":"2021-05-28T12:25:54Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17543","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17543","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17543.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17543.patch","merged_at":"2021-05-28T12:25:54Z"},"body":"**Describe problem solved by this pull request**\r\nTECS still need a filled airspeed state in airspeed less mode. That was till now calculated as the average of min and max airspeed. If that is not the same as the setpoint (FW_AIRSPD_TRIM), it will result in an increased energy demand (and that in turn in an increased throttle).\r\n\r\n**Describe your solution**\r\nLet TECS know the value of FW_AIRSPD_TRIM, and use that as airspeed state in airspeed less case, such that no airspeed error exists. \r\n\r\n**Test data / coverage**\r\nFlight tested on several VTOLs by disabling the airspeed sensor in air.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17543/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17523","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17523/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17523/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17523/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17523","id":875584287,"node_id":"MDExOlB1bGxSZXF1ZXN0NjI5ODk3NTQ3","number":17523,"title":"collision_prevention: fix CP_GO_NO_DATA parameter type","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-05-04T15:33:20Z","updated_at":"2021-05-04T20:41:33Z","closed_at":"2021-05-04T20:41:32Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17523","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17523","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17523.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17523.patch","merged_at":"2021-05-04T20:41:32Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17523/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17510","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17510/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17510/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17510/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17510","id":874022049,"node_id":"MDExOlB1bGxSZXF1ZXN0NjI4NjYyMzA4","number":17510,"title":"drivers ADIS16448 minor fixes and compatibility with older model","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-05-02T19:21:27Z","updated_at":"2021-05-18T16:44:39Z","closed_at":"2021-05-18T16:44:38Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17510","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17510","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17510.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17510.patch","merged_at":"2021-05-18T16:44:38Z"},"body":"For debugging https://github.com/PX4/PX4-Autopilot/issues/17509.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17510/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17509","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17509/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17509/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17509/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17509","id":874016933,"node_id":"MDU6SXNzdWU4NzQwMTY5MzM=","number":17509,"title":"ADIS16448 IMU Driver Unreliable with ADIS16448AMLZ","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2021-05-02T18:58:37Z","updated_at":"2021-05-18T16:44:59Z","closed_at":"2021-05-18T16:44:59Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nStarting the ADIS16448AMLZ driver on a external SPI port seems to be unreliable on latest master\r\n\r\nThere are two issues using this IMU (logs provided below)\r\n- Unreliable start of the driver: It takes a few tries to get the driver to detect the imu\r\n- Low rate of IMU messages: After the driver has been started, the rate of the imu message seems to be quite low. \r\n\r\n**Expected behavior**\r\nReliably start the imu and receive high rate imu messages\r\n\r\n**Log Files and Screenshots**\r\n- Unreliable start of the driver: It takes a few tries to get the driver to detect the imu\r\n```\r\nnsh> adis16448 start -S\r\nWARN  [SPI_I2C] adis16448: no instance started (no device on bus?)\r\nnsh> adis16448 start -S\r\nWARN  [SPI_I2C] adis16448: no instance started (no device on bus?)\r\nnsh> adis16448 start -S\r\nadis16448 #0 on SPI bus 5 (devid=0x0) (external, equal to '-b 1')\r\n```\r\n\r\n- Low rate of IMU messages: After the driver has been started, the rate of the imu message seems to be quite low. \r\n```\r\nupdate: 1s, num topics: 86\r\nTOPIC NAME      INST #SUB RATE #Q SIZE\r\nsensor_accel       0    5  399  8   48 \r\nsensor_accel       1    4  200  8   48 \r\nsensor_accel       2    3    0  8   48 \r\nsensor_accel_fifo  0    1  200  1  224 \r\nsensor_accel_fifo  1    0  399  1  224 \r\n```\r\n\r\n**Drone (please complete the following information):**\r\n- Tested on a pixhawk4\r\n\r\n**Additional context**\r\n- This was partly addressed in https://github.com/PX4/PX4-Autopilot/issues/16839\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17509/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17491","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17491/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17491/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17491/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17491","id":872743464,"node_id":"MDU6SXNzdWU4NzI3NDM0NjQ=","number":17491,"title":"CUAV 1.12beta4 test report","user":{"login":"jinger26","id":4444989,"node_id":"MDQ6VXNlcjQ0NDQ5ODk=","avatar_url":"https://avatars.githubusercontent.com/u/4444989?v=4","gravatar_id":"","url":"https://api.github.com/users/jinger26","html_url":"https://github.com/jinger26","followers_url":"https://api.github.com/users/jinger26/followers","following_url":"https://api.github.com/users/jinger26/following{/other_user}","gists_url":"https://api.github.com/users/jinger26/gists{/gist_id}","starred_url":"https://api.github.com/users/jinger26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinger26/subscriptions","organizations_url":"https://api.github.com/users/jinger26/orgs","repos_url":"https://api.github.com/users/jinger26/repos","events_url":"https://api.github.com/users/jinger26/events{/privacy}","received_events_url":"https://api.github.com/users/jinger26/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":1,"created_at":"2021-04-30T15:45:36Z","updated_at":"2021-06-25T08:28:41Z","closed_at":"2021-06-25T08:28:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"CUAV tested 1.12beta4 for PWM controls, and here's the result (April 30)\r\n\r\nHardware: X7\r\n\r\n\r\nAirframe selection:\r\n![Screen Shot 2021-04-30 at 11 42 16 PM](https://user-images.githubusercontent.com/4444989/116719606-d6349880-aa0d-11eb-9382-151172b95c75.png)\r\n\r\n\r\n\r\nNote: **rc7 is mapped to aux6\r\n\r\n\r\nOutput:\r\n![Screen Shot 2021-04-30 at 11 42 50 PM](https://user-images.githubusercontent.com/4444989/116719869-227fd880-aa0e-11eb-911d-4dc21f674116.png)\r\n\r\n\r\n\r\næ€»ç»“ï¼šè¯¥æœºåž‹æ‰€æœ‰çš„ç”µæœºå’Œèˆµæœºè§£é”åŽéƒ½æœ‰è¾“å‡ºï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡é¥æŽ§å™¨æŽ§åˆ¶ï¼Œä½†æ˜¯è®¾ç½®RC7æ˜ å°„åˆ°aux6,M14æ²¡æœ‰pwmè¾“å‡ºã€‚\r\nSummary: All motors and servos of this model have pwm outputs after ARM, and can be controlled by remote control, but set RC7 to map to aux6, M14 has no pwm output.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17491/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17489","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17489/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17489/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17489/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17489","id":872495059,"node_id":"MDU6SXNzdWU4NzI0OTUwNTk=","number":17489,"title":"Pixhawk 4: IO reboot failed","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289822068,"node_id":"MDU6TGFiZWwyODk4MjIwNjg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/pixhawk","name":"pixhawk","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-04-30T13:19:37Z","updated_at":"2021-04-30T13:42:30Z","closed_at":"2021-04-30T13:42:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nAbout 1/5 times, when I reflash my Pixhawk 4 it then fails to check the IO version and can't update it.\r\n\r\nThis is when playing with HITL which might have an influence on this.\r\n\r\n```\r\nMCU: STM32F76xxx, rev. Z\r\nINFO  [param] selected parameter default file /fs/mtd_params\r\nINFO  [parameters] BSON document size 345 bytes, decoded 345 bytes\r\nBoard architecture defaults: /etc/init.d/rc.board_arch_defaults\r\nBoard defaults: /etc/init.d/rc.board_defaults\r\nINFO  [dataman] Unknown restart, data manager file '/fs/microsd/dataman' size is 362560 bytes\r\nINFO  [uavcan] Node ID 1, bitrate 1000000\r\nERROR [px4io] check CRC failed: -1, CRC: 1126689421\r\nERROR [px4io] IO refused to re-enable safety\r\nERROR [px4io] IO refused to reboot\r\nERROR [px4io] reboot failed - -1, still attempting upgrade\r\n[PX4IO] using firmware from /etc/extras/px4_io-v2_default.bin\r\n[PX4IO] bootloader not responding\r\nERROR [px4io] IO refused to re-enable safety\r\nERROR [px4io] IO refused to reboot\r\nERROR [px4io] reboot failed - -1, still attempting upgrade\r\n[PX4IO] using firmware from /etc/extras/px4_io-v2_default.bin\r\n[PX4IO] bootloader not responding\r\nERROR [px4io] IO refused to re-enable safety\r\nERROR [px4io] IO refused to reboot\r\nERROR [px4io] reboot failed - -1, still attempting upgrade\r\n\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17489/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17484","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17484/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17484/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17484/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17484","id":871556903,"node_id":"MDExOlB1bGxSZXF1ZXN0NjI2NTY5NzYw","number":17484,"title":"PWM Fixes","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":3,"created_at":"2021-04-29T21:37:49Z","updated_at":"2021-05-06T05:54:23Z","closed_at":"2021-05-05T18:48:07Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17484","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17484","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17484.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17484.patch","merged_at":"2021-05-05T18:48:07Z"},"body":"None of the test worked. Now they do....some what - There is still an order of operation issue. \r\n\r\nTesting with the commands listed below. \r\n\r\n(1)  `pwm_out mode_pwm14` only starts instance 0\r\n```\r\npwm_out0 set_pwm_rate 0 0 50\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\n```\r\n(2)  `pwm rate` Only sets first instance until both are armed\r\n```\r\nnsh> pwm rate  -d /dev/pwm_output0  -r 400 -a\r\npwm_out0 set_pwm_rate 0 0 400\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\npwm_out0 set_pwm_rate ffff 0 400\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\nnsh> pwm rate  -d /dev/pwm_output1  -r 400 -a\r\npwm_out1 set_pwm_rate 0 50 400\r\npwm_out1 set_pwm_rate ffff 50 400\r\nnsh> INFO  [pwm_out] instance: 0, max rate: 2000, default: 0, alt: 400\r\nINFO  [pwm_out] instance: 1, max rate: 800, default: 50, alt: 400\r\n```\r\n\r\n3) now sets mode and alow rates to be set\r\n```\r\nnsh> pwm -d /dev/pwm_output0 arm\r\nnsh> pwm -d /dev/pwm_output1 arm\r\npwm_out1 set_pwm_rate ffff 0 400\r\ngroup:2  mask f00\r\ngroup:3  mask 3000\r\ngroup:2  mask f00\r\ngroup:3  mask 3000\r\nnsh> INFO  [pwm_out] instance: 1, max rate: 2000, default: 0, alt: 400\r\n```\r\n\r\n4)\r\n```\r\npwm rate  -d /dev/pwm_output0  -r 400 -a\r\npwm_out0 set_pwm_rate ffff 0 400\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\npwm_out0 set_pwm_rate ffff 0 400\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\ngroup:0  mask f\r\ngroup:1  mask f0\r\nnsh> pwm rate  -d /dev/pwm_output1  -r 400 -a\r\npwm_out1 set_pwm_rate ffff 0 400\r\ngroup:2  mask f00\r\ngroup:3  mask 3000\r\ngroup:2  mask f00\r\ngroup:3  mask 3000\r\npwm_out1 set_pwm_rate ffff 0 400\r\ngroup:2  mask f00\r\ngroup:3  mask 3000\r\ngroup:2  mask f00\r\ngroup:3  mask 3000\r\nnsh> INFO  [pwm_out] instance: 0, max rate: 2000, default: 0, alt: 400\r\nINFO  [pwm_out] instance: 1, max rate: 2000, default: 0, alt: 400\r\n```\r\n\r\n\r\nFirst commit:  Found and fixed DSHOT broke io timers. (This may need so be rippled to other arches)\r\n\r\nFound and fixed AFU IOCLT values. It coun not have been any more broken. (Channel number like 0xffffffffa Nikes!!\r\n\r\nadded _output_mask logic to keep the restored `set_pwm_rate(pwm_alt_rate_channels_new, default_rate_min, alt_rate_max);`\r\nfrom missing with groups not in it's intance.\r\n\r\n\r\n```\r\npwm_out start\r\npwm_out mode_pwm14 \r\n \r\npwm status -d /dev/pwm_output0\r\npwm status -d /dev/pwm_output1\r\n  \r\npwm -d /dev/pwm_output0 arm\r\npwm -d /dev/pwm_output1 arm\r\n\r\npwm rate  -d /dev/pwm_output0  -r 400 -a\r\npwm rate  -d /dev/pwm_output1  -r 400 -a\r\n\r\n   \r\npwm rate  -d /dev/pwm_output0  -r 50 -a\r\npwm rate  -d /dev/pwm_output1  -r 50 -a\r\n\r\n\r\npwm test  -d /dev/pwm_output0  -p 1000 -a\r\n\r\npwm test  -d /dev/pwm_output0  -p 1234 -a\r\n\r\npwm test  -d /dev/pwm_output1  -p 1234 -a\r\n\r\n\r\npwm_out -d /dev/px4fmu test\r\npwm_out -d /dev/px4fmu1 test\r\n\r\n\r\n\r\npwm rate  -d /dev/pwm_output0  -r 0 -a\r\n\r\n```\r\n\r\n```\r\ndiff --git a/src/drivers/pwm_out/PWMOut.cpp b/src/drivers/pwm_out/PWMOut.cpp\r\nindex 5f513553f6..1e61e29bb0 100644\r\n--- a/src/drivers/pwm_out/PWMOut.cpp\r\n+++ b/src/drivers/pwm_out/PWMOut.cpp\r\n@@ -375,7 +375,7 @@ int PWMOut::set_mode(Mode mode)\r\n  */\r\n int PWMOut::set_pwm_rate(uint32_t rate_map, unsigned default_rate, unsigned alt_rate)\r\n {\r\n-       PX4_DEBUG(\"pwm_out%u set_pwm_rate %x %u %u\", _instance, rate_map, default_rate, alt_rate);\r\n+       printf(\"pwm_out%u set_pwm_rate %x %u %u\\n\", _instance, rate_map, default_rate, alt_rate);\r\n \r\n        for (unsigned pass = 0; pass < 2; pass++) {\r\n \r\n@@ -402,6 +402,7 @@ int PWMOut::set_pwm_rate(uint32_t rate_map, unsigned default_rate, unsigned alt_\r\n                                continue;\r\n                        }\r\n \r\n+                       printf(\"group:%d  mask %x\\n\", group, mask);\r\n                        // all channels in the group must be either default or alt-rate\r\n                        uint32_t alt = rate_map & mask;\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17484/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17483","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17483/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17483/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17483/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17483","id":871255080,"node_id":"MDExOlB1bGxSZXF1ZXN0NjI2MzAzMjgw","number":17483,"title":"boards: mro pixracerpro set BOARD_SUPPORTS_RC_SERIAL_PORT_OUTPUT instead of RC_SERIAL_SINGLEWIRE","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-04-29T17:11:21Z","updated_at":"2021-04-30T01:06:41Z","closed_at":"2021-04-30T01:06:40Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17483","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17483","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17483.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17483.patch","merged_at":"2021-04-30T01:06:40Z"},"body":"This fixes DSM decoding on the mRo Pixracer Pro.\r\n\r\nWe should review this across other new H7 boards.\r\n\r\n@berndpfrommer","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17483/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17474","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17474/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17474/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17474/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17474","id":869920940,"node_id":"MDU6SXNzdWU4Njk5MjA5NDA=","number":17474,"title":"Warnings during VTOL transitions","user":{"login":"AndreRigi","id":80676299,"node_id":"MDQ6VXNlcjgwNjc2Mjk5","avatar_url":"https://avatars.githubusercontent.com/u/80676299?v=4","gravatar_id":"","url":"https://api.github.com/users/AndreRigi","html_url":"https://github.com/AndreRigi","followers_url":"https://api.github.com/users/AndreRigi/followers","following_url":"https://api.github.com/users/AndreRigi/following{/other_user}","gists_url":"https://api.github.com/users/AndreRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/AndreRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndreRigi/subscriptions","organizations_url":"https://api.github.com/users/AndreRigi/orgs","repos_url":"https://api.github.com/users/AndreRigi/repos","events_url":"https://api.github.com/users/AndreRigi/events{/privacy}","received_events_url":"https://api.github.com/users/AndreRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"},{"id":1442618266,"node_id":"MDU6TGFiZWwxNDQyNjE4MjY2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Offboard","name":"Offboard","color":"d8954e","default":false,"description":"Offboard mode control"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-04-28T12:59:22Z","updated_at":"2021-05-11T18:35:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Current behavior**\r\nIn offboard, calling a VTOL transition ends up with PX4 [[FlightModeManager]](https://github.com/PX4/PX4-Autopilot/blob/d62204856cf0711af9ca82a399aac529783c412b/src/modules/flight_mode_manager/FlightModeManager.cpp#L179) running the fligh task `[FlightTaskTransition]`. This flight task [sets the position setpoints](https://github.com/PX4/PX4-Autopilot/blob/d62204856cf0711af9ca82a399aac529783c412b/src/modules/flight_mode_manager/tasks/Transition/FlightTaskTransition.cpp#L57) to `NAN`.\r\n \r\nAs the control mode remains in offboard (`_control_mode.flag_control_offboard_enabled` is true),\r\n`[fw_pos_control_l1]` [expects a finite position setpoint](https://github.com/PX4/PX4-Autopilot/blob/d62204856cf0711af9ca82a399aac529783c412b/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L1704), which is not the case during transitions due to the previous flight task overwriting the setpoint.\r\n\r\nBecause the setpoint is not finite, the following warning is sent:\r\n`[fw_pos_control_l1] Invalid offboard setpoint. `\r\n\r\nHowever everything works fine as roll and pitch setpoints are override (standard vtol) during transitions.\r\n\r\n**Expected behavior**\r\nNo warning during transitions.\r\n\r\n**Possible solution?**\r\nA quick and dirty solution could be to mute the warning during a transition, either by looking at the current flight task or by checking the vehicle status. We may overlook important warnings in some corner cases though...\r\nA cleaner alternative may require an important change in the logic during transitions. \r\n\r\n**Log review**\r\n[Log review](https://logs.px4.io/plot_app?log=1f88d1db-87e1-41db-9e8b-e90b4237c385) of an offboard VTOL flight with multiple transition. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17474/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17467","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17467/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17467/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17467/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17467","id":868810845,"node_id":"MDExOlB1bGxSZXF1ZXN0NjI0MjczODA4","number":17467,"title":"fix bmi088: set correct accel scale","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers ðŸ”§","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-27T12:44:54Z","updated_at":"2021-04-27T14:27:58Z","closed_at":"2021-04-27T14:27:58Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17467","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17467","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17467.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17467.patch","merged_at":"2021-04-27T14:27:57Z"},"body":"This affected the clipping limit, which was set too low.\r\nOther drivers are correct.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17467/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17443","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17443/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17443/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17443/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17443","id":864942515,"node_id":"MDExOlB1bGxSZXF1ZXN0NjIxMDg3MDMx","number":17443,"title":"check_code_style_all.sh: remove ignored xargs parameter","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1443107293,"node_id":"MDU6TGFiZWwxNDQzMTA3Mjkz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Tools","name":"Tools","color":"27f7ae","default":false,"description":"Sub-tools used within PX4 ecosystem (scripts, etc)"}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-04-22T13:19:19Z","updated_at":"2021-04-24T02:09:17Z","closed_at":"2021-04-24T02:09:16Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17443","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17443","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17443.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17443.patch","merged_at":"2021-04-24T02:09:16Z"},"body":"**Describe problem solved by this pull request**\r\nFor quite some time now I get this annoying warning message:\r\n`xargs: warning: options --max-args and --replace/-I/-i are mutually exclusive, ignoring previous --max-args value`\r\nwhen each time when running `make format`.\r\n\r\n**Describe your solution**\r\nLooked up the man page: https://man7.org/linux/man-pages/man1/xargs.1.html\r\n> -I replace-str\r\n.... Implies -x and -L 1.\r\n> -L max-lines\r\nUse at most max-lines nonblank input lines per command line. ...\r\n> -n max-args, --max-args=max-args\r\nUse at most max-args arguments per command line. ...\r\n\r\nSo my interpretation is that `-n 1` is superfluous because `-I string` implies that `-n` cannot be used separately but is implicitly set to one.\r\n\r\n**Test data / coverage**\r\nI tested and the executed commands of `make format` are exactly the same.\r\n\r\nI'm using `xargs (GNU findutils) 4.8.0` but am assuming it doesn't make any difference.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17443/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17442","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17442/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17442/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17442/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17442","id":864806361,"node_id":"MDU6SXNzdWU4NjQ4MDYzNjE=","number":17442,"title":"SD Logging aborts on all boards shortly after start-up ERROR [logger] write failed (116)","user":{"login":"taileron","id":16166920,"node_id":"MDQ6VXNlcjE2MTY2OTIw","avatar_url":"https://avatars.githubusercontent.com/u/16166920?v=4","gravatar_id":"","url":"https://api.github.com/users/taileron","html_url":"https://github.com/taileron","followers_url":"https://api.github.com/users/taileron/followers","following_url":"https://api.github.com/users/taileron/following{/other_user}","gists_url":"https://api.github.com/users/taileron/gists{/gist_id}","starred_url":"https://api.github.com/users/taileron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taileron/subscriptions","organizations_url":"https://api.github.com/users/taileron/orgs","repos_url":"https://api.github.com/users/taileron/repos","events_url":"https://api.github.com/users/taileron/events{/privacy}","received_events_url":"https://api.github.com/users/taileron/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":48,"created_at":"2021-04-22T10:47:16Z","updated_at":"2021-05-08T11:45:23Z","closed_at":"2021-05-08T11:45:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nAfter arming the SD logging stops after a short period of time\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nhappens on all tested Fc \r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nA proper logfile gets created according to the sd log settings \r\n**Log Files and Screenshots**\r\n*Always* provide a link to the flight log file:\r\nHW arch: PX4_FMU_V4\r\nFW git-hash: 38bc46fd1af5823c58a84abc7c08172e82a85039\r\nFW version: 1.12.0 0 (17563648)\r\nFW git-branch: master\r\nOS: NuttX\r\nOS version: Release 10.0.0 (167772415)\r\nOS git-hash: 405cfa2571ab9eee2fd8cdf28726f8ccfeb3e5e6\r\nBuild datetime: Apr 17 2021 16:15:02\r\nBuild uri: localhost\r\nToolchain: GNU GCC, 9.2.1 20191025 (release) [ARM/arm-9-branch revision 277599]\r\nPX4GUID: 00010000000036313737333951050051002d\r\nMCU: STM32F42x, rev. 5\r\nINFO  [param] selected parameter default file /fs/mtd_params\r\nINFO  [parameters] BSON document size 3856 bytes, decoded 3856 bytes\r\nBoard architecture defaults: /etc/init.d/rc.board_arch_defaults\r\nBoard defaults: /etc/init.d/rc.board_defaults\r\nINFO  [dataman] Unknown restart, data manager file '/fs/microsd/dataman' size is 362560 bytes\r\nBoard sensors: /etc/init.d/rc.board_sensors\r\nms5611 #0 on SPI bus 2 (devid=0x3d)\r\nWARN  [SPI_I2C] hmc5883: no instance started (no device on bus?)\r\nlis3mdl #0 on SPI bus 1 (devid=0x5)\r\nicm20602 #0 on SPI bus 1 (devid=0x38)\r\nmpu9250 #0 on SPI bus 1 (devid=0x24)\r\nBoard extras: /etc/init.d/rc.board_mavlink\r\nINFO  [mavlink] mode: Config, data rate: 800000 B/s on /dev/ttyACM0 @ 57600B\r\nStarting Main GPS on /dev/ttyS3\r\nINFO  [pwm_out] instance: 0, max rate: 100, default: 50, alt: 50\r\nINFO  [init] Mixer: /etc/mixers/vtol_convergence.main.mix on /dev/pwm_output0\r\nekf2 [495:100]\r\nINFO  [pwm_out] instance: 0, max rate: 800, default: 50, alt: 400\r\nBoard extras: /etc/init.d/rc.board_extras\r\nAddons script: /fs/microsd/etc/extras.txt\r\nINFO  [logger] logger started (mode=all)\r\n\r\nNuttShell (NSH) NuttX-10.0.0\r\nnsh> INFO  [mavlink] Starting mavlink shell\r\nINFO  [commander] Armed by external command\r\nINFO  [logger] Start file log (type: full)\r\nINFO  [logger] [logger] /fs/microsd/log/2021-04-22/11_18_20.ulg\r\nINFO  [logger] Opened full log file: /fs/microsd/log/2021-04-22/11_18_20.ulg\r\nERROR [logger] write failed (116)\r\nWARN  [logger] closing log file failed (116)\r\nINFO  [commander] Disarmed by external command\r\nINFO  [commander] Connection to ground station lost\r\nINFO  [commander] Data link regained\r\n\r\nAdd screenshots to help explain your problem.\r\n\r\n**Drone (please complete the following information):**\r\n- Describe the type of drone.\r\n- Photo of the IMU / autopilot setup if possible.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17442/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17437","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17437/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17437/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17437/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17437","id":863905009,"node_id":"MDExOlB1bGxSZXF1ZXN0NjIwMjMwMjYx","number":17437,"title":"Fix velocity rampup based on stick while disarmed","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""},{"id":2588836410,"node_id":"MDU6TGFiZWwyNTg4ODM2NDEw","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/v1.12-Release-Notes","name":"v1.12-Release-Notes","color":"2a578e","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":0,"created_at":"2021-04-21T13:40:12Z","updated_at":"2021-04-24T01:57:28Z","closed_at":"2021-04-24T01:57:28Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17437","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17437","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17437.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17437.patch","merged_at":"2021-04-24T01:57:28Z"},"body":"**Describe problem solved by this pull request**\r\nIn the default position mode implementation a combination of the default implementation for taking over smoothly:\r\nhttps://github.com/PX4/PX4-Autopilot/pull/12389/files#diff-3372da232c5d9e1ac174e51bdbbe4d31d63547ce2459b5bbb83e15ea6e54d63eR37\r\nand the recent improvements to take over smoothly from the last mode:\r\nhttps://github.com/PX4/PX4-Autopilot/pull/17078/files#diff-8d0af4d9e531c4e5b5042aa541daa75f8c8375bfd4467096c2f186a8a501a549R51\r\nlead to the possibility to ramp up the velocity setpoint as if the vehicle was flying because the reset considered its own setpoint from the last loop iteration for taking over smoothly.\r\n\r\n**Describe your solution**\r\nThe main fix for this is the one line change 9e8d592\r\nIt by default reactivates tasks on ground with the empty setpoint such that they properly reset and don't try to take over smoothly from their own setpoints generated in the last loop iteration.\r\n\r\nOn the way I also found minor other things to correct:\r\n- In the acceleration stick mapping for legacy reasons the pure jerk limit is called feasability limit: f97fdb4\r\n- In the acceleration stick mapping the acceleration setpoint components taken over from the last task are screwed y = x: \r\n960c0a8\r\n- Minor order cleanup and checking explicitly all components for NAN in FlightTaskManualAcceleration: 446539c\r\n\r\n**Describe possible alternatives**\r\nI could do a custom implementation for that tasks `reActivate()` but I don't see in what case it could make sense to reactivate a task with it's own setpoints from the last loop iteration.\r\n\r\n**Test data / coverage**\r\nI tested in SITL and the undesired rampup is gone. The velocity can only be increased by stick after the takeoff ramp was initiated which usually leads to feasible/trackable setpoints.\r\n\r\n**Additional context**\r\nBefore. Disarmed the entire time, velocity ramps unexpectedly with stick deflection:\r\n![image-20210421-111902](https://user-images.githubusercontent.com/4668506/115563524-ee8f0f80-a2b7-11eb-8bf8-5e56ace02e06.png)\r\n\r\nAfter:\r\n![image](https://user-images.githubusercontent.com/4668506/115563181-8dffd280-a2b7-11eb-826e-f0aaf6f6d737.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17437/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17427","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17427/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17427/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17427/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17427","id":862622747,"node_id":"MDExOlB1bGxSZXF1ZXN0NjE5MTYyOTA0","number":17427,"title":"Fix the repeated configuration of PWM rate after initialization","user":{"login":"CUAVcaijie","id":30532769,"node_id":"MDQ6VXNlcjMwNTMyNzY5","avatar_url":"https://avatars.githubusercontent.com/u/30532769?v=4","gravatar_id":"","url":"https://api.github.com/users/CUAVcaijie","html_url":"https://github.com/CUAVcaijie","followers_url":"https://api.github.com/users/CUAVcaijie/followers","following_url":"https://api.github.com/users/CUAVcaijie/following{/other_user}","gists_url":"https://api.github.com/users/CUAVcaijie/gists{/gist_id}","starred_url":"https://api.github.com/users/CUAVcaijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CUAVcaijie/subscriptions","organizations_url":"https://api.github.com/users/CUAVcaijie/orgs","repos_url":"https://api.github.com/users/CUAVcaijie/repos","events_url":"https://api.github.com/users/CUAVcaijie/events{/privacy}","received_events_url":"https://api.github.com/users/CUAVcaijie/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":2588836410,"node_id":"MDU6TGFiZWwyNTg4ODM2NDEw","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/v1.12-Release-Notes","name":"v1.12-Release-Notes","color":"2a578e","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":6,"created_at":"2021-04-20T09:35:59Z","updated_at":"2021-04-27T22:22:08Z","closed_at":"2021-04-27T22:22:07Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17427","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17427","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17427.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17427.patch","merged_at":"2021-04-27T22:22:07Z"},"body":"**solved problem:** \r\nThe PWM pulse frequency is 8 times the setting \r\nhttps://github.com/PX4/PX4-Autopilot/issues/17417\r\n![å¾®ä¿¡å›¾ç‰‡_20210420172103](https://user-images.githubusercontent.com/30532769/115371744-d312fe80-a1fc-11eb-9463-258e92279da5.png)\r\n\r\nAfter initialization, the configuration pulse frequency will enter The static inline void io_timer_set_oneshot_mode(unsigned timer) function of platforms/nuttx/src/px4/stm/stm32_common/io_pins/io_timer.c will make the division factor 8 times smaller than the normal setting. \r\n\r\n**Test after modification:** \r\n\r\n**Test model:**\r\n13014 vertical take-off and landing \r\nParameter configuration ï¼š\r\nCBRK_USB_CHK = 197848\r\nCBRK_SUPPLY_CHK = 894281\r\nRC_MAP_AUX1 = Channel 5\r\nRC_MAP_AUX2 = Channel 6\r\nRC_MAP_AUX3 = Channel 7\r\nRC_MAP_AUX4 = Channel 8\r\nCBRK_AIRSPD_CHK=162128\r\nRC_MAP_TRANS_SW=Channel 8\r\n**Before unlock :**\r\n![å›¾ç‰‡2](https://user-images.githubusercontent.com/30532769/115373766-c1caf180-a1fe-11eb-945c-802ac075347a.png)\r\n![å›¾ç‰‡1](https://user-images.githubusercontent.com/30532769/115373777-c55e7880-a1fe-11eb-8f91-3df58cf490e9.png)\r\n\r\n\r\n**After unlocking :**\r\n![å›¾ç‰‡3](https://user-images.githubusercontent.com/30532769/115373786-c8596900-a1fe-11eb-89b0-48f72caed6d1.png)\r\n![å›¾ç‰‡4](https://user-images.githubusercontent.com/30532769/115373802-cc858680-a1fe-11eb-9852-a64c39f106c9.png)\r\n\r\n\r\n**Use the pwm info command to see that the result is consistent with the actual PWM output** \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17427/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17423","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17423/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17423/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17423/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17423","id":861449776,"node_id":"MDU6SXNzdWU4NjE0NDk3NzY=","number":17423,"title":"MC idle PWM automatically changes to 1000ms","user":{"login":"VTOLDavid","id":13052832,"node_id":"MDQ6VXNlcjEzMDUyODMy","avatar_url":"https://avatars.githubusercontent.com/u/13052832?v=4","gravatar_id":"","url":"https://api.github.com/users/VTOLDavid","html_url":"https://github.com/VTOLDavid","followers_url":"https://api.github.com/users/VTOLDavid/followers","following_url":"https://api.github.com/users/VTOLDavid/following{/other_user}","gists_url":"https://api.github.com/users/VTOLDavid/gists{/gist_id}","starred_url":"https://api.github.com/users/VTOLDavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VTOLDavid/subscriptions","organizations_url":"https://api.github.com/users/VTOLDavid/orgs","repos_url":"https://api.github.com/users/VTOLDavid/repos","events_url":"https://api.github.com/users/VTOLDavid/events{/privacy}","received_events_url":"https://api.github.com/users/VTOLDavid/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-04-19T15:40:07Z","updated_at":"2021-04-27T09:41:59Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"It normally arms in MC mode properly and sets pwm to 1100 while idle as set in VT_IDLE_PWM_MC.  But sometimes arms and pwm motor signals stay at 1000ms, thus motors remain stopped. If throttle is increased It responds but ESCs turn off if the signal returns to 1000ms and you get erratic behaviour from motors.\r\n\r\nTo Reproduce, not easily reproducible...\r\n-Arm MC everithing OK\r\n-Disarm\r\n-Let the drone disarmed for a while (10min aprox)\r\n-Arm, it arms but motors do not spin at iddle.\r\n\r\nExpected behavior\r\nThis should not happen.\r\n\r\nLog Files and Screenshots\r\n[FlightLog](https://logs.px4.io/plot_app?log=eef8b1e5-baa1-4bd3-84fc-0ba256c10845)\r\n[FlightLog2](https://logs.px4.io/plot_app?log=be927c5d-c264-47b2-b3c1-094bad17fabc)\r\n\r\nDrone:\r\nFirmware: 1.11.0 Master\r\nAirframe: Tailsitter\r\nAutopilot: Cube black\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17423/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17422","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17422/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17422/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17422/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17422","id":861379597,"node_id":"MDU6SXNzdWU4NjEzNzk1OTc=","number":17422,"title":"Tailsitter transitions in manual mode bug","user":{"login":"VTOLDavid","id":13052832,"node_id":"MDQ6VXNlcjEzMDUyODMy","avatar_url":"https://avatars.githubusercontent.com/u/13052832?v=4","gravatar_id":"","url":"https://api.github.com/users/VTOLDavid","html_url":"https://github.com/VTOLDavid","followers_url":"https://api.github.com/users/VTOLDavid/followers","following_url":"https://api.github.com/users/VTOLDavid/following{/other_user}","gists_url":"https://api.github.com/users/VTOLDavid/gists{/gist_id}","starred_url":"https://api.github.com/users/VTOLDavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VTOLDavid/subscriptions","organizations_url":"https://api.github.com/users/VTOLDavid/orgs","repos_url":"https://api.github.com/users/VTOLDavid/repos","events_url":"https://api.github.com/users/VTOLDavid/events{/privacy}","received_events_url":"https://api.github.com/users/VTOLDavid/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-19T14:37:49Z","updated_at":"2021-08-06T18:15:10Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"\r\nThere is a problem with the FW mode after a transition from MC in manual mode.\r\nMotor outputs do not match each other (they should in FW) elevons also do not behave properly, they have an offset. If the transition to FW  is done in any other mode (stabiliize included) and then switching to manual everithing is ok.\r\n\r\n\r\n**To Reproduce**\r\n-Arm MC in manual\r\n-Switch to FW flight\r\n\r\n**Expected behavior**\r\nMotor outputs should match each other once the transition is completed.\r\n\r\n**Log Files and Screenshots**\r\n[FlightLog](https://logs.px4.io/plot_app?log=7cb28ce8-e7c6-477c-9a7b-591ba2418a25)\r\n\r\n**Drone:**\r\nFirmware: 1.11.0 Master\r\nAirframe: Tailsitter\r\nAutopilot: Cube black\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17422/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17417","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17417/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17417/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17417/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17417","id":860435796,"node_id":"MDU6SXNzdWU4NjA0MzU3OTY=","number":17417,"title":"FMU outputs 8 times too high pulse rates (current master and beta)","user":{"login":"taileron","id":16166920,"node_id":"MDQ6VXNlcjE2MTY2OTIw","avatar_url":"https://avatars.githubusercontent.com/u/16166920?v=4","gravatar_id":"","url":"https://api.github.com/users/taileron","html_url":"https://github.com/taileron","followers_url":"https://api.github.com/users/taileron/followers","following_url":"https://api.github.com/users/taileron/following{/other_user}","gists_url":"https://api.github.com/users/taileron/gists{/gist_id}","starred_url":"https://api.github.com/users/taileron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taileron/subscriptions","organizations_url":"https://api.github.com/users/taileron/orgs","repos_url":"https://api.github.com/users/taileron/repos","events_url":"https://api.github.com/users/taileron/events{/privacy}","received_events_url":"https://api.github.com/users/taileron/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":10,"created_at":"2021-04-17T15:29:30Z","updated_at":"2021-06-25T08:29:21Z","closed_at":"2021-06-25T08:29:21Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nPulse rate 400Hz and 50Hz are present at 8 times the rate at all outputs.\r\nMain rate is measured with osci 3.2KHz\r\ndefault rate 400 Hz (instead of 50)\r\n(cause Omnibus F4 and X2.1-777 behaves the same, probably fmu outs of all boards) \r\nAttention, servos connected to FMU can be fried !!!\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nas soon as any of my Fcs are flashed \r\ndefault rate is displayed as 0 Hz\r\nAll servos on FMU immediately moved to the end stop, the ESCs give Error beep. \r\nAttention, servos connected to FMU can be fried !!!\r\n**Expected behavior**\r\nlike master of march 31th that behaves o.k.\r\n400Hz pwm rate gives 400Hz pulses\r\n50Hz default rate gives 50Hz\r\n**Log Files and Screenshots**\r\ndevice: /dev/pwm_output0\r\nchannel 1: 900 us (alternative rate: 400 Hz failsafe: 0, disarmed: 900 us, min: 1118 us, max: 1943 us, trim:  0.00)\r\nchannel 2: 900 us (alternative rate: 400 Hz failsafe: 0, disarmed: 900 us, min: 1118 us, max: 1943 us, trim:  0.00)\r\nchannel 3: 900 us (alternative rate: 400 Hz failsafe: 0, disarmed: 900 us, min: 1118 us, max: 1943 us, trim:  0.00)\r\nchannel 4: 2000 us (alternative rate: 400 Hz failsafe: 0, disarmed: 900 us, min: 976 us, max: 2011 us, trim:  0.00)\r\nchannel 5: 1985 us (default rate: 0 Hz failsafe: 1985, disarmed: 1985 us, min: 650 us, max: 2450 us, trim:  0.00)\r\nchannel 6: 1030 us (default rate: 0 Hz failsafe: 1030, disarmed: 1030 us, min: 650 us, max: 2450 us, trim:  0.00)\r\nchannel group 0: channels 1 2 3 4\r\nchannel group 1: channels 5 6\r\n\r\nlogging creates only corrupt data\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17417/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17416","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17416/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17416/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17416/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17416","id":860295783,"node_id":"MDExOlB1bGxSZXF1ZXN0NjE3MjI4MDQ1","number":17416,"title":"sensors/vehicle_angular_velocity: filter reset on scale change fixes","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-17T01:43:07Z","updated_at":"2021-04-25T18:20:33Z","closed_at":"2021-04-25T18:20:33Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17416","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17416","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17416.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17416.patch","merged_at":"2021-04-25T18:20:33Z"},"body":"Work in progress fixes for the gyro control data pipeline needed for when the scale factor (FIFO data) changes.\r\n\r\nFor the sake of efficiency (at 8 kHz) all filtering is performed on the raw data before the calibration and rotation is applied to only the last output. As a result we have to be a bit more careful when switching between sensors or in cases where the gyro scale factor changes (eg icm42688p 20 bit data).","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17416/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17401","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17401/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17401/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17401/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17401","id":858379485,"node_id":"MDExOlB1bGxSZXF1ZXN0NjE1NjQyNDM1","number":17401,"title":"rc: dsm allow full range","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":1,"created_at":"2021-04-15T01:12:21Z","updated_at":"2021-04-15T16:36:17Z","closed_at":"2021-04-15T16:27:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17401","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17401","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17401.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17401.patch","merged_at":"2021-04-15T16:27:34Z"},"body":"The range was artificially limited as an additional precaution after we reverted the more robust system byte based parsing.\r\n\r\n### Changes\r\n - lib/rc: DSM support full Spektrum range (up to 150%) to fix https://github.com/PX4/PX4-Autopilot/issues/17259\r\n - lib/rc: DSM require more channels for DSM guess (improve decoded channel count stability)\r\n - lib/rc: DSM reset guess if duplicate channel numbers are decoded in same packet\r\n - lib/rc: DSM add additional PX4_DEBUG messages in decode\r\n - lib/rc: DSM require stable channel count before returning data\r\n - rc_tests: DSM increase expected drop counts in tests (due to more frames required for guess)\r\n - rc_tests: DSM do one final expected channel count compare regardless of decode count","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17401/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17385","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17385/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17385/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17385/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17385","id":856617586,"node_id":"MDExOlB1bGxSZXF1ZXN0NjE0MTY3MTE1","number":17385,"title":"flashparams: Fix a null-pointer dereference crash","user":{"login":"jlaitine","id":23378390,"node_id":"MDQ6VXNlcjIzMzc4Mzkw","avatar_url":"https://avatars.githubusercontent.com/u/23378390?v=4","gravatar_id":"","url":"https://api.github.com/users/jlaitine","html_url":"https://github.com/jlaitine","followers_url":"https://api.github.com/users/jlaitine/followers","following_url":"https://api.github.com/users/jlaitine/following{/other_user}","gists_url":"https://api.github.com/users/jlaitine/gists{/gist_id}","starred_url":"https://api.github.com/users/jlaitine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlaitine/subscriptions","organizations_url":"https://api.github.com/users/jlaitine/orgs","repos_url":"https://api.github.com/users/jlaitine/repos","events_url":"https://api.github.com/users/jlaitine/events{/privacy}","received_events_url":"https://api.github.com/users/jlaitine/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-04-13T06:21:31Z","updated_at":"2021-04-14T15:01:06Z","closed_at":"2021-04-14T14:55:34Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17385","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17385","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17385.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17385.patch","merged_at":"2021-04-14T14:55:34Z"},"body":"Fix a potential crash caused by calling erase_sector with a null\r\nsector_descriptor (current_sector == 0).\r\n\r\nSigned-off-by: Jukka Laitinen <jukkax@ssrc.tii.ae>\r\n\r\nPlease use [PX4 Discuss](http://discuss.px4.io/) or [Slack](http://slack.px4.io/) to align on pull requests if necessary. You can then open draft pull requests to get early feedback.\r\n\r\n**Describe problem solved by this pull request**\r\nA clear and concise description of the problem this proposed change will solve.\r\nE.g. For this use case I ran into...\r\n\r\n**Describe your solution**\r\nA clear and concise description of what you have implemented.\r\n\r\n**Describe possible alternatives**\r\nA clear and concise description of alternative solutions or features you've considered.\r\n\r\n**Test data / coverage**\r\nHow was it tested? What cases were covered? Logs uploaded to https://review.px4.io/ and screenshots of the important plot parts.\r\n\r\n**Additional context**\r\nAdd any other related context or media.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17385/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17383","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17383/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17383/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17383/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17383","id":856591150,"node_id":"MDExOlB1bGxSZXF1ZXN0NjE0MTQ0MDA3","number":17383,"title":"Fix raw_dt and present_dt calculation in gps_blending","user":{"login":"jlaitine","id":23378390,"node_id":"MDQ6VXNlcjIzMzc4Mzkw","avatar_url":"https://avatars.githubusercontent.com/u/23378390?v=4","gravatar_id":"","url":"https://api.github.com/users/jlaitine","html_url":"https://github.com/jlaitine","followers_url":"https://api.github.com/users/jlaitine/followers","following_url":"https://api.github.com/users/jlaitine/following{/other_user}","gists_url":"https://api.github.com/users/jlaitine/gists{/gist_id}","starred_url":"https://api.github.com/users/jlaitine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlaitine/subscriptions","organizations_url":"https://api.github.com/users/jlaitine/orgs","repos_url":"https://api.github.com/users/jlaitine/repos","events_url":"https://api.github.com/users/jlaitine/events{/privacy}","received_events_url":"https://api.github.com/users/jlaitine/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-04-13T05:42:10Z","updated_at":"2021-05-05T15:32:19Z","closed_at":"2021-05-02T17:59:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17383","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17383","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17383.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17383.patch","merged_at":"2021-05-02T17:59:50Z"},"body":"If the GPS data is passed from companion computer, there may be inaccuracies\r\nwith timesync. This may cause time deltas to overflow.\r\n\r\nMake the time delta calculation using floats directly, wich results in negative\r\nnumbers in case there are such inaccuracies.\r\n\r\nSigned-off-by: Jukka Laitinen <jukkax@ssrc.tii.ae>\r\n\r\nPlease use [PX4 Discuss](http://discuss.px4.io/) or [Slack](http://slack.px4.io/) to align on pull requests if necessary. You can then open draft pull requests to get early feedback.\r\n\r\n**Describe problem solved by this pull request**\r\n\r\nWe are currently using an indoor positioning system, based on HTC Vive trackers, and passing \"GPS\" coordinates over RTSP from ROS2 (as SensorGps). The latency from the trackers is very low, and timestamps for the samples are close to the current time. Inaccuracies in the timesync cause the sample times to be sligthly in the future sometimes.\r\n\r\nThis doesn't harm anything else ( for the ekf, the samples will fall into the fusion time horizon soon enough), but the overflow in the blending code calculation will make the samples disappear for good.\r\n\r\n**Describe your solution**\r\n\r\nCorrect the time delta calculation so that it doesn't overflow. If the dt is negative, let it be, instead of letting it roll over.\r\n\r\n**Describe possible alternatives**\r\n\r\nImprovements for the PX4-ROS2 timesync would make sense in addition, it assumes currently that the time delay from px4->ros is equivalent to ros->px4, which is typically not the case, when there is lots of data flow from px4->ros but not the other way.\r\n\r\n**Test data / coverage**\r\n\r\nTested by passing sensor data over micrortps from companion computer to px4, observed that the timesync inaccuracy doesn't any more cause loss of data\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17383/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17380","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17380/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17380/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17380/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17380","id":856171013,"node_id":"MDU6SXNzdWU4NTYxNzEwMTM=","number":17380,"title":"Choosing the Local Position Estimator (LPE) causes PX4 not to boot properly on hardware with v1.12.0-beta2","user":{"login":"FernandezR","id":8770817,"node_id":"MDQ6VXNlcjg3NzA4MTc=","avatar_url":"https://avatars.githubusercontent.com/u/8770817?v=4","gravatar_id":"","url":"https://api.github.com/users/FernandezR","html_url":"https://github.com/FernandezR","followers_url":"https://api.github.com/users/FernandezR/followers","following_url":"https://api.github.com/users/FernandezR/following{/other_user}","gists_url":"https://api.github.com/users/FernandezR/gists{/gist_id}","starred_url":"https://api.github.com/users/FernandezR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FernandezR/subscriptions","organizations_url":"https://api.github.com/users/FernandezR/orgs","repos_url":"https://api.github.com/users/FernandezR/repos","events_url":"https://api.github.com/users/FernandezR/events{/privacy}","received_events_url":"https://api.github.com/users/FernandezR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-12T16:59:59Z","updated_at":"2022-02-08T16:16:50Z","closed_at":"2022-02-08T16:16:50Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThe flight controller will not allow mavlink connections on hardware after setting the parameter SYS_MC_EST_GROUP to LPE and rebooting the flight controller. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Flash pixracer with v1.12.0-beta2 with default params\r\n2. Set the airframe to Generic Quadrotor X\r\n3. Set the SYS_MC_EST_GROUP parameter to LPE\r\n4. Reboot flight controller\r\n5. Attempt to create mavlink connection to board using qgroundcontrol\r\n6. See error where re-connection does not occur\r\n\r\n**Expected behavior**\r\nIt was expected that the flight controller would boot like normal after setting the parameter and rebooting.\r\n\r\n**Additional context**\r\nI first noticed this issue on a Modal AI Flight Deck board and then tested on the pixracer to confirm the board was not the issue.\r\n\r\nAdditionally, I tested this bug in the gazebo simulation and the simulation was able to start and the drone was able to takeoff like normal.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17380/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17380/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17350","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17350/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17350/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17350/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17350","id":851590675,"node_id":"MDExOlB1bGxSZXF1ZXN0NjA5OTg3MTIx","number":17350,"title":"NuttX with SDMMC Backport","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":9,"created_at":"2021-04-06T16:22:51Z","updated_at":"2021-04-11T15:45:52Z","closed_at":"2021-04-09T19:53:27Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17350","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17350","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17350.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17350.patch","merged_at":"2021-04-09T19:53:27Z"},"body":"For testing of  https://github.com/PX4/NuttX/pull/146\r\n\r\nOnce the NuttX PR is merged, this will be repointed. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17350/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17328","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17328/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17328/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17328/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17328","id":850403204,"node_id":"MDU6SXNzdWU4NTA0MDMyMDQ=","number":17328,"title":"Could not get GPS status from Telem2 for firmware master, but firmware v1.11.3 is OK","user":{"login":"saengphet","id":12409718,"node_id":"MDQ6VXNlcjEyNDA5NzE4","avatar_url":"https://avatars.githubusercontent.com/u/12409718?v=4","gravatar_id":"","url":"https://api.github.com/users/saengphet","html_url":"https://github.com/saengphet","followers_url":"https://api.github.com/users/saengphet/followers","following_url":"https://api.github.com/users/saengphet/following{/other_user}","gists_url":"https://api.github.com/users/saengphet/gists{/gist_id}","starred_url":"https://api.github.com/users/saengphet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saengphet/subscriptions","organizations_url":"https://api.github.com/users/saengphet/orgs","repos_url":"https://api.github.com/users/saengphet/repos","events_url":"https://api.github.com/users/saengphet/events{/privacy}","received_events_url":"https://api.github.com/users/saengphet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":11,"created_at":"2021-04-05T14:24:06Z","updated_at":"2021-04-29T14:13:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\nI set up dual GPS, primary GPS is at GPS1 port and secondary is at telem2 port. Pixhawk 4 with Firmware version v1.11.3 works fine. However, after I upgraded firmware to master version. I could not get signal from secondary GPS (using gps status command). After that, I changed serial port from Telem2 to Serial4 to connect GPS, it works as expected !!. I have tested these with different fcu and gps. The result is the same.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n1. Set GPS1 (or GPS2) to accept signal from telem2, set serial baud-rate to auto.\n2. Restart the fcu\n3. Run \"gps status\" at console\n4. Could not set gps signal\n5. From 1. Change to accept gps signal from telem2 to serial 4 (physical port is uart & i2c B), then you can get the gps signal\n\n**Expected behavior**\nCan get the GPS signal from either telem2 or serial 4\n\n**Drone (please complete the following information):**\n- Quadrotor \n- pixhawk 4\n- pixhawk 4 GPS\n- Drotek Sirius GPS connect to telem2 (or serial4) of pixhawk. Also test using Drotek F9P rover gps.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17328/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17323","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17323/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17323/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17323/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17323","id":850273525,"node_id":"MDU6SXNzdWU4NTAyNzM1MjU=","number":17323,"title":"SITL tailsitter mission broken","user":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":289821422,"node_id":"MDU6TGFiZWwyODk4MjE0MjI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/sitl","name":"sitl","color":"bfd4f2","default":false,"description":"software in the loop simulation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-04-05T10:34:11Z","updated_at":"2021-04-05T12:14:32Z","closed_at":"2021-04-05T12:14:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nIt is no longer possible to fly a mission with the SITL tailsitter model. The model oscillate crazily and does not reach waypoints.\r\n[vtol-mission.plan.txt](https://github.com/PX4/PX4-Autopilot/files/6257710/vtol-mission.plan.txt)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `make px4_sitl gazebo_tailsitter`\r\n2. Uploaded mission plan attached to this issue in QGC.\r\n3. Start mission\r\n\r\n**Expected behavior**\r\nIt should follow the waypoints and not oscillate and fly away.\r\n\r\n`git bisect` points to https://github.com/PX4/PX4-Autopilot/pull/17223\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17323/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17310","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17310/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17310/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17310/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17310","id":849307536,"node_id":"MDExOlB1bGxSZXF1ZXN0NjA4MTAzMjY0","number":17310,"title":"vtol_att_control: occasional tailsitter forward transition failure","user":{"login":"nidhishraj","id":43353945,"node_id":"MDQ6VXNlcjQzMzUzOTQ1","avatar_url":"https://avatars.githubusercontent.com/u/43353945?v=4","gravatar_id":"","url":"https://api.github.com/users/nidhishraj","html_url":"https://github.com/nidhishraj","followers_url":"https://api.github.com/users/nidhishraj/followers","following_url":"https://api.github.com/users/nidhishraj/following{/other_user}","gists_url":"https://api.github.com/users/nidhishraj/gists{/gist_id}","starred_url":"https://api.github.com/users/nidhishraj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nidhishraj/subscriptions","organizations_url":"https://api.github.com/users/nidhishraj/orgs","repos_url":"https://api.github.com/users/nidhishraj/repos","events_url":"https://api.github.com/users/nidhishraj/events{/privacy}","received_events_url":"https://api.github.com/users/nidhishraj/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-02T16:10:48Z","updated_at":"2021-04-05T06:51:27Z","closed_at":"2021-04-03T17:19:48Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17310","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17310","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17310.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17310.patch","merged_at":"2021-04-03T17:19:48Z"},"body":"\r\nTailsitter VTOLs very occasionally gets stuck with zero roll and pitch angle in multicopter mode after\r\na forward transition command is issued.\r\n\r\nLog files with the transition failure:\r\nhttps://logs.px4.io/plot_app?log=d3c74285-5ae5-430d-a1bd-1b4e6de13938\r\nhttps://review.px4.io/plot_app?log=8d86e43c-5570-4480-9123-7e25669c5463\r\n\r\nIn the above logs you can see the pitch and roll sp set to zero during the forward transition. \r\n\r\nThis very rare behavior is triggered by the following events:\r\n1> a forward transition is triggered either in auto or manual mode.\r\n2> in the vtol_att_control main loop, if multicopter and fixed wing attitude setpoints are not updated, transition state is not updated\r\n3> the commander changes the vehicle status to transition mode.\r\n4> multicopter pos controller initiated  Transition flight task. This results in zero roll and pitch setpoint due to zero acceleration setpoint\r\n5> now vtol_att_control executes and updates the transition state. Specifically, _q_trans_start and _q_trans_sp are set with zero roll and pitch sp\r\n6> tilt is evaluated to be NaN, despite _q_trans_sp being normalized. This happens for 25% of all yaw angles when using float datatype. This can be\r\n   verified using the matrix library\r\n7> once tilt is evaluated to be NaN, _q_trans_sp is never updated again and is stuck in this state for ever.\r\n\r\nThis has been fixed by constraining the cos(tilt) within +1 to -1 range\r\nFurther, _q_trans_start and _q_trans_sp are immedietly initialized after a transition event is triggered.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17310/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17308","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17308/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17308/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17308/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17308","id":849260556,"node_id":"MDU6SXNzdWU4NDkyNjA1NTY=","number":17308,"title":"Lightware Laser does not start on external bus on Pixhawk4 Fmuv5 in boot sequence","user":{"login":"ecmnet","id":7580193,"node_id":"MDQ6VXNlcjc1ODAxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7580193?v=4","gravatar_id":"","url":"https://api.github.com/users/ecmnet","html_url":"https://github.com/ecmnet","followers_url":"https://api.github.com/users/ecmnet/followers","following_url":"https://api.github.com/users/ecmnet/following{/other_user}","gists_url":"https://api.github.com/users/ecmnet/gists{/gist_id}","starred_url":"https://api.github.com/users/ecmnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ecmnet/subscriptions","organizations_url":"https://api.github.com/users/ecmnet/orgs","repos_url":"https://api.github.com/users/ecmnet/repos","events_url":"https://api.github.com/users/ecmnet/events{/privacy}","received_events_url":"https://api.github.com/users/ecmnet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":19,"created_at":"2021-04-02T14:47:13Z","updated_at":"2023-08-25T22:23:14Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Lightware Laser (Sf10a) does not start with boot sequence on Pixhawk4 (FmuV5). Starting it later via console works without issues:\r\n\r\n<img width=\"912\" alt=\"Bildschirmfoto 2021-04-02 um 16 38 22\" src=\"https://user-images.githubusercontent.com/7580193/113425562-657c6b00-93d2-11eb-94be-e2dde57c665b.png\">\r\n\r\n<img width=\"912\" alt=\"Bildschirmfoto 2021-04-02 um 16 44 13\" src=\"https://user-images.githubusercontent.com/7580193/113425739-b2f8d800-93d2-11eb-8054-e2ce62a79ff2.png\">\r\n\r\nTested releases:1.11.x,  1.12-beta1 and 1.12-beta2\r\n\r\nNo issues with external RM3100 magnetometer.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17308/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17308/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17305","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17305/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17305/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17305/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17305","id":849157578,"node_id":"MDU6SXNzdWU4NDkxNTc1Nzg=","number":17305,"title":"UAVCAN command bridge: Spamming message","user":{"login":"ecmnet","id":7580193,"node_id":"MDQ6VXNlcjc1ODAxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/7580193?v=4","gravatar_id":"","url":"https://api.github.com/users/ecmnet","html_url":"https://github.com/ecmnet","followers_url":"https://api.github.com/users/ecmnet/followers","following_url":"https://api.github.com/users/ecmnet/following{/other_user}","gists_url":"https://api.github.com/users/ecmnet/gists{/gist_id}","starred_url":"https://api.github.com/users/ecmnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ecmnet/subscriptions","organizations_url":"https://api.github.com/users/ecmnet/orgs","repos_url":"https://api.github.com/users/ecmnet/repos","events_url":"https://api.github.com/users/ecmnet/events{/privacy}","received_events_url":"https://api.github.com/users/ecmnet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-04-02T11:13:11Z","updated_at":"2021-04-03T14:07:50Z","closed_at":"2021-04-03T14:07:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"In 1.12-beta2, dmesg (and log) still is spammed with UAVCAN messages after arming:\r\n\r\n<img width=\"912\" alt=\"Bildschirmfoto 2021-04-02 um 13 10 40\" src=\"https://user-images.githubusercontent.com/7580193/113410997-00fee300-93b5-11eb-8deb-cfc73faf085f.png\">\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17305/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17287","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17287/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17287/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17287/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17287","id":846934232,"node_id":"MDExOlB1bGxSZXF1ZXN0NjA1OTg3Mjgw","number":17287,"title":"SITL iris: reduce pitch rate D slightly to hotfix jMAVSim oscillation issue","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":663891100,"node_id":"MDU6TGFiZWw2NjM4OTExMDA=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/jmavsim","name":"jmavsim","color":"EF00FC","default":false,"description":""},{"id":2586249216,"node_id":"MDU6TGFiZWwyNTg2MjQ5MjE2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Simulation","name":"Simulation","color":"f24bbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-31T16:27:26Z","updated_at":"2021-04-06T09:19:44Z","closed_at":"2021-04-01T13:37:10Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17287","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17287","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17287.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17287.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nhttps://github.com/PX4/PX4-Autopilot/issues/17006\r\n\r\n**Describe your solution**\r\nIt's unclear why it starts oscillating only on pitch. A quick look at the jMAVSim implementation shows the quadcopter is symmetric. Loading a quad_x mixer instead of the iris asymmetric mixer didn't solve the issue in my test. So further investigation is necessary but adjusting the gain slightly hotfixes the issue such that noone gets blocked.\r\n\r\n**Test data / coverage**\r\nI found this to work testing in SITL. What also works is increasing the gyro d term cutoff again, lowering the rate p gain.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17287/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17285","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17285/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17285/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17285/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17285","id":846622007,"node_id":"MDExOlB1bGxSZXF1ZXN0NjA1NzA1Mzg3","number":17285,"title":"SlewRate: add back dummy file for mac build","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1598294845,"node_id":"MDU6TGFiZWwxNTk4Mjk0ODQ1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/CI%20%F0%9F%A4%96","name":"CI ðŸ¤–","color":"3b0dc4","default":false,"description":"Continuous Integration"}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-03-31T13:00:28Z","updated_at":"2021-03-31T13:50:17Z","closed_at":"2021-03-31T13:50:16Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17285","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17285","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17285.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17285.patch","merged_at":"2021-03-31T13:50:16Z"},"body":"**Describe problem solved by this pull request**\r\nI realized that https://github.com/PX4/PX4-Autopilot/pull/17066/commits/428be5cbba99d15fc0b15639df488dd4fa5d1b0a broke the Mac build only. Didn't see it in the huge list of successful CI jobs.\r\n\r\n**Describe your solution**\r\nI'm adding back the dummy cpp source to hopefully make whatever cmake generator mac uses happy again. It's the only difference I see to how include other libraries.\r\n\r\n**Test data / coverage**\r\nLet's see CI, I have no mac.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17285/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17283","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17283/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17283/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17283/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17283","id":846510532,"node_id":"MDExOlB1bGxSZXF1ZXN0NjA1NjAxNTUw","number":17283,"title":"MulticopterPositionControl: readd takeoff ramp fix","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-03-31T11:52:17Z","updated_at":"2021-03-31T13:21:43Z","closed_at":"2021-03-31T13:21:43Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17283","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17283","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17283.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17283.patch","merged_at":"2021-03-31T13:21:43Z"},"body":"**Describe problem solved by this pull request**\r\nI accidentally removed the fix from https://github.com/PX4/PX4-Autopilot/pull/14821 in #14665\r\n\r\nSe removal in diff (have to unfold MulticopterPositionControl.cpp/FlightModeManager.cpp manually because of some GitHub bug):\r\nhttps://github.com/PX4/PX4-Autopilot/pull/14665/files#diff-3fd0d86b4d06526da0551f7256a003ae78e84a241f68fc48f15b1aeff0386d9aL351\r\nhttps://github.com/PX4/PX4-Autopilot/pull/14665/files#diff-75545eaa2cbcbcced0da88552481e3ce674572b655022ed05e642ec07869eaf6R477\r\n\r\n**Describe your solution**\r\nReadd what the fix from https://github.com/PX4/PX4-Autopilot/pull/14821\r\n\r\n**Additional context**\r\nAFAIK we do not have a better solution yet so we better bring the fix back.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17283/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17263","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17263/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17263/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17263/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17263","id":843366250,"node_id":"MDExOlB1bGxSZXF1ZXN0NjAyNzU4OTcx","number":17263,"title":"PreFlightCheck: Check if SD card is present only once and store the result","user":{"login":"eyeam3","id":1187162,"node_id":"MDQ6VXNlcjExODcxNjI=","avatar_url":"https://avatars.githubusercontent.com/u/1187162?v=4","gravatar_id":"","url":"https://api.github.com/users/eyeam3","html_url":"https://github.com/eyeam3","followers_url":"https://api.github.com/users/eyeam3/followers","following_url":"https://api.github.com/users/eyeam3/following{/other_user}","gists_url":"https://api.github.com/users/eyeam3/gists{/gist_id}","starred_url":"https://api.github.com/users/eyeam3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eyeam3/subscriptions","organizations_url":"https://api.github.com/users/eyeam3/orgs","repos_url":"https://api.github.com/users/eyeam3/repos","events_url":"https://api.github.com/users/eyeam3/events{/privacy}","received_events_url":"https://api.github.com/users/eyeam3/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-29T13:22:51Z","updated_at":"2021-03-30T06:20:50Z","closed_at":"2021-03-30T06:20:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17263","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17263","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17263.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17263.patch","merged_at":"2021-03-30T06:20:49Z"},"body":"**Describe problem solved by this pull request**\r\nstatfs accesses the file-system and can be blocking for an extended period. Since the SD card check is part of the preflight checks in the main thread of commander, it could block its execution and cause various issues. Yet, the SD card is only mounted in rcS during boot so the state will not change after the first check.\r\n\r\n**Describe your solution**\r\nStore the SD card check result and only run statfs again if the card was not detected before.\r\n\r\n**Describe possible alternatives**\r\nRun check in a separate thread or module to not block commander, but unless there are multiple SD cards I don't think this is needed.\r\n\r\n**Test data / coverage**\r\nTested on a Pixhawk 4.\r\n\r\n**Additional context**\r\nNone\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17263/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17259","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17259/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17259/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17259/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17259","id":842825440,"node_id":"MDU6SXNzdWU4NDI4MjU0NDA=","number":17259,"title":"No Radio Signal from DSMx on Pixhawk4 mini since V1.11.3","user":{"login":"LukasHostettler","id":11869720,"node_id":"MDQ6VXNlcjExODY5NzIw","avatar_url":"https://avatars.githubusercontent.com/u/11869720?v=4","gravatar_id":"","url":"https://api.github.com/users/LukasHostettler","html_url":"https://github.com/LukasHostettler","followers_url":"https://api.github.com/users/LukasHostettler/followers","following_url":"https://api.github.com/users/LukasHostettler/following{/other_user}","gists_url":"https://api.github.com/users/LukasHostettler/gists{/gist_id}","starred_url":"https://api.github.com/users/LukasHostettler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LukasHostettler/subscriptions","organizations_url":"https://api.github.com/users/LukasHostettler/orgs","repos_url":"https://api.github.com/users/LukasHostettler/repos","events_url":"https://api.github.com/users/LukasHostettler/events{/privacy}","received_events_url":"https://api.github.com/users/LukasHostettler/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":21,"created_at":"2021-03-28T20:35:55Z","updated_at":"2021-04-16T01:44:16Z","closed_at":"2021-04-15T16:27:34Z","author_association":"NONE","active_lock_reason":null,"body":"Loading the default firmware from qgroundcountrol onto the holybro pixhawk mini results in no signal from the Radio.\r\nThe inputs from the RC are not recieved. \"Binding Spectrum\" however works.\r\n\r\nI tested with px4_fmu-v5_default V.1.11.3 (and v1.12.0 Beta 1), both versions have the same issue.\r\nThe last working relased version was V.1.11.2.\r\n\r\nParameters used in all cases:\r\n\r\n[20210328_QAV_workingOnV1.11.2.zip](https://github.com/PX4/PX4-Autopilot/files/6217998/20210328_QAV_workingOnV1.11.2.zip)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17259/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17244","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17244/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17244/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17244/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17244","id":842296330,"node_id":"MDU6SXNzdWU4NDIyOTYzMzA=","number":17244,"title":"X2.1 Mag not showing up","user":{"login":"nbort","id":81443501,"node_id":"MDQ6VXNlcjgxNDQzNTAx","avatar_url":"https://avatars.githubusercontent.com/u/81443501?v=4","gravatar_id":"","url":"https://api.github.com/users/nbort","html_url":"https://github.com/nbort","followers_url":"https://api.github.com/users/nbort/followers","following_url":"https://api.github.com/users/nbort/following{/other_user}","gists_url":"https://api.github.com/users/nbort/gists{/gist_id}","starred_url":"https://api.github.com/users/nbort/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nbort/subscriptions","organizations_url":"https://api.github.com/users/nbort/orgs","repos_url":"https://api.github.com/users/nbort/repos","events_url":"https://api.github.com/users/nbort/events{/privacy}","received_events_url":"https://api.github.com/users/nbort/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-03-26T21:07:28Z","updated_at":"2021-03-27T01:02:53Z","closed_at":"2021-03-27T01:02:31Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThe X2.1 (not -777) onboard mag is not showing up in PX4 v1.11.3\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Connected a new X2.1, preinstalled with Ardupilot, to QGC. Verified that the mag was seen \r\n2. Used QGC to change the firmware to PX4. Automatically loaded px4_fmu-v3 (surprised it did not load v2)\r\n3. \"uorb top\" did not show the mag or either IMU\r\n4. Performed the x2.1 SD bootloader upgrade\r\n5. Used QGC to change the firmware. Automatically loaded auav-x21_default.px4\r\n6. \"uorb top\" shows both accels, both gyros but not the mag\r\n7.  Completed the QGC compass cal but no compass was calibrated (all mag IDs and mag_comp still zero)\r\n8.  Used QGC to change the firmware. Manually loaded mro_x21_default.px4 (1.11.3)\r\n9. \"uorb top\" shows both accels, both gyros but not the mag\r\n10. Completed the QGC compass cal but no compass was calibrated (all mag IDs and mag_comp still zero)\r\n11. Repeated the entire process on a second x2.1 autopilot\r\n\r\n**Expected behavior**\r\nI expect to see the onboard mag in the mavlink console and expect to see it show up as calibrated after performing a QGC compass calibration\r\n\r\n**Drone (please complete the following information):**\r\nx2.1 Autopilot. Standard Plane vehicle type. The above testing was performed with the autopilot connected to a Windows computer via USB with no other autopilot connections.\r\n\r\n**Additional context**\r\nThis follows testing with a third x2.1 in which I had the same problem but was able to see and calibrate external mags. On an x2.1-777 I can see the mag (but it fails to do other things, like PPM in)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17244/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17240","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17240/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17240/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17240/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17240","id":842109783,"node_id":"MDU6SXNzdWU4NDIxMDk3ODM=","number":17240,"title":"Collision prevention does not work with firmware 1.12.0-beta1 and master","user":{"login":"saengphet","id":12409718,"node_id":"MDQ6VXNlcjEyNDA5NzE4","avatar_url":"https://avatars.githubusercontent.com/u/12409718?v=4","gravatar_id":"","url":"https://api.github.com/users/saengphet","html_url":"https://github.com/saengphet","followers_url":"https://api.github.com/users/saengphet/followers","following_url":"https://api.github.com/users/saengphet/following{/other_user}","gists_url":"https://api.github.com/users/saengphet/gists{/gist_id}","starred_url":"https://api.github.com/users/saengphet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saengphet/subscriptions","organizations_url":"https://api.github.com/users/saengphet/orgs","repos_url":"https://api.github.com/users/saengphet/repos","events_url":"https://api.github.com/users/saengphet/events{/privacy}","received_events_url":"https://api.github.com/users/saengphet/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""},{"id":5679108887,"node_id":"LA_kwDOAFDaZs8AAAABUoBTFw","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/v1.12","name":"v1.12","color":"FCC60F","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-03-26T16:12:43Z","updated_at":"2023-06-29T15:54:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nhello there, I installed the lightware lidar LW20/C and Stereo camera D435i (running PX4 avoidance for stereo) in front of Quadrotor for collision prevention. It works fine with firmware version v1.11.3 both lidar and stereo camera. However, after I  upgraded the firmware to v1.12.0-beta1 ( tried master too on 26/03/2021). Even I did not touch any parameters relate to collision prevention, it does not work as expected. The vehicle did not stop and continue going forward when the pilot moves the pitch stick input forward in Position mode.\r\n\r\nNormally, after arming the vehicle, the uorb message \"obstacle_distance_fused\" is shown (test using listener) but with firmware v1.12.0-beta1 it shows \"never publish\". I don't know why the Collision prevention not running even distance_sensor message exists.  PX4 avoidance with D435i sometimes got the error message \"TF Buffer: could not retrieve requested transform from buffer, unregistered\" and the process not continue (I plan to post this error in https://github.com/PX4/PX4-Avoidance separate to this issue)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. install LW20/C set -R 0 (forward) and D435i running with px4 avoidance in companion computer, set CP_DIST = 5 m.\r\n2. takeoff in position mode\r\n3. move pitch stick input forward to the obstacle\r\n4. See an error, the vehicle does not stop at 5 m and continue moving forward to the obstacle\r\n\r\n**Expected behavior**\r\nthe vehicle stop at 5 m even pilot moves pitch stick input forward in position mode to the obstacle\r\n\r\n**Drone (please complete the following information):**\r\n- Quadrotor\r\n- Pixhawk 4 (also tried the cube orange)\r\n- lidar lightware LW20/C (I tried ll40ls i2c also, the result is the same)\r\n- Stereo camera D435i with companion computer\r\n\r\n**Additional context**\r\nI have tried it in gazebo simulation with h480 airframe. The result is the same. the vehicle does not stop as expected. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17240/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17237","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17237/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17237/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17237/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17237","id":841551779,"node_id":"MDU6SXNzdWU4NDE1NTE3Nzk=","number":17237,"title":"Cuavx7 top 8 PWM channels have no output","user":{"login":"CUAVcaijie","id":30532769,"node_id":"MDQ6VXNlcjMwNTMyNzY5","avatar_url":"https://avatars.githubusercontent.com/u/30532769?v=4","gravatar_id":"","url":"https://api.github.com/users/CUAVcaijie","html_url":"https://github.com/CUAVcaijie","followers_url":"https://api.github.com/users/CUAVcaijie/followers","following_url":"https://api.github.com/users/CUAVcaijie/following{/other_user}","gists_url":"https://api.github.com/users/CUAVcaijie/gists{/gist_id}","starred_url":"https://api.github.com/users/CUAVcaijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CUAVcaijie/subscriptions","organizations_url":"https://api.github.com/users/CUAVcaijie/orgs","repos_url":"https://api.github.com/users/CUAVcaijie/repos","events_url":"https://api.github.com/users/CUAVcaijie/events{/privacy}","received_events_url":"https://api.github.com/users/CUAVcaijie/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":2239707619,"node_id":"MDU6TGFiZWwyMjM5NzA3NjE5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/manufacturer:%20cuav","name":"manufacturer: cuav","color":"8802e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":2,"created_at":"2021-03-26T03:17:55Z","updated_at":"2021-06-07T07:18:57Z","closed_at":"2021-06-07T07:18:57Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nCUAVx7 MAIN channel has no output \r\n\r\n**To Reproduce**\r\n1.Firmware version: a12442654138c88c796f9a655907f78fc258d04d\r\n2. Set the model to 4001 \r\n![image](https://user-images.githubusercontent.com/30532769/112571858-deecea00-8e23-11eb-9ccc-15fb7dbaa477.png)\r\n\r\n3. Calibrate all sensors \r\n4. Setting parameters: \r\n5. Restart \r\n6. Connect to the remote control\r\n\r\nTest Results:\r\nCAUVx7:\r\n    PWM output before unlocking: \r\n![image](https://user-images.githubusercontent.com/30532769/112572219-aef21680-8e24-11eb-8d08-14e0f426dfbc.png)\r\n\r\n    Unlock PWM output:\r\n![image](https://user-images.githubusercontent.com/30532769/112572227-b2859d80-8e24-11eb-9764-62ff274e79dc.png)\r\n\r\nAnalysis: No output from MAIN interface, normal output from AUX interface \r\n\r\nUse CUAVv5 for comparison: \r\n    PWM output before unlocking: \r\n![image](https://user-images.githubusercontent.com/30532769/112572232-b5808e00-8e24-11eb-97a5-5c4ff15fb3b9.png)\r\n\r\n    Unlock PWM output:\r\n![image](https://user-images.githubusercontent.com/30532769/112572234-b7e2e800-8e24-11eb-8349-d0c943991673.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17237/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17220","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17220/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17220/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17220/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17220","id":839607869,"node_id":"MDU6SXNzdWU4Mzk2MDc4Njk=","number":17220,"title":"Motors spin up to ~1500 pwm when vehicle is armed. [Control Allocation V1.12.0Beta]","user":{"login":"akarshgopal","id":16401459,"node_id":"MDQ6VXNlcjE2NDAxNDU5","avatar_url":"https://avatars.githubusercontent.com/u/16401459?v=4","gravatar_id":"","url":"https://api.github.com/users/akarshgopal","html_url":"https://github.com/akarshgopal","followers_url":"https://api.github.com/users/akarshgopal/followers","following_url":"https://api.github.com/users/akarshgopal/following{/other_user}","gists_url":"https://api.github.com/users/akarshgopal/gists{/gist_id}","starred_url":"https://api.github.com/users/akarshgopal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akarshgopal/subscriptions","organizations_url":"https://api.github.com/users/akarshgopal/orgs","repos_url":"https://api.github.com/users/akarshgopal/repos","events_url":"https://api.github.com/users/akarshgopal/events{/privacy}","received_events_url":"https://api.github.com/users/akarshgopal/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jlecoeur","id":1379463,"node_id":"MDQ6VXNlcjEzNzk0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1379463?v=4","gravatar_id":"","url":"https://api.github.com/users/jlecoeur","html_url":"https://github.com/jlecoeur","followers_url":"https://api.github.com/users/jlecoeur/followers","following_url":"https://api.github.com/users/jlecoeur/following{/other_user}","gists_url":"https://api.github.com/users/jlecoeur/gists{/gist_id}","starred_url":"https://api.github.com/users/jlecoeur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlecoeur/subscriptions","organizations_url":"https://api.github.com/users/jlecoeur/orgs","repos_url":"https://api.github.com/users/jlecoeur/repos","events_url":"https://api.github.com/users/jlecoeur/events{/privacy}","received_events_url":"https://api.github.com/users/jlecoeur/received_events","type":"User","site_admin":false},"assignees":[{"login":"jlecoeur","id":1379463,"node_id":"MDQ6VXNlcjEzNzk0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1379463?v=4","gravatar_id":"","url":"https://api.github.com/users/jlecoeur","html_url":"https://github.com/jlecoeur","followers_url":"https://api.github.com/users/jlecoeur/followers","following_url":"https://api.github.com/users/jlecoeur/following{/other_user}","gists_url":"https://api.github.com/users/jlecoeur/gists{/gist_id}","starred_url":"https://api.github.com/users/jlecoeur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlecoeur/subscriptions","organizations_url":"https://api.github.com/users/jlecoeur/orgs","repos_url":"https://api.github.com/users/jlecoeur/repos","events_url":"https://api.github.com/users/jlecoeur/events{/privacy}","received_events_url":"https://api.github.com/users/jlecoeur/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2021-03-24T11:04:45Z","updated_at":"2022-03-03T06:01:24Z","closed_at":"2021-06-22T09:50:38Z","author_association":"NONE","active_lock_reason":null,"body":"**The bug**\r\nMotors spin up to ~1500 pwm when vehicle [ Hexacopter Control Allocation V1.12.0Beta] is armed. No response to throttle or stick inputs.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Drone switched on\r\n2. Arm via RC or QGC\r\n3. See motors spin to ~1500 pwm\r\n\r\n**Expected behavior**\r\nMotors spin at idle speed (1075 pwm default)\r\n\r\n**Log Files and Screenshots**\r\nhttps://review.px4.io/plot_app?log=f2aa0437-ef1d-416c-aa16-5c64591922fa\r\n\r\n**Drone :**\r\n- Pixhawk 4, hexacopter\r\n- 6 x motors connected to PX4 IO out, and 6 x servos connected to FMU out\r\n\r\n**Firmware:**\r\n- px4 v1.12.0 beta1 (935c5df)\r\n- Control allocation hexacopter (6003_hexa_x_ctrlalloc)\r\n\r\n**Additional context**\r\n- Tried the same setup with normal hexacopter airframe (6001_hexa_x), the issue did not show up.\r\n- CA_ACTX parameters have MIN 0, MAX 1\r\n- Changing PWM_MAIN_MIN did not affect the issue\r\n- Throttling up and down shows no changes in motor PWM\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17220/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17213","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17213/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17213/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17213/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17213","id":839131496,"node_id":"MDExOlB1bGxSZXF1ZXN0NTk5MTk0NTE4","number":17213,"title":"adis16470 use 16 bit mode in burst","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-03-23T21:18:20Z","updated_at":"2021-03-24T23:29:41Z","closed_at":"2021-03-24T23:29:40Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17213","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17213","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17213.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17213.patch","merged_at":"2021-03-24T23:29:40Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17213/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17192","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17192/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17192/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17192/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17192","id":837655088,"node_id":"MDU6SXNzdWU4Mzc2NTUwODg=","number":17192,"title":"compass loss causes unsafe maneuvers","user":{"login":"obicons","id":4347705,"node_id":"MDQ6VXNlcjQzNDc3MDU=","avatar_url":"https://avatars.githubusercontent.com/u/4347705?v=4","gravatar_id":"","url":"https://api.github.com/users/obicons","html_url":"https://github.com/obicons","followers_url":"https://api.github.com/users/obicons/followers","following_url":"https://api.github.com/users/obicons/following{/other_user}","gists_url":"https://api.github.com/users/obicons/gists{/gist_id}","starred_url":"https://api.github.com/users/obicons/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obicons/subscriptions","organizations_url":"https://api.github.com/users/obicons/orgs","repos_url":"https://api.github.com/users/obicons/repos","events_url":"https://api.github.com/users/obicons/events{/privacy}","received_events_url":"https://api.github.com/users/obicons/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-03-22T12:09:40Z","updated_at":"2023-02-07T10:36:14Z","closed_at":"2023-02-07T10:36:13Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nDuring the landing sequence, a compass failure leads to a position loss and the vehicle jerks violently. Tested on recent commit. \r\n\r\n**To Reproduce**\r\n1. Takeoff\r\n2. Land\r\n3. While landing, fail every compass instance\r\n\r\n**Expected behavior**\r\nThe vehicle to proceed through the landing sequence.\r\n\r\n**Log Files and Screenshots**\r\nhttps://logs.px4.io/plot_app?log=b9da48e7-9b6a-4a87-a9b0-4d1ffb8d4e26\r\n\r\n**Drone (please complete the following information):**\r\nSITL Gazebo Iris\r\n\r\n**Additional context**\r\nN/A\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17192/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17185","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17185/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17185/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17185/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17185","id":837219537,"node_id":"MDExOlB1bGxSZXF1ZXN0NTk3NTkwNzY4","number":17185,"title":"rotate sensor fifo before publish and fix filter reset","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) ðŸ’¡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-22T00:13:13Z","updated_at":"2021-03-22T16:01:14Z","closed_at":"2021-03-22T16:01:13Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17185","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17185","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17185.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17185.patch","merged_at":"2021-03-22T16:01:13Z"},"body":" - rotates accel & gyro FIFO data before publication both to simplify downstream usage (including log review) and fix other issues\r\n     - to best handle int16_t data rotations are now either performed with swaps if possible, otherwise up-converted to float, rotated using the full rotation matrix, then rounded back to int16_t\r\n - fix sensors/vehicle_angular_velocity filter reset both with proper rotation and new calibration uncorrect helper\r\n      - in FIFO case filtering is done before calibration is applied, but we need to handle a possible reset from a completely different sensor (vehicle body angular velocity -> sensor frame uncorrected data)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17185/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17141","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17141/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17141/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17141/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17141","id":832393560,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkzNTU3NDk2","number":17141,"title":"gyro_fft: fix bucket_index size","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-16T04:17:29Z","updated_at":"2021-03-16T04:49:46Z","closed_at":"2021-03-16T04:49:45Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17141","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17141","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17141.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17141.patch","merged_at":"2021-03-16T04:49:45Z"},"body":"","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17141/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17139","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17139/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17139/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17139/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17139","id":832299007,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkzNDgyMjYz","number":17139,"title":"gyro_fft: limit to FFT length 512 for now","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-16T00:17:43Z","updated_at":"2021-03-16T04:18:20Z","closed_at":"2021-03-16T04:16:15Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17139","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17139","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17139.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17139.patch","merged_at":null},"body":"Temporarily disabling the larger FFT sizes (1024, 2048, 4096) as they seem to be causing problems. These were all flight tested on older hardware (px4_fmu-v4_default), but currently aren't working. https://github.com/PX4/PX4-Autopilot/pull/16385\r\n\r\nSomething may have broken during the large gyro_fft refactor bringing minimal CMSIS DSP in tree.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17139/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17133","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17133/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17133/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17133/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17133","id":832071194,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkzMjkyMzI3","number":17133,"title":"NuttX with SDMMC back ports","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-03-15T18:17:04Z","updated_at":"2021-03-16T19:37:42Z","closed_at":"2021-03-16T19:37:41Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17133","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17133","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17133.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17133.patch","merged_at":"2021-03-16T19:37:41Z"},"body":"For testing https://github.com/PX4/NuttX/pull/138\r\n Once this passes https://github.com/PX4/NuttX/pull/138 will be merged and this repointed.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17133/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17130","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17130/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17130/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17130/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17130","id":832037271,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkzMjYzODIz","number":17130,"title":"fw_pos_control_l1: OFFBOARD fully populate position_setpoint_triplet","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing ðŸ›©ï¸","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-03-15T17:33:09Z","updated_at":"2021-03-16T14:04:29Z","closed_at":"2021-03-16T04:58:05Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17130","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17130","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17130.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17130.patch","merged_at":"2021-03-16T04:58:05Z"},"body":"Possible fix for https://github.com/PX4/PX4-Autopilot/issues/17122#issuecomment-799554102.\r\n\r\n@AndreRigi @Jaeyoung-Lim ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17130/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17130/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17108","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17108/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17108/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17108/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17108","id":830155256,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkxNzEwOTk1","number":17108,"title":"mavlink: fix yaw and yaw_rate ignore mask check","user":{"login":"ArkadiuszNiemiec","id":12136404,"node_id":"MDQ6VXNlcjEyMTM2NDA0","avatar_url":"https://avatars.githubusercontent.com/u/12136404?v=4","gravatar_id":"","url":"https://api.github.com/users/ArkadiuszNiemiec","html_url":"https://github.com/ArkadiuszNiemiec","followers_url":"https://api.github.com/users/ArkadiuszNiemiec/followers","following_url":"https://api.github.com/users/ArkadiuszNiemiec/following{/other_user}","gists_url":"https://api.github.com/users/ArkadiuszNiemiec/gists{/gist_id}","starred_url":"https://api.github.com/users/ArkadiuszNiemiec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArkadiuszNiemiec/subscriptions","organizations_url":"https://api.github.com/users/ArkadiuszNiemiec/orgs","repos_url":"https://api.github.com/users/ArkadiuszNiemiec/repos","events_url":"https://api.github.com/users/ArkadiuszNiemiec/events{/privacy}","received_events_url":"https://api.github.com/users/ArkadiuszNiemiec/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-12T14:11:01Z","updated_at":"2021-03-12T15:39:08Z","closed_at":"2021-03-12T15:34:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17108","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17108","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17108.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17108.patch","merged_at":"2021-03-12T15:34:42Z"},"body":"**Describe the problem solved by this pull request**\r\n`YAW_IGNORE` and `YAW_RATE_IGNORE` flag is not checked correctly. The new message handler compares `type_mask` directly with bits, not masking it.\r\n\r\n**Describe your solution**\r\nI have changed it to be as with other flags.\r\n\r\n**Describe possible alternatives**\r\nDon't see any.\r\n\r\n**Test data / coverage**\r\nBefore my takeoff algorithm was making unwanted yaw corrections, after it works as in 1.11.0.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17108/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17097","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17097/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17097/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17097/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17097","id":829366942,"node_id":"MDU6SXNzdWU4MjkzNjY5NDI=","number":17097,"title":"Px4 log unknown date in QGC","user":{"login":"aet2230","id":43025389,"node_id":"MDQ6VXNlcjQzMDI1Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/43025389?v=4","gravatar_id":"","url":"https://api.github.com/users/aet2230","html_url":"https://github.com/aet2230","followers_url":"https://api.github.com/users/aet2230/followers","following_url":"https://api.github.com/users/aet2230/following{/other_user}","gists_url":"https://api.github.com/users/aet2230/gists{/gist_id}","starred_url":"https://api.github.com/users/aet2230/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aet2230/subscriptions","organizations_url":"https://api.github.com/users/aet2230/orgs","repos_url":"https://api.github.com/users/aet2230/repos","events_url":"https://api.github.com/users/aet2230/events{/privacy}","received_events_url":"https://api.github.com/users/aet2230/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":431515706,"node_id":"MDU6TGFiZWw0MzE1MTU3MDY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/more_info_needed","name":"more_info_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-03-11T17:33:34Z","updated_at":"2023-04-03T22:56:08Z","closed_at":"2023-04-03T22:56:08Z","author_association":"NONE","active_lock_reason":null,"body":"Recently I started to use Cube Orange and I get logs with unknown date in QGC.\r\nWhen I look at SD card, logs do have correct date (foldername) and time (filename).\r\nUsually such issue happens when I erase logs and perform flights til firs connection with QGC.\r\nOnce QGC is connected once, further logs are displayed.\r\nAttached is the screenshot that describes the issue: I entered nsh an you may see that in logdata.txt, the logname is ok, but its timestamp represents Saturday, January 1, 2000\r\n\r\n![Screenshot from 2021-03-11 15-03-17](https://user-images.githubusercontent.com/43025389/110829274-991b1800-82a0-11eb-8f04-28c237db796e.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17097/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17078","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17078/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17078/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17078/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17078","id":827740459,"node_id":"MDExOlB1bGxSZXF1ZXN0NTg5NjIwNjUy","number":17078,"title":"Acceleration stick mapping invalid setpoint corner case","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-03-10T13:28:43Z","updated_at":"2021-03-10T23:40:28Z","closed_at":"2021-03-10T23:40:28Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17078","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17078","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17078.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17078.patch","merged_at":"2021-03-10T23:40:27Z"},"body":"**Describe problem solved by this pull request**\r\n3 Bugs:\r\n1. In position mode when landing, moving the right stick during ground contact and taking off again in exactly the right timing it's possible to get invalid setpoints.\r\n2. Every mode switch results in the task doing EKF reset handling.\r\n3. The initialization of the acceleration stick mapping sets the wrong state.\r\n\r\n**Describe your solution**\r\n1.  When unlocking the position the velocity setpoint feedback is now considered since https://github.com/PX4/PX4-Autopilot/pull/16791. During ground contact the executed setpoint is NAN even though the task commanded a velocity. This is now handled gracefully by not considering the feedback if it's NAN.\r\n2. This is occuring because of an idea to be able to reinitialize any task on mode change e.g. to allow reinitialization of internal states when switching from Hold mode to Land mode which are currently all still handled by FlightTaskAuto and don't require a task switch.\r\n\r\n   But I found out it leads to issues because the last setpoint and the ekf reset counter state from the previous task are lost and as a result the setpoint transition cannot be handled consistently anymore.\r\n3. I just set the correct state. The issue was hidden by the previous issue 2. because the unexpected EKF reset handling had a similar effect.\r\n\r\n**Test data / coverage**\r\nI SITL tested all the cases listed above. See also screenshot below.\r\nFor 1. I intentionally injected NANs and verified it's not possible anymore to reproduce the issue.\r\n\r\n**Additional context**\r\n1. Issue found before this pr:\r\n![image](https://user-images.githubusercontent.com/4668506/110636567-b373c980-81ac-11eb-9cc7-2267d28b90e5.png)\r\n3. Testing proper initialization with this pr:\r\n![image](https://user-images.githubusercontent.com/4668506/110635742-bc17d000-81ab-11eb-801f-e16896d704f8.png)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17078/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17078/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17073","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17073/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17073/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17073/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17073","id":826854948,"node_id":"MDExOlB1bGxSZXF1ZXN0NTg4ODIzMjU1","number":17073,"title":"parameters: fix runtime default edge case","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":3,"created_at":"2021-03-10T00:30:44Z","updated_at":"2021-03-11T16:30:45Z","closed_at":"2021-03-11T16:30:44Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17073","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17073","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17073.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17073.patch","merged_at":"2021-03-11T16:30:44Z"},"body":"This fixes an edge case with the new runtime parameter default mechanism where if you manually set a parameter with a custom runtime default to the underlying default value it will be lost on the next import. This is because the param set during  import wouldn't store anything being set to default, but the custom airframe defaults hadn't been loaded yet (early in boot).\r\n\r\n - keep param_set() even if setting to default (runtime or static)\r\n - param export skip defaults\r\n - param_value_is_default() is more expensive now (actually finds the value and compares), but it's used infrequently\r\n - fixes https://github.com/PX4/PX4-Autopilot/issues/17016","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17073/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17051","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17051/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17051/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17051/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17051","id":824372725,"node_id":"MDExOlB1bGxSZXF1ZXN0NTg2NjE4Nzk3","number":17051,"title":"Airspeed Selector: do not run checks during landing","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing ðŸ›©ï¸","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-03-08T09:32:28Z","updated_at":"2021-03-09T18:23:49Z","closed_at":"2021-03-09T18:23:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17051","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17051","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17051.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17051.patch","merged_at":"2021-03-09T18:23:49Z"},"body":"Stall speed check would otherwise trigger during landing if airspeed falls below\r\nstall speed before landing is detected.\r\n\r\n**Describe problem solved by this pull request**\r\nThe airspeed checks trigger if the airspeed falls below the specified stall speed. Also when the vehicle is landing (and already on he ground), as the current fixed-wing land detector doesn't detect ground contact.\r\n\r\n**Describe your solution**\r\nDisable airspeed validity checks if position setpoint type is LAND.\r\n\r\n**Describe possible alternatives**\r\nAdd detection of ground_contact flag also to fixed-wing land detector. \r\n\r\n**Test data / coverage**\r\nSITL tested with standard VTOL and Plane.\r\n\r\n**Additional context**\r\nThere are currently too many parameters out there for a similar property of an airframe:\r\n`ASPD_STALL` (used in airspeed selector and commander (for airspeed preflight checks - max airspeed allowed))\r\n`FW_AIRSPD_MIN` (used in fw_attitdue and fw_position controllers)\r\n`LNDFW_AIRSPD_MAX` (land detector - and actually, we we need a separate `LNDFW_VEL_XY_MAX`?)\r\n\r\nEspecially the `ASPD_STALL` vs `FW_AIRSPD_MIN` relation bothers me - `ASPD_STALL` needs to be set reasonably to make the airspeed checks working as intended. @RomanBapst @dagar I'm currently wondering if we shouldn't get rid of `ASPD_STALL`, and replace it with e.g. 80% of `FW_AIRSPD_MIN`. What do you think?\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17051/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17042","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17042/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17042/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17042/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17042","id":823829435,"node_id":"MDExOlB1bGxSZXF1ZXN0NTg2MTg2MDc5","number":17042,"title":"mc_pos_control: add OFFBOARD takeoff intent","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-07T04:46:47Z","updated_at":"2021-03-07T10:04:18Z","closed_at":"2021-03-07T10:04:17Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17042","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17042","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17042.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17042.patch","merged_at":"2021-03-07T10:04:17Z"},"body":"OFFBOARD CI tests are failing on landing due to the takeoff state machine reactivating immediately on landing because OFFBOARD is always setting want_takeoff = true.\r\n\r\nThis change attempts to capture the takeoff intent in an OFFBOARD (trajectory) setpoint.\r\n\r\nExample failure log - https://logs.px4.io/plot_app?log=775688d0-faee-4f31-bb9b-1772ea0b1d9e","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17042/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17041","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17041/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17041/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17041/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17041","id":823817959,"node_id":"MDExOlB1bGxSZXF1ZXN0NTg2MTc5MTU2","number":17041,"title":"land_detector: continue respecting hover thrust throughout descent","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-07T03:26:08Z","updated_at":"2021-03-08T10:33:38Z","closed_at":"2021-03-08T10:33:37Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17041","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17041","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17041.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17041.patch","merged_at":"2021-03-08T10:33:37Z"},"body":"The hover thrust estimate becomes invalid on final descent, which can disrupt the land detector ground contact logic if MPC_THR_HOVER is sufficiently wrong.\r\n\r\nhttps://logs.px4.io/plot_app?log=3b44224e-4cca-42ad-a1dc-db2acff4f324\r\n\r\n<img width=\"864\" alt=\"Screen Shot 2021-03-06 at 10 21 05 PM\" src=\"https://user-images.githubusercontent.com/84712/110227839-43262900-7eca-11eb-8e12-e17f5736a4ec.png\">\r\n\r\n<img width=\"1366\" alt=\"Screen Shot 2021-03-06 at 10 22 23 PM\" src=\"https://user-images.githubusercontent.com/84712/110227854-723c9a80-7eca-11eb-9557-c5d1c2b87569.png\">\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17041/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17028","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17028/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17028/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17028/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17028","id":823155924,"node_id":"MDExOlB1bGxSZXF1ZXN0NTg1NjYzNzMw","number":17028,"title":"MultiCopterPositionControl: hotfix emergency failsafe","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-03-05T14:46:38Z","updated_at":"2021-03-05T16:29:37Z","closed_at":"2021-03-05T16:29:36Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17028","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17028","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17028.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17028.patch","merged_at":"2021-03-05T16:29:36Z"},"body":"**Describe problem solved by this pull request**\r\nThe emergency failsafe that prevents the vehicle from crashing with invalid setpoints or states broke with #16869 when the scheduling of the position control module and the setpoint generation got independent. The failsafe mechanism assumed the setpoint is overwirtten by the possibly infeasible trajectory_setpoint on every loop iteration which is not the case anymore. As a result the failsafe reset its hysteresis based on the failsafe setpoint from the last loop iteration and would therefore toggle again every time there's a new unfeasible trajectory_setpoint.\r\n\r\n**Describe your solution**\r\nKeeping the `failsafe_setpoint` separate solves this issue. Note that these failsafe setpoints do the bare minimum to keep the vehicle safely in the air and do not suffer from sideffects ignoring the EKF reset.\r\n\r\n**Test data / coverage**\r\nI tested by simply injecting malicious unfeasible setpoints when trying to reproduce an unrelated initialization issue. Before this pr the vehicle would come down like a stone. With this pr it works exactly as expected again. Keeping the vehicle in a sane flight condition such that you can take over again, logging regular messages such that you see what's happening.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17028/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17016","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17016/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17016/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17016/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17016","id":821154515,"node_id":"MDU6SXNzdWU4MjExNTQ1MTU=","number":17016,"title":"param corner case","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-03-03T14:21:08Z","updated_at":"2021-03-11T16:30:44Z","closed_at":"2021-03-11T16:30:44Z","author_association":"MEMBER","active_lock_reason":null,"body":"There's a corner case with the new default param storage: if a param is set to the firmware default, and there's a board/frame default, on the next boot the param is set to the board/frame default. This is because on import the value is seen as default and discarded, and later set to the board default.\r\nWe can keep the value on import to fix this.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17016/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17016/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17007","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17007/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17007/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17007/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17007","id":820416549,"node_id":"MDU6SXNzdWU4MjA0MTY1NDk=","number":17007,"title":"RTL_FLT_TIME unclear and potential division by zero","user":{"login":"sanderux","id":14801663,"node_id":"MDQ6VXNlcjE0ODAxNjYz","avatar_url":"https://avatars.githubusercontent.com/u/14801663?v=4","gravatar_id":"","url":"https://api.github.com/users/sanderux","html_url":"https://github.com/sanderux","followers_url":"https://api.github.com/users/sanderux/followers","following_url":"https://api.github.com/users/sanderux/following{/other_user}","gists_url":"https://api.github.com/users/sanderux/gists{/gist_id}","starred_url":"https://api.github.com/users/sanderux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanderux/subscriptions","organizations_url":"https://api.github.com/users/sanderux/orgs","repos_url":"https://api.github.com/users/sanderux/repos","events_url":"https://api.github.com/users/sanderux/events{/privacy}","received_events_url":"https://api.github.com/users/sanderux/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-03-02T21:45:19Z","updated_at":"2021-03-03T17:58:40Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Log: https://logs.px4.io/plot_app?log=2c9c93ec-1b0a-49f7-beeb-ce98f10700d9\r\n\r\nBattery alert was issued at 37% capacity remaining, BAT_LOW_THR was set to 20%\r\n\r\nOther tests show that battery failsafe RTL actually kicks in around 32% while 15% was set\r\n\r\nbattery_status.warning was never above 0 indicating the battery failsafe was not issued by the battery sensor code.\r\n\r\n@dagar @julianoes @RomanBapst ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17007/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17006","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17006/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17006/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17006/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/17006","id":820339916,"node_id":"MDU6SXNzdWU4MjAzMzk5MTY=","number":17006,"title":"SITL jMAVsim oscillates in pitch","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33","html_url":"https://github.com/PX4/PX4-Autopilot/milestone/33","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/milestones/33/labels","id":5195527,"node_id":"MDk6TWlsZXN0b25lNTE5NTUyNw==","number":33,"title":"Release v1.12.0","description":"","creator":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"open_issues":19,"closed_issues":94,"state":"open","created_at":"2020-03-12T16:04:13Z","updated_at":"2023-09-14T13:40:28Z","due_on":"2020-09-30T07:00:00Z","closed_at":null},"comments":4,"created_at":"2021-03-02T20:00:09Z","updated_at":"2021-05-17T15:37:52Z","closed_at":"2021-05-17T15:37:52Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen using master I observed small but steady and fast **oscillations** already in **hover flight in simulation** from a certain point in time on. I never had the time to follow where exactly this comes from and the sim was still usable for the normal tests I do although the oscillations are annoying and could affect observations in tests. When using master today the **same oscillations became a lot worse** and rendered it unusable so I started investigating.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start `make px4_sitl jmavsim`\r\n2. Wait until the simulated GPS is accepted\r\n3. Command a takeoff\r\n4. See pitch oscillations when looking at either the level hovering vehicle's attitude in the visualization or the attitude indicator of the ground station.\r\n\r\n**Expected behavior**\r\nNice smooth normal flight without oscillations.\r\n\r\n**Investigation**\r\n- **Before** https://github.com/PX4/PX4-Autopilot/pull/16188 it's flying **exactly as expected**. Smooth motion, no oscillations.\r\n- After the D-term gyro filter cutoff was reduced it has the small **annoying oscillation**.\r\n- After https://github.com/PX4/PX4-Autopilot/pull/15820 specifically https://github.com/PX4/PX4-Autopilot/commit/6482120d9a9b144831c81e7d2206b561fe8ad1d3 **SITL jMAVsim is unusable**.\r\n\r\nNow since I didn't do any real-world test flights the question is:\r\n- ~Are there general regressions that are not exclusive to my tests?~\r\n- Are the defaults generally less suited now?\r\n- Are the defaults just less suited for SITL jMAVsim now and retuning it (which I'll happily do) is the only thing needed.\r\n\r\nFYI @dagar @bresch @bkueng ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17006/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17006/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17001","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17001/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17001/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17001/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17001","id":819322464,"node_id":"MDExOlB1bGxSZXF1ZXN0NTgyNDQ4ODgy","number":17001,"title":"px4_work_queue: increase wq:nav_and_controllers stack","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor ðŸ›¸","color":"0052cc","default":false,"description":""},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-01T21:45:53Z","updated_at":"2021-03-01T23:03:18Z","closed_at":"2021-03-01T23:03:17Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/17001","html_url":"https://github.com/PX4/PX4-Autopilot/pull/17001","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/17001.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/17001.patch","merged_at":"2021-03-01T23:03:17Z"},"body":"Current master with MPC_POS_MODE 3 (ManualPositionSmoothVel) using collision prevention requires more than the current 1824 bytes of stack.\r\n\r\n``` Console\r\n PID COMMAND                   CPU(ms) CPU(%)  USED/STACK PRIO(BASE) STATE FD\r\n 376 wq:nav_and_controllers         53  5.296  1864/ 2828 242 (242)  w:sem  5\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/17001/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16998","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16998/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16998/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16998/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/16998","id":818644766,"node_id":"MDU6SXNzdWU4MTg2NDQ3NjY=","number":16998,"title":"motors start during IO board update","user":{"login":"NicolasM0","id":59083163,"node_id":"MDQ6VXNlcjU5MDgzMTYz","avatar_url":"https://avatars.githubusercontent.com/u/59083163?v=4","gravatar_id":"","url":"https://api.github.com/users/NicolasM0","html_url":"https://github.com/NicolasM0","followers_url":"https://api.github.com/users/NicolasM0/followers","following_url":"https://api.github.com/users/NicolasM0/following{/other_user}","gists_url":"https://api.github.com/users/NicolasM0/gists{/gist_id}","starred_url":"https://api.github.com/users/NicolasM0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicolasM0/subscriptions","organizations_url":"https://api.github.com/users/NicolasM0/orgs","repos_url":"https://api.github.com/users/NicolasM0/repos","events_url":"https://api.github.com/users/NicolasM0/events{/privacy}","received_events_url":"https://api.github.com/users/NicolasM0/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-01T09:02:36Z","updated_at":"2021-03-03T14:33:28Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nI updated a drone using the px_uploader.py script. After the update, the autopilot reboot and flashed the IO board, at this moment one motor started and the drone \"jumped\" from my desk. I was really close.\r\nMy autopilot is a CUAV V5+. The battery was plugged in.\r\nIs it known behavior? I did not see any indication in the doc that the command `make px4_fmu-v5_default upload` should not be used with a battery or to remove props first.\r\nI suppose that is why QGC does not allow to flash with the battery...\r\n\r\n**To Reproduce**\r\n1. remove propellers\r\n2. plug the battery\r\n3. flash the drone with master with `px_uploader.py` python script (or `make px4_fmu-v5_default upload`)\r\n4. re-flash the drone with an older version (in my case v1.10.2) (still with `px_uploader.py` and plug battery)\r\n5. after rebooting, the IO board should be reflashed and sometimes, motors turn.\r\n\r\n\r\n**Expected behavior**\r\nESCs should be disarmed\r\n\r\n**Log Files and Screenshots**\r\nI will try to reproduce and share a video","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16998/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16976","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16976/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16976/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16976/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/16976","id":817434060,"node_id":"MDExOlB1bGxSZXF1ZXN0NTgwOTI3NTIy","number":16976,"title":"uORB: PublicationMulti get_instance() advertise if not already advertised","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-02-26T15:09:47Z","updated_at":"2021-02-26T22:55:32Z","closed_at":"2021-02-26T22:55:31Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/16976","html_url":"https://github.com/PX4/PX4-Autopilot/pull/16976","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/16976.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/16976.patch","merged_at":"2021-02-26T22:55:31Z"},"body":" - fixes UAVCANv0 sensor bridge uORB usage, but also a reason thing to do in general\r\n - simple alternative to https://github.com/PX4/PX4-Autopilot/pull/16973\r\n\r\nBig thanks to @amikhalev for actually debugging this after I broke it with https://github.com/PX4/PX4-Autopilot/pull/16699.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16976/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16973","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16973/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16973/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16973/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/16973","id":817119685,"node_id":"MDExOlB1bGxSZXF1ZXN0NTgwNjY2MTMx","number":16973,"title":"lib/drivers: Fix magnetometer, etc. over UAVCAN","user":{"login":"amikhalev","id":4969631,"node_id":"MDQ6VXNlcjQ5Njk2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/4969631?v=4","gravatar_id":"","url":"https://api.github.com/users/amikhalev","html_url":"https://github.com/amikhalev","followers_url":"https://api.github.com/users/amikhalev/followers","following_url":"https://api.github.com/users/amikhalev/following{/other_user}","gists_url":"https://api.github.com/users/amikhalev/gists{/gist_id}","starred_url":"https://api.github.com/users/amikhalev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amikhalev/subscriptions","organizations_url":"https://api.github.com/users/amikhalev/orgs","repos_url":"https://api.github.com/users/amikhalev/repos","events_url":"https://api.github.com/users/amikhalev/events{/privacy}","received_events_url":"https://api.github.com/users/amikhalev/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-02-26T07:35:14Z","updated_at":"2021-02-26T19:42:14Z","closed_at":"2021-02-26T19:42:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/16973","html_url":"https://github.com/PX4/PX4-Autopilot/pull/16973","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/16973.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/16973.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nHere3 magnetometer doesn't work on master. Gives [(from here)](https://github.com/PX4/PX4-Autopilot/blob/143ebbad9872691797e947314efc2f56cdc902c6/src/drivers/uavcan/sensors/mag.cpp#L140-L145)\r\n```\r\nuavcan_mag adding channel for topic sensor_mag node 125...\r\nERROR [uavcan] UavcanMag: Unable to get an instance\r\nuavcan_mag INIT ERROR node 125 errno -1\r\n```\r\n\r\n**Describe your solution**\r\nDue to #16699 the PX4{Barometer,Magnetometer,Rangefinder} classes don't advertise in constructor, so `get_instance()` returns -1 until `update` is called. Rather than calling `update` with garbage data in `init_driver`, just have `get_instance()` advertise.\r\n\r\n**Test data / coverage**\r\nTested on CubeOrange with Here3. Errors are gone and `sensors_mag` is published. I do not have other UAVCAN sensors to test with but the code is very similar.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16973/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16943","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16943/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16943/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16943/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/16943","id":815332803,"node_id":"MDExOlB1bGxSZXF1ZXN0NTc5MTc5NDYy","number":16943,"title":"TECS: Fix internal state init if dt is large","user":{"login":"CarlOlsson","id":7795133,"node_id":"MDQ6VXNlcjc3OTUxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7795133?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlOlsson","html_url":"https://github.com/CarlOlsson","followers_url":"https://api.github.com/users/CarlOlsson/followers","following_url":"https://api.github.com/users/CarlOlsson/following{/other_user}","gists_url":"https://api.github.com/users/CarlOlsson/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlOlsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlOlsson/subscriptions","organizations_url":"https://api.github.com/users/CarlOlsson/orgs","repos_url":"https://api.github.com/users/CarlOlsson/repos","events_url":"https://api.github.com/users/CarlOlsson/events{/privacy}","received_events_url":"https://api.github.com/users/CarlOlsson/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing ðŸ›©ï¸","color":"009800","default":false,"description":""},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL ðŸ›©ï¸ðŸš","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-02-24T10:18:53Z","updated_at":"2021-03-05T18:44:20Z","closed_at":"2021-03-05T18:44:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/16943","html_url":"https://github.com/PX4/PX4-Autopilot/pull/16943","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/16943.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/16943.patch","merged_at":"2021-03-05T18:44:20Z"},"body":"**Describe problem solved by this pull request**\r\nThere was a bug in TECS which made the `_dt > DT_MAX` part of [this check](https://github.com/PX4/PX4-Autopilot/blob/cec31fd68512988f1eba072e167c4b53d1d1035c/src/lib/tecs/TECS.cpp#L465-L465) never trigger since just before we call the function we limit the _dt to be max `DT_MAX` [here](https://github.com/PX4/PX4-Autopilot/blob/cec31fd68512988f1eba072e167c4b53d1d1035c/src/lib/tecs/TECS.cpp#L539-L539).\r\n\r\nThis results in the fact that the internal TECS states are not reset if a VTOL vehicle is doing a second transition to cruise\r\n\r\n**Test data / coverage**\r\nTested on TECS similar to v1.10.1\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16943/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16943/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16932","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16932/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16932/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16932/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/16932","id":814296824,"node_id":"MDU6SXNzdWU4MTQyOTY4MjQ=","number":16932,"title":"BATx_CAPACITY not considered in remaining percentage indication","user":{"login":"sanderux","id":14801663,"node_id":"MDQ6VXNlcjE0ODAxNjYz","avatar_url":"https://avatars.githubusercontent.com/u/14801663?v=4","gravatar_id":"","url":"https://api.github.com/users/sanderux","html_url":"https://github.com/sanderux","followers_url":"https://api.github.com/users/sanderux/followers","following_url":"https://api.github.com/users/sanderux/following{/other_user}","gists_url":"https://api.github.com/users/sanderux/gists{/gist_id}","starred_url":"https://api.github.com/users/sanderux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanderux/subscriptions","organizations_url":"https://api.github.com/users/sanderux/orgs","repos_url":"https://api.github.com/users/sanderux/repos","events_url":"https://api.github.com/users/sanderux/events{/privacy}","received_events_url":"https://api.github.com/users/sanderux/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sanderux","id":14801663,"node_id":"MDQ6VXNlcjE0ODAxNjYz","avatar_url":"https://avatars.githubusercontent.com/u/14801663?v=4","gravatar_id":"","url":"https://api.github.com/users/sanderux","html_url":"https://github.com/sanderux","followers_url":"https://api.github.com/users/sanderux/followers","following_url":"https://api.github.com/users/sanderux/following{/other_user}","gists_url":"https://api.github.com/users/sanderux/gists{/gist_id}","starred_url":"https://api.github.com/users/sanderux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanderux/subscriptions","organizations_url":"https://api.github.com/users/sanderux/orgs","repos_url":"https://api.github.com/users/sanderux/repos","events_url":"https://api.github.com/users/sanderux/events{/privacy}","received_events_url":"https://api.github.com/users/sanderux/received_events","type":"User","site_admin":false},"assignees":[{"login":"sanderux","id":14801663,"node_id":"MDQ6VXNlcjE0ODAxNjYz","avatar_url":"https://avatars.githubusercontent.com/u/14801663?v=4","gravatar_id":"","url":"https://api.github.com/users/sanderux","html_url":"https://github.com/sanderux","followers_url":"https://api.github.com/users/sanderux/followers","following_url":"https://api.github.com/users/sanderux/following{/other_user}","gists_url":"https://api.github.com/users/sanderux/gists{/gist_id}","starred_url":"https://api.github.com/users/sanderux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanderux/subscriptions","organizations_url":"https://api.github.com/users/sanderux/orgs","repos_url":"https://api.github.com/users/sanderux/repos","events_url":"https://api.github.com/users/sanderux/events{/privacy}","received_events_url":"https://api.github.com/users/sanderux/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-02-23T09:53:43Z","updated_at":"2021-03-15T16:32:46Z","closed_at":"2021-03-15T16:32:46Z","author_association":"MEMBER","active_lock_reason":null,"body":"When setting the BAT1_CAPACITY the expected behavior is:\r\n1. Calculate remaining percentage based on voltage\r\n2. Calculate remaining percentage based on battery capacity\r\n3. Indicate whichever provides the lower percentage\r\n\r\nCurrently it seems only the voltage is taken into account\r\n\r\n![image](https://user-images.githubusercontent.com/14801663/108826991-52050580-75c5-11eb-860b-aaa916134c5c.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/16932/timeline","performed_via_github_app":null,"state_reason":"completed"},