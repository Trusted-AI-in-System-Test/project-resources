{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18719","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18719/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18719/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18719/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18719","id":1063666043,"node_id":"PR_kwDOAFDaZs4vBbQ0","number":18719,"title":"update correct airsp scale param string in ekf2","user":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"assignees":[{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-11-25T14:36:43Z","updated_at":"2021-11-25T16:05:53Z","closed_at":"2021-11-25T16:01:05Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18719","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18719","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18719.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18719.patch","merged_at":"2021-11-25T16:01:05Z"},"body":"**Describe problem solved by this pull request**\r\nAppears when multiple scale factors were introduced in #18442, this line was never updated (still on old scale factor param name). Results that no param is found, and thus no scale is applied to the airspeed in EKF2.\r\n\r\n**Describe your solution**\r\nUpdate the param search for ``ASPD_SCALE_1``.\r\n\r\n**Describe possible alternatives**\r\nThis is a quick fix.. but I imagine @sfuhrer you will want to advise on how selection of 1st, 2nd, or 3rd scales should be chosen here if someone is using the airspeed selector with multiple sensors.\r\n\r\n**Test data / coverage**\r\nI ran in SITL - confirmed that the wind estimate is stable after this. Can provide a log if requested.. but so far the fix is quite trivial.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18719/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18699","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18699/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18699/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18699/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18699","id":1060639345,"node_id":"PR_kwDOAFDaZs4u4G3r","number":18699,"title":"Fixes mkfatfs","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-22T22:09:26Z","updated_at":"2021-11-24T14:46:25Z","closed_at":"2021-11-24T14:46:24Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18699","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18699","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18699.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18699.patch","merged_at":"2021-11-24T14:46:24Z"},"body":"Dependent on https://github.com/PX4/NuttX-apps/pull/12 was merged.\r\n\r\nThis PR is repointed.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18699/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18697","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18697/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18697/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18697/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18697","id":1060624324,"node_id":"PR_kwDOAFDaZs4u4Dx9","number":18697,"title":"ekf2: selector treat combined test ratio > 1 as a warning","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-22T21:48:01Z","updated_at":"2021-12-02T01:22:35Z","closed_at":"2021-12-02T01:22:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18697","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18697","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18697.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18697.patch","merged_at":"2021-12-02T01:22:34Z"},"body":"The EKF2 selector change in https://github.com/PX4/PX4-Autopilot/pull/18669 also prevents selection when only attitude is available. This PR is one possible solution, but I'm open to suggestions.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18697/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18693","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18693/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18693/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18693/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18693","id":1060261553,"node_id":"PR_kwDOAFDaZs4u24kO","number":18693,"title":"Follow up improvements for the manual control cleanup","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-11-22T15:03:00Z","updated_at":"2021-11-23T15:10:04Z","closed_at":"2021-11-23T15:03:47Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18693","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18693","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18693.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18693.patch","merged_at":"2021-11-23T15:03:47Z"},"body":"**Describe problem solved by this pull request**\r\nDuring further testing of the recent changes in #17404 I found two issues:\r\n1. Moving the mode switch/button to an unassigned slot results in a message \"Switching to Unkown is currently not available\"\r\n1. There's no way to disable the stick gesture for arming.\r\n   This was previously implicitly (!) possible by either setting `COM_RC_IN_MODE` to joystick or mapping an arm switch.\r\n1. It is possible to enable yaw Airmode even though the stick gesture for arming is enabled\r\n\r\n**Describe your solution**\r\n1. I'm not sending out an invalid/\"Unkown\" mode switch request with `commander_state.main_state` requested to be `-1`. This is the default value representing unassigned slots but when casted to the main_state type `uint8_t` being 255 and hence resulting in the expected error.\r\n1. There needs to be an explicit way `MAN_ARM_GESTURE` to disable it because I've seen it more than once as a product or hobby vehicle setup requirement independent of joystick or arming switch use.\r\n1. The new parameter from the last point cannot be enabled at the same time as yaw Airmode for safety reasons..\r\n\r\n**Test data / coverage**\r\nI bench tested everything to work as expected.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18693/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18693/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18687","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18687/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18687/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18687/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18687","id":1059449299,"node_id":"PR_kwDOAFDaZs4u0PC_","number":18687,"title":"NuttX stm32f7:sdmmc defer invalidate until after DMA completion","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":12,"created_at":"2021-11-21T18:18:35Z","updated_at":"2021-11-25T18:13:26Z","closed_at":"2021-11-25T18:11:45Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18687","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18687","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18687.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18687.patch","merged_at":"2021-11-25T18:11:45Z"},"body":"PX4/NuttX PR https://github.com/PX4/NuttX/pull/170\r\n\r\n - fixes https://github.com/PX4/PX4-Autopilot/issues/18672","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18687/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18684","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18684/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18684/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18684/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18684","id":1059247717,"node_id":"PR_kwDOAFDaZs4uzpWv","number":18684,"title":"cmake fix NuttX config import for 0 values","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-20T23:07:04Z","updated_at":"2021-11-21T17:33:30Z","closed_at":"2021-11-21T17:33:29Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18684","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18684","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18684.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18684.patch","merged_at":"2021-11-21T17:33:29Z"},"body":"Any 0 value was being skipped. This only impacts the use of NuttX config variables with PX4 cmake, so we were probably getting away with it so far.\r\n\r\n``` Console\r\n-- CONFIG_STACK_USAGE_SAFE_PERCENT 0\r\n-- CONFIG_STM32F7_I2CTIMEOSEC 0\r\n-- CONFIG_BOARD_ASSERT_RESET_VALUE 0\r\n-- CONFIG_RR_INTERVAL 0\r\n-- CONFIG_SEM_PREALLOCHOLDERS 0\r\n-- CONFIG_DEV_FIFO_SIZE 0\r\n-- CONFIG_UART4_PARITY 0\r\n-- CONFIG_UART4_2STOP 0\r\n-- CONFIG_UART7_PARITY 0\r\n-- CONFIG_UART7_2STOP 0\r\n-- CONFIG_UART8_PARITY 0\r\n-- CONFIG_UART8_2STOP 0\r\n-- CONFIG_USART1_PARITY 0\r\n-- CONFIG_USART1_2STOP 0\r\n-- CONFIG_USART2_PARITY 0\r\n-- CONFIG_USART2_2STOP 0\r\n-- CONFIG_USART3_PARITY 0\r\n-- CONFIG_USART3_2STOP 0\r\n-- CONFIG_USART6_PARITY 0\r\n-- CONFIG_USART6_2STOP 0\r\n-- CONFIG_FAT_LFN_ALIAS_TRAILCHARS 0\r\n-- CONFIG_NSH_MMCSDMINOR 0\r\n-- CONFIG_NSH_MMCSDSLOTNO 0\r\n-- CONFIG_NSH_ROMFSDEVNO 0\r\n-- CONFIG_SYSTEM_CDCACM_DEVMINOR 0\r\n```","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18684/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18675","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18675/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18675/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18675/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18675","id":1058651061,"node_id":"I_kwDOAFDaZs4_Gbu1","number":18675,"title":"Hard fault log file content is incorrect ","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"assignees":[{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-11-19T15:27:27Z","updated_at":"2021-11-24T20:00:39Z","closed_at":"2021-11-24T20:00:39Z","author_association":"MEMBER","active_lock_reason":null,"body":"```\r\nrdfault_log fault\r\narm_hardfault: Hard Fault:\r\narm_hardfault:   IRQ: 3 regs: 0x20067fbc\r\narm_hardfault:   BASEPRI: 000000f0 PRIMASK: 00000000 IPSR: 00000003 CONTROL: 00000000\r\narm_hardfault:   CFAULTS: 00010000 HFAULTS: 40000000 DFAULTS: 00000000 BFAULTADDR: 00000000 AFAULTS: 00000000\r\narm_hardfault: PANIC!!! Hard fault: 40000000\r\nup_assert: Assertion failed at file:armv7-m/arm_hardfault.c line: 135 task: hardfault_log\r\nup_registerdump: R0: 00000000 081b9b55 e000ed14 00070210 00000000 200678e2 200678c8 00000002\r\nup_registerdump: R8: 00000000 00000000 00000000 00000000 00000000 20068090 08112125 0811214a\r\nup_registerdump: xPSR: 61000000 BASEPRI: 000000f0 CONTROL: 00000000\r\nup_registerdump: EXC_RETURN: ffffffe9\r\nup_dumpstate: sp:     200214f0\r\nup_dumpstate: IRQ stack:\r\nup_dumpstate:   base: 20021380\r\nup_dumpstate:   size: 00000200\r\nup_dumpstate:   used: 00000188\r\nup_stackdump: 200214e0: 200214f0 20021580 0815cea5 08012627 000000f0 00000000 00000000 00000000\r\nup_stackdump: 20021500: 20068090 08112125 0811214a 0000002d e000ed2c e000ed2c 00000000 00000000\r\nup_stackdump: 20021520: 00000000 00000000 00000000 00000000 00000000 08009d77 0800ab3d 08009853\r\nup_stackdump: 20021540: 40000000 00000000 00000000 00000000 20021580 00000003 00000003 0800b427\r\nup_stackdump: 20021560: 000000f0 080083b1 000000f0 20067fbc 200678e2 200678c8 00000002 080082a3\r\nup_dumpstate: sp:     20068090\r\nup_dumpstate: User stack:\r\nup_dumpstate:   base: 200678e8\r\nup_dumpstate:   size: 000007e0\r\nup_dumpstate:   used: 0000010c\r\nup_stackdump: 20068080: 00000000 00000000 00000000 08112125 00000000 20025e70 081120e1 00000000\r\nup_stackdump: 200680a0: 00000000 080145e5 081120e1 00000002 00000000 0800c547 00000000 00000000\r\nup_stackdump: 200680c0: 00000000 00000000 00013f30 00000820 2002b654 2002b644 fdade0b2 7e96373a\r\nup_taskdump: Idle Task: PID=0 Stack Used=352 of 726\r\nup_taskdump: hpwork: PID=1 Stack Used=332 of 1264\r\nup_taskdump: lpwork: PID=2 Stack Used=1028 of 1616\r\nup_taskdump: init: PID=3 Stack Used=2268 of 2928\r\nup_taskdump: wq:manager: PID=4 Stack Used=596 of 1256\r\nup_taskdump: hardfault_log: PID=1317 Stack Used=268 of 2016\r\nup_taskdump: wq:SPI4: PID=392 Stack Used=904 of 2336\r\nup_taskdump: wq:uavcan: PID=330 Stack Used=1908 of 3624\r\nup_taskdump: navigator: PID=1195 Stack Used=1076 of 1832\r\nup_taskdump: wq:nav_and_controllers: PID=908 Stack Used=1332 of 2240\r\nup_taskdump: wq:rate_ctrl: PID=909 Stack Used=1532 of 1952\r\nup_taskdump: wq:I2C3: PID=398 Stack Used=936 of 2336\r\nup_taskdump: mavlink_if0: PID=1071 Stack Used=1788 of 2728\r\nup_taskdump: gps: PID=1008 Stack Used=1036 of 1680\r\nup_taskdump: mavlink_rcv_if0: PID=1073 Stack Used=1500 of 4544\r\nup_taskdump: commander: PID=915 Stack Used=1316 of 3224\r\nup_taskdump: wq:INS0: PID=948 Stack Used=4372 of 6000\r\nup_taskdump: dataman: PID=85 Stack Used=868 of 1208\r\nup_taskdump: uavcan_fw_srv: PID=342 Stack Used=1548 of 6000\r\nup_taskdump: mavlink_if1: PID=1303 Stack Used=1812 of 2824\r\nup_taskdump: wq:INS1: PID=952 Stack Used=4372 of 6000\r\nup_taskdump: wq:SPI1: PID=377 Stack Used=1676 of 2336\r\nup_taskdump: logger: PID=1274 Stack Used=2876 of 3648\r\nup_taskdump: wq:I2C1: PID=91 Stack Used=980 of 2336\r\nup_taskdump: mavlink_rcv_if1: PID=1308 Stack Used=1516 of 4544\r\nup_taskdump: wq:lp_default: PID=61 Stack Used=1108 of 1920\r\nup_taskdump: log_writer_file: PID=1278 Stack Used=628 of 1176\r\nup_taskdump: wq:hp_default: PID=63 Stack Used=1276 of 1904\r\n```\r\n|File:\r\n```\r\n[hardfault_log] -- 2021-11-18-20:00:00 Begin Fault Log --\r\nSystem fault Occurred on: 2021-11-18-20:00:00\r\n Type:Hard Fault in file:armv7-m/arm_hardfault.c at line: 135 running task: hardfault_log\r\n FW git-hash: 9bd21a1bfa488b606f733ce27c29767af6cbf039\r\n Build datetime: Nov 18 2021 06:10:59\r\n Build url: localhost\r\n Processor registers: from 0x20067fbc\r\n r0:0x00000000 r1:0x136026965  r2:0x3758157076  r3:0x00459280  r4:0x00000000  r5:0x537295074 r6:0x537295048 r7:0x00000002\r\n r8:0x00000000 r9:0x00000000 r10:0x00000000 r11:0x00000000 r12:0x00000000  sp:0x537297040 lr:0x135340325 pc:0x135340362\r\n xpsr:0x1627389952 basepri:0x00000240 control:0x00000004\r\n exe return:0x4294967273\r\n Fault status registers: from NVIC\r\n cfsr:0x00065536 hfsr:0x1073741824  dfsr:0x00000000  mmfsr:0x00000000  bfsr:0x00000000 afsr:0x00000000 abfsr:0x00000000\r\n IRQ stack:\r\n  top:    0x537007488\r\n  sp:     0x537007344 Valid\r\n  bottom: 0x537006976\r\n  size:   0x00000512\r\n  used:   00000208\r\n User stack:\r\n  top:    0x537297096\r\n  sp:     0x537297040 Valid\r\n  bottom: 0x537295080\r\n  size:   0x00002016\r\n  used:   00001960\r\nInterrupt sp memory region, stack pointer lies within stack\r\n0x537007519 0x00000000\r\n0x537007518 0x00000000\r\n0x537007517 0x00000000\r\n0x537007516 0x00000000\r\n0x537007515 0x00000000\r\n0x537007514 0x00000000\r\n0x537007513 0x00000000\r\n0x537007512 0x00000000\r\n0x537007511 0x00000000\r\n0x537007510 0x00000000\r\n0x537007509 0x00000000\r\n0x537007508 0x00000000\r\n0x537007507 0x00000000\r\n0x537007506 0x00000000\r\n0x537007505 0x00000000\r\n0x537007504 0x00000000\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18675/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18672","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18672/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18672/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18672/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18672","id":1057870537,"node_id":"I_kwDOAFDaZs4_DdLJ","number":18672,"title":"Longer logging ends in error of FAT32 filesystem, Corrupted SD card","user":{"login":"roman-dvorak","id":5196729,"node_id":"MDQ6VXNlcjUxOTY3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5196729?v=4","gravatar_id":"","url":"https://api.github.com/users/roman-dvorak","html_url":"https://github.com/roman-dvorak","followers_url":"https://api.github.com/users/roman-dvorak/followers","following_url":"https://api.github.com/users/roman-dvorak/following{/other_user}","gists_url":"https://api.github.com/users/roman-dvorak/gists{/gist_id}","starred_url":"https://api.github.com/users/roman-dvorak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roman-dvorak/subscriptions","organizations_url":"https://api.github.com/users/roman-dvorak/orgs","repos_url":"https://api.github.com/users/roman-dvorak/repos","events_url":"https://api.github.com/users/roman-dvorak/events{/privacy}","received_events_url":"https://api.github.com/users/roman-dvorak/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"assignees":[{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-11-18T22:08:09Z","updated_at":"2021-12-04T10:26:57Z","closed_at":"2021-11-25T18:11:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi, we repeatedly have a problem with logging to the SD card. It happened to us several times that the card was corrupted during the inflight logging. The SD card or filesystem during read by computer seems to be flagged as read-only. And the log file was not complete. \r\n\r\nFor the first time, it happened to us on 7. 10. 2021 with takeoff mode (#18582), which was based on a few days old PX4  master version. At that time, I thought it was due to a large number of debug text logs (`PX4_INFO(\"...\")`). In the meantime, we tried to use a new (32GB SD card)[], format the card (completely erased) to FAT32. And the problem was repeated several times. Therefore we didn't have a log that we really needed.. It does not matter that we create a smaller 4GB FAT32 volume on SDcard. The situation was almost the same, corrupted filesystem with missing logs and sometimes other files which were previously on SDcard. \r\n\r\nNext time, I limited number of `PX4_INFO` messages to the minimum number of these logs. And the SD card was corrupted again. With such FW. But it was the  Firmware with my modifications. \r\n\r\nThe first used card was:\r\n![obrazek](https://user-images.githubusercontent.com/5196729/142501897-988731fa-a7a7-4514-94e8-c41f16083f9d.png)\r\n\r\nAfter a debate in (#18419), we decided to test this “airspeed mode” PR with our second autogyro (FMU v5, CUAV NANO) and this was almost unmodified FW (f814a52). But during the flight, the SDcard filesystem corruption happened again. This piece of autogyro (the same autopilot, the same SDcard, ..) was previously used in the same configuration with several months old master FW. Without any signs of this problem. \r\n\r\nThis always happened after a few seconds of flight. I don’t see any clear cause for this behaviour in the same fragments of the logs, retrieved from SDcard after fsck recovery,  containing the takeoff \r\n\r\n![obrazek](https://user-images.githubusercontent.com/5196729/142502130-1f9d376c-f41a-470b-8beb-fa461c51d224.png)\r\n![obrazek](https://user-images.githubusercontent.com/5196729/142502263-0528cc67-4dc1-4727-b5ac-3ac0cc3c96d6.png)\r\n\r\nI tried to repeat this on the ground. But I was unsuccessful. Logging worked for a very long time. \r\n\r\nFrom these experiments, I conclude that this is a problem in Firmware (I don’t know at what level). \r\n\r\nDuring the first attempts (when this issue occurred) I used the internal reader of my laptop. During the next experiments, I used an external uSD card reader from [Kingstone](https://www.kingston.com/czech/en/memory-card-readers/usb-3-0-high-speed-media-reader). But the result was the same. \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18672/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18672/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18662","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18662/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18662/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18662/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18662","id":1056265656,"node_id":"PR_kwDOAFDaZs4uqTqd","number":18662,"title":"sensors/vehicle_imu: fix accel/gyro learned bias calibration updates","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-17T15:28:57Z","updated_at":"2021-11-18T15:00:27Z","closed_at":"2021-11-18T15:00:26Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18662","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18662","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18662.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18662.patch","merged_at":"2021-11-18T15:00:26Z"},"body":" - fix confusion between estimated bias and calibration offset when\r\nsaving after each flight\r\n - when the stable bias estiamte is retrieved during flight it's\r\nimmediately converted to a sensor offset and saved\r\n - fixes https://github.com/PX4/PX4-Autopilot/issues/18658\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18662/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18638","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18638/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18638/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18638/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18638","id":1052752543,"node_id":"PR_kwDOAFDaZs4ufROC","number":18638,"title":"logger: log write file allow single retry on write failure","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""},{"id":1386282089,"node_id":"MDU6TGFiZWwxMzg2MjgyMDg5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Uorb","name":"Uorb","color":"141672","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-13T19:23:29Z","updated_at":"2023-08-03T16:02:45Z","closed_at":"2021-11-13T19:32:29Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18638","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18638","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18638.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18638.patch","merged_at":"2021-11-13T19:32:29Z"},"body":"Currently in master when testing across various px4_fmu-v5 units I've found it very difficult to get a complete test log as logger usually quits after a few minutes (quite variable).\r\n\r\n - reproducible on px4_fmu-v5 units from both CUAV and Holybro\r\n - cards are a mix of stock units that shipped with flight controllers and higher end Sandisk (used)\r\n    - all cards have been cleanly formatted (both Linux and Windows) and literally every block checked with multiple passes (`badblocks`, `fsck.vfat`, etc)\r\n\r\nNo I don't think this is the right solution, but I think it's better than giving up mid-flight.\r\n\r\nPrevious testing PR. https://github.com/PX4/PX4-Autopilot/pull/18355\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18638/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18638/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18625","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18625/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18625/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18625/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18625","id":1050965838,"node_id":"I_kwDOAFDaZs4-pHdO","number":18625,"title":"fallback to altitude and auto position from hold mode currently broken","user":{"login":"taileron","id":16166920,"node_id":"MDQ6VXNlcjE2MTY2OTIw","avatar_url":"https://avatars.githubusercontent.com/u/16166920?v=4","gravatar_id":"","url":"https://api.github.com/users/taileron","html_url":"https://github.com/taileron","followers_url":"https://api.github.com/users/taileron/followers","following_url":"https://api.github.com/users/taileron/following{/other_user}","gists_url":"https://api.github.com/users/taileron/gists{/gist_id}","starred_url":"https://api.github.com/users/taileron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taileron/subscriptions","organizations_url":"https://api.github.com/users/taileron/orgs","repos_url":"https://api.github.com/users/taileron/repos","events_url":"https://api.github.com/users/taileron/events{/privacy}","received_events_url":"https://api.github.com/users/taileron/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-11-11T13:12:04Z","updated_at":"2022-03-30T11:49:01Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\n- if position mode is set and e.g. gps ist missing it doesn´t automatically take altitude anymore remains at stabilised or whatever was prior set\r\n- in hold (QGC virt joystk) it doesn´t automatically change to pos by touching the joysticks\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nstart the drone in stabilized, activate pos was rejected the previous mode is retained instead of a fallback towards altitude mode.\r\nStart the drone with virt joysticks by QGC it starts into hold and remains in hold when moving the sticks instead of changing to pos. \r\n\r\n**Expected behavior**\r\nAutomatic change to the correct mode should work.\r\n\r\n**Log Files and Screenshots**\r\nUnfortunately, the small target does not offer any logs\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18625/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18610","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18610/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18610/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18610/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18610","id":1049754433,"node_id":"PR_kwDOAFDaZs4uWCht","number":18610,"title":"Enable lockstep scheduler for replay","user":{"login":"danmou","id":7031745,"node_id":"MDQ6VXNlcjcwMzE3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/7031745?v=4","gravatar_id":"","url":"https://api.github.com/users/danmou","html_url":"https://github.com/danmou","followers_url":"https://api.github.com/users/danmou/followers","following_url":"https://api.github.com/users/danmou/following{/other_user}","gists_url":"https://api.github.com/users/danmou/gists{/gist_id}","starred_url":"https://api.github.com/users/danmou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danmou/subscriptions","organizations_url":"https://api.github.com/users/danmou/orgs","repos_url":"https://api.github.com/users/danmou/repos","events_url":"https://api.github.com/users/danmou/events{/privacy}","received_events_url":"https://api.github.com/users/danmou/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-11-10T12:18:51Z","updated_at":"2022-08-02T04:00:31Z","closed_at":"2022-08-02T04:00:31Z","author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18610","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18610","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18610.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18610.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nEKF2 replay doesn't log the majority of messages.\r\n\r\n**Describe your solution**\r\nI enabled the lockstep scheduler for replay. This change was already introduced [here](https://github.com/PX4/PX4-Autopilot/pull/15137/files#diff-5a8a2eccdfd390a06d96f666712b761e62fef9f6a9c53f688cb0bdb576c400b0) but (accidentally, I think) reverted [here](https://github.com/PX4/PX4-Autopilot/pull/15743/files#diff-5a8a2eccdfd390a06d96f666712b761e62fef9f6a9c53f688cb0bdb576c400b0).\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18610/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18604","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18604/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18604/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18604/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18604","id":1048724201,"node_id":"PR_kwDOAFDaZs4uSqRl","number":18604,"title":"Add manual_control module to newly added boards","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-11-09T15:13:38Z","updated_at":"2021-11-09T15:36:44Z","closed_at":"2021-11-09T15:36:43Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18604","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18604","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18604.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18604.patch","merged_at":"2021-11-09T15:36:43Z"},"body":"**Describe your solution**\r\nFollow up to #17404 adding compilation to the two new boards as discussed with @dagar .\r\n\r\n**Test data / coverage**\r\nBuilding them now.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18604/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18603","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18603/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18603/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18603/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18603","id":1048655792,"node_id":"PR_kwDOAFDaZs4uSb6t","number":18603,"title":"Fix fixedwing takeoff","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-09T14:13:25Z","updated_at":"2021-11-13T11:45:27Z","closed_at":"2021-11-09T15:30:29Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18603","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18603","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18603.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18603.patch","merged_at":"2021-11-09T15:30:28Z"},"body":"**Describe problem solved by this pull request**\r\nThere was a bug introduced in the takeoff logic for fixedwing vehicle takeoff\r\n\r\nThis was introduced by a rebase between https://github.com/PX4/PX4-Autopilot/pull/18578 and https://github.com/PX4/PX4-Autopilot/pull/18503\r\n\r\n**Test data / coverage**\r\nTested in SITL\r\n```\r\nmake px4_sitl gazebo_plane\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18603/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18597","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18597/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18597/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18597/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18597","id":1048321868,"node_id":"I_kwDOAFDaZs4-fB9M","number":18597,"title":"Cube Orange: console command \"gps start\" without additional parameters hangs autopilot","user":{"login":"MikeCharikov","id":9740229,"node_id":"MDQ6VXNlcjk3NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/9740229?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeCharikov","html_url":"https://github.com/MikeCharikov","followers_url":"https://api.github.com/users/MikeCharikov/followers","following_url":"https://api.github.com/users/MikeCharikov/following{/other_user}","gists_url":"https://api.github.com/users/MikeCharikov/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeCharikov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeCharikov/subscriptions","organizations_url":"https://api.github.com/users/MikeCharikov/orgs","repos_url":"https://api.github.com/users/MikeCharikov/repos","events_url":"https://api.github.com/users/MikeCharikov/events{/privacy}","received_events_url":"https://api.github.com/users/MikeCharikov/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-11-09T08:29:15Z","updated_at":"2021-12-06T07:44:50Z","closed_at":"2021-12-06T07:44:50Z","author_association":"NONE","active_lock_reason":null,"body":"Versions 1.12.3 (1.11 as well)\r\n\r\nConsole command \"gps start\" without additional parameters hangs Cube Orange. Same command on Cube Black starts GPS without problems. \r\n\r\nIt is not a critical issue, but it may be a result of more serious issue.\r\n\r\n[log_172_2021-11-9-09-14-30.zip](https://github.com/PX4/PX4-Autopilot/files/7503065/log_172_2021-11-9-09-14-30.zip)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18597/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18595","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18595/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18595/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18595/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18595","id":1048093379,"node_id":"I_kwDOAFDaZs4-eKLD","number":18595,"title":"Fixed-wing landing consistently veering off to right","user":{"login":"thomasteisberg","id":1906581,"node_id":"MDQ6VXNlcjE5MDY1ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1906581?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasteisberg","html_url":"https://github.com/thomasteisberg","followers_url":"https://api.github.com/users/thomasteisberg/followers","following_url":"https://api.github.com/users/thomasteisberg/following{/other_user}","gists_url":"https://api.github.com/users/thomasteisberg/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasteisberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasteisberg/subscriptions","organizations_url":"https://api.github.com/users/thomasteisberg/orgs","repos_url":"https://api.github.com/users/thomasteisberg/repos","events_url":"https://api.github.com/users/thomasteisberg/events{/privacy}","received_events_url":"https://api.github.com/users/thomasteisberg/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2021-11-09T01:37:14Z","updated_at":"2022-04-27T09:37:08Z","closed_at":"2022-04-27T09:37:08Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n(Presumably this is user error and not a real bug, but I was asked to create an issue so I'll try to follow the template.)\r\n\r\nThe aircraft tracks the planned path quite well until approximately when it exits the landing loiter for the final approach. At this point, it seems to make a turn to the right and then land on this new path.\r\n\r\nI would like to understand why this occurs and ideally how I can correct it.\r\n\r\n**To Reproduce**\r\nSee logs below. We're flying entirely in mission mode (with the exception of noted aborted landings).\r\n\r\n**Expected behavior**\r\nI expected the plane to track the planned landing direction, heading on a path towards the landing waypoint.\r\n\r\n**Log Files and Screenshots**\r\n\r\nOriginal example: https://logs.px4.io/plot_app?log=eea3a1e0-be68-470d-98ab-3730bf357679\r\n![image](https://user-images.githubusercontent.com/1906581/140832721-156a392e-96fd-4bf6-b152-4d1b7b5644b3.png)\r\nThe divergence can be seen quite clearly in the above PX4 screenshot.\r\nFlight plan: [nov3-flight3.plan.txt](https://github.com/PX4/PX4-Autopilot/files/7500669/nov3-flight3.plan.txt)\r\n\r\nLooking at the yaw angle plot for this one, it looks to me like the plane is lagging behind the set point consistently until suddenly the set point is updated to approximately the current estimated yaw. \r\n![image](https://user-images.githubusercontent.com/1906581/140833088-c69982b5-ab96-45bd-9f82-d939b51459c9.png)\r\n\r\nAnother example from this morning: https://logs.px4.io/plot_app?log=63428e7b-2bd6-490b-9d14-e347effb02a4\r\nThis one I had `FW_LND_HHDIST` set to 0.\r\nThere are two landing attempts on this one. The first showed the same behavior of veering off to the right and was going to miss our landing area entirely, so I switched to position control mode and we put it up in a hold. We uploaded a new plan with the landing pattern shifted significantly to the west and let it land on that one. Probably easier to decipher what's happening on the first log.\r\n\r\n**Drone (please complete the following information):**\r\nX-UAV Talon (the 1.7 m wingspan one -- not the mini or pro)\r\nAutopilot hardware is a Pixhawk 4 mini with the GPS puck and a Lidar Lite v3.\r\nMounting of GPS puck and autopilot are as shown below:\r\n![image](https://user-images.githubusercontent.com/1906581/140833310-7a93007f-05cf-4e58-97a0-d8f6eb77593e.png)\r\n![image](https://user-images.githubusercontent.com/1906581/140833427-8a173f63-d96b-4eac-98cc-b4bfb9695d7c.png)\r\n(You can ignore the extra wires in the second picture - they were for some ground testing.)\r\n\r\nBoth are oriented in their normal direction.\r\n\r\nI haven't done any tuning for this platform. I'm just flying it on the X-UAV Mini Talon profile, which seems to be plenty good enough to get it to fly, however I think it's quite clear from the logs that some of the control loops could be better tuned.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18595/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18590","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18590/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18590/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18590/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18590","id":1047643988,"node_id":"PR_kwDOAFDaZs4uPJUs","number":18590,"title":"sensors/vehicle_imu: use WelfordMean for online mean and variance","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-08T16:19:07Z","updated_at":"2021-11-09T14:19:36Z","closed_at":"2021-11-09T14:19:35Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18590","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18590","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18590.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18590.patch","merged_at":"2021-11-09T14:19:35Z"},"body":"Possible fix for https://github.com/PX4/PX4-Autopilot/issues/18574.\r\n\r\n~~TODO: review cost~~ no measurable change in cpu usage (F4, F7, etc)/","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18590/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18586","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18586/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18586/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18586/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18586","id":1047171215,"node_id":"PR_kwDOAFDaZs4uNmaY","number":18586,"title":"state_machine_helper: add place holder in array  nav_state_names for removed LANDGPSFAIL mode","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-08T08:46:29Z","updated_at":"2021-11-08T12:42:56Z","closed_at":"2021-11-08T12:42:55Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18586","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18586","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18586.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18586.patch","merged_at":"2021-11-08T12:42:55Z"},"body":"This was missed in https://github.com/PX4/PX4-Autopilot/pull/17547.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18586/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18581","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18581/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18581/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18581/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18581","id":1046807749,"node_id":"PR_kwDOAFDaZs4uMdVN","number":18581,"title":"Enable offboard actuator setpoints","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442618266,"node_id":"MDU6TGFiZWwxNDQyNjE4MjY2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Offboard","name":"Offboard","color":"d8954e","default":false,"description":"Offboard mode control"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-07T17:44:24Z","updated_at":"2021-11-07T21:59:01Z","closed_at":"2021-11-07T20:38:42Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18581","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18581","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18581.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18581.patch","merged_at":"2021-11-07T20:38:42Z"},"body":"**Describe problem solved by this pull request**\r\nSending actuator setpoints directly from a onboard computer provides a useful way to execute open loop manuevers which is useful for system identification.\r\n\r\nWhile previous to https://github.com/PX4/PX4-Autopilot/pull/16739  it was possible to send actuator commands using the `https://mavlink.io/en/messages/common.html#SET_ACTUATOR_CONTROL_TARGET` mavlink message, this is no longer working since it is not understood as a valid offboard mode.\r\n\r\n**Describe your solution**\r\nThis commit adds a case for adding offboard actuator commands in the offboard mode\r\n\r\n**Test data / coverage**\r\nTested with Gazebo SITL no lockstep target\r\n```\r\nmake px4_sitl_nolockstep gazebo\r\n```\r\n\r\nAs can be observed in the log, actuator setpoint to elevator (output 7) is increased as a ramp function\r\nFlight log: https://logs.px4.io/plot_app?log=15a16288-d153-467e-8ab2-9303bb855d35\r\n\r\n\r\n**Additional context**\r\n- This is fixes a regression from https://github.com/PX4/PX4-Autopilot/pull/16739 ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18581/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18581/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18578","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18578/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18578/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18578/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18578","id":1046068838,"node_id":"PR_kwDOAFDaZs4uKPUS","number":18578,"title":"Handle setpoint types properly in fw position controller","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-05T17:15:49Z","updated_at":"2021-11-08T00:21:01Z","closed_at":"2021-11-08T00:21:00Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18578","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18578","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18578.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18578.patch","merged_at":"2021-11-08T00:21:00Z"},"body":"**Describe problem solved by this pull request**\r\nFixes https://github.com/PX4/PX4-Autopilot/issues/18576\r\n\r\nWhile the FW position controller mode was changing, the throttle was not changing accordingly\r\n\r\nThis seems to be a regression introduced by https://github.com/PX4/PX4-Autopilot/pull/18340\r\n\r\n**Test data / coverage**\r\n- Before PR: https://logs.px4.io/plot_app?log=4f360063-83eb-43bd-81f1-0749f89a9e4e\r\n- After PR: https://logs.px4.io/plot_app?log=15f471bd-2a86-4855-9206-ce111cd0b393\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18578/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18576","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18576/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18576/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18576/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18576","id":1046020251,"node_id":"I_kwDOAFDaZs4-WQCb","number":18576,"title":"Corner case with takeoff waypoint acceptance radius","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-11-05T16:17:23Z","updated_at":"2021-11-08T00:21:00Z","closed_at":"2021-11-08T00:21:00Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nThere seems to be a corner case where if the vehicle is unable to get close enough to the takeoff waypoint (due to high winds), the vehicle will never use TECS pitch setpoints resulting in a crash.\r\n\r\n- TECS pitch setpoints are not used in takeoff flight mode\r\n\r\nhttps://github.com/PX4/PX4-Autopilot/blob/f492fa9d3ab5a1e7b105594a1f637bd6a22bfad4/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L873-L882\r\n\r\n- If the vehicle is not close enough to the takeoff waypoint, it will continue to stay in takeoff mode therefore not use the pitch setpoint from TECS\r\n\r\nhttps://github.com/PX4/PX4-Autopilot/blob/f492fa9d3ab5a1e7b105594a1f637bd6a22bfad4/src/modules/navigator/mission_block.cpp#L184-L190\r\n\r\nHowever, the throttle is set from TECS: https://github.com/PX4/PX4-Autopilot/blob/f492fa9d3ab5a1e7b105594a1f637bd6a22bfad4/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L864\r\n\r\n- This results in the airspeed getting invalidated and results in a crash\r\n```\r\n WARN  [airspeed_selector] Airspeed sensor failure detected. Return to launch (RTL) is advised.\r\n```\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run SITL Plane in a windy environment (set wind speed to 14m/s)\r\n```\r\nmake px4_sitl gazebo_plane__windy\r\n```\r\n2. Uploaded mission with a takeoff waypoint up wind\r\n\r\n\r\n**Log Files and Screenshots**\r\nTest condition: windspeed 14m/s, takeoff waypoint is up wind\r\n- Flight log: https://logs.px4.io/plot_app?log=4f360063-83eb-43bd-81f1-0749f89a9e4e\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18576/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18574","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18574/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18574/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18574/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18574","id":1045983198,"node_id":"I_kwDOAFDaZs4-WG_e","number":18574,"title":"False positive Imbalanced propeller detected, landing advised for fixedwings","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-11-05T15:37:57Z","updated_at":"2021-11-09T15:01:43Z","closed_at":"2021-11-09T15:01:43Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nThe imbalanced propeller check is always triggered when doing a fixedwing runway takeoff in SITL Gazebo\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start SITL with a plane model\r\n```\r\nmake px4_sitl gazebo_plane\r\n```\r\n2. Start mission with a takeoff waypoint\r\n\r\n**Log Files and Screenshots**\r\n```\r\nINFO  [commander] Failsafe mode deactivated\r\nINFO  [tone_alarm] notify positive\r\nWARN  [fw_pos_control_l1] Start loiter with fixed bank angle.\r\nINFO  [commander] Armed by external command\r\nINFO  [fw_pos_control_l1] Takeoff on runway\r\nINFO  [commander] Takeoff detected\r\nINFO  [runway_takeoff] #Takeoff airspeed reached\r\nWARN  [commander] Imbalanced propeller detected, landing advised\r\nINFO  [runway_takeoff] #Climbout\r\n```\r\n\r\n**Additional context**\r\n- The warning has been introduced from https://github.com/PX4/PX4-Autopilot/pull/18553\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18574/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18573","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18573/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18573/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18573/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18573","id":1045979443,"node_id":"I_kwDOAFDaZs4-WGEz","number":18573,"title":"False positive \"Start loiter with fixed bank angle\"","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"assignees":[{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2021-11-05T15:33:51Z","updated_at":"2021-11-07T22:31:21Z","closed_at":"2021-11-07T22:31:21Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nWhenever doing a fixedwing takeoff, a warning message \"Start loiter with fixed bank angle\" is wrongly being triggered\r\n\r\n@sfuhrer FYI\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start SITL with a plane model\r\n`make px4_sitl gazebo_plane`\r\n2. Start mission with a takeoff waypoint\r\n\r\n\r\n**Log Files and Screenshots**\r\n![image](https://user-images.githubusercontent.com/5248102/140536497-958697c2-b445-4bd7-9bcf-f83e0354e896.png)\r\n\r\n\r\n**Additional context**\r\n- This seems to be appearing after https://github.com/PX4/PX4-Autopilot/pull/17547 has been merged\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18573/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18570","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18570/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18570/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18570/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18570","id":1045018996,"node_id":"PR_kwDOAFDaZs4uGzgQ","number":18570,"title":"boards: modalai_fc-v2 fix bootloader board type","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-04T17:31:01Z","updated_at":"2021-11-04T19:43:30Z","closed_at":"2021-11-04T19:43:29Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18570","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18570","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18570.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18570.patch","merged_at":"2021-11-04T19:43:29Z"},"body":"https://github.com/PX4/PX4-Bootloader/blob/dce800bc455703e7132680eff45d5401eec945c3/board_types.txt#L34\r\n\r\n@modaltb ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18570/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18564","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18564/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18564/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18564/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18564","id":1043741254,"node_id":"PR_kwDOAFDaZs4uC0kB","number":18564,"title":"sensors/vehicle_angular_velocity: add new parameter for ESC RPM notchfilter BW","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":306636108,"node_id":"MDU6TGFiZWwzMDY2MzYxMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Documentation%20%F0%9F%93%91","name":"Documentation 📑","color":"fbca04","default":false,"description":"Anything improving the documentation of the code / ecosystem"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-03T15:25:13Z","updated_at":"2021-11-11T16:17:16Z","closed_at":"2021-11-11T16:17:15Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18564","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18564","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18564.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18564.patch","merged_at":"2021-11-11T16:17:15Z"},"body":" - new parameter `IMU_GYRO_DNF_BW` for setting the bandwidth of the ESC RPM notch filters\r\n - existing `IMU_GYRO_DYN_NF` parameter was renamed `IMU_GYRO_DNF_EN` for consistency\r\n - new perf counters for FFT and ESC RPM dynamic notch filtering when the filters are reset or fully disabled\r\n    - this is mainly for monitoring things at this stage and can probably be removed eventually\r\n\r\nHere's current master on a quad with and without ESC RPM notch filtering enabled.\r\n![Screenshot from 2021-11-03 14-47-52](https://user-images.githubusercontent.com/84712/140173777-be8ddf34-cacf-4ff7-a190-5a5d629ab2f7.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18564/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18562","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18562/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18562/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18562/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18562","id":1043500010,"node_id":"I_kwDOAFDaZs4-Movq","number":18562,"title":"RTF problem in multi r1_rover vehicle launch","user":{"login":"yfaws","id":72627916,"node_id":"MDQ6VXNlcjcyNjI3OTE2","avatar_url":"https://avatars.githubusercontent.com/u/72627916?v=4","gravatar_id":"","url":"https://api.github.com/users/yfaws","html_url":"https://github.com/yfaws","followers_url":"https://api.github.com/users/yfaws/followers","following_url":"https://api.github.com/users/yfaws/following{/other_user}","gists_url":"https://api.github.com/users/yfaws/gists{/gist_id}","starred_url":"https://api.github.com/users/yfaws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yfaws/subscriptions","organizations_url":"https://api.github.com/users/yfaws/orgs","repos_url":"https://api.github.com/users/yfaws/repos","events_url":"https://api.github.com/users/yfaws/events{/privacy}","received_events_url":"https://api.github.com/users/yfaws/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":647657056,"node_id":"MDU6TGFiZWw2NDc2NTcwNTY=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Rover%20%F0%9F%9A%99","name":"Rover 🚙","color":"e99695","default":false,"description":"Rovers and other UGV"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-11-03T12:20:09Z","updated_at":"2022-01-24T00:34:20Z","closed_at":"2022-01-24T00:34:12Z","author_association":"NONE","active_lock_reason":null,"body":"Hi! I am using px4-autopilot master branch with commit 8f6fd5f37b5f3f1bfb9a04728be09ee05cddf230 on ubuntu18.04, ros-melodic, gazebo-9 setup.\r\n \r\nWhen I try multi-vehicle sitl launch with more than one aion robotics r1_rover, RTF(real time factor) in gazebo goes down into 0.1 even less than. \r\nBut suprisingly, when I launch only one r1_rover, RTF in Gazebo is 1.0. I could not understand actual problem causing that.\r\nIs there any solution for this problem ?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18562/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18547","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18547/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18547/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18547/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18547","id":1041430575,"node_id":"PR_kwDOAFDaZs4t8KRF","number":18547,"title":"Fix Orbit altitude not being followed","user":{"login":"ThomasDebrunner","id":8969570,"node_id":"MDQ6VXNlcjg5Njk1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/8969570?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasDebrunner","html_url":"https://github.com/ThomasDebrunner","followers_url":"https://api.github.com/users/ThomasDebrunner/followers","following_url":"https://api.github.com/users/ThomasDebrunner/following{/other_user}","gists_url":"https://api.github.com/users/ThomasDebrunner/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasDebrunner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasDebrunner/subscriptions","organizations_url":"https://api.github.com/users/ThomasDebrunner/orgs","repos_url":"https://api.github.com/users/ThomasDebrunner/repos","events_url":"https://api.github.com/users/ThomasDebrunner/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasDebrunner/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-11-01T17:48:30Z","updated_at":"2021-11-03T16:37:53Z","closed_at":"2021-11-03T16:37:52Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18547","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18547","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18547.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18547.patch","merged_at":"2021-11-03T16:37:52Z"},"body":"**Describe problem solved by this pull request**\r\n\r\nWhen commanding an Orbit at a certain altitude, the vehicle does not go to the commanded altitude but stays at the current altitude.\r\n\r\n**Describe your solution**\r\nThe problem stemmed from the fact that the `FlightTaskOrbit` inherited from `FlightTaskManualAltitudeSmoothVel`. The parent class took ownership over the z-velocity, but not position. So in Orbit approach, the position setpoints set by `FlightTaskOrbit` were ignored. This PR changes the inheritance that `FlightTaskOrbit` directly inherits from `FlightTaskManualAltitude`. All smoothing is done directly in `FlightTaskOrbit`.\r\n\r\n- For Orbit approach, the `PositionSmoothing` library smoothes the approach based on position target\r\n- While in Orbit, the `VelocitySmoothing` library smoothes the manual altitude changes from sticks\r\n\r\nThis has the side-effect that now the full Orbit approach trajectory gets smoothed.\r\n\r\n\r\n**Test data / coverage**\r\nTested in SITL, and X500 on Skynode\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18547/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18537","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18537/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18537/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18537/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18537","id":1039039809,"node_id":"I_kwDOAFDaZs497n1B","number":18537,"title":"Crazyflie 2.0 IMU driver reads absurd values","user":{"login":"KaranJain21","id":19728707,"node_id":"MDQ6VXNlcjE5NzI4NzA3","avatar_url":"https://avatars.githubusercontent.com/u/19728707?v=4","gravatar_id":"","url":"https://api.github.com/users/KaranJain21","html_url":"https://github.com/KaranJain21","followers_url":"https://api.github.com/users/KaranJain21/followers","following_url":"https://api.github.com/users/KaranJain21/following{/other_user}","gists_url":"https://api.github.com/users/KaranJain21/gists{/gist_id}","starred_url":"https://api.github.com/users/KaranJain21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KaranJain21/subscriptions","organizations_url":"https://api.github.com/users/KaranJain21/orgs","repos_url":"https://api.github.com/users/KaranJain21/repos","events_url":"https://api.github.com/users/KaranJain21/events{/privacy}","received_events_url":"https://api.github.com/users/KaranJain21/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1847689142,"node_id":"MDU6TGFiZWwxODQ3Njg5MTQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/manufacturer:%20crazyflie","name":"manufacturer: crazyflie","color":"7ad35d","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-10-28T23:49:47Z","updated_at":"2021-11-01T20:58:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nI am using a crazyflie 2.0 with a fork of the firmware with the last PX4 commit coming from [5eddf32cd38f25e385a1a171319e4e08a3a4a4dc](https://github.com/PX4/PX4-Autopilot/commit/5eddf32cd38f25e385a1a171319e4e08a3a4a4dc).\r\nOn powering up the crazyflie, the IMU starts off by giving sensible readings (<0, 0, g> for the accelerometer, using a z-up coordinate frame), but after sometime, all the IMU readings become non-sensical. After some more time, it seems as though some of the IMU readings have switched places (e.g. gyro-y reading showing (a scaled version of) accelerometer-z). This jumbling makes me believe that the FIFO buffer is not being cleared properly and has some spurious bits left over (which pile up eventually causing some weird jumbling).\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Flash the code to a crazyflie 2.0 and power it on\r\n2. Read the IMU values (I have a thread subscribing to the published IMU uORB topics which I then can then print using the `print_status` of the thread). I have confirmed the spurious readings indeed happen at the lowest level by checking the accelerometer values at the driver level ([MPU9250_I2C.cpp](https://github.com/PX4/PX4-Autopilot/blob/master/src/drivers/imu/invensense/mpu9250/MPU9250_I2C.cpp)).\r\n3. Wait for some time (unfortunately, this time is not repeatable and has ranged between a few seconds to almost 5 minutes at times)\r\n4. The accelerometer and rate-gyro readings should now be non\r\n-sensical (sensible values for a static IMU -- <0,0,g> and <0,0,0>).\r\n\r\n**Expected behavior**\r\nThe IMU should consistently give sensible readings\r\n\r\n**Log Files and Screenshots**\r\nReadings a few seconds after booting up (sensible)\r\n![SensibleReadingsAfterBoot](https://user-images.githubusercontent.com/19728707/139351042-ccbf1a43-1645-4ccd-b08f-e9d46f96c659.png)\r\n\r\nReadings about 2 minutes after boot up (absurd)\r\n![SensibleReadings2MinsAfterBoot](https://user-images.githubusercontent.com/19728707/139351169-3ac28535-1a5f-437f-aad6-72d6a6c10cdc.png)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18537/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18523","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18523/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18523/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18523/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18523","id":1037627431,"node_id":"PR_kwDOAFDaZs4twIrX","number":18523,"title":"cmake: px4_add_module always add module to PX4_MODULE_PATHS so that parameters aren't pruned","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-27T16:33:32Z","updated_at":"2021-10-28T03:00:41Z","closed_at":"2021-10-28T03:00:40Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18523","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18523","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18523.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18523.patch","merged_at":"2021-10-28T03:00:40Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18523/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18523/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18522","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18522/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18522/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18522/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18522","id":1037571678,"node_id":"PR_kwDOAFDaZs4tv9Cf","number":18522,"title":"fixed ulanding_radar autostart command","user":{"login":"harrisonmg","id":3968357,"node_id":"MDQ6VXNlcjM5NjgzNTc=","avatar_url":"https://avatars.githubusercontent.com/u/3968357?v=4","gravatar_id":"","url":"https://api.github.com/users/harrisonmg","html_url":"https://github.com/harrisonmg","followers_url":"https://api.github.com/users/harrisonmg/followers","following_url":"https://api.github.com/users/harrisonmg/following{/other_user}","gists_url":"https://api.github.com/users/harrisonmg/gists{/gist_id}","starred_url":"https://api.github.com/users/harrisonmg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harrisonmg/subscriptions","organizations_url":"https://api.github.com/users/harrisonmg/orgs","repos_url":"https://api.github.com/users/harrisonmg/repos","events_url":"https://api.github.com/users/harrisonmg/events{/privacy}","received_events_url":"https://api.github.com/users/harrisonmg/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-27T15:37:43Z","updated_at":"2021-10-28T04:01:37Z","closed_at":"2021-10-28T04:01:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18522","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18522","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18522.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18522.patch","merged_at":"2021-10-28T04:01:37Z"},"body":"The previous command was incorrect; calling without `-d` returns an error.\r\n\r\n**Test data / coverage**\r\nThis was tested on a Cube Orange with an Ainstein radar connected.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18522/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18521","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18521/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18521/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18521/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18521","id":1037501111,"node_id":"PR_kwDOAFDaZs4tvuDM","number":18521,"title":"Fix Navigation failure during calibration","user":{"login":"ThomasDebrunner","id":8969570,"node_id":"MDQ6VXNlcjg5Njk1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/8969570?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasDebrunner","html_url":"https://github.com/ThomasDebrunner","followers_url":"https://api.github.com/users/ThomasDebrunner/followers","following_url":"https://api.github.com/users/ThomasDebrunner/following{/other_user}","gists_url":"https://api.github.com/users/ThomasDebrunner/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasDebrunner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasDebrunner/subscriptions","organizations_url":"https://api.github.com/users/ThomasDebrunner/orgs","repos_url":"https://api.github.com/users/ThomasDebrunner/repos","events_url":"https://api.github.com/users/ThomasDebrunner/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasDebrunner/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-27T14:34:35Z","updated_at":"2021-10-28T16:06:32Z","closed_at":"2021-10-28T16:06:31Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18521","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18521","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18521.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18521.patch","merged_at":"2021-10-28T16:06:31Z"},"body":"**Describe problem solved by this pull request**\r\nDuring calibration, the user could get a \"Navigation failure! Land and recalibrate the sensors\". This comes from the EKF check in commander. These checks are only supposed to run when in the air (or at least armed). \r\n\r\n**Describe your solution**\r\nSo far, the check to enable this only looked if arming state was `ARMING_STATE_STANDBY`. But during calibration, the arming state is `ARMING_STATE_INIT`. \r\n\r\n**Test data / coverage**\r\nBench tested on PIXHAWK 4 and skynode\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18521/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18518","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18518/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18518/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18518/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18518","id":1037166804,"node_id":"I_kwDOAFDaZs490ejU","number":18518,"title":"Throttle Drops 0% When Changing Modes","user":{"login":"dystopic1","id":93252101,"node_id":"U_kgDOBY7qBQ","avatar_url":"https://avatars.githubusercontent.com/u/93252101?v=4","gravatar_id":"","url":"https://api.github.com/users/dystopic1","html_url":"https://github.com/dystopic1","followers_url":"https://api.github.com/users/dystopic1/followers","following_url":"https://api.github.com/users/dystopic1/following{/other_user}","gists_url":"https://api.github.com/users/dystopic1/gists{/gist_id}","starred_url":"https://api.github.com/users/dystopic1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dystopic1/subscriptions","organizations_url":"https://api.github.com/users/dystopic1/orgs","repos_url":"https://api.github.com/users/dystopic1/repos","events_url":"https://api.github.com/users/dystopic1/events{/privacy}","received_events_url":"https://api.github.com/users/dystopic1/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-10-27T09:08:56Z","updated_at":"2021-10-29T08:51:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm working on an turbine engine project with PX4. While I was starting the engine with stabilized mode engine is working good but when I wanted to change mode to mission throttle value dropped down to 0 for 0.3sec and after that it increased to the value which I specified in RWTO parameters. In this transition period turbine engine is stopping. In electrical or IC engines this is not a problem but turbine engines are more sensitive. \r\n\r\nFirst I increased the ramp up time from RWTO parameters but it didn't work. After that I decreased it and it worked for a while. The transition was perfect. A day later I tried again with the same settings and didn't work again. How can I fix this problem. Is there anybody to help?\r\n\r\nIn the same time while plane was on the ground the flight controller suddenly doing disarmed and armed for less then a one second. Maybe these problem is also connected to the first one. \r\n\r\n![ssss](https://user-images.githubusercontent.com/93252101/139035770-d8faa500-9ccb-4bad-a048-0ef44f3ee988.png)\r\n ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18518/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18516","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18516/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18516/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18516/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18516","id":1036761352,"node_id":"I_kwDOAFDaZs49y7kI","number":18516,"title":"ulanding_radar module start bug","user":{"login":"harrisonmg","id":3968357,"node_id":"MDQ6VXNlcjM5NjgzNTc=","avatar_url":"https://avatars.githubusercontent.com/u/3968357?v=4","gravatar_id":"","url":"https://api.github.com/users/harrisonmg","html_url":"https://github.com/harrisonmg","followers_url":"https://api.github.com/users/harrisonmg/followers","following_url":"https://api.github.com/users/harrisonmg/following{/other_user}","gists_url":"https://api.github.com/users/harrisonmg/gists{/gist_id}","starred_url":"https://api.github.com/users/harrisonmg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harrisonmg/subscriptions","organizations_url":"https://api.github.com/users/harrisonmg/orgs","repos_url":"https://api.github.com/users/harrisonmg/repos","events_url":"https://api.github.com/users/harrisonmg/events{/privacy}","received_events_url":"https://api.github.com/users/harrisonmg/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-10-26T21:33:03Z","updated_at":"2021-10-28T04:01:55Z","closed_at":"2021-10-28T04:01:55Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I have an Ainstein (Aerotenna) radar, and noticed the driver was not starting correctly on init.\r\n\r\nThe issue was fixed by changing `ulanding_radar/module.yaml` from\r\n```\r\nmodule_name: uLanding Radar\r\nserial_config:\r\n    - command: ulanding_radar start ${SERIAL_DEV}\r\n      port_config_param:\r\n        name: SENS_ULAND_CFG\r\n        group: Sensors\r\n```\r\nto\r\n```\r\nmodule_name: uLanding Radar\r\nserial_config:\r\n    - command: ulanding_radar start -d ${SERIAL_DEV}\r\n      port_config_param:\r\n        name: SENS_ULAND_CFG\r\n        group: Sensors\r\n```\r\n\r\nI spent a few minutes trying to track down when this issue emerged via blames, but I couldn't track it down.\r\n\r\nIf someone tells me I'm not crazy I'll make a PR.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18516/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18505","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18505/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18505/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18505/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18505","id":1035110695,"node_id":"I_kwDOAFDaZs49sokn","number":18505,"title":"No GPS lock with Neo-M9N","user":{"login":"n-snyder","id":76884910,"node_id":"MDQ6VXNlcjc2ODg0OTEw","avatar_url":"https://avatars.githubusercontent.com/u/76884910?v=4","gravatar_id":"","url":"https://api.github.com/users/n-snyder","html_url":"https://github.com/n-snyder","followers_url":"https://api.github.com/users/n-snyder/followers","following_url":"https://api.github.com/users/n-snyder/following{/other_user}","gists_url":"https://api.github.com/users/n-snyder/gists{/gist_id}","starred_url":"https://api.github.com/users/n-snyder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n-snyder/subscriptions","organizations_url":"https://api.github.com/users/n-snyder/orgs","repos_url":"https://api.github.com/users/n-snyder/repos","events_url":"https://api.github.com/users/n-snyder/events{/privacy}","received_events_url":"https://api.github.com/users/n-snyder/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2021-10-25T13:02:41Z","updated_at":"2022-01-16T14:43:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am using the Control Zero H7 loaded with the PX4 v1.12.3 release with the mRo Neo-M9N GPS. The PX4 GPS_1_CONFIG is configured to use GPS 1 (201). After booting and waiting 5-10minutes, the GPS just blinks blue lights; no GPS lock in QGC. After setting and rebooting several times, the problem persisted.\r\n\r\nI connected to the device using Ublox's U-Center, and it showed 29 satellites. I also loaded ArduCopter 4.1 onto the Control Zero, and the M9N acquired a GPS fix.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18505/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18500","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18500/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18500/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18500/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18500","id":1033720336,"node_id":"PR_kwDOAFDaZs4tjos6","number":18500,"title":"RTL: fix destination for VTOL and clean up a bit","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-10-22T15:45:43Z","updated_at":"2021-11-05T14:58:23Z","closed_at":"2021-11-05T14:58:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18500","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18500","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18500.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18500.patch","merged_at":"2021-11-05T14:58:21Z"},"body":"Fixes https://github.com/PX4/PX4-Autopilot/issues/18271, potentially replaces https://github.com/PX4/PX4-Autopilot/pull/18282.\r\n\r\n**Describe problem solved by this pull request**\r\nVTOL going to mission landing, even if in hover. \r\n\r\n**Describe your solution**\r\nThe main commit is https://github.com/PX4/PX4-Autopilot/commit/ed2f8b2af9254c9855ee8766d0f400cd8c09968a: it gives the _rtl instance the sole decision power on the nature of the RTL: if the destination type is mission landing, then it will proceed in mission mode after the RTL was activated and the climb is over, otherwise it will stay in the _rtl.\r\n\r\nMost of the other commits are mere clean ups/re-naming.\r\n\r\n**Test data / coverage**\r\nSITL tested with standard VTOL and RTL type 1 and 3, in both hover and fixed-wing flight phases.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18500/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18485","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18485/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18485/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18485/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18485","id":1032607648,"node_id":"PR_kwDOAFDaZs4tgB-9","number":18485,"title":"mixer_module: reject mixer load and reset when dynamic mixing is enabled","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-21T15:01:35Z","updated_at":"2021-10-21T18:27:34Z","closed_at":"2021-10-21T18:27:34Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18485","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18485","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18485.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18485.patch","merged_at":"2021-10-21T18:27:34Z"},"body":"Otherwise the commands hang indefinitely.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18485/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18481","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18481/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18481/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18481/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18481","id":1032399197,"node_id":"PR_kwDOAFDaZs4tfWHX","number":18481,"title":"VelocitySmoothing: fix issue when delta vel is the same on all axes","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-10-21T11:51:38Z","updated_at":"2021-10-22T08:54:37Z","closed_at":"2021-10-22T08:54:37Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18481","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18481","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18481.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18481.patch","merged_at":"2021-10-22T08:54:37Z"},"body":"When the change in velocity is exactly the same on several axes, the `T1` of the recomputed trajectories after time sync was set to 0 because it was skipping both `if` and `else if` (because `T13_plus == T13_minus == T123`).","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18481/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18475","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18475/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18475/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18475/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18475","id":1031219952,"node_id":"PR_kwDOAFDaZs4tbhNf","number":18475,"title":"Navigator: some clean up and fixes","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-10-20T10:03:43Z","updated_at":"2021-10-27T08:01:14Z","closed_at":"2021-10-27T08:01:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18475","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18475","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18475.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18475.patch","merged_at":"2021-10-27T08:01:14Z"},"body":"**Describe problem solved by this pull request**\r\n1) stuck mission when next waypoint within loiter radius of previous\r\n2) FW Position controller: it should set the setpoint type to Position if far away\r\n3) FW loiter: tangential loiter exit broken\r\n4) MC takeoff: wrong altitude setpoint\r\n5) FW: fly away if an altitude change is commanded in Position mode (switched to loiter mode but without loiter item)\r\n\r\n**Describe your solution**\r\n1) can only enforce exit heading if next waypoint is not within loiter radius of current waypoint\r\n2) always set it to Position if far away\r\n3) set typ to position in Navigator, it will get set to loiter in the fw position controller once close and replace current setpoint lat/lon with tangent coordinate\r\n4) clean up set_loiter_item()\r\n5) Set loiter item, such that it loiters at current position\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18475/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18475/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18458","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18458/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18458/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18458/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18458","id":1030068384,"node_id":"PR_kwDOAFDaZs4tX37B","number":18458,"title":"ekf: force fallback to baro if GPS is stopped while in GPS height mode","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-10-19T09:24:17Z","updated_at":"2021-11-01T13:07:18Z","closed_at":"2021-10-26T08:05:29Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18458","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18458","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18458.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18458.patch","merged_at":"2021-10-26T08:05:29Z"},"body":"Otherwise, no height aiding source is used.\r\n\r\nfixes https://px4.slack.com/archives/C0V533X4N/p1634539666104800\r\nlog with issue: https://review.px4.io/plot_app?log=56a6fb8b-b804-4a50-974b-3f88d04c2cbe","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18458/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18443","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18443/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18443/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18443/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18443","id":1026439196,"node_id":"PR_kwDOAFDaZs4tNABP","number":18443,"title":"ekf2: EKF control don't allow invalid flow gyro to propagate","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-14T14:01:53Z","updated_at":"2021-10-14T20:31:24Z","closed_at":"2021-10-14T20:31:23Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18443","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18443","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18443.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18443.patch","merged_at":"2021-10-14T20:31:23Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18443/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18429","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18429/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18429/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18429/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18429","id":1025028153,"node_id":"I_kwDOAFDaZs49GLA5","number":18429,"title":"CUAVv5: can‘t use aux1 when use latest firmware v1.12.X","user":{"login":"gitfishup","id":69180601,"node_id":"MDQ6VXNlcjY5MTgwNjAx","avatar_url":"https://avatars.githubusercontent.com/u/69180601?v=4","gravatar_id":"","url":"https://api.github.com/users/gitfishup","html_url":"https://github.com/gitfishup","followers_url":"https://api.github.com/users/gitfishup/followers","following_url":"https://api.github.com/users/gitfishup/following{/other_user}","gists_url":"https://api.github.com/users/gitfishup/gists{/gist_id}","starred_url":"https://api.github.com/users/gitfishup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gitfishup/subscriptions","organizations_url":"https://api.github.com/users/gitfishup/orgs","repos_url":"https://api.github.com/users/gitfishup/repos","events_url":"https://api.github.com/users/gitfishup/events{/privacy}","received_events_url":"https://api.github.com/users/gitfishup/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-10-13T09:47:24Z","updated_at":"2021-10-21T06:30:54Z","closed_at":"2021-10-21T06:30:54Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nfirmware: v1.12.1, v1.12.2, v1.12.3\r\nAirframe: Generic Octocopter + geometry\r\nI want to use radio channel 6 to control aux1, but it does't work after i setup radio. However, if i  use v1.11.3, it works.\r\n\r\n![lALPDgfLS40R7nTNAbDNA9k_985_432](https://user-images.githubusercontent.com/69180601/137107945-b166a5b9-b6d0-4725-82b5-943416e6ab0b.png)\r\n\r\n![1634117315985_1946D65B-242F-4eeb-80B9-6DDBEC4A04B9](https://user-images.githubusercontent.com/69180601/137107969-521f1336-0c77-443c-9a67-3bd0255e7986.png)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18429/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18425","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18425/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18425/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18425/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18425","id":1024658347,"node_id":"I_kwDOAFDaZs49Ewur","number":18425,"title":"MAV_CMD_NAV_VTOL_LAND should support param7 or fail noisily","user":{"login":"hamishwillee","id":5368500,"node_id":"MDQ6VXNlcjUzNjg1MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5368500?v=4","gravatar_id":"","url":"https://api.github.com/users/hamishwillee","html_url":"https://github.com/hamishwillee","followers_url":"https://api.github.com/users/hamishwillee/followers","following_url":"https://api.github.com/users/hamishwillee/following{/other_user}","gists_url":"https://api.github.com/users/hamishwillee/gists{/gist_id}","starred_url":"https://api.github.com/users/hamishwillee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hamishwillee/subscriptions","organizations_url":"https://api.github.com/users/hamishwillee/orgs","repos_url":"https://api.github.com/users/hamishwillee/repos","events_url":"https://api.github.com/users/hamishwillee/events{/privacy}","received_events_url":"https://api.github.com/users/hamishwillee/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-13T01:12:05Z","updated_at":"2021-10-22T12:55:44Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"[MAV_CMD_NAV_VTOL_LAND](https://mavlink.io/en/messages/common.html#MAV_CMD_NAV_VTOL_LAND) defines a few parameters, but we only process the ones in yellow.\r\n![image](https://user-images.githubusercontent.com/5368500/137050004-56d3b3aa-5336-47a9-b428-8030883f9aa6.png)\r\n\r\nWe recently had a slack question as to why a mission was landing the VTOL underground. It turns out that the ground altitude (`param7`) is ignored - distance sensor is used if available otherwise the home point altitude or local position estimate origin. See [relevant code here](https://github.com/PX4/PX4-Autopilot/blob/6d78054f5001548ea2f1d48bb59966e2352bc9fe/src/modules/flight_mode_manager/tasks/FlightTask/FlightTask.cpp#L195).\r\n\r\nIdeally PX4 should be updated to use the ground altitude if present in the message rather than home altitude. \r\n\r\nIf this cannot be done then the mavlink handler should be updated to reject any unsupported parameters. This will prevent an invalid mission trying to execute a dangerous landing. The ack value set in this case would be `MAV_MISSION_INVALID_PARAM7`. Note that the invalid value is not explicitly specified by MAVLink, but I'd expect it to be NaN.\r\n\r\nSimilarly, we should do the same if param 3 (approach altitude) is not set, or if param1 (land options) is non-zero.\r\n\r\nFYI @sfuhrer @MaEtUgR As per our recent slack discussion with VTOLDavid - we either need to use the info or refuse it.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18425/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18416","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18416/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18416/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18416/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18416","id":1023671933,"node_id":"I_kwDOAFDaZs49A_59","number":18416,"title":"Catapult launch: Motor delay not working ","user":{"login":"jstrebel","id":2244311,"node_id":"MDQ6VXNlcjIyNDQzMTE=","avatar_url":"https://avatars.githubusercontent.com/u/2244311?v=4","gravatar_id":"","url":"https://api.github.com/users/jstrebel","html_url":"https://github.com/jstrebel","followers_url":"https://api.github.com/users/jstrebel/followers","following_url":"https://api.github.com/users/jstrebel/following{/other_user}","gists_url":"https://api.github.com/users/jstrebel/gists{/gist_id}","starred_url":"https://api.github.com/users/jstrebel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jstrebel/subscriptions","organizations_url":"https://api.github.com/users/jstrebel/orgs","repos_url":"https://api.github.com/users/jstrebel/repos","events_url":"https://api.github.com/users/jstrebel/events{/privacy}","received_events_url":"https://api.github.com/users/jstrebel/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false},"assignees":[{"login":"tstastny","id":8026163,"node_id":"MDQ6VXNlcjgwMjYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8026163?v=4","gravatar_id":"","url":"https://api.github.com/users/tstastny","html_url":"https://github.com/tstastny","followers_url":"https://api.github.com/users/tstastny/followers","following_url":"https://api.github.com/users/tstastny/following{/other_user}","gists_url":"https://api.github.com/users/tstastny/gists{/gist_id}","starred_url":"https://api.github.com/users/tstastny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstastny/subscriptions","organizations_url":"https://api.github.com/users/tstastny/orgs","repos_url":"https://api.github.com/users/tstastny/repos","events_url":"https://api.github.com/users/tstastny/events{/privacy}","received_events_url":"https://api.github.com/users/tstastny/received_events","type":"User","site_admin":false}],"milestone":null,"comments":11,"created_at":"2021-10-12T10:51:16Z","updated_at":"2022-10-28T07:16:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi I need to open this ticket again. Initial ticket was: 18354 (it was closed. I can^t change it back via the Web GUI)\r\n\r\nPX4 (SW 1.12.3 / HW holibro pixhawk 4) The Motor starts immedialtely after launch is detected. This causes damage to the propeller, because it hits the catapult. Actual behaviour: If Accelerometer threshold > LAUN_CAT_A then Motor starts immediately Expected behaviour: If Accelerometer threshold > LAUN_CAT_A then Motorstart is delayed by value of LAUN_CATMDEL waits then motors starts.\r\nParameters: LAUN_CAT_MDEL and LAUN_CAT_T have no effect. Motor startup is not delayed as expected.\r\n\r\nThe log is made with Master\r\nhttps://review.px4.io/plot_app?log=06b779a9-95b5-4413-a82f-d4f5734ed81d\r\n It was working in 1.9.1\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18416/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18411","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18411/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18411/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18411/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18411","id":1023045066,"node_id":"PR_kwDOAFDaZs4tCQl6","number":18411,"title":"mavlink: receiver battery_status prevent out of bounds access","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-11T19:28:13Z","updated_at":"2021-10-12T13:20:41Z","closed_at":"2021-10-12T13:20:40Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18411","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18411","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18411.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18411.patch","merged_at":"2021-10-12T13:20:40Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/18385\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18411/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18409","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18409/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18409/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18409/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18409","id":1022926608,"node_id":"PR_kwDOAFDaZs4tB48y","number":18409,"title":"ROMFS: rcS don't play startup tune until after UAVCAN and px4io","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-11T16:52:47Z","updated_at":"2021-10-19T01:37:10Z","closed_at":"2021-10-19T01:37:09Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18409","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18409","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18409.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18409.patch","merged_at":"2021-10-19T01:37:09Z"},"body":" - fixes potential duplicate startup tune if you have UAVCAN enabled, but an old GPS puck or buzzer connected\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18409/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18385","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18385/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18385/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18385/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18385","id":1020983664,"node_id":"I_kwDOAFDaZs482vlw","number":18385,"title":"Bug Found in msgID #147 mavlink protocol OOB","user":{"login":"BOB4Drone","id":91944211,"node_id":"U_kgDOBXr1Ew","avatar_url":"https://avatars.githubusercontent.com/u/91944211?v=4","gravatar_id":"","url":"https://api.github.com/users/BOB4Drone","html_url":"https://github.com/BOB4Drone","followers_url":"https://api.github.com/users/BOB4Drone/followers","following_url":"https://api.github.com/users/BOB4Drone/following{/other_user}","gists_url":"https://api.github.com/users/BOB4Drone/gists{/gist_id}","starred_url":"https://api.github.com/users/BOB4Drone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BOB4Drone/subscriptions","organizations_url":"https://api.github.com/users/BOB4Drone/orgs","repos_url":"https://api.github.com/users/BOB4Drone/repos","events_url":"https://api.github.com/users/BOB4Drone/events{/privacy}","received_events_url":"https://api.github.com/users/BOB4Drone/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-10-08T11:17:55Z","updated_at":"2021-10-12T13:20:40Z","closed_at":"2021-10-12T13:20:40Z","author_association":"NONE","active_lock_reason":null,"body":"Steps to reproduce the behavior:\r\n-----------------------------------------------------------------------------------------\r\n1. Turn the drone on\r\n2. Prepare many MAVLINKs with msgID 147 with different \"sysID\" and \"compID\".\r\n3. send a packet\r\n4. Out Of Bound (OOB) vuln occur\r\n5. Turn the drone off\r\n\r\n**Describe the bug**\r\n-----------------------------------------------------------------------------------------\r\nThe method we tested sets MAVLINK's msgID to 147, compID and sysID to random, and sends a packet.\r\n\r\nThe source code part where the problem occurs is 1733 code line ~ 1736 code line and 1733 code line of the site below.\r\n\r\nThe reason for the problem is that MAVLINK packets with different compID and sysID operate the target handler function and\r\nWhen the \"cell_count++\" part is calculated at a specific timing, \"cell_count\" becomes greater than 10 and goes out of the range of the \"battery_mavlink.voltages[cell_count]\" array (the size of the array is 10).\r\n\r\nI found it in sitl mode and also checked it on the drone board.\r\n\r\n\r\nsource code\r\n-----------------------------------------------------------------------------------------\r\nhttps://github.com/PX4/PX4-Autopilot/blob/master/src/modules/mavlink/mavlink_receiver.cpp\r\n\r\nPX4-Autopilot/src/modules/mavlink/mavlink_receiver.cpp (line 1733 ~ line 1737, The line of code where the problem occurs is 1733. )\r\n\r\n\r\nTEST board\r\n-----------------------------------------------------------------------------------------\r\npx4_fmu-v5\r\nnxp_fmuk66-v3\r\n\r\n\r\nlog file page\r\n-----------------------------------------------------------------------------------------\r\nhttps://logs.px4.io/plot_app?log=0f0583c3-a609-4b61-a283-6e3df243141c\r\n\r\n\r\nscreen shot\r\n-----------------------------------------------------------------------------------------\r\n![image](https://user-images.githubusercontent.com/91944211/136547203-1b51b617-1aca-4759-bff8-28ea9eeb46c5.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18385/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18381","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18381/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18381/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18381/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18381","id":1020162230,"node_id":"PR_kwDOAFDaZs4s5j8V","number":18381,"title":"fw_pos_control_l1: fix launch detector dt update","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-10-07T15:13:37Z","updated_at":"2021-10-08T21:34:15Z","closed_at":"2021-10-08T21:34:14Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18381","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18381","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18381.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18381.patch","merged_at":"2021-10-08T21:34:14Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/18354\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18381/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18375","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18375/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18375/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18375/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18375","id":1018980583,"node_id":"I_kwDOAFDaZs48vGjn","number":18375,"title":"drivers/px4io cpu usage problem after running for long periods","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":174161208,"node_id":"MDU6TGFiZWwxNzQxNjEyMDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/priority-critical","name":"priority-critical","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2021-10-06T18:52:54Z","updated_at":"2022-03-26T00:28:05Z","closed_at":"2022-03-26T00:28:05Z","author_association":"MEMBER","active_lock_reason":null,"body":"I just noticed this on the bench after leaving a vehicle running for several hours. It's repeatable.\r\n\r\n![Screenshot from 2021-10-06 14-50-59](https://user-images.githubusercontent.com/84712/136265027-b2304479-b223-4ded-bc7a-09f12376927e.png)\r\n\r\n![Screenshot from 2021-10-06 14-51-46](https://user-images.githubusercontent.com/84712/136265106-895b7d08-a73d-4469-a4fb-cfbdee7e0c92.png)\r\n\r\n\r\nFYI @davids5 @bkueng ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18375/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18371","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18371/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18371/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18371/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18371","id":1018374775,"node_id":"PR_kwDOAFDaZs4szhnk","number":18371,"title":"mavlink: receiver trajectory_representation_waypoints resepect valid_points","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-06T13:52:48Z","updated_at":"2021-10-06T17:45:17Z","closed_at":"2021-10-06T17:45:16Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18371","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18371","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18371.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18371.patch","merged_at":"2021-10-06T17:45:16Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/18369","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18371/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18370","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18370/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18370/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18370/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18370","id":1018343284,"node_id":"PR_kwDOAFDaZs4szapj","number":18370,"title":"drivers/imu: ensure timestamp_sample adjustment isn't done as float (continued)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-06T13:36:37Z","updated_at":"2021-10-06T14:19:03Z","closed_at":"2021-10-06T14:19:02Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18370","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18370","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18370.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18370.patch","merged_at":"2021-10-06T14:19:02Z"},"body":"https://github.com/PX4/PX4-Autopilot/pull/18358 continued.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18370/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18359","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18359/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18359/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18359/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18359","id":1015766973,"node_id":"PR_kwDOAFDaZs4sqy7e","number":18359,"title":"ekf2: avoid uint64 timestamp conversion to float","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-05T00:43:09Z","updated_at":"2021-10-06T13:27:07Z","closed_at":"2021-10-06T13:27:06Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18359","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18359","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18359.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18359.patch","merged_at":"2021-10-06T13:27:06Z"},"body":"Converting a uint64 time to float and back will start producing errors over time as the gaps between consecutive integers represented as float32 increase. See https://github.com/PX4/PX4-Autopilot/pull/18358 for more detail.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18359/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18358","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18358/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18358/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18358/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18358","id":1015697609,"node_id":"PR_kwDOAFDaZs4sqlSN","number":18358,"title":"drivers/imu: ensure timestamp_sample adjustment isn't done as float","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-10-04T22:36:38Z","updated_at":"2021-10-06T13:26:28Z","closed_at":"2021-10-06T13:26:27Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18358","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18358","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18358.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18358.patch","merged_at":"2021-10-06T13:26:27Z"},"body":" - larger HRT timestamps can't be represented exactly when cast to float\r\n\r\n\r\nThis was presenting very unusual errors on bench tested systems left running overnight.\r\n\r\n``` Console\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (5585511377) < timestamp_sample (5585511424)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (5585520127) < timestamp_sample (5585520128)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (5585522642) < timestamp_sample (5585522688)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (5585522653) < timestamp_sample (5585522688)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411191291) < timestamp_sample (6411191296)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411202558) < timestamp_sample (6411202560)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411205053) < timestamp_sample (6411205120)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (6411205068) < timestamp_sample (6411205120)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (6411213820) < timestamp_sample (6411213824)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411213810) < timestamp_sample (6411213824)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411216373) < timestamp_sample (6411216384)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411225071) < timestamp_sample (6411225088)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (6411225082) < timestamp_sample (6411225088)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (6411236335) < timestamp_sample (6411236352)\r\nERROR [vehicle_imu] 1 - gyro 3932170 timestamp (6411236324) < timestamp_sample (6411236352)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (6411247596) < timestamp_sample (6411247616)\r\nERROR [vehicle_imu] 1 - gyro  3932170 timestamp (6411247586) < timestamp_sample (6411247616)\r\nERROR [vehicle_imu] 1 - accel 3932170 timestamp (6411258860) < timestamp_sample (6411258880)\r\nERROR [vehicle_imu] 1 - gyro  3932170 timestamp (6411258845) < timestamp_sample (6411258880)\r\n```\r\n\r\n\r\nTaking the last timestamp (6411258845) as an example the closest actual float is 6411258880, the next smallest is 6411258368.\r\n![Screenshot from 2021-10-04 18-38-30](https://user-images.githubusercontent.com/84712/135934000-40492eb4-bad8-445c-a872-666299161671.png)\r\n\r\nhttps://www.h-schmidt.net/FloatConverter/IEEE754.html\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18358/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18356","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18356/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18356/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18356/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18356","id":1015511331,"node_id":"PR_kwDOAFDaZs4sqARn","number":18356,"title":"[WIP] lib/version: fix NuttX version and remove obsolete ecl","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-10-04T18:45:28Z","updated_at":"2022-04-25T16:07:51Z","closed_at":"2022-04-25T16:07:46Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18356","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18356","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18356.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18356.patch","merged_at":null},"body":"The NuttX versioning in master is currently broken (reporting an old 8.2 tag). This updates our `version` lib to instead directly use NuttX version.\r\n\r\n\r\n#### nuttx/version.h\r\n``` C\r\n#define CONFIG_VERSION_STRING \"10.1.0\"\r\n#define CONFIG_VERSION_MAJOR 10\r\n#define CONFIG_VERSION_MINOR 1\r\n#define CONFIG_VERSION_PATCH 0\r\n#define CONFIG_VERSION_BUILD \"ca1938fbcc\"\r\n\r\n```\r\n\r\n#### PX4 generated build_git_version.h\r\n\r\n\r\n``` C\r\n/* Auto Magically Generated file */\r\n/* Do not edit! */\r\n#pragma once\r\n\r\n#define PX4_GIT_VERSION_STR \"b3bf1d8b0a3462dcbe193a8875fb9bc0c865b508\"\r\n#define PX4_GIT_VERSION_BINARY 0xb3bf1d8b0a3462dc\r\n#define PX4_GIT_TAG_STR \"v1.13.0-alpha1-2428-gb3bf1d8b0a\"\r\n#define PX4_GIT_BRANCH_NAME \"px4_protected_build_pub\"\r\n\r\n#define PX4_GIT_OEM_VERSION_STR  \"\"\r\n\r\n#define PX4_GIT_TAG_OR_BRANCH_NAME \"master\" // special variable: git tag, release or master branch\r\n\r\n#define MAVLINK_LIB_GIT_VERSION_STR  \"f03d91ae932dd718d81f851b584dbd21cffafdd2\"\r\n#define MAVLINK_LIB_GIT_VERSION_BINARY 0xf03d91ae932dd718\r\n\r\n#define NUTTX_GIT_VERSION_STR  \"80b730cdb35570b3aa8b0062b3fe12acc37e9bf2\"\r\n#define NUTTX_GIT_VERSION_BINARY 0x80b730cdb35570b3\r\n#define NUTTX_GIT_TAG_STR  \"v10.0.0.0\"\r\n\r\n```\r\n\r\n\r\nQuestion: do we actually need NUTTX_GIT_VERSION_BINARY?","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18356/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18355","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18355/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18355/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18355/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18355","id":1015489267,"node_id":"PR_kwDOAFDaZs4sp792","number":18355,"title":"[DO NOT MERGE] testing nuttx sdmmc/sdio remove redundant GPIO config revert","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-10-04T18:22:28Z","updated_at":"2021-11-21T20:48:50Z","closed_at":"2021-11-21T20:48:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18355","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18355","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18355.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18355.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18355/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18354","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18354/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18354/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18354/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18354","id":1015464135,"node_id":"I_kwDOAFDaZs48hsDH","number":18354,"title":"Catapult launch: Motor delay not working","user":{"login":"jstrebel","id":2244311,"node_id":"MDQ6VXNlcjIyNDQzMTE=","avatar_url":"https://avatars.githubusercontent.com/u/2244311?v=4","gravatar_id":"","url":"https://api.github.com/users/jstrebel","html_url":"https://github.com/jstrebel","followers_url":"https://api.github.com/users/jstrebel/followers","following_url":"https://api.github.com/users/jstrebel/following{/other_user}","gists_url":"https://api.github.com/users/jstrebel/gists{/gist_id}","starred_url":"https://api.github.com/users/jstrebel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jstrebel/subscriptions","organizations_url":"https://api.github.com/users/jstrebel/orgs","repos_url":"https://api.github.com/users/jstrebel/repos","events_url":"https://api.github.com/users/jstrebel/events{/privacy}","received_events_url":"https://api.github.com/users/jstrebel/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-04T17:57:27Z","updated_at":"2021-10-12T09:43:05Z","closed_at":"2021-10-08T21:34:14Z","author_association":"NONE","active_lock_reason":null,"body":"PX4 (SW 1.12.3 / HW holibro pixhawk 4)\r\nThe Motor starts immedialtely after launch is detected.\r\nThis causes damage to the propeller, because it hits the catapult.\r\n**Actual behaviour:**\r\nIf Accelerometer threshold > LAUN_CAT_A    then  Motor starts immediately\r\n**Expected behaviour:**\r\nIf Accelerometer threshold > LAUN_CAT_A    then  Motorstart is delayed by value of LAUN_CATMDEL  waits then motors starts.\r\n\r\nParameters: LAUN_CAT_MDEL and LAUN_CAT_T have no effect. Motor startup is not delayed as expected.\r\nhttps://review.px4.io/plot_app?log=e1c738f7-7be6-4f54-9af0-c12667ef83d9\r\nThis was working in 1.9.1\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18354/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18350","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18350/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18350/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18350/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18350","id":1015369514,"node_id":"PR_kwDOAFDaZs4spkMd","number":18350,"title":"VTOL Fix back transition devaitions","user":{"login":"ThomasRigi","id":48206725,"node_id":"MDQ6VXNlcjQ4MjA2NzI1","avatar_url":"https://avatars.githubusercontent.com/u/48206725?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasRigi","html_url":"https://github.com/ThomasRigi","followers_url":"https://api.github.com/users/ThomasRigi/followers","following_url":"https://api.github.com/users/ThomasRigi/following{/other_user}","gists_url":"https://api.github.com/users/ThomasRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasRigi/subscriptions","organizations_url":"https://api.github.com/users/ThomasRigi/orgs","repos_url":"https://api.github.com/users/ThomasRigi/repos","events_url":"https://api.github.com/users/ThomasRigi/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-04T16:12:00Z","updated_at":"2021-10-05T12:40:15Z","closed_at":"2021-10-05T12:40:15Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18350","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18350","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18350.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18350.patch","merged_at":"2021-10-05T12:40:14Z"},"body":"**Describe problem solved by this pull request**\r\nI found a bug with back transitions that was introduced with I think https://github.com/PX4/PX4-Autopilot/pull/16499. \r\n\r\nIf you set the next WP after the back transition to a different altitude the drone can enter a \"spiralling down\" mode (set here: https://github.com/PX4/PX4-Autopilot/blob/master/src/modules/fw_pos_control_l1/FixedwingPositionControl.cpp#L842-L850). This can lead to unexpected deviations during back transitions. And as the altitude is ultimately controlled (fix) by the MC module the spiralling down doesn't actually spiral down anyway... Also note that if you have a small value on FW_CLMBOUT_DIFF you can be affected even when the next WP is at the same altitude if the drone gets a lot of altitude during back transition due to pitching up.\r\n\r\n**Describe your solution**\r\nDeactivate the loitering logic during transitions. \r\n\r\n**Describe possible alternatives**\r\n\\-\r\n\r\n**Test data / coverage**\r\nFound on two different real quadplanes, and I was able to reproduce it on SITL.\r\n\r\nReal flight on v1.12.1: https://logs.px4.io/plot_app?log=2f6a1c96-eabb-4576-abb1-a99b716f6c67\r\n\r\nSITL tests with attached mission file [test BT deviations.zip](https://github.com/PX4/PX4-Autopilot/files/7279541/test.BT.deviations.zip):\r\n\r\nmaster, FW_AIRSPD_TRIM = 19, FW_L1_PERIOD = 25 and NAV_LOITER_RAD = 50: https://logs.px4.io/plot_app?log=79cadeb1-27bc-4c4c-88c4-7ded26c0a430\r\n\r\nmaster, default parameters: https://logs.px4.io/plot_app?log=6c1b368b-a435-4868-a856-159d68da926c\r\nInterestingly there is no deviation even though the logic still triggers. I don't understand why the deviation doesn't happen on default parameters, must be something particular with the FW loitering logic. Check `position_controller_status.type`, it goes to 2, showing that the loitering logic is triggered.\r\n\r\nThis PR: https://logs.px4.io/plot_app?log=ef558a1a-2c2c-461f-a781-645a3ad2e121 \r\n`position_controller_status.type` = 0 throughout, no deviation.\r\n\r\n**Additional context**\r\nUnfortunately _not_ linked to https://github.com/PX4/PX4-Autopilot/issues/18240","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18350/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18345","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18345/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18345/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18345/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18345","id":1015294236,"node_id":"PR_kwDOAFDaZs4spU6h","number":18345,"title":"Multicopter Altitude/Position mode: Fix land redetection issue","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-10-04T15:02:59Z","updated_at":"2021-10-06T15:25:53Z","closed_at":"2021-10-06T15:25:52Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18345","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18345","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18345.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18345.patch","merged_at":"2021-10-06T15:25:52Z"},"body":"**Describe problem solved by this pull request**\r\nI Position/Altitude mode when pulling the stick down close to ground for landing and the land detection flags triggering once but going false again it does not \"redetect\" landing anymore for the following sequence:\r\n\r\n- It detects landing like expected but then falls out again before it can auto disarm.\r\n- As the landed flag goes to true the takeoff state machine considers the vehicle by design ready for takeoff again which keeps the vehicle on the ground.\r\n- While still on the ground before takeoff the velocity smoothing algorithm for the z-axis gets reinitialized with the current velocity.\r\n- This results in no downwards velocity command and hence no new land detection.\r\n\r\nThe landed flag can get false again when the vehicle is e.g. moved and so on, the two states are not forced to be in sync. The auto disarm looks at the landed flag and not the takeoff state machine because it also works in Stabilized and/or for fixed-wing where there’s no takeoff state machine. This allows the vehicle to be parked on the ground but not disarming.\r\n\r\n**Describe your solution**\r\n- I'm assuming the special handling to allow a takeoff in `FlightTaskManualAltitudeSmoothVel::reActivate` is not necessary anymore since the takeoff works without it in my tests and it was added when the activation was still quite different and e.g. did not handle the previous setpoint. (https://github.com/PX4/PX4-Autopilot/commit/99fb88ce839879e35f86c199f7dc50fa361f85e4#diff-6ff32b6dc541eafb2df8dc2d25a86206e35b671c438c969377873c495df5a155R55-R57).\r\n- As discussed with @bresch instead of resetting all setpoints as I added it in https://github.com/PX4/PX4-Autopilot/pull/17437/files#diff-3469f836cfbbb5f930c38d52a964fdba5babf46a3b35e615903653d45380d5c2R23 the vertical velocity setpoint is preserved such that in position or altitude mode the smoothing is not reset and full stick down results in a command to descend and hence the land detection flag `in_descend` being true.\r\n\r\n**Describe possible alternatives**\r\nWe should consolidate land detection and takeoff state machine to one place that detects, ramps up and down again and has knowledge about the intention to take off and land.\r\n\r\n**Test data / coverage**\r\nThis was tested in simulation and real-world and solves the described issue.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18345/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18344","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18344/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18344/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18344/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18344","id":1015261046,"node_id":"PR_kwDOAFDaZs4spOQQ","number":18344,"title":"FlightTaskAuto: hotfix POI yawspeed feed-forward spikes","user":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false},"assignees":[{"login":"MaEtUgR","id":4668506,"node_id":"MDQ6VXNlcjQ2Njg1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4668506?v=4","gravatar_id":"","url":"https://api.github.com/users/MaEtUgR","html_url":"https://github.com/MaEtUgR","followers_url":"https://api.github.com/users/MaEtUgR/followers","following_url":"https://api.github.com/users/MaEtUgR/following{/other_user}","gists_url":"https://api.github.com/users/MaEtUgR/gists{/gist_id}","starred_url":"https://api.github.com/users/MaEtUgR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaEtUgR/subscriptions","organizations_url":"https://api.github.com/users/MaEtUgR/orgs","repos_url":"https://api.github.com/users/MaEtUgR/repos","events_url":"https://api.github.com/users/MaEtUgR/events{/privacy}","received_events_url":"https://api.github.com/users/MaEtUgR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-10-04T14:33:28Z","updated_at":"2021-10-06T18:06:59Z","closed_at":"2021-10-06T18:06:58Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18344","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18344","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18344.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18344.patch","merged_at":"2021-10-06T18:06:58Z"},"body":"**Describe problem solved by this pull request**\r\nGet rid of derivative spikes when navigator is continuously updating the yaw setpoint in the triplet for a POI but is running at a lower rate.\r\n\r\n**Describe your solution**\r\nI added a filter for the derivative but for the feed-forward only.\r\n\r\n**Describe possible alternatives**\r\nI considered:\r\n- filtering the derivative `dyaw` also for the absolute yaw setpoint generation\r\n- filtering the absolute yaw\r\n\r\nbut both lead to inherent oscillations that have adverse effects on normal mission flying.\r\n\r\nThe proper solution is to generate that yaw setpoint with high rate in the flight task and have the triplet just guide to the next waypoint at low rate.\r\n\r\n**Test data / coverage**\r\nSITL testing with a mission that contains a POI. It's easily reproducable.\r\n\r\n**Additional context**\r\nBefore:\r\n![image-20200715-144152](https://user-images.githubusercontent.com/4668506/90523718-835fcd00-e16d-11ea-9caf-d45c31404269.png)\r\n\r\nAfter:\r\n![image](https://user-images.githubusercontent.com/4668506/90523791-95417000-e16d-11ea-92df-da90a253a4bd.png)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18344/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18344/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18339","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18339/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18339/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18339/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18339","id":1014825898,"node_id":"PR_kwDOAFDaZs4sn3Ak","number":18339,"title":"GeofenceBreachAvoidance: vertical breach fix","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-04T07:24:25Z","updated_at":"2021-10-04T14:25:11Z","closed_at":"2021-10-04T14:25:11Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18339","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18339","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18339.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18339.patch","merged_at":"2021-10-04T14:25:11Z"},"body":"\r\n**Describe problem solved by this pull request**\r\nVertical GF min distance calculation was never called, allowing for an easy breach of the GF. \r\n\r\n**Describe your solution**\r\nCall updateMinVertDistToFenceMultirotor() also when updateMinHorDistToFenceMultirotor() is called. \r\n\r\n**Test data / coverage**\r\nFlight tested.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18339/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18338","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18338/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18338/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18338/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18338","id":1014817370,"node_id":"PR_kwDOAFDaZs4sn1Rj","number":18338,"title":"vtol_type: fix set_motor_state() for motor_state::VALUE","user":{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-10-04T07:14:12Z","updated_at":"2021-10-06T15:26:41Z","closed_at":"2021-10-06T15:26:40Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18338","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18338","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18338.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18338.patch","merged_at":"2021-10-06T15:26:40Z"},"body":"**Describe problem solved by this pull request**\r\nCurrently the PWM ramp down is only called once, as afterwards _main_motor_state = VALUE and set_motor_state() is not called anymore.\r\n\r\n\r\n**Describe your solution**\r\nAlways call set_motor_state() if _main_motor_state = VALUE.\r\n\r\n\r\n**Test data / coverage**\r\nflight tested\r\n\r\n**Additional context**\r\nWe only used it for ramping down the alternative motor(s) during front transition currently btw. \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18338/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18307","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18307/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18307/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18307/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18307","id":1009830201,"node_id":"PR_kwDOAFDaZs4sZdUE","number":18307,"title":"ekf2: Fix dimensional error in gyro and accel bias variance conversions","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":666022583,"node_id":"MDU6TGFiZWw2NjYwMjI1ODM=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/EKF2","name":"EKF2","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-28T14:27:26Z","updated_at":"2021-09-29T13:58:43Z","closed_at":"2021-09-29T13:58:41Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18307","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18307","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18307.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18307.patch","merged_at":"2021-09-29T13:58:41Z"},"body":"Quick bug fix pulled from https://github.com/PX4/PX4-Autopilot/pull/18304.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18307/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18306","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18306/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18306/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18306/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18306","id":1009817133,"node_id":"I_kwDOAFDaZs48MJYt","number":18306,"title":"Offboard trajectory_setpoint conflict when in auto modes","user":{"login":"benjinne","id":9113272,"node_id":"MDQ6VXNlcjkxMTMyNzI=","avatar_url":"https://avatars.githubusercontent.com/u/9113272?v=4","gravatar_id":"","url":"https://api.github.com/users/benjinne","html_url":"https://github.com/benjinne","followers_url":"https://api.github.com/users/benjinne/followers","following_url":"https://api.github.com/users/benjinne/following{/other_user}","gists_url":"https://api.github.com/users/benjinne/gists{/gist_id}","starred_url":"https://api.github.com/users/benjinne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benjinne/subscriptions","organizations_url":"https://api.github.com/users/benjinne/orgs","repos_url":"https://api.github.com/users/benjinne/repos","events_url":"https://api.github.com/users/benjinne/events{/privacy}","received_events_url":"https://api.github.com/users/benjinne/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442618266,"node_id":"MDU6TGFiZWwxNDQyNjE4MjY2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Offboard","name":"Offboard","color":"d8954e","default":false,"description":"Offboard mode control"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-09-28T14:17:38Z","updated_at":"2022-12-07T00:33:21Z","closed_at":"2022-12-07T00:33:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nOffboard trajectory_setpoint sent while in an auto mode conflict with flight_tasks sending trajectory_setpoint since they both publish to the same topic. It appears everything is working correctly when sending trajectory_setpoints at the 10hz recommended by the offboard tutorial and in an auto mode, however this is because flight_tasks publishes at 50hz and is fast enough to essentially \"override\" the setpoints sent by the 10hz offboard publisher. When publishing at 100hz to trajectory_setpoint from offboard, the auto mode is essentially ignored and the offboard setpoint overrides the internal flight_tasks module. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Launch simulator and set PX4 to HOLD mode\r\n2. Send only trajectory_setpoints using offboard at 10hz and nothing happens\r\n3. Send only trajectory_setpoints using offboard at 100hz and observe HOLD mode is overriden\r\n\r\n**Expected behavior**\r\nThere needs a way for trajectory_setpoint to be distinguished if it's coming from offboard or flight_tasks. When in offboard mode, flight_tasks no longer send trajectory_setpoints, but if in any auto mode, a conflict is possible if offboard setpoints are sent faster than the flight_task\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18306/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18297","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18297/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18297/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18297/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18297","id":1007113339,"node_id":"I_kwDOAFDaZs48B1R7","number":18297,"title":"Takeoff close to Geofence causes drone to fly away uncontrollably","user":{"login":"rizvanovic","id":77106148,"node_id":"MDQ6VXNlcjc3MTA2MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/77106148?v=4","gravatar_id":"","url":"https://api.github.com/users/rizvanovic","html_url":"https://github.com/rizvanovic","followers_url":"https://api.github.com/users/rizvanovic/followers","following_url":"https://api.github.com/users/rizvanovic/following{/other_user}","gists_url":"https://api.github.com/users/rizvanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/rizvanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rizvanovic/subscriptions","organizations_url":"https://api.github.com/users/rizvanovic/orgs","repos_url":"https://api.github.com/users/rizvanovic/repos","events_url":"https://api.github.com/users/rizvanovic/events{/privacy}","received_events_url":"https://api.github.com/users/rizvanovic/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1502478333,"node_id":"MDU6TGFiZWwxNTAyNDc4MzMz","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/safety","name":"safety","color":"d93f0b","default":false,"description":""},{"id":4694975529,"node_id":"LA_kwDOAFDaZs8AAAABF9ekKQ","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/%F0%9F%A4%BA%20Geofence","name":"🤺 Geofence","color":"2D9AC8","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2021-09-25T15:18:02Z","updated_at":"2023-04-05T15:27:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nDrone flies perpendicular to geofence on takeoff close to geofence. The drone places a setpoint ~7 m away from launch point and tries to reach it aggressively.  This is very dangerous behavior which can and has caused crashes in the past.\r\n\r\nToday we went out with another drone (different flight controller and hardware) to try to trigger the same behavior and managed to do so immediately. We did two flights to ensure repeatability.\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Place drone close to but not outside of geofence border.\r\n2. Enter takeoff mode. \r\n\r\n\r\n**Expected behavior**\r\nTakeoff to set altitude.\r\n\r\n**Log Files and Screenshots**\r\n[First flight](https://review.px4.io/plot_app?log=3d188929-9d67-4ff6-8a6f-eff40df8d200)\r\n[Second flight](https://review.px4.io/plot_app?log=5f430551-e48f-4486-ae38-35db4489b12d)\r\n\r\n\r\n**Drone (please complete the following information):**\r\n- FW Version 1.12.0\r\n- Holybro S500\r\n- Pixhawk 4 FC\r\n- CUAV H16 radio module\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18297/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18295","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18295/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18295/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18295/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18295","id":1006824971,"node_id":"PR_kwDOAFDaZs4sQcFW","number":18295,"title":"px4io:Ensure proper lifecycle of registration of cdev","user":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-24T21:04:45Z","updated_at":"2021-09-24T23:01:55Z","closed_at":"2021-09-24T23:01:54Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18295","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18295","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18295.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18295.patch","merged_at":"2021-09-24T23:01:54Z"},"body":"There was a wicked race that is most always lost if there is no console.\r\n\r\nThe Init() registers the pwm0 device but if the task does not run it does not unregister it. (in the case of failure as well). The FS has a inode that is now pointing to a deleted and most likely reclaimed memory. \r\n\r\nSo this \r\n![image](https://user-images.githubusercontent.com/1945821/134739354-31ef950a-6b2e-4c7f-b959-42eeee160fff.png)\r\nbegins a series of Fun that ends in a hardfault","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18295/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18294","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18294/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18294/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18294/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18294","id":1006652305,"node_id":"PR_kwDOAFDaZs4sP6or","number":18294,"title":"ctrl-zero-h7-oem spi 5 fix - Update board.h","user":{"login":"taileron","id":16166920,"node_id":"MDQ6VXNlcjE2MTY2OTIw","avatar_url":"https://avatars.githubusercontent.com/u/16166920?v=4","gravatar_id":"","url":"https://api.github.com/users/taileron","html_url":"https://github.com/taileron","followers_url":"https://api.github.com/users/taileron/followers","following_url":"https://api.github.com/users/taileron/following{/other_user}","gists_url":"https://api.github.com/users/taileron/gists{/gist_id}","starred_url":"https://api.github.com/users/taileron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taileron/subscriptions","organizations_url":"https://api.github.com/users/taileron/orgs","repos_url":"https://api.github.com/users/taileron/repos","events_url":"https://api.github.com/users/taileron/events{/privacy}","received_events_url":"https://api.github.com/users/taileron/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-24T16:50:52Z","updated_at":"2021-10-06T14:19:03Z","closed_at":"2021-09-26T00:05:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18294","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18294","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18294.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18294.patch","merged_at":"2021-09-26T00:05:19Z"},"body":"fix spi pin missmatch PF9=GPIO_SPI5_MOSI_2\r\n\r\nPlease use PX4 Discuss or Slack to align on pull requests if necessary. You can then open draft pull requests to get early feedback.\r\n\r\nDescribe problem solved by this pull request\r\nBMI088 doesn't´t start cause the sensor isn´t detected on this bus\r\n\r\nDescribe your solution\r\nBMI088 gyro and acc now starts properly\r\n\r\nAdditional context\r\nAdd any other related context or media.\r\nBoard sensors: /etc/init.d/rc.board_sensors\r\nicm20602 #0 on SPI bus 1 rotation 8\r\nbmi088_accel #0 on SPI bus 5 rotation 8\r\nbmi088_gyro #0 on SPI bus 5 rotation 8\r\nicm20948 #0 on SPI bus 1 rotation 8\r\ndps310 #0 on SPI bus 2","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18294/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18282","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18282/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18282/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18282/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18282","id":1004255911,"node_id":"PR_kwDOAFDaZs4sIiDG","number":18282,"title":"Fix RTL falsely going to mission landing","user":{"login":"ThomasRigi","id":48206725,"node_id":"MDQ6VXNlcjQ4MjA2NzI1","avatar_url":"https://avatars.githubusercontent.com/u/48206725?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasRigi","html_url":"https://github.com/ThomasRigi","followers_url":"https://api.github.com/users/ThomasRigi/followers","following_url":"https://api.github.com/users/ThomasRigi/following{/other_user}","gists_url":"https://api.github.com/users/ThomasRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasRigi/subscriptions","organizations_url":"https://api.github.com/users/ThomasRigi/orgs","repos_url":"https://api.github.com/users/ThomasRigi/repos","events_url":"https://api.github.com/users/ThomasRigi/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-22T12:48:06Z","updated_at":"2021-11-05T15:10:07Z","closed_at":"2021-11-05T15:10:06Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18282","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18282","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18282.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18282.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nFixes https://github.com/PX4/PX4-Autopilot/issues/18271\r\n\r\n**Describe your solution**\r\nUse `_deny_mission_landing` to prevent the drone from going to the mission landing when it shouldn't. \r\n\r\n**Describe possible alternatives**\r\nAs I mentioned in https://github.com/PX4/PX4-Autopilot/issues/18271#issuecomment-924850749 it would also be possible to expose `_destination.type` via a new getter function, but since `_deny_mission_landing` is already only used in this place I thought it better to use this properly.\r\n\r\n**Test data / coverage**\r\nSITL with gazebo standard vtol. Flown with RTL_TYPE = 1 and 3 to rally points and home and mission landing. (but I did not keep all the logs)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18282/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18271","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18271/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18271/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18271/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18271","id":1002790710,"node_id":"I_kwDOAFDaZs47xV82","number":18271,"title":"RTL going to wrong Landing location","user":{"login":"ThomasRigi","id":48206725,"node_id":"MDQ6VXNlcjQ4MjA2NzI1","avatar_url":"https://avatars.githubusercontent.com/u/48206725?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasRigi","html_url":"https://github.com/ThomasRigi","followers_url":"https://api.github.com/users/ThomasRigi/followers","following_url":"https://api.github.com/users/ThomasRigi/following{/other_user}","gists_url":"https://api.github.com/users/ThomasRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasRigi/subscriptions","organizations_url":"https://api.github.com/users/ThomasRigi/orgs","repos_url":"https://api.github.com/users/ThomasRigi/repos","events_url":"https://api.github.com/users/ThomasRigi/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"},{"id":3376048463,"node_id":"LA_kwDOAFDaZs7JOmlP","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/dev%20call%20(replaced%20by%20maintainers%20call)","name":"dev call (replaced by maintainers call)","color":"00EDDA","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-21T16:10:04Z","updated_at":"2021-11-05T14:58:21Z","closed_at":"2021-11-05T14:58:21Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nWith RTL_TYPE = 3 and RTL_TYPE = 1 the drone always flies to mission landing to land even if it's by far not the closest point. To be precise, it first flies to the correct RTL position but then instead of descending to RTL_DESCEND_ALT it flies to mission landing to land there...\r\n\r\nMore technically: \r\nThe phase corresponding to \"RTL: return at 548 m (60 m above destination)\" is correct. But as soon as it goes into \"RTL: descend to 518 m (30 m above destination)\" then it flies to the wrong position.\r\n\r\n**To Reproduce**\r\nReproducible on SITL on v1.12 and master. \r\nTested with `make px4_sitl gazebo_standard_vtol` and the following mission: \r\n[bad RTL.zip](https://github.com/PX4/PX4-Autopilot/files/7204594/bad.RTL.zip)\r\n\r\nTrigger RTL when it's closer to home or RP than it is to mission land and observe the bug.\r\n\r\n**Expected behavior**\r\nThe drone should land at the closest safe point (home, rallypoint) according to the parameter description and not land and mission landing which might be very far away.\r\n\r\n**Log Files and Screenshots**\r\nv1.12, RTL_TYPE = 3 : https://logs.px4.io/plot_app?log=98b92060-e3e4-4a81-afcc-16a9dc8315e0\r\nmaster, RTL_TYPE = 3: https://logs.px4.io/plot_app?log=a5edc70d-8be0-424f-98dc-0c96f8d31c16\r\nmaster, RTL_TYPE = 1: https://logs.px4.io/plot_app?log=9f6e48ee-6b5b-4b2c-83df-3a8de754352d\r\n\r\nFor reference, here is what it should look like: (RTL_TYPE = 0)\r\nhttps://logs.px4.io/plot_app?log=dbb7f55f-6038-41c1-b009-bbd39c177af7 (I don't like the loitering down, but that's another point)\r\n\r\n**Additional context**\r\nPotentially linked to changes in https://github.com/PX4/PX4-Autopilot/pull/16377 ? I haven't had time to investigate yet. @sfuhrer @RomanBapst \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18271/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18270","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18270/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18270/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18270/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18270","id":1001679357,"node_id":"PR_kwDOAFDaZs4r_6fh","number":18270,"title":"Fix DSM2/DSMX guessing routine and DSM range checking","user":{"login":"chris1seto","id":584080,"node_id":"MDQ6VXNlcjU4NDA4MA==","avatar_url":"https://avatars.githubusercontent.com/u/584080?v=4","gravatar_id":"","url":"https://api.github.com/users/chris1seto","html_url":"https://github.com/chris1seto","followers_url":"https://api.github.com/users/chris1seto/followers","following_url":"https://api.github.com/users/chris1seto/following{/other_user}","gists_url":"https://api.github.com/users/chris1seto/gists{/gist_id}","starred_url":"https://api.github.com/users/chris1seto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris1seto/subscriptions","organizations_url":"https://api.github.com/users/chris1seto/orgs","repos_url":"https://api.github.com/users/chris1seto/repos","events_url":"https://api.github.com/users/chris1seto/events{/privacy}","received_events_url":"https://api.github.com/users/chris1seto/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":3376048463,"node_id":"LA_kwDOAFDaZs7JOmlP","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/dev%20call%20(replaced%20by%20maintainers%20call)","name":"dev call (replaced by maintainers call)","color":"00EDDA","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-09-21T02:06:32Z","updated_at":"2022-04-13T21:31:15Z","closed_at":"2022-04-13T21:29:08Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18270","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18270","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18270.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18270.patch","merged_at":"2022-04-13T21:29:08Z"},"body":"I noticed several issues with the DSM parser. \r\n* Inappropriate range checks in both channel indexes and channel values\r\n* DSMX/2 guessing routine does not correctly identify otherwise valid DSM2/X from an RX which has a channel payload which does not align with the predefined channel layouts\r\n* A bug in the generation of the `cs10` and `cs11` channel layout word\r\n* Improperly set maximum DSMX/2 channels definition\r\n* Improper handling of channel counts and channel values for channel counts larger than 7\r\n\r\nThis PR references the following document from Spektrum: https://www.spektrumrc.com/ProdInfo/Files/Remote%20Receiver%20Interfacing%20Rev%20A.pdf\r\n\r\nThis PR fixes those issues and should probably also serve as a starting point for a more comprehensive discussion about how to correctly detect DSMX/2. The DSM protocol is extremely flexible and also poorly adhered to (even by Spektrum themselves!), and as a result, it's difficult to detect with 100% confidence if a frame (or small collection of frames) is for certain DSMX or DSM2. This PR implements several new heuristics to uphold the previous behavior of automatically guessing whether a stream is either DSMX or DSM2. It is my opinion, however, that given the extreme protocol flexibility allowed within the protocol, and the wide range of implementations in both Spektrum and non-Spektrum RXes, that there should be a param which allows the user to statically set whether to use DSMX or DSM2 parsing. \r\n\r\nNotes on range checking:\r\n* For DSMX, at a minimum, channel index bitfield values up to, and including decimal 12 as well as decimal 15 are valid.  It's not entirely clear to me from the Spektrum satellite spec document how channel indexes up to 20 are obtained, and there appears to be an implementation of this in the original driver. I don't know if that is correct. A channel index value of 15 means that the channel word is a placeholder and should not be parsed. In this case, the entire word is 0xffff, but channel values covering the entire range should be valid, so I am assuming that it's simply a don't care if the channel index is 15 and that a channel value of all bits set DOES NOT specifically mean that the channel value is invalid.\r\n\r\n* DSM can still have a max channel count range check, since it has a larger bitfield for channel index\r\n\r\n* I do not believe that range checking is safe on channel values. It's not impossible of for the entire stick range to be legitimately used, and enforcing arbitrary range checks of \"reasonable values\" could be a time bomb in flight if a slider/stick is moved to a range that wasn't seen in ground testing or in radio calibration. Spektrum implies in their specification document that the entire range of the channel value bitfield is valid.\r\n\r\nFor the above reasons, there is very limited data to determine that a DSM channel is for sure DSMX or DSM2. The majority of the previous guessing routine utilized range checks such as those. \r\n\r\nIn this new PR, I introduce several new guessing heuristics. For each DSM2 or DSMX, \r\n1. In all frames seen over the sample period, there must be no channel index gaps\r\n2. Channels must start at 0 and a minimum channel count of 5 is required\r\n3. For each channel seen, it must be seen nearly as often as every other channel seen in the sample period\r\n4. A, individual frame is only valid if it does not contain duplicate channel indexes. Each good frame is counted during the sample period. After 15 frame samples are counted, there must be at least 10 good frames of either DSMX or DSM2\r\n\r\nFor background, the \"system byte\" is available to differentiate between DSMX and DSM2 streams, however, it has been the case that the system byte has apparently been reported as incorrectly set in some genuine Spektrum RXes. This means that we cannot use it alone to determine a DSMX or DSM2 stream. One alternative option is to use this byte as it was intended and not guess at all, but also present a param to override the use of the system byte and specifically parse as DSMX or DSM2.\r\n\r\nThis PR should considerably improve DSM2/DSMX guessing performance, however as a result of the limited information available for determining a valid DSM2/DSMX stream, I would highly recommend the alternative solution mentioned above involving the system byte and the param to override it. \r\n\r\nThanks for @dagar for his help in answering questions about the existing DSM parser and his feedback on a new solution!\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18270/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18270/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18262","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18262/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18262/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18262/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18262","id":999893018,"node_id":"PR_kwDOAFDaZs4r6uLC","number":18262,"title":"Fix srf05 driver.","user":{"login":"xn365","id":8125278,"node_id":"MDQ6VXNlcjgxMjUyNzg=","avatar_url":"https://avatars.githubusercontent.com/u/8125278?v=4","gravatar_id":"","url":"https://api.github.com/users/xn365","html_url":"https://github.com/xn365","followers_url":"https://api.github.com/users/xn365/followers","following_url":"https://api.github.com/users/xn365/following{/other_user}","gists_url":"https://api.github.com/users/xn365/gists{/gist_id}","starred_url":"https://api.github.com/users/xn365/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xn365/subscriptions","organizations_url":"https://api.github.com/users/xn365/orgs","repos_url":"https://api.github.com/users/xn365/repos","events_url":"https://api.github.com/users/xn365/events{/privacy}","received_events_url":"https://api.github.com/users/xn365/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-18T03:38:08Z","updated_at":"2021-10-19T01:00:59Z","closed_at":"2021-10-19T01:00:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18262","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18262","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18262.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18262.patch","merged_at":"2021-10-19T01:00:59Z"},"body":"Please use [PX4 Discuss](http://discuss.px4.io/) or [Slack](http://slack.px4.io/) to align on pull requests if necessary. You can then open draft pull requests to get early feedback.\r\n\r\n**Describe problem solved by this pull request**\r\nA clear and concise description of the problem this proposed change will solve.\r\nE.g. For this use case I ran into...\r\n\r\n**Describe your solution**\r\nA clear and concise description of what you have implemented.\r\n\r\n**Describe possible alternatives**\r\nA clear and concise description of alternative solutions or features you've considered.\r\n\r\n**Test data / coverage**\r\nHow was it tested? What cases were covered? Logs uploaded to https://review.px4.io/ and screenshots of the important plot parts.\r\n\r\n**Additional context**\r\nAdd any other related context or media.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18262/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18255","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18255/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18255/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18255/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18255","id":999211549,"node_id":"PR_kwDOAFDaZs4r4pVG","number":18255,"title":"Restore old mission if a new mission is not feasible","user":{"login":"Igor-Misic","id":10188706,"node_id":"MDQ6VXNlcjEwMTg4NzA2","avatar_url":"https://avatars.githubusercontent.com/u/10188706?v=4","gravatar_id":"","url":"https://api.github.com/users/Igor-Misic","html_url":"https://github.com/Igor-Misic","followers_url":"https://api.github.com/users/Igor-Misic/followers","following_url":"https://api.github.com/users/Igor-Misic/following{/other_user}","gists_url":"https://api.github.com/users/Igor-Misic/gists{/gist_id}","starred_url":"https://api.github.com/users/Igor-Misic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Igor-Misic/subscriptions","organizations_url":"https://api.github.com/users/Igor-Misic/orgs","repos_url":"https://api.github.com/users/Igor-Misic/repos","events_url":"https://api.github.com/users/Igor-Misic/events{/privacy}","received_events_url":"https://api.github.com/users/Igor-Misic/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":3376048463,"node_id":"LA_kwDOAFDaZs7JOmlP","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/dev%20call%20(replaced%20by%20maintainers%20call)","name":"dev call (replaced by maintainers call)","color":"00EDDA","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-17T10:44:18Z","updated_at":"2021-09-25T10:45:21Z","closed_at":"2021-09-25T10:44:44Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18255","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18255","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18255.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18255.patch","merged_at":null},"body":"**Describe problem solved by this pull request**\r\nThis solves the issue described here https://github.com/PX4/PX4-Autopilot/issues/12473\r\n\r\n**Describe your solution**\r\nDataman has space to store 2 missions. This solution will keep one valid mission in Dataman while other space will be used to store new missions. If the new mission is not feasible, it will return to a previously feasible mission. \r\nThis solution also includes fixes that were raised when after this feature was implemented. \r\n\r\n**Test data / coverage**\r\nIt is tested in simulation and real vehicles for the last 6 months. \r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18255/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18255/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18249","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18249/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18249/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18249/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18249","id":997512163,"node_id":"I_kwDOAFDaZs47dNPj","number":18249,"title":"DSM overwrites SBUS data","user":{"login":"ken-voly","id":83845273,"node_id":"MDQ6VXNlcjgzODQ1Mjcz","avatar_url":"https://avatars.githubusercontent.com/u/83845273?v=4","gravatar_id":"","url":"https://api.github.com/users/ken-voly","html_url":"https://github.com/ken-voly","followers_url":"https://api.github.com/users/ken-voly/followers","following_url":"https://api.github.com/users/ken-voly/following{/other_user}","gists_url":"https://api.github.com/users/ken-voly/gists{/gist_id}","starred_url":"https://api.github.com/users/ken-voly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ken-voly/subscriptions","organizations_url":"https://api.github.com/users/ken-voly/orgs","repos_url":"https://api.github.com/users/ken-voly/repos","events_url":"https://api.github.com/users/ken-voly/events{/privacy}","received_events_url":"https://api.github.com/users/ken-voly/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-09-15T20:57:23Z","updated_at":"2021-09-16T01:33:29Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nDSM overwrites SBUS data in the global frame buffer, causing the SBUS frame to be unsuccessfully decoded.\r\n\r\nBoth DSM and SBUS use the same global buffer to store their work between function calls. Each iteration of the IO main loop, `sbus_input()` is called, followed by `dsm_port_input()`. Because it takes more than one iteration of the main loop to read an entire SBUS packet, DSM can end up overwriting the SBUS data in the global buffer. This leads to the packet being unsuccessfully decoded. In the worst case, DSM may be able to overwrite with data that results in a valid SBUS packet containing garbage data.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Clone [this branch](https://github.com/volansi/PX4-Autopilot-Public/tree/dev/troubleshoot-sbus), build `px4_fmu-5_default`, and upload to a Pixhawk 4.\r\n3. Connect to the IO debug port at 115200 baud rate.\r\n3. Send an SBUS packet to the flight controller. For example, this Python bytearray - ``bytearray(b'\\x0f\\xac\\xf0\\x9e\\xf7\\xc0\\x07>V\\xb0\\x02|\\xac`\\x05\\xf8\\xc0\\x07>\\xf0\\x81\\x0f|\\x00\\x00')``\r\n3. DSM will overwrite the SBUS packet, leading to a decode error.\r\n\r\n**Expected behavior**\r\nDSM should not be able to overwrite the SBUS data and the SBUS packet should be decoded successfully.\r\n\r\nWhen DSM is commented out, it behaves correctly.\r\n\r\n**Log Files and Screenshots**\r\n![Screenshot from 2021-09-15 13-54-52](https://user-images.githubusercontent.com/83845273/133508220-83be2370-181f-47f9-9a3b-ce9ed7bf0779.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18249/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18243","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18243/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18243/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18243/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18243","id":997271757,"node_id":"PR_kwDOAFDaZs4ryurl","number":18243,"title":"commander: don't play failsafe tune if disarmed","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-15T16:18:04Z","updated_at":"2021-09-16T13:17:01Z","closed_at":"2021-09-16T13:17:00Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18243","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18243","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18243.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18243.patch","merged_at":"2021-09-16T13:17:00Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/18054","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18243/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18223","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18223/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18223/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18223/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18223","id":993910143,"node_id":"MDU6SXNzdWU5OTM5MTAxNDM=","number":18223,"title":"review NuttX v10.1.0+ issues when serial console disabled","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581805812,"node_id":"MDU6TGFiZWw1ODE4MDU4MTI=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/NuttX%20(OS)","name":"NuttX (OS)","color":"3C33E3","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-09-11T18:51:04Z","updated_at":"2021-10-23T13:21:29Z","closed_at":"2021-10-23T13:21:29Z","author_association":"MEMBER","active_lock_reason":null,"body":" - eg current master on cubepilot_cubeorange_default vs cubepilot_cubeorange_test","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18223/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18200","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18200/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18200/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18200/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18200","id":990052256,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI4Njk5MjM1","number":18200,"title":"Ctrlalloc: refactor param update","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-09-07T14:33:48Z","updated_at":"2021-09-11T19:07:50Z","closed_at":"2021-09-11T19:07:50Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18200","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18200","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18200.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18200.patch","merged_at":"2021-09-11T19:07:49Z"},"body":"**Describe problem solved by this pull request**\r\nThe parameter loading didn't work as expected when using the \"ControlAllocation\" module. The parameters were first loaded, then if the drone is a multirotor, the `ActuatorEffectiveness` object is changed and the information previously loaded is lost in the old object.\r\n\r\n**Describe your solution**\r\n- Restructure the param update handling\r\n- Add a \"force\" flag to `getEffectivenessMatrix` to force a parameter reload in case of a param update trigger\r\n- Do not subscribe to `parameter_update` uORB topic inside an `ActuatorEffectiveness` class, rely on the parent to send the force flag\r\n\r\n**Test data / coverage**\r\nSITL Gazebo tests: `make px4_sitl_ctrlalloc gazebo_iris_ctrlalloc`\r\n\r\nfixes https://github.com/PX4/PX4-Autopilot/issues/17926","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18200/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18192","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18192/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18192/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18192/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18192","id":988366471,"node_id":"MDU6SXNzdWU5ODgzNjY0NzE=","number":18192,"title":"Strange behavior of FW pitch rate PID after transition 1.11.3 -> 1.12.1","user":{"login":"AndreiShu","id":80648754,"node_id":"MDQ6VXNlcjgwNjQ4NzU0","avatar_url":"https://avatars.githubusercontent.com/u/80648754?v=4","gravatar_id":"","url":"https://api.github.com/users/AndreiShu","html_url":"https://github.com/AndreiShu","followers_url":"https://api.github.com/users/AndreiShu/followers","following_url":"https://api.github.com/users/AndreiShu/following{/other_user}","gists_url":"https://api.github.com/users/AndreiShu/gists{/gist_id}","starred_url":"https://api.github.com/users/AndreiShu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndreiShu/subscriptions","organizations_url":"https://api.github.com/users/AndreiShu/orgs","repos_url":"https://api.github.com/users/AndreiShu/repos","events_url":"https://api.github.com/users/AndreiShu/events{/privacy}","received_events_url":"https://api.github.com/users/AndreiShu/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"assignees":[{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-09-04T20:45:53Z","updated_at":"2021-12-15T07:55:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"After upgrading from 1.11.3 to 1.12.1 our drone (VTOL, tailsitter) became unstable. As we understand now that the main problem was in gyro filters. Somehow during to transition IMU_DGYRO_CUTOFF became equal to 0. (it is perhaps some minor bug in the transition between versions). However, it seems that it is not the only problem. \r\nDuring the experiments we found that FW pitch_rate controller with PR_FW_FF = 0 and PR_FF_I = 0 is not equal to its proportional gain. See, for example, the LOG https://logs.px4.io/plot_app?log=d0fd29dc-a149-4233-90a7-5663924d443a\r\n\r\nThe difference between controller results and proportional gain is similar (but not equal) to -0.2*(pitch rate setpoint). On the plot attached red curve is the difference between actual result of controller and calculated proportional gain. Black is pitch rate setpoint (times -0.2). \r\n\r\nIs it a bug? Or if it is something intentional than what is added to FW control besides usual FF, P and I components? How can we control (and understand) this addition? It seems that even with filters corrected (and the PID parameters re-tuned due to the difference in airspeed scaler between 1.11.3 and 1.12.1) our VTOL is still less stable than it was in 1.11.3.\r\n(The situation is the same in 1.12.1 and 1.12.2)\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18192/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18186","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18186/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18186/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18186/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18186","id":986822522,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI1OTkwNjc0","number":18186,"title":"fix disable airspeed check with negative ASPD_FS_INTEG","user":{"login":"ThomasRigi","id":48206725,"node_id":"MDQ6VXNlcjQ4MjA2NzI1","avatar_url":"https://avatars.githubusercontent.com/u/48206725?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasRigi","html_url":"https://github.com/ThomasRigi","followers_url":"https://api.github.com/users/ThomasRigi/followers","following_url":"https://api.github.com/users/ThomasRigi/following{/other_user}","gists_url":"https://api.github.com/users/ThomasRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasRigi/subscriptions","organizations_url":"https://api.github.com/users/ThomasRigi/orgs","repos_url":"https://api.github.com/users/ThomasRigi/repos","events_url":"https://api.github.com/users/ThomasRigi/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-09-02T14:40:54Z","updated_at":"2021-09-14T10:46:22Z","closed_at":"2021-09-14T10:13:57Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18186","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18186","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18186.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18186.patch","merged_at":"2021-09-14T10:13:56Z"},"body":"@sfuhrer  fix for https://github.com/PX4/PX4-Autopilot/issues/18185\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18186/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18182","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18182/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18182/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18182/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18182","id":985540673,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI0ODIzODM3","number":18182,"title":"px4io cleanup LED and heater handling","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":803319897,"node_id":"MDU6TGFiZWw4MDMzMTk4OTc=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/cleanup%20(housekeeping)%20%F0%9F%A7%B9","name":"cleanup (housekeeping) 🧹","color":"aefcbd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-01T19:21:32Z","updated_at":"2022-04-13T22:44:00Z","closed_at":"2022-04-13T22:43:59Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18182","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18182","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18182.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18182.patch","merged_at":"2022-04-13T22:43:59Z"},"body":" - most px4_io-v2 boards have a blue LED that breathes for status\r\n - the pixhawk 2.1 (hex) re-used this blue LED for as an IMU heater (active low), but kept the same board id (so we have to detect at runtime)\r\n - the new cubepilot boards (yellow, orange) inverted the polarity of this heater pin\r\n\r\nThis PR attempts to untangle the mess slightly so that things we know statically (eg cubepilot cubeorange LEDs and heater polarity) are handled at build time.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18182/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18172","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18172/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18172/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18172/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18172","id":983335990,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIyOTMwMDky","number":18172,"title":"[WIP] px4io_serial: ensure TX DMA is stopped if exiting early on stream error","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-31T01:03:43Z","updated_at":"2021-09-01T09:05:39Z","closed_at":"2021-08-31T21:11:08Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18172","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18172","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18172.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18172.patch","merged_at":"2021-08-31T21:11:08Z"},"body":" - otherwise the next retry can happen quickly enough that dma setup hangs waiting for the stream\r\n - this failure happens consistently if ardupilot is still on the px4io (eg cubeorange)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18172/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18157","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18157/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18157/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18157/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18157","id":980823210,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIwOTg5MTc1","number":18157,"title":"icm42688p: properly disable anti-aliasing and notch filter","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1442874742,"node_id":"MDU6TGFiZWwxNDQyODc0NzQy","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Drivers%20%F0%9F%94%A7","name":"Drivers 🔧","color":"5d3ebc","default":false,"description":"Sensors, Actuators, etc"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-27T03:03:59Z","updated_at":"2021-09-08T14:20:58Z","closed_at":"2021-09-08T14:20:57Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18157","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18157","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18157.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18157.patch","merged_at":"2021-09-08T14:20:57Z"},"body":"@katzfey","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18157/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18147","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18147/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18147/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18147/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18147","id":979422018,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE5ODM4MjU0","number":18147,"title":"px4iofirmware: never directly touch mixer from isr","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-25T16:45:36Z","updated_at":"2021-08-25T19:38:33Z","closed_at":"2021-08-25T19:32:05Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18147","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18147","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18147.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18147.patch","merged_at":"2021-08-25T19:32:05Z"},"body":" - mixer and mixer_set_failsafe were actually executing from an ISR","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18147/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18145","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18145/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18145/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18145/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18145","id":979258590,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE5NjkzODM3","number":18145,"title":"apply differential pressure calibration (SENS_DPRES_OFF) centrally","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2021-08-25T14:58:57Z","updated_at":"2022-04-26T12:39:22Z","closed_at":"2022-04-26T12:39:21Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18145","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18145","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18145.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18145.patch","merged_at":"2022-04-26T12:39:20Z"},"body":" - remove drv_airspeed.h and ioctls\r\n - fixes https://github.com/PX4/PX4-Autopilot/issues/18060\r\n - incremental step towards a bigger refactor (https://github.com/PX4/PX4-Autopilot/pull/15853)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18145/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18134","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18134/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18134/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18134/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18134","id":977961340,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE4NjI4NTEw","number":18134,"title":"Fix memory corruption when work queue is being deleted","user":{"login":"jlaitine","id":23378390,"node_id":"MDQ6VXNlcjIzMzc4Mzkw","avatar_url":"https://avatars.githubusercontent.com/u/23378390?v=4","gravatar_id":"","url":"https://api.github.com/users/jlaitine","html_url":"https://github.com/jlaitine","followers_url":"https://api.github.com/users/jlaitine/followers","following_url":"https://api.github.com/users/jlaitine/following{/other_user}","gists_url":"https://api.github.com/users/jlaitine/gists{/gist_id}","starred_url":"https://api.github.com/users/jlaitine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlaitine/subscriptions","organizations_url":"https://api.github.com/users/jlaitine/orgs","repos_url":"https://api.github.com/users/jlaitine/repos","events_url":"https://api.github.com/users/jlaitine/events{/privacy}","received_events_url":"https://api.github.com/users/jlaitine/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-08-24T10:43:28Z","updated_at":"2021-09-23T09:12:28Z","closed_at":"2021-08-27T08:43:46Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18134","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18134","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18134.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18134.patch","merged_at":"2021-08-27T08:43:45Z"},"body":"When the last WorkItem is deleted, it is removed from a work queue and the\r\nqueue is being stopped. But, the queue itself might get deleted in the middle,\r\nin a higher priority thread than where the WorkItem deletion was performed from\r\n\r\nIf the WorkQueue::Detach accesses the member variables after this, there is memory\r\ncorruption\r\n\r\nThis happens in particular when launching i2c or spi devices in\r\nI2CSPIDriverBase::module_start:\r\n\r\n- The \"initializer\" is deleted when the instance is not found and the iterator\r\n  while loop continues.\r\n- The workqueue is deleted in the middle of \"initializer\" deletion when the\r\n  WorkQueueRunner returns.\r\n\r\nThis fixes the \"WorkQueue::Detach\" in a way that it doesn't touch any member\r\nvariables after closing the last active work item.\r\n\r\nSigned-off-by: Jukka Laitinen <jukkax@ssrc.tii.ae>\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18134/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18120","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18120/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18120/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18120/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18120","id":976179930,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE3MTgxMjIy","number":18120,"title":"cmake fix micrortps build dependencies","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-21T17:09:43Z","updated_at":"2021-08-22T16:04:04Z","closed_at":"2021-08-22T14:41:04Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18120","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18120","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18120.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18120.patch","merged_at":"2021-08-22T14:41:04Z"},"body":"I believe this should address the build dependency issue reported in https://github.com/PX4/px4_ros_com/issues/108.\r\n\r\nThe main issue is that `msg/tools/urtps_bridge_topics.yaml` needs to be a cmake configure time dependency (CMAKE_CONFIGURE_DEPENDS) because it's processed by `execute_process` in a couple places. https://github.com/PX4/PX4-Autopilot/blob/c0efbe1f9cba86bf112f8b62cc2e35956f30ac1a/src/modules/micrortps_bridge/CMakeLists.txt#L53-L55","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18120/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18110","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18110/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18110/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18110/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18110","id":974952634,"node_id":"MDU6SXNzdWU5NzQ5NTI2MzQ=","number":18110,"title":"Several SENS_* params could be not marked as used on start","user":{"login":"lukegluke","id":3624285,"node_id":"MDQ6VXNlcjM2MjQyODU=","avatar_url":"https://avatars.githubusercontent.com/u/3624285?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegluke","html_url":"https://github.com/lukegluke","followers_url":"https://api.github.com/users/lukegluke/followers","following_url":"https://api.github.com/users/lukegluke/following{/other_user}","gists_url":"https://api.github.com/users/lukegluke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegluke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegluke/subscriptions","organizations_url":"https://api.github.com/users/lukegluke/orgs","repos_url":"https://api.github.com/users/lukegluke/repos","events_url":"https://api.github.com/users/lukegluke/events{/privacy}","received_events_url":"https://api.github.com/users/lukegluke/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2021-08-19T18:54:43Z","updated_at":"2021-08-23T14:59:59Z","closed_at":"2021-08-23T14:59:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"It could lead ground station to parameters rereading due to parameters cache match failing, because of\r\n`Parameter in cache but not on vehicle componentId:Name 1 \"SENS_GPS_MASK\"` or `Parameter missing from cache \"SENS_GPS_MASK\"` (depending on state).\r\n\r\nI've encountered to issue only with `SENS_GPS_*`, but in fact it is also could be related for example to `SENS_MAG_*` (I suppose other sensors start faster, so no issue). \r\n\r\nSource of problem: parameters SENS_GPS_* marked as used on first VehicleGPSPosition creation in `InitializeVehicleGPSPosition()`, but only if orb `sensor_gps` exists, while it could take a while for `sensor_gps` to be advertise.\r\nhttps://github.com/PX4/PX4-Autopilot/blob/f9d8c613b048f58eb3110e9af13cb3a89c4c866f/src/modules/sensors/sensors.cpp#L493-L497\r\nSo parameters SENS_GPS_* could be not marked as used if vehicle connected to ground station before first gps data parsed, or marked as used - if connected after.\r\n\r\n@dagar why several sensors objects are created dynamically? To save RAM if unused?\r\nhttps://github.com/PX4/PX4-Autopilot/blob/f9d8c613b048f58eb3110e9af13cb3a89c4c866f/src/modules/sensors/sensors.cpp#L174-L178","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18110/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18107","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18107/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18107/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18107/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18107","id":974450006,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE1NzUyNzAx","number":18107,"title":"Correct conversion from sec to usec","user":{"login":"kjersbry","id":36163186,"node_id":"MDQ6VXNlcjM2MTYzMTg2","avatar_url":"https://avatars.githubusercontent.com/u/36163186?v=4","gravatar_id":"","url":"https://api.github.com/users/kjersbry","html_url":"https://github.com/kjersbry","followers_url":"https://api.github.com/users/kjersbry/followers","following_url":"https://api.github.com/users/kjersbry/following{/other_user}","gists_url":"https://api.github.com/users/kjersbry/gists{/gist_id}","starred_url":"https://api.github.com/users/kjersbry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjersbry/subscriptions","organizations_url":"https://api.github.com/users/kjersbry/orgs","repos_url":"https://api.github.com/users/kjersbry/repos","events_url":"https://api.github.com/users/kjersbry/events{/privacy}","received_events_url":"https://api.github.com/users/kjersbry/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-19T09:14:52Z","updated_at":"2021-08-24T06:09:28Z","closed_at":"2021-08-23T19:17:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18107","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18107","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18107.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18107.patch","merged_at":"2021-08-23T19:17:27Z"},"body":"**Describe problem solved by this pull request**\r\nus is compared to ms. This would cause any offboard time that is after Jan 15th, 1970 to be considered valid, instead of the intended Feb 14th 2009.\r\n\r\n**Describe your solution**\r\nChanged seconds * 1000 (ms) to seconds * 1000000 (us).\r\n\r\n**Describe possible alternatives**\r\nN/A\r\n\r\n**Test data / coverage**\r\nWe did not test it since it is a simple logical error, but we can of course do that if you would like us to\r\n\r\n**Additional context**\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18107/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18105","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18105/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18105/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18105/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18105","id":974351393,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE1NjY5MDkx","number":18105,"title":"calibration params: avoid using NaN as default","user":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-08-19T07:16:47Z","updated_at":"2021-08-19T15:29:27Z","closed_at":"2021-08-19T15:29:27Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18105","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18105","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18105.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18105.patch","merged_at":"2021-08-19T15:29:26Z"},"body":"NaN is not supported by JSON, and leads to parsing failure in QGC.\r\n\r\n - fixes https://github.com/PX4/PX4-Autopilot/issues/18095","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18105/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18100","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18100/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18100/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18100/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18100","id":973844888,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE1MjM2NTE2","number":18100,"title":"drivers/uavcan: increase rgbled and beep scheduling","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-08-18T16:14:55Z","updated_at":"2022-04-25T16:08:54Z","closed_at":"2022-04-25T16:08:51Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18100","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18100","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18100.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18100.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18100/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18095","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18095/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18095/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18095/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18095","id":973324603,"node_id":"MDU6SXNzdWU5NzMzMjQ2MDM=","number":18095,"title":"QGC:Parameters: abnormal display","user":{"login":"gitfishup","id":69180601,"node_id":"MDQ6VXNlcjY5MTgwNjAx","avatar_url":"https://avatars.githubusercontent.com/u/69180601?v=4","gravatar_id":"","url":"https://api.github.com/users/gitfishup","html_url":"https://github.com/gitfishup","followers_url":"https://api.github.com/users/gitfishup/followers","following_url":"https://api.github.com/users/gitfishup/following{/other_user}","gists_url":"https://api.github.com/users/gitfishup/gists{/gist_id}","starred_url":"https://api.github.com/users/gitfishup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gitfishup/subscriptions","organizations_url":"https://api.github.com/users/gitfishup/orgs","repos_url":"https://api.github.com/users/gitfishup/repos","events_url":"https://api.github.com/users/gitfishup/events{/privacy}","received_events_url":"https://api.github.com/users/gitfishup/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-08-18T06:32:06Z","updated_at":"2021-08-19T15:29:26Z","closed_at":"2021-08-19T15:29:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\n![image](https://user-images.githubusercontent.com/69180601/129848759-749d66f7-1cbd-4fea-8935-179d855319be.png)\r\n\r\nThe QGC version \r\n![lALPBGY19k_l830xzQGe_414_49](https://user-images.githubusercontent.com/69180601/129848765-a01d52c1-d20c-40a3-8342-fbd5196d5d2d.png)\r\n\r\nThe version of Firmware of CUAVv5 flight controller:\r\ncommit :ff39e27e2d093001e777f48e2e178368c90a9ae5\r\n![image](https://user-images.githubusercontent.com/69180601/129849048-e233721d-ab17-437a-b409-c64f338ceaa1.png)\r\n\r\nFrom this commit , QGC:Parameters: abnormal display\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18095/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18084","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18084/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18084/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18084/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18084","id":971713277,"node_id":"MDExOlB1bGxSZXF1ZXN0NzEzNDE2MjA0","number":18084,"title":"Do not resend a mission request for non matching sequences","user":{"login":"Hylke-Atmos","id":65388450,"node_id":"MDQ6VXNlcjY1Mzg4NDUw","avatar_url":"https://avatars.githubusercontent.com/u/65388450?v=4","gravatar_id":"","url":"https://api.github.com/users/Hylke-Atmos","html_url":"https://github.com/Hylke-Atmos","followers_url":"https://api.github.com/users/Hylke-Atmos/followers","following_url":"https://api.github.com/users/Hylke-Atmos/following{/other_user}","gists_url":"https://api.github.com/users/Hylke-Atmos/gists{/gist_id}","starred_url":"https://api.github.com/users/Hylke-Atmos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hylke-Atmos/subscriptions","organizations_url":"https://api.github.com/users/Hylke-Atmos/orgs","repos_url":"https://api.github.com/users/Hylke-Atmos/repos","events_url":"https://api.github.com/users/Hylke-Atmos/events{/privacy}","received_events_url":"https://api.github.com/users/Hylke-Atmos/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-16T13:01:00Z","updated_at":"2021-08-30T11:39:52Z","closed_at":"2021-08-30T11:39:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18084","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18084","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18084.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18084.patch","merged_at":"2021-08-30T11:39:51Z"},"body":"Resending a mission request when a received element is not matching the expected sequence number can cause excessive bandwidth usage making the problem even worse!\r\n\r\n**Describe problem solved by this pull request**\r\nWhen a slow or somewhat \"full\" telemetry link is used. The mission upload (download from Px4 perspective), can cause an excessive growth of mission requests, making the problem even worse!\r\n\r\nWhen the link is only \"slow\" and not necessarily bad, every request is answered with a mission item (which is relatively large in number of bytes). This will cause the link to be flooded with unnecessary messages, filling up all available bandwidth. Making the whole problemen even worse.\r\n\r\nSee also Issue #18082 for more details about the problem.\r\n\r\n**Describe your solution**\r\nSince the timeout handling will handle the retries for potentially missed mission elements, there is no need to act on receiving incorrect sequence numbers. Just ignoring them wil suffice.\r\n\r\n**Describe possible alternatives**\r\nSince the problem is in receiving elements that have already been received and processed (received sequence number lower then expected), you could argue it still acceptable to \"re-request\" the expected element when the received number is higher then the expected. However since, there is also a timeout procedure there is no need for it at all. It can simply be ignored.\r\n\r\n**Test data / coverage**\r\nI've done a couple of benchmark \"downloads\" using QGC 4.1.3, PX4 V1.12, RFdesign 900 EU modem and uploaded a flight plan containing exactly 100 elements. \r\nThe average time it took to upload this was about 15min. containing about 15000 Mission requests!\r\n\r\nAfter the change I've done the same test a few times and most of the times those 100 waypoints were uploaded in less then a minute and always less then 2 minutes.\r\nThe number mission requests was on average about 165!\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18084/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18082","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18082/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18082/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18082/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18082","id":971647572,"node_id":"MDU6SXNzdWU5NzE2NDc1NzI=","number":18082,"title":"Mission download on slow telemetry can cause an excessive growth of mission requests","user":{"login":"Hylke-Atmos","id":65388450,"node_id":"MDQ6VXNlcjY1Mzg4NDUw","avatar_url":"https://avatars.githubusercontent.com/u/65388450?v=4","gravatar_id":"","url":"https://api.github.com/users/Hylke-Atmos","html_url":"https://github.com/Hylke-Atmos","followers_url":"https://api.github.com/users/Hylke-Atmos/followers","following_url":"https://api.github.com/users/Hylke-Atmos/following{/other_user}","gists_url":"https://api.github.com/users/Hylke-Atmos/gists{/gist_id}","starred_url":"https://api.github.com/users/Hylke-Atmos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hylke-Atmos/subscriptions","organizations_url":"https://api.github.com/users/Hylke-Atmos/orgs","repos_url":"https://api.github.com/users/Hylke-Atmos/repos","events_url":"https://api.github.com/users/Hylke-Atmos/events{/privacy}","received_events_url":"https://api.github.com/users/Hylke-Atmos/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-08-16T11:38:05Z","updated_at":"2021-08-31T12:03:34Z","closed_at":"2021-08-31T12:03:34Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen a slow or somewhat \"full\" telemetry link is used. The mission upload (download from Px4 perspective), can cause an excessive growth of mission requests, making the problem even worse!\r\n\r\nWhat happens:\r\n1. When an upload (e.g. from QGC) is triggered it wil send a mission count to PX4 to indicate how many mission elements there are.\r\n2. PX4 will start requesting element 1 (and starts a timeout trigger)\r\n3. QGC send element 1\r\n4. timeout occurred on receiving element 1 (timeout occurred) -> re-request element 1\r\n5. QGC sends element 1 again (let's call it element 1')\r\n5. element 1 is received by PX4, now request element 2.\r\n6. QGC sends element 2\r\n7. element 1' is received by PX4, \"element 1 is not expected\", therefor send request for element 2.\r\n8. QGC sends element 2'\r\n9. initial element 2 request timed out, re-request element 2.\r\n10. QGC sends element 2''\r\n11. Element 2 is received by PX4, now request element 3.\r\n12. QGC sends element 3\r\n13. element 2' is received by PX4, \"element 1 is not expected\", therefor send request for element 3.\r\n14. QGC sends element 3'\r\n15. et... etc... \r\n\r\nDue to the significant increase of requests (and therefor answers of QGC) the telemetry link gets polluted and flooded with messages making the problem only worse!\r\n\r\n**To Reproduce**\r\nThis is difficult to reproduce if you don't have a telemetry modem that causes this level of delay. \r\nI guess (haven't tried it) it should also be possible to reproduce this by making the amount of used bandwidth higher than the available bandwidth (e.g. by increasing the send rate of some of the larger Mavlink Messages).\r\nThis should also cause the timeout to be triggered quicker.\r\n\r\n**Expected behavior**\r\nI would expect PX4 not to send requests when an unexpected element is received at all, or at least not for elements that have already been received! \r\nThe timeout and re-request behavior (as designed per Mavlink) can cause multiple instances of the same element to be received, therefor the need for re-requesting an element whenever a received element is not equal to the one expected is IMHO wrong, since the a timeout will always re-request when it is not received in time...\r\n\r\n**Log Files and Screenshots**\r\n*Always* provide a link to the flight log file:\r\nUnfortunately I haven't been able to create a decent logfile that contains either the debug or the Mavlink messages.\r\nI do have a screenshot showing an upload of a flightplan containing 100 waypoints. At the moment of taking it PX4 was requesting waypoint 93, but it had been running for about 20 minutes already and had been sending the mission_request message for over 22.000 time!!!\r\nAt the end it was requesting a single WP a few thousand times each!!!\r\n![Seriously high request count](https://user-images.githubusercontent.com/65388450/129556948-4b233327-8996-4894-b528-ce232cee32b0.png)\r\n\r\n**Drone:**\r\nAlthough unrelated:\r\nWe are using VTOL drone and running PX4 on a Cube Orange.\r\n\r\nWhat might be of interest: \r\nRadio:\r\nWe use RFdesign rfd900x radios with a EU specific configuration (which is using a 10% duty cycle at 200mb/s over the air speed). We have Hardware flow control (forced) enabled.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18082/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18060","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18060/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18060/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18060/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18060","id":968408706,"node_id":"MDU6SXNzdWU5Njg0MDg3MDY=","number":18060,"title":"UAVCAN airspeed sensor cannot be calibrated","user":{"login":"joibgbg123","id":38692702,"node_id":"MDQ6VXNlcjM4NjkyNzAy","avatar_url":"https://avatars.githubusercontent.com/u/38692702?v=4","gravatar_id":"","url":"https://api.github.com/users/joibgbg123","html_url":"https://github.com/joibgbg123","followers_url":"https://api.github.com/users/joibgbg123/followers","following_url":"https://api.github.com/users/joibgbg123/following{/other_user}","gists_url":"https://api.github.com/users/joibgbg123/gists{/gist_id}","starred_url":"https://api.github.com/users/joibgbg123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joibgbg123/subscriptions","organizations_url":"https://api.github.com/users/joibgbg123/orgs","repos_url":"https://api.github.com/users/joibgbg123/repos","events_url":"https://api.github.com/users/joibgbg123/events{/privacy}","received_events_url":"https://api.github.com/users/joibgbg123/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2021-08-12T09:08:16Z","updated_at":"2022-04-26T12:39:20Z","closed_at":"2022-04-26T12:39:20Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nAfter the v1.12.1 release the airspeed sensor cannot be calibrated if using UAVCAN sensors. I have 4 pcs pixhawk4 mini's with GPS from Holybro. One has an analog airspeed sensor from Holybro. One has the digital version connected via UAVCAN : https://docs.avionicsanonymous.com/devices/microadc#configuration. \r\n\r\nA few days ago I decided that all the 4 would need firmware upgrade, resetting parameters to have them all with the same parameters. This worked fine until I connected this digital UAVCAN airspeed sensor, now I couldn't calibrate the sensor. I simply got the message and error „No airspeed sensor found“.\r\n\r\nAfter reviewing all parameters over and over again, and updating the firmware once again, believing that this was a problem on my end. A fellow college suggested that I tried the firmware version that I had before. I installed stable release v1.11.3 and I could do this without any problems. \r\n\r\nI would like to add that I could read the airspeed sensor, just not calibrate it.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Pixhawk4 mini fw upgrade to v1.12.1 (i tried px4_fmu-v5_fixedwing.px4) and px4_fmu-v5_default.px4)\r\n2. Have an airspeed sensor connected via UAVCAN\r\n3. Press calibrate and a moment later it says: \"No airspeed sensor found\". see screenshot.\r\n\r\n![screenshot_QGC_no_airspeed_sensor](https://user-images.githubusercontent.com/38692702/129169426-7b3f0110-79dd-4e68-b8c3-7d39aa49bbf7.png)\r\n\r\n\r\nI would like to add if not clear, that nothing more is connected to the PX4 mini, I'm using those computers for measuring using the sensors and this seemed the best sensor with respect to price. \r\n\r\nHope this is clear, \r\nbest regards\r\nJóhannes","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18060/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18060/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18055","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18055/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18055/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18055/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18055","id":967066627,"node_id":"MDU6SXNzdWU5NjcwNjY2Mjc=","number":18055,"title":"UAVCAN Buzzer Doesn't Sound During Compass Calibration","user":{"login":"AlexKlimaj","id":2019539,"node_id":"MDQ6VXNlcjIwMTk1Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/2019539?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexKlimaj","html_url":"https://github.com/AlexKlimaj","followers_url":"https://api.github.com/users/AlexKlimaj/followers","following_url":"https://api.github.com/users/AlexKlimaj/following{/other_user}","gists_url":"https://api.github.com/users/AlexKlimaj/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexKlimaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexKlimaj/subscriptions","organizations_url":"https://api.github.com/users/AlexKlimaj/orgs","repos_url":"https://api.github.com/users/AlexKlimaj/repos","events_url":"https://api.github.com/users/AlexKlimaj/events{/privacy}","received_events_url":"https://api.github.com/users/AlexKlimaj/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":581916348,"node_id":"MDU6TGFiZWw1ODE5MTYzNDg=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/uavcan","name":"uavcan","color":"2201AE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-11T16:49:35Z","updated_at":"2021-12-13T19:52:46Z","closed_at":"2021-12-13T19:52:46Z","author_association":"MEMBER","active_lock_reason":null,"body":"When performing a calibration with a UAVCAN GPS that includes a buzzer, there are no sounds during a compass calibration. The sounds work during a gyro, accelerometer, and level horizon calibration. ","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18055/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18046","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18046/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18046/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18046/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18046","id":965133756,"node_id":"MDExOlB1bGxSZXF1ZXN0NzA3NDgyNTU5","number":18046,"title":"magnetometer calibration handle internal mags that are disabled (still used for mag auto rotation)","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-08-10T16:48:50Z","updated_at":"2021-09-28T14:04:53Z","closed_at":"2021-09-28T14:04:51Z","author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18046","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18046","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18046.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18046.patch","merged_at":null},"body":"Possible fix for https://github.com/PX4/PX4-Autopilot/issues/18041.\r\n\r\nOnce addressed needs backporting for v1.12.2.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18046/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18041","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18041/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18041/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18041/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18041","id":964656086,"node_id":"MDU6SXNzdWU5NjQ2NTYwODY=","number":18041,"title":"Consistently bad magnetometer calibration on 1.12","user":{"login":"le-chat","id":3679930,"node_id":"MDQ6VXNlcjM2Nzk5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/3679930?v=4","gravatar_id":"","url":"https://api.github.com/users/le-chat","html_url":"https://github.com/le-chat","followers_url":"https://api.github.com/users/le-chat/followers","following_url":"https://api.github.com/users/le-chat/following{/other_user}","gists_url":"https://api.github.com/users/le-chat/gists{/gist_id}","starred_url":"https://api.github.com/users/le-chat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/le-chat/subscriptions","organizations_url":"https://api.github.com/users/le-chat/orgs","repos_url":"https://api.github.com/users/le-chat/repos","events_url":"https://api.github.com/users/le-chat/events{/privacy}","received_events_url":"https://api.github.com/users/le-chat/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":33,"created_at":"2021-08-10T06:57:00Z","updated_at":"2021-08-13T14:40:43Z","closed_at":"2021-08-13T14:40:43Z","author_association":"NONE","active_lock_reason":null,"body":"We repeatedly get bad magnetometer calibration results on 1.12: after aircraft rotation yaw drifts. See https://logs.px4.io/plot_app?log=13194004-cc98-49e9-80d2-e1e1aa7196f7 for example. On magnetometer raw data and gyro data plots there are very clear time ranges, when actual rotation happens, but yaw plot demonstrates drift outside of them. Also yaw check bit is 1 in estimator watchdog.\r\n\r\nIt isn't a hardware issue, because when we switch back to 1.13 firmware we get good results: https://logs.px4.io/plot_app?log=d4f79fd4-1623-43ad-baa6-bd748f4a1e2e.\r\n\r\nWe have also recorded log on 1.12 with SENS_BOARD_ROT=0 to check if this relates to problem, still getting drift: https://logs.px4.io/plot_app?log=3760a163-3aa2-48f0-84f5-afdacd6dd3b4.","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18041/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18039","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18039/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18039/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18039/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18039","id":964159664,"node_id":"MDU6SXNzdWU5NjQxNTk2NjQ=","number":18039,"title":"Airspeed spikes cause FW to lose altitude","user":{"login":"ThomasRigi","id":48206725,"node_id":"MDQ6VXNlcjQ4MjA2NzI1","avatar_url":"https://avatars.githubusercontent.com/u/48206725?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasRigi","html_url":"https://github.com/ThomasRigi","followers_url":"https://api.github.com/users/ThomasRigi/followers","following_url":"https://api.github.com/users/ThomasRigi/following{/other_user}","gists_url":"https://api.github.com/users/ThomasRigi/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasRigi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasRigi/subscriptions","organizations_url":"https://api.github.com/users/ThomasRigi/orgs","repos_url":"https://api.github.com/users/ThomasRigi/repos","events_url":"https://api.github.com/users/ThomasRigi/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasRigi/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"open","locked":false,"assignee":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"assignees":[{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},{"login":"sfuhrer","id":26798987,"node_id":"MDQ6VXNlcjI2Nzk4OTg3","avatar_url":"https://avatars.githubusercontent.com/u/26798987?v=4","gravatar_id":"","url":"https://api.github.com/users/sfuhrer","html_url":"https://github.com/sfuhrer","followers_url":"https://api.github.com/users/sfuhrer/followers","following_url":"https://api.github.com/users/sfuhrer/following{/other_user}","gists_url":"https://api.github.com/users/sfuhrer/gists{/gist_id}","starred_url":"https://api.github.com/users/sfuhrer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfuhrer/subscriptions","organizations_url":"https://api.github.com/users/sfuhrer/orgs","repos_url":"https://api.github.com/users/sfuhrer/repos","events_url":"https://api.github.com/users/sfuhrer/events{/privacy}","received_events_url":"https://api.github.com/users/sfuhrer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-08-09T16:19:20Z","updated_at":"2021-08-10T07:14:52Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"@sfuhrer @RomanBapst porting the [slack conversation](https://px4.slack.com/archives/C0W2KUFFT/p1626796170295800) here.\r\n\r\n**Describe the bug**\r\nSometimes, out of nowhere the `tecs_status.airspeed_filtered` message shows a huge spike that is enough to mess up the whole TECS algorithm. The drone loses a lot of altitude really fast. So far this has only been observed in SITL, and only rare occasions during relatively long flights.\r\n\r\n**To Reproduce**\r\nI was unable to reproduce it reliably. On the occurrences where it happened, it was with SITL gazebo_standard_vtol on long distance missions (>30km). Restarting the simulator and running the exact same mission works most of the time (until you hit the bug again). It would be a good idea to increase the logging speed of all airspeed related topics.\r\n\r\n**Expected behavior**\r\nThis should not happen.\r\n\r\n**Log Files and Screenshots**\r\nFirst occurrence: https://logs.px4.io/plot_app?log=4b21aeea-5784-46b6-8e42-964fecc7c20a\r\n![image(2)](https://user-images.githubusercontent.com/48206725/128736463-2eddc542-4eb0-4538-a7b6-83964c68ae26.png)\r\n\r\nSecond occurrence: https://logs.px4.io/plot_app?log=5acff421-3ff4-4bf2-bd5d-bb4a7222f241\r\n![image(3)](https://user-images.githubusercontent.com/48206725/128736474-71a00d4f-4cf5-4002-844e-02479e4aba58.png)\r\n\r\nOn the first occurrence, only the TECS TAS topic showed the spike, making it difficult to tell where it originated. On the second occurrence, it is also logged on the airspeed validator, but still not on the initial airspeed topic. So the source of the issue is either inside the airspeed validator module or with the (simulated) airspeed sensor.\r\n\r\n**Drone (please complete the following information):**\r\n- SITL, Gazebo Standard VTOL\r\n- v1.11 based\r\n\r\n**Potential Solutions**\r\n- find the source of the airspeed spike and eliminate it. Either in the airspeed validator (@sfuhrer) or in the simulated airspeed sensor (@Jaeyoung-Lim, maybe you would have an idea?)\r\n- As @RomanBapst proposed in the slack conversation, change the filter that is applied to the airspeed in TECS so that a single spike doesn't have that much influence. Could also help in further reducing noise coming from the airspeed sensor. Examples could be a median filter or similar types (LULU)\r\n\r\nI think changing the filter is something that would be worth doing anyway, to protect against an erroneous signal on a real airspeed sensor\r\n\r\n\r\n**Additional context**\r\nCopy of the slack thread so that it doesn't get lost in the future: Thomas Stauber  20 days ago\r\nWe've just observed a very weird behaviour in a simulation which I'm not sure if it's SITL related or if it could happen on a real flight - if it could it'd be pretty bad with a fixed-wing hitting the ground like a missile. (SITL running an v1.11-based branch)\r\nBasically the simulated VTOL was flying nicely in FW for a good amount of time when suddenly the tecs_status.airspeed_filtered message diverged to 2e8 m/s, causing the drone to cut throttle. Then tecs_status.airspeed_filtered became a constant 3 (no decimals), triggering first TECS_MODE_BAD_DESCENT  and then a few seconds later TECS_MODE_UNDERSPEED . The drone pitched down with almost full thrust and triggered an adaptive quadchute for loss of altitude.\r\nI really don't understand where the 2e8 m/s spike and the constant 3 m/s of airspeed_filtered comes from.\r\nAlso, the RTL that followed the quadchute was not working correctly for the first ca 30s where the drone kept losing altitude instead of climbing at desired RTL altitude.\r\nLog: https://logs.px4.io/plot_app?log=4b21aeea-5784-46b6-8e42-964fecc7c20a (flight review seems down, I hope I copied the correct link)\r\nThis file can’t be shown because your workspace has passed the free plan’s 5 GB storage limit. See paid plans\r\n\r\nLorenz Meier  20 days ago\r\nSilvan Fuhrer Could you comment on that?\r\n\r\nRoman Bapst  19 days ago\r\nSilvan Fuhrer Let's check that one. Actually I'm thinking we should probably add a median filter to airspeed data somewhere. A spike with that magnitude can easily cause the complementary filter in TECS to fill up to an insane value within only one iteration.\r\n:+1:\r\n1\r\n\r\n\r\nSilvan Fuhrer  17 days ago\r\nWell the airspeed data isn't the issue here. Must be something numerical related to the accel data? local_position/az jumps at the same time as tecs_status/airspeed_filtered.\r\nI'd say we somehow limit the effect that accel data can have on airspeed_filtered, and trust more the airspeed data (whose validity we check with the airspeed validator)\r\nThis file can’t be shown because your workspace has passed the free plan’s 5 GB storage limit. See paid plans\r\n\r\nThomas Stauber  17 days ago\r\nAre you sure the accel is at fault? I don't see anything of similar magnitude there. And I'd be surprised if such a small change in acceleration completely messed up the airspeed_filtered topic. (tbh I'm already a bit surprised it's used at all - I had always assumed it was some sort of averaging or lowpass filter. I never actually checked though) I rather think the -1.7m/s² on local_position.ax are caused by cutting the throttle from 31% (cruise) to 0%.\r\n\r\nSilvan Fuhrer  17 days ago\r\nOkay well no, I can't be sure if it's not on the airspeed front.\r\nBTW, the 3m/s after the spike are due to 3 being the min airspeed defined in TECS. That means it dropped below that. https://github.com/PX4/PX4-Autopilot/blob/af50e25647aa5c2051bb09378bc9b2aaaaeb2a07/src/lib/tecs/TECS.cpp#L150\r\n\r\nThomas Stauber  17 days ago\r\nOk, already good to know where the 3 comes from. (Still not good that it's there haha). I guess it was below that because of how the filter works (https://github.com/PX4/PX4-Autopilot/blob/af50e25647aa5c2051bb09378bc9b2aaaaeb2a07/src/lib/tecs/TECS.cpp#L146). As _tas_state exploded, subsequently _tas_innov was heavily negative, and therefore also tas_state_input .\r\nApart from initialisation the only place there _tas_state gets updated is L147, so if we can track down all occurrences of the terms of that equation (respectively of the line above), we should be able to get an idea where it could have come from. I assume if the dt was the problem we'd have other problems too, so remaining are _tas_rate_state , _tas_rate_raw , _tas_innov and _tas_estimate_freq . _tas_estimate_freq  is pretty safe to exclude, leaving us with _tas_rate_state , _tas_rate_raw and _tas_innov .\r\n_tas_rate_state : can only be fucked up if _tas_innov (or _tas_estimate_freq or dt)is fucked up.\r\n_tas_rate_raw : that would indeed be the body_acceleration. Nothing logged, but maybe it was too short a spike ?\r\n_tas_innov : either _EAS or EAS2TAS is wrong. EAS2TAS is constrained between 0.9 and 2.0, so not possible. _EAS is the airspeed_validated.calibrated_airspeed_m_s  topic. Same as for _tas_rate_raw there is no logged spike.\r\nI hope I didn't miss any occurrences in my analysis. So it looks like it's either the body_acceleration or the airspeed measurement that went wild for a short spike (or something else broke completely during execution and caused some memory spill / overflow or other very unlikely erroneous behaviour, which I think we can almost certainly exclude as the rest was still working properly)\r\n\r\nThomas Stauber  17 days ago\r\nMaybe moving to another filter that wouldn't be so affected by any spike would really make sense as Roman Bapst mentioned above.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18039/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18038","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18038/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18038/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18038/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18038","id":963543989,"node_id":"MDExOlB1bGxSZXF1ZXN0NzA2MTI5OTI3","number":18038,"title":"flight_mode_manager: ManualAcceleration support weathervane yaw handler","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":10884840,"node_id":"MDU6TGFiZWwxMDg4NDg0MA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/enhancement%20(improvement)%20%F0%9F%92%A1","name":"enhancement (improvement) 💡","color":"84b6eb","default":false,"description":""},{"id":78699954,"node_id":"MDU6TGFiZWw3ODY5OTk1NA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Multirotor%20%F0%9F%9B%B8","name":"Multirotor 🛸","color":"0052cc","default":false,"description":""},{"id":249514594,"node_id":"MDU6TGFiZWwyNDk1MTQ1OTQ=","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Hybrid%20VTOL%20%F0%9F%9B%A9%EF%B8%8F%F0%9F%9A%81","name":"Hybrid VTOL 🛩️🚁","color":"bfe5bf","default":false,"description":"Multirotor + Fixedwing!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2021-08-09T00:05:35Z","updated_at":"2021-08-12T13:58:31Z","closed_at":"2021-08-12T13:58:30Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18038","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18038","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18038.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18038.patch","merged_at":"2021-08-12T13:58:30Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/17911\r\n\r\n\r\n@taileron @VTOLDavid can you give this a try?","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18038/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18035","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18035/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18035/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18035/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18035","id":963454009,"node_id":"MDExOlB1bGxSZXF1ZXN0NzA2MDYwMTY4","number":18035,"title":"Fix flaps being deployed in manual flight modes for fixedwing","user":{"login":"Jaeyoung-Lim","id":5248102,"node_id":"MDQ6VXNlcjUyNDgxMDI=","avatar_url":"https://avatars.githubusercontent.com/u/5248102?v=4","gravatar_id":"","url":"https://api.github.com/users/Jaeyoung-Lim","html_url":"https://github.com/Jaeyoung-Lim","followers_url":"https://api.github.com/users/Jaeyoung-Lim/followers","following_url":"https://api.github.com/users/Jaeyoung-Lim/following{/other_user}","gists_url":"https://api.github.com/users/Jaeyoung-Lim/gists{/gist_id}","starred_url":"https://api.github.com/users/Jaeyoung-Lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jaeyoung-Lim/subscriptions","organizations_url":"https://api.github.com/users/Jaeyoung-Lim/orgs","repos_url":"https://api.github.com/users/Jaeyoung-Lim/repos","events_url":"https://api.github.com/users/Jaeyoung-Lim/events{/privacy}","received_events_url":"https://api.github.com/users/Jaeyoung-Lim/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":78699916,"node_id":"MDU6TGFiZWw3ODY5OTkxNg==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/Fixed%20Wing%20%F0%9F%9B%A9%EF%B8%8F","name":"Fixed Wing 🛩️","color":"009800","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-08T15:15:41Z","updated_at":"2021-08-18T08:28:13Z","closed_at":"2021-08-13T13:46:23Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18035","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18035","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18035.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18035.patch","merged_at":"2021-08-13T13:46:23Z"},"body":"**Describe problem solved by this pull request**\r\nFor fixedwings, there were different flap scalings deployed between auto modes and manual flight modes, resulting in the flaps always being deployed halfway in manual flight modes.\r\n\r\n- In manual flight modes(stabilized, manual), zero flap input was mapped to flap command 0.5\r\n- In auto modes(mission, hold), zero flap command was mapped to flap command 0.0\r\n\r\n**Describe your solution**\r\nThis PR removes the special scaling in manual flight modes, so that the flap does not get deployed when switching fixed wing aircraft between manual and auto modes.\r\n\r\nThis should not influence flaps being deployed in auto modes.\r\n\r\n**Describe possible alternatives**\r\nBy removing the scaling, we are assuming that flap commands range from [-1, 1]. This makes more sense since the mixers actually allow you to give -1 flap commands. If we want to prevent this behavior, IMO we need to add an explicit mode for it rather than secretly scaling this inside the attitude controller.\r\n\r\n**Test data / coverage**\r\nTested by flying a plane model in Gazebo SITL\r\n```\r\nmake px4_sitl gazebo_plane\r\n```\r\nFlown using a virtual joystick on QGroundControl. Note that the flap channels getting deployed in manual flight modes\r\n\r\n- Before PR: https://logs.px4.io/plot_app?log=e5f35769-c0fa-4585-aab8-6478d50041aa\r\n![bokeh_plot (1)](https://user-images.githubusercontent.com/5248102/128637127-af367e33-2924-483b-a426-e04bb21c537f.png)\r\n\r\n\r\n- After PR: https://logs.px4.io/plot_app?log=df16c2cb-1d7e-4733-9269-ff9003b0d3b9\r\n![bokeh_plot](https://user-images.githubusercontent.com/5248102/128637045-9cc9ced2-6fdd-4a0e-87d4-39e28f9b3e30.png)\r\n\r\n**Additional context**\r\n- This was not apparent before there were flaps in the SITL plane model, but this is more visible after it has been added.\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18035/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18031","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18031/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18031/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18031/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18031","id":962534188,"node_id":"MDExOlB1bGxSZXF1ZXN0NzA1MzA5NDUw","number":18031,"title":"Commander: change attitude quaternion check to avoid numerical issues","user":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false},"assignees":[{"login":"bresch","id":14822839,"node_id":"MDQ6VXNlcjE0ODIyODM5","avatar_url":"https://avatars.githubusercontent.com/u/14822839?v=4","gravatar_id":"","url":"https://api.github.com/users/bresch","html_url":"https://github.com/bresch","followers_url":"https://api.github.com/users/bresch/followers","following_url":"https://api.github.com/users/bresch/following{/other_user}","gists_url":"https://api.github.com/users/bresch/gists{/gist_id}","starred_url":"https://api.github.com/users/bresch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bresch/subscriptions","organizations_url":"https://api.github.com/users/bresch/orgs","repos_url":"https://api.github.com/users/bresch/repos","events_url":"https://api.github.com/users/bresch/events{/privacy}","received_events_url":"https://api.github.com/users/bresch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-08-06T08:45:17Z","updated_at":"2021-08-08T15:41:24Z","closed_at":"2021-08-08T15:41:23Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18031","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18031","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18031.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18031.patch","merged_at":"2021-08-08T15:41:23Z"},"body":"**How this PR solves the problem**\r\nThe check for the attitude validity (part of the \"AHRS preflight check\") is quite sensitive to numerical issues as it makes a lot of computations that can lead to a loss of precision before doing the actual check.\r\nInvestigations showed that the `.normalize()` or `.unit()` functions of the quaternion class does not produce a perfect unit quaternion, but is always in the `FLT_EPSILON` tolerance. This PR then changes the attitude check to verify that the norm is in tolerance and that each element of the quaternion is strictly smaller or equal to 1 (in order to avoid NAN in trigonometric functions).\r\n\r\nThe fix is easily verified in SITL:\r\n\r\nBefore:\r\n![DeepinScreenshot_select-area_20210804161632](https://user-images.githubusercontent.com/14822839/128199116-6f4f77cd-3ba5-4895-8ac5-927737f2fbfa.png)\r\n\r\nWith this PR:\r\n![DeepinScreenshot_select-area_20210804161721](https://user-images.githubusercontent.com/14822839/128199127-ba708ec6-91a7-49c3-b452-ddb3b83878c5.png)","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18031/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18014","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18014/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18014/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18014/events","html_url":"https://github.com/PX4/PX4-Autopilot/issues/18014","id":957969793,"node_id":"MDU6SXNzdWU5NTc5Njk3OTM=","number":18014,"title":"Hardfault on FMUK66 with tarket nxp_fmuk66-v3_socketcan","user":{"login":"dk7xe","id":3907200,"node_id":"MDQ6VXNlcjM5MDcyMDA=","avatar_url":"https://avatars.githubusercontent.com/u/3907200?v=4","gravatar_id":"","url":"https://api.github.com/users/dk7xe","html_url":"https://github.com/dk7xe","followers_url":"https://api.github.com/users/dk7xe/followers","following_url":"https://api.github.com/users/dk7xe/following{/other_user}","gists_url":"https://api.github.com/users/dk7xe/gists{/gist_id}","starred_url":"https://api.github.com/users/dk7xe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dk7xe/subscriptions","organizations_url":"https://api.github.com/users/dk7xe/orgs","repos_url":"https://api.github.com/users/dk7xe/repos","events_url":"https://api.github.com/users/dk7xe/events{/privacy}","received_events_url":"https://api.github.com/users/dk7xe/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":1575732465,"node_id":"MDU6TGFiZWwxNTc1NzMyNDY1","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/processor:%20nxp-rddrone-fmuk66","name":"processor: nxp-rddrone-fmuk66","color":"006b75","default":false,"description":"NXP HoverGames FMU w/K66 processor"}],"state":"closed","locked":false,"assignee":{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false},"assignees":[{"login":"davids5","id":1945821,"node_id":"MDQ6VXNlcjE5NDU4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1945821?v=4","gravatar_id":"","url":"https://api.github.com/users/davids5","html_url":"https://github.com/davids5","followers_url":"https://api.github.com/users/davids5/followers","following_url":"https://api.github.com/users/davids5/following{/other_user}","gists_url":"https://api.github.com/users/davids5/gists{/gist_id}","starred_url":"https://api.github.com/users/davids5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davids5/subscriptions","organizations_url":"https://api.github.com/users/davids5/orgs","repos_url":"https://api.github.com/users/davids5/repos","events_url":"https://api.github.com/users/davids5/events{/privacy}","received_events_url":"https://api.github.com/users/davids5/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2021-08-02T09:56:22Z","updated_at":"2023-11-01T04:10:14Z","closed_at":"2023-11-01T04:10:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nI'm periodically getting a hardfault on FMUK66\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. compile current master for target nxp_fmuk66-v3_socketcan\r\n2. update FMUK66_v3 with fmuk66-v3_socketcan build\r\n3. Power cycle FMU\r\n4. See error\r\n\r\n**Expected behavior**\r\nNormal operation\r\n\r\n**Log Files and Screenshots**\r\n![grafik](https://user-images.githubusercontent.com/3907200/127842829-1f08ac1a-ed2e-464b-a76e-b274e54c68cf.png)\r\nfull hardfaul message:\r\n[FMUK66_hardfault.txt](https://github.com/PX4/PX4-Autopilot/files/6916049/FMUK66_hardfault.txt)\r\n\r\n```\r\nnsh> ver all\r\nHW arch: NXP_FMUK66_V3\r\nFW git-hash: 607be59fd5b47160326052dea8eea7edc7619d66\r\nFW version: 1.12.0 0 (17563648)\r\nFW git-branch: master\r\nOS: NuttX\r\nOS version: Release 10.0.0 (167772415)\r\nOS git-hash: eeaa803749e44e1b233cf35964f588f57777833c\r\nBuild datetime: Aug  2 2021 10:06:00\r\nBuild uri: localhost\r\nToolchain: GNU GCC, 9.3.1 20200408 (release)\r\nPX4GUID: 0003000dffffffffffff4e4555526005002c\r\nMCU: Kinetis K66, rev. 8\r\nnsh>\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18014/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18010","repository_url":"https://api.github.com/repos/PX4/PX4-Autopilot","labels_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18010/labels{/name}","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18010/comments","events_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18010/events","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18010","id":957638712,"node_id":"MDExOlB1bGxSZXF1ZXN0NzAxMDI4MTg1","number":18010,"title":"mavlink: receiver fix HIL_STATE_QUATERNION map projection init","user":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"labels":[{"id":10884838,"node_id":"MDU6TGFiZWwxMDg4NDgzOA==","url":"https://api.github.com/repos/PX4/PX4-Autopilot/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-02T00:52:45Z","updated_at":"2021-08-02T13:59:10Z","closed_at":"2021-08-02T13:59:09Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/pulls/18010","html_url":"https://github.com/PX4/PX4-Autopilot/pull/18010","diff_url":"https://github.com/PX4/PX4-Autopilot/pull/18010.diff","patch_url":"https://github.com/PX4/PX4-Autopilot/pull/18010.patch","merged_at":"2021-08-02T13:59:09Z"},"body":" - fixes https://github.com/PX4/PX4-Autopilot/issues/17977\r\n\r\n@Ankur1014 can you give this a try?","reactions":{"url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PX4/PX4-Autopilot/issues/18010/timeline","performed_via_github_app":null,"state_reason":null},